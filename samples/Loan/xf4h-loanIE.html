<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<!-- 
<script type='text/javascript' 
        src='http://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js'></script>
-->
<script src="../../src/ubiquity-loader.js" type="text/javascript">/**/</script>
<link href="style/xf4h-loan.css" rel="stylesheet"></link>
<style type="text/css">
  .code {background-color:#eeeeee;padding:10px;display:block;font-family:monospace;border:solid navy;}
   td {vertical-align:top;}
</style>
</head>

<body class="yui-skin-sam" >

<h2 class="company_name">Big Red Loan and Mortgage Co.</h2>
<h3 class="company_motto">The name to trust when you're ... in the red.</h3>

<form id="loanform" name="loanrecord" action="http://xformstest.org/cgi-bin/echo.sh" method="post">   
   <br />
   <fieldset id="borrowerFS" name="borrower">
     <label for="start_date">Agreement Date:</label>
     <input id="start_date" name="startdate" datatype="date" 
            value="08/08/2008" />
     <br />
           
     <label for="name">Name:</label>
     <input id="name" name="name" datatype="string" value="Joe Q. Public" 
            constraint="string-length(.) > 0" />
     <br />

     <label for="addr">Address:</label>
     <input id="addr" name="address" datatype="double" 
            value="123 Main St. Tinyville" constraint="string-length(.) > 0" />
     <br />
     
     <label for="principal">Principal:</label>
     <input id="principal" name="principal" datatype="double" value="10000" 
            constraint=". &gt;= 1000 and . &lt;= 100000" />
      <br />
   </fieldset>
 
   <fieldset id="termFS" name="term">
     <label for="duration">Duration of Loan in Months:</label>
     <input id="duration" name="duration" datatype="integer"
         value="12" constraint=". &gt; 0 and . &lt;= 84" />
      <br />
      
     <label for="interestrate">Yearly Interest Rate:</label>
     <input id="interestrate" name="interestrate" datatype="double"
         value="5" constraint=". &gt;= 5 and . &lt;= 60" />   
   </fieldset>
   <hr size="6" class="rule"></hr>

   <label for="rate-output">Yearly Interest Rate:</label>    
   <span id="rate-output" name="rates" 
      calculate="term/interestrate div 1200.0">
   </span>   
   <br/>
   
   <label for="mpayment-output">Monthly Payment:</label> 
   <span id="mpayment-output" name="monthly-payment"
      calculate="ceiling(borrower/principal + (125 * term/interestrate * (terms/duration * 0.1))) div term/duration">
   </span>
   <br/>

   <label for="total-output">Total Payout:</label>   
   <span id="total-output" name="totalpayout"
      calculate="ceiling(borrower/principal + (125 * term/interestrate * (term/duration * 0.1)))">
   </span>
   <br/>
   
   <hr size="6" class="rule"></hr>
</form>		
		

<script>
function showSLModel() {
    var form =  document.getElementById('loanform');
    var models = form.getElementsByTagName('model');
    if (models.length > 0) {
        var model = models[0];
        var instDoc = model.getInstanceDocument();
        var str = xmlText(instDoc.documentElement);
        alert(str);
    }
}
    </script>
<input type="button" value="show model" onclick="showSLModel()" />
</body>
</html>