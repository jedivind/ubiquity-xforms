//from: http://yui.yahooapis.com/2.5.2/build/yahoo/yahoo-min.js

if(typeof YAHOO=="undefined"||!YAHOO){var YAHOO={};}YAHOO.namespace=function(){var A=arguments,E=null,C,B,D;for(C=0;C<A.length;C=C+1){D=A[C].split(".");E=YAHOO;for(B=(D[0]=="YAHOO")?1:0;B<D.length;B=B+1){E[D[B]]=E[D[B]]||{};E=E[D[B]];}}return E;};YAHOO.log=function(D,A,C){var B=YAHOO.widget.Logger;if(B&&B.log){return B.log(D,A,C);}else{return false;}};YAHOO.register=function(A,E,D){var I=YAHOO.env.modules;if(!I[A]){I[A]={versions:[],builds:[]};}var B=I[A],H=D.version,G=D.build,F=YAHOO.env.listeners;B.name=A;B.version=H;B.build=G;B.versions.push(H);B.builds.push(G);B.mainClass=E;for(var C=0;C<F.length;C=C+1){F[C](B);}if(E){E.VERSION=H;E.BUILD=G;}else{YAHOO.log("mainClass is undefined for module "+A,"warn");}};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(A){return YAHOO.env.modules[A]||null;};YAHOO.env.ua=function(){var C={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0};var B=navigator.userAgent,A;if((/KHTML/).test(B)){C.webkit=1;}A=B.match(/AppleWebKit\/([^\s]*)/);if(A&&A[1]){C.webkit=parseFloat(A[1]);if(/ Mobile\//.test(B)){C.mobile="Apple";}else{A=B.match(/NokiaN[^\/]*/);if(A){C.mobile=A[0];}}A=B.match(/AdobeAIR\/([^\s]*)/);if(A){C.air=A[0];}}if(!C.webkit){A=B.match(/Opera[\s\/]([^\s]*)/);if(A&&A[1]){C.opera=parseFloat(A[1]);A=B.match(/Opera Mini[^;]*/);if(A){C.mobile=A[0];}}else{A=B.match(/MSIE\s([^;]*)/);if(A&&A[1]){C.ie=parseFloat(A[1]);}else{A=B.match(/Gecko\/([^\s]*)/);if(A){C.gecko=1;A=B.match(/rv:([^\s\)]*)/);if(A&&A[1]){C.gecko=parseFloat(A[1]);}}}}}return C;}();(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var B=YAHOO_config.listener,A=YAHOO.env.listeners,D=true,C;if(B){for(C=0;C<A.length;C=C+1){if(A[C]==B){D=false;break;}}if(D){A.push(B);}}}})();YAHOO.lang=YAHOO.lang||{};(function(){var A=YAHOO.lang,C=["toString","valueOf"],B={isArray:function(D){if(D){return A.isNumber(D.length)&&A.isFunction(D.splice);}return false;},isBoolean:function(D){return typeof D==="boolean";},isFunction:function(D){return typeof D==="function";},isNull:function(D){return D===null;},isNumber:function(D){return typeof D==="number"&&isFinite(D);},isObject:function(D){return(D&&(typeof D==="object"||A.isFunction(D)))||false;},isString:function(D){return typeof D==="string";},isUndefined:function(D){return typeof D==="undefined";},_IEEnumFix:(YAHOO.env.ua.ie)?function(F,E){for(var D=0;D<C.length;D=D+1){var H=C[D],G=E[H];if(A.isFunction(G)&&G!=Object.prototype[H]){F[H]=G;}}}:function(){},extend:function(H,I,G){if(!I||!H){throw new Error("extend failed, please check that "+"all dependencies are included.");}var E=function(){};E.prototype=I.prototype;H.prototype=new E();H.prototype.constructor=H;H.superclass=I.prototype;if(I.prototype.constructor==Object.prototype.constructor){I.prototype.constructor=I;}if(G){for(var D in G){if(A.hasOwnProperty(G,D)){H.prototype[D]=G[D];}}A._IEEnumFix(H.prototype,G);}},augmentObject:function(H,G){if(!G||!H){throw new Error("Absorb failed, verify dependencies.");}var D=arguments,F,I,E=D[2];if(E&&E!==true){for(F=2;F<D.length;F=F+1){H[D[F]]=G[D[F]];}}else{for(I in G){if(E||!(I in H)){H[I]=G[I];}}A._IEEnumFix(H,G);}},augmentProto:function(G,F){if(!F||!G){throw new Error("Augment failed, verify dependencies.");}var D=[G.prototype,F.prototype];for(var E=2;E<arguments.length;E=E+1){D.push(arguments[E]);}A.augmentObject.apply(this,D);},dump:function(D,I){var F,H,K=[],L="{...}",E="f(){...}",J=", ",G=" => ";if(!A.isObject(D)){return D+"";}else{if(D instanceof Date||("nodeType"in D&&"tagName"in D)){return D;}else{if(A.isFunction(D)){return E;}}}I=(A.isNumber(I))?I:3;if(A.isArray(D)){K.push("[");for(F=0,H=D.length;F<H;F=F+1){if(A.isObject(D[F])){K.push((I>0)?A.dump(D[F],I-1):L);}else{K.push(D[F]);}K.push(J);}if(K.length>1){K.pop();}K.push("]");}else{K.push("{");for(F in D){if(A.hasOwnProperty(D,F)){K.push(F+G);if(A.isObject(D[F])){K.push((I>0)?A.dump(D[F],I-1):L);}else{K.push(D[F]);}K.push(J);}}if(K.length>1){K.pop();}K.push("}");}return K.join("");},substitute:function(S,E,L){var I,H,G,O,P,R,N=[],F,J="dump",M=" ",D="{",Q="}";for(;;){I=S.lastIndexOf(D);if(I<0){break;}H=S.indexOf(Q,I);if(I+1>=H){break;}F=S.substring(I+1,H);O=F;R=null;G=O.indexOf(M);if(G>-1){R=O.substring(G+1);O=O.substring(0,G);}P=E[O];if(L){P=L(O,P,R);}if(A.isObject(P)){if(A.isArray(P)){P=A.dump(P,parseInt(R,10));}else{R=R||"";var K=R.indexOf(J);if(K>-1){R=R.substring(4);}if(P.toString===Object.prototype.toString||K>-1){P=A.dump(P,parseInt(R,10));}else{P=P.toString();}}}else{if(!A.isString(P)&&!A.isNumber(P)){P="~-"+N.length+"-~";N[N.length]=F;}}S=S.substring(0,I)+P+S.substring(H+1);}for(I=N.length-1;I>=0;I=I-1){S=S.replace(new RegExp("~-"+I+"-~"),"{"+N[I]+"}","g");}return S;},trim:function(D){try{return D.replace(/^\s+|\s+$/g,"");}catch(E){return D;}},merge:function(){var G={},E=arguments;for(var F=0,D=E.length;F<D;F=F+1){A.augmentObject(G,E[F],true);}return G;},later:function(K,E,L,G,H){K=K||0;E=E||{};var F=L,J=G,I,D;if(A.isString(L)){F=E[L];}if(!F){throw new TypeError("method undefined");}if(!A.isArray(J)){J=[G];}I=function(){F.apply(E,J);};D=(H)?setInterval(I,K):setTimeout(I,K);return{interval:H,cancel:function(){if(this.interval){clearInterval(D);}else{clearTimeout(D);}}};},isValue:function(D){return(A.isObject(D)||A.isString(D)||A.isNumber(D)||A.isBoolean(D));}};A.hasOwnProperty=(Object.prototype.hasOwnProperty)?function(D,E){return D&&D.hasOwnProperty(E);}:function(D,E){return!A.isUndefined(D[E])&&D.constructor.prototype[E]!==D[E];};B.augmentObject(A,B,true);YAHOO.util.Lang=A;A.augment=A.augmentProto;YAHOO.augment=A.augmentProto;YAHOO.extend=A.extend;})();YAHOO.register("yahoo",YAHOO,{version:"2.5.2",build:"1076"});
//from: http://yui.yahooapis.com/2.5.2/build/dom/dom-min.js

(function(){var B=YAHOO.util,K,I,J={},F={},M=window.document;YAHOO.env._id_counter=YAHOO.env._id_counter||0;var C=YAHOO.env.ua.opera,L=YAHOO.env.ua.webkit,A=YAHOO.env.ua.gecko,G=YAHOO.env.ua.ie;var E={HYPHEN:/(-[a-z])/i,ROOT_TAG:/^body|html$/i,OP_SCROLL:/^(?:inline|table-row)$/i};var N=function(P){if(!E.HYPHEN.test(P)){return P;}if(J[P]){return J[P];}var Q=P;while(E.HYPHEN.exec(Q)){Q=Q.replace(RegExp.$1,RegExp.$1.substr(1).toUpperCase());}J[P]=Q;return Q;};var O=function(Q){var P=F[Q];if(!P){P=new RegExp("(?:^|\\s+)"+Q+"(?:\\s+|$)");F[Q]=P;}return P;};if(M.defaultView&&M.defaultView.getComputedStyle){K=function(P,S){var R=null;if(S=="float"){S="cssFloat";}var Q=P.ownerDocument.defaultView.getComputedStyle(P,"");if(Q){R=Q[N(S)];}return P.style[S]||R;};}else{if(M.documentElement.currentStyle&&G){K=function(P,R){switch(N(R)){case"opacity":var T=100;try{T=P.filters["DXImageTransform.Microsoft.Alpha"].opacity;}catch(S){try{T=P.filters("alpha").opacity;}catch(S){}}return T/100;case"float":R="styleFloat";default:var Q=P.currentStyle?P.currentStyle[R]:null;return(P.style[R]||Q);}};}else{K=function(P,Q){return P.style[Q];};}}if(G){I=function(P,Q,R){switch(Q){case"opacity":if(YAHOO.lang.isString(P.style.filter)){P.style.filter="alpha(opacity="+R*100+")";if(!P.currentStyle||!P.currentStyle.hasLayout){P.style.zoom=1;}}break;case"float":Q="styleFloat";default:P.style[Q]=R;}};}else{I=function(P,Q,R){if(Q=="float"){Q="cssFloat";}P.style[Q]=R;};}var D=function(P,Q){return P&&P.nodeType==1&&(!Q||Q(P));};YAHOO.util.Dom={get:function(R){if(R&&(R.nodeType||R.item)){return R;}if(YAHOO.lang.isString(R)||!R){return M.getElementById(R);}if(R.length!==undefined){var S=[];for(var Q=0,P=R.length;Q<P;++Q){S[S.length]=B.Dom.get(R[Q]);}return S;}return R;},getStyle:function(P,R){R=N(R);var Q=function(S){return K(S,R);};return B.Dom.batch(P,Q,B.Dom,true);},setStyle:function(P,R,S){R=N(R);var Q=function(T){I(T,R,S);};B.Dom.batch(P,Q,B.Dom,true);},getXY:function(P){var Q=function(R){if((R.parentNode===null||R.offsetParent===null||this.getStyle(R,"display")=="none")&&R!=R.ownerDocument.body){return false;}return H(R);};return B.Dom.batch(P,Q,B.Dom,true);},getX:function(P){var Q=function(R){return B.Dom.getXY(R)[0];};return B.Dom.batch(P,Q,B.Dom,true);},getY:function(P){var Q=function(R){return B.Dom.getXY(R)[1];};return B.Dom.batch(P,Q,B.Dom,true);},setXY:function(P,S,R){var Q=function(V){var U=this.getStyle(V,"position");if(U=="static"){this.setStyle(V,"position","relative");U="relative";}var X=this.getXY(V);if(X===false){return false;}var W=[parseInt(this.getStyle(V,"left"),10),parseInt(this.getStyle(V,"top"),10)];if(isNaN(W[0])){W[0]=(U=="relative")?0:V.offsetLeft;}if(isNaN(W[1])){W[1]=(U=="relative")?0:V.offsetTop;}if(S[0]!==null){V.style.left=S[0]-X[0]+W[0]+"px";}if(S[1]!==null){V.style.top=S[1]-X[1]+W[1]+"px";}if(!R){var T=this.getXY(V);if((S[0]!==null&&T[0]!=S[0])||(S[1]!==null&&T[1]!=S[1])){this.setXY(V,S,true);}}};B.Dom.batch(P,Q,B.Dom,true);},setX:function(Q,P){B.Dom.setXY(Q,[P,null]);},setY:function(P,Q){B.Dom.setXY(P,[null,Q]);},getRegion:function(P){var Q=function(R){if((R.parentNode===null||R.offsetParent===null||this.getStyle(R,"display")=="none")&&R!=R.ownerDocument.body){return false;}var S=B.Region.getRegion(R);return S;};return B.Dom.batch(P,Q,B.Dom,true);},getClientWidth:function(){return B.Dom.getViewportWidth();},getClientHeight:function(){return B.Dom.getViewportHeight();},getElementsByClassName:function(T,X,U,V){X=X||"*";U=(U)?B.Dom.get(U):null||M;if(!U){return[];}var Q=[],P=U.getElementsByTagName(X),W=O(T);for(var R=0,S=P.length;R<S;++R){if(W.test(P[R].className)){Q[Q.length]=P[R];if(V){V.call(P[R],P[R]);}}}return Q;},hasClass:function(R,Q){var P=O(Q);var S=function(T){return P.test(T.className);};return B.Dom.batch(R,S,B.Dom,true);},addClass:function(Q,P){var R=function(S){if(this.hasClass(S,P)){return false;}S.className=YAHOO.lang.trim([S.className,P].join(" "));return true;};return B.Dom.batch(Q,R,B.Dom,true);},removeClass:function(R,Q){var P=O(Q);var S=function(T){if(!Q||!this.hasClass(T,Q)){return false;}var U=T.className;T.className=U.replace(P," ");if(this.hasClass(T,Q)){this.removeClass(T,Q);}T.className=YAHOO.lang.trim(T.className);return true;};return B.Dom.batch(R,S,B.Dom,true);},replaceClass:function(S,Q,P){if(!P||Q===P){return false;}var R=O(Q);var T=function(U){if(!this.hasClass(U,Q)){this.addClass(U,P);return true;}U.className=U.className.replace(R," "+P+" ");if(this.hasClass(U,Q)){this.replaceClass(U,Q,P);}U.className=YAHOO.lang.trim(U.className);return true;};return B.Dom.batch(S,T,B.Dom,true);},generateId:function(P,R){R=R||"yui-gen";var Q=function(S){if(S&&S.id){return S.id;}var T=R+YAHOO.env._id_counter++;if(S){S.id=T;}return T;};return B.Dom.batch(P,Q,B.Dom,true)||Q.apply(B.Dom,arguments);},isAncestor:function(P,Q){P=B.Dom.get(P);Q=B.Dom.get(Q);if(!P||!Q){return false;}if(P.contains&&Q.nodeType&&!L){return P.contains(Q);}else{if(P.compareDocumentPosition&&Q.nodeType){return!!(P.compareDocumentPosition(Q)&16);}else{if(Q.nodeType){return!!this.getAncestorBy(Q,function(R){return R==P;});}}}return false;},inDocument:function(P){return this.isAncestor(M.documentElement,P);},getElementsBy:function(W,Q,R,T){Q=Q||"*";R=(R)?B.Dom.get(R):null||M;if(!R){return[];}var S=[],V=R.getElementsByTagName(Q);for(var U=0,P=V.length;U<P;++U){if(W(V[U])){S[S.length]=V[U];if(T){T(V[U]);}}}return S;},batch:function(T,W,V,R){T=(T&&(T.tagName||T.item))?T:B.Dom.get(T);if(!T||!W){return false;}var S=(R)?V:window;if(T.tagName||T.length===undefined){return W.call(S,T,V);}var U=[];for(var Q=0,P=T.length;Q<P;++Q){U[U.length]=W.call(S,T[Q],V);}return U;},getDocumentHeight:function(){var Q=(M.compatMode!="CSS1Compat")?M.body.scrollHeight:M.documentElement.scrollHeight;var P=Math.max(Q,B.Dom.getViewportHeight());return P;},getDocumentWidth:function(){var Q=(M.compatMode!="CSS1Compat")?M.body.scrollWidth:M.documentElement.scrollWidth;var P=Math.max(Q,B.Dom.getViewportWidth());return P;},getViewportHeight:function(){var P=self.innerHeight;var Q=M.compatMode;if((Q||G)&&!C){P=(Q=="CSS1Compat")?M.documentElement.clientHeight:M.body.clientHeight;}return P;},getViewportWidth:function(){var P=self.innerWidth;var Q=M.compatMode;if(Q||G){P=(Q=="CSS1Compat")?M.documentElement.clientWidth:M.body.clientWidth;}return P;},getAncestorBy:function(P,Q){while(P=P.parentNode){if(D(P,Q)){return P;}}return null;},getAncestorByClassName:function(Q,P){Q=B.Dom.get(Q);if(!Q){return null;}var R=function(S){return B.Dom.hasClass(S,P);};return B.Dom.getAncestorBy(Q,R);},getAncestorByTagName:function(Q,P){Q=B.Dom.get(Q);if(!Q){return null;}var R=function(S){return S.tagName&&S.tagName.toUpperCase()==P.toUpperCase();};return B.Dom.getAncestorBy(Q,R);},getPreviousSiblingBy:function(P,Q){while(P){P=P.previousSibling;if(D(P,Q)){return P;}}return null;},getPreviousSibling:function(P){P=B.Dom.get(P);if(!P){return null;}return B.Dom.getPreviousSiblingBy(P);},getNextSiblingBy:function(P,Q){while(P){P=P.nextSibling;if(D(P,Q)){return P;}}return null;},getNextSibling:function(P){P=B.Dom.get(P);if(!P){return null;}return B.Dom.getNextSiblingBy(P);},getFirstChildBy:function(P,R){var Q=(D(P.firstChild,R))?P.firstChild:null;return Q||B.Dom.getNextSiblingBy(P.firstChild,R);},getFirstChild:function(P,Q){P=B.Dom.get(P);if(!P){return null;}return B.Dom.getFirstChildBy(P);},getLastChildBy:function(P,R){if(!P){return null;}var Q=(D(P.lastChild,R))?P.lastChild:null;return Q||B.Dom.getPreviousSiblingBy(P.lastChild,R);},getLastChild:function(P){P=B.Dom.get(P);return B.Dom.getLastChildBy(P);},getChildrenBy:function(Q,S){var R=B.Dom.getFirstChildBy(Q,S);var P=R?[R]:[];B.Dom.getNextSiblingBy(R,function(T){if(!S||S(T)){P[P.length]=T;}return false;});return P;},getChildren:function(P){P=B.Dom.get(P);if(!P){}return B.Dom.getChildrenBy(P);},getDocumentScrollLeft:function(P){P=P||M;return Math.max(P.documentElement.scrollLeft,P.body.scrollLeft);},getDocumentScrollTop:function(P){P=P||M;return Math.max(P.documentElement.scrollTop,P.body.scrollTop);},insertBefore:function(Q,P){Q=B.Dom.get(Q);P=B.Dom.get(P);if(!Q||!P||!P.parentNode){return null;}return P.parentNode.insertBefore(Q,P);},insertAfter:function(Q,P){Q=B.Dom.get(Q);P=B.Dom.get(P);if(!Q||!P||!P.parentNode){return null;}if(P.nextSibling){return P.parentNode.insertBefore(Q,P.nextSibling);}else{return P.parentNode.appendChild(Q);}},getClientRegion:function(){var R=B.Dom.getDocumentScrollTop(),Q=B.Dom.getDocumentScrollLeft(),S=B.Dom.getViewportWidth()+Q,P=B.Dom.getViewportHeight()+R;return new B.Region(R,S,P,Q);}};var H=function(){if(M.documentElement.getBoundingClientRect){return function(Q){var R=Q.getBoundingClientRect();var P=Q.ownerDocument;return[R.left+B.Dom.getDocumentScrollLeft(P),R.top+B.Dom.getDocumentScrollTop(P)];};}else{return function(R){var S=[R.offsetLeft,R.offsetTop];var Q=R.offsetParent;var P=(L&&B.Dom.getStyle(R,"position")=="absolute"&&R.offsetParent==R.ownerDocument.body);if(Q!=R){while(Q){S[0]+=Q.offsetLeft;S[1]+=Q.offsetTop;if(!P&&L&&B.Dom.getStyle(Q,"position")=="absolute"){P=true;}Q=Q.offsetParent;}}if(P){S[0]-=R.ownerDocument.body.offsetLeft;S[1]-=R.ownerDocument.body.offsetTop;}Q=R.parentNode;while(Q.tagName&&!E.ROOT_TAG.test(Q.tagName)){if(Q.scrollTop||Q.scrollLeft){if(!E.OP_SCROLL.test(B.Dom.getStyle(Q,"display"))){if(!C||B.Dom.getStyle(Q,"overflow")!=="visible"){S[0]-=Q.scrollLeft;S[1]-=Q.scrollTop;}}}Q=Q.parentNode;}return S;};}}();})();YAHOO.util.Region=function(C,D,A,B){this.top=C;this[1]=C;this.right=D;this.bottom=A;this.left=B;this[0]=B;};YAHOO.util.Region.prototype.contains=function(A){return(A.left>=this.left&&A.right<=this.right&&A.top>=this.top&&A.bottom<=this.bottom);};YAHOO.util.Region.prototype.getArea=function(){return((this.bottom-this.top)*(this.right-this.left));};YAHOO.util.Region.prototype.intersect=function(E){var C=Math.max(this.top,E.top);var D=Math.min(this.right,E.right);var A=Math.min(this.bottom,E.bottom);var B=Math.max(this.left,E.left);if(A>=C&&D>=B){return new YAHOO.util.Region(C,D,A,B);}else{return null;}};YAHOO.util.Region.prototype.union=function(E){var C=Math.min(this.top,E.top);var D=Math.max(this.right,E.right);var A=Math.max(this.bottom,E.bottom);var B=Math.min(this.left,E.left);return new YAHOO.util.Region(C,D,A,B);};YAHOO.util.Region.prototype.toString=function(){return("Region {"+"top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+", left: "+this.left+"}");};YAHOO.util.Region.getRegion=function(D){var F=YAHOO.util.Dom.getXY(D);var C=F[1];var E=F[0]+D.offsetWidth;var A=F[1]+D.offsetHeight;var B=F[0];return new YAHOO.util.Region(C,E,A,B);};YAHOO.util.Point=function(A,B){if(YAHOO.lang.isArray(A)){B=A[1];A=A[0];}this.x=this.right=this.left=this[0]=A;this.y=this.top=this.bottom=this[1]=B;};YAHOO.util.Point.prototype=new YAHOO.util.Region();YAHOO.register("dom",YAHOO.util.Dom,{version:"2.5.2",build:"1076"});
//from: http://yui.yahooapis.com/2.5.2/build/event/event-min.js

YAHOO.util.CustomEvent=function(D,B,C,A){this.type=D;this.scope=B||window;this.silent=C;this.signature=A||YAHOO.util.CustomEvent.LIST;this.subscribers=[];if(!this.silent){}var E="_YUICEOnSubscribe";if(D!==E){this.subscribeEvent=new YAHOO.util.CustomEvent(E,this,true);}this.lastError=null;};YAHOO.util.CustomEvent.LIST=0;YAHOO.util.CustomEvent.FLAT=1;YAHOO.util.CustomEvent.prototype={subscribe:function(B,C,A){if(!B){throw new Error("Invalid callback for subscriber to '"+this.type+"'");}if(this.subscribeEvent){this.subscribeEvent.fire(B,C,A);}this.subscribers.push(new YAHOO.util.Subscriber(B,C,A));},unsubscribe:function(D,F){if(!D){return this.unsubscribeAll();}var E=false;for(var B=0,A=this.subscribers.length;B<A;++B){var C=this.subscribers[B];if(C&&C.contains(D,F)){this._delete(B);E=true;}}return E;},fire:function(){this.lastError=null;var K=[],E=this.subscribers.length;if(!E&&this.silent){return true;}var I=[].slice.call(arguments,0),G=true,D,J=false;if(!this.silent){}var C=this.subscribers.slice(),A=YAHOO.util.Event.throwErrors;for(D=0;D<E;++D){var M=C[D];if(!M){J=true;}else{if(!this.silent){}var L=M.getScope(this.scope);if(this.signature==YAHOO.util.CustomEvent.FLAT){var B=null;if(I.length>0){B=I[0];}try{G=M.fn.call(L,B,M.obj);}catch(F){this.lastError=F;if(A){throw F;}}}else{try{G=M.fn.call(L,this.type,I,M.obj);}catch(H){this.lastError=H;if(A){throw H;}}}if(false===G){if(!this.silent){}break;}}}return(G!==false);},unsubscribeAll:function(){for(var A=this.subscribers.length-1;A>-1;A--){this._delete(A);}this.subscribers=[];return A;},_delete:function(A){var B=this.subscribers[A];if(B){delete B.fn;delete B.obj;}this.subscribers.splice(A,1);},toString:function(){return"CustomEvent: "+"'"+this.type+"', "+"scope: "+this.scope;}};YAHOO.util.Subscriber=function(B,C,A){this.fn=B;this.obj=YAHOO.lang.isUndefined(C)?null:C;this.override=A;};YAHOO.util.Subscriber.prototype.getScope=function(A){if(this.override){if(this.override===true){return this.obj;}else{return this.override;}}return A;};YAHOO.util.Subscriber.prototype.contains=function(A,B){if(B){return(this.fn==A&&this.obj==B);}else{return(this.fn==A);}};YAHOO.util.Subscriber.prototype.toString=function(){return"Subscriber { obj: "+this.obj+", override: "+(this.override||"no")+" }";};if(!YAHOO.util.Event){YAHOO.util.Event=function(){var H=false;var I=[];var J=[];var G=[];var E=[];var C=0;var F=[];var B=[];var A=0;var D={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9};return{POLL_RETRYS:2000,POLL_INTERVAL:20,EL:0,TYPE:1,FN:2,WFN:3,UNLOAD_OBJ:3,ADJ_SCOPE:4,OBJ:5,OVERRIDE:6,lastError:null,isSafari:YAHOO.env.ua.webkit,webkit:YAHOO.env.ua.webkit,isIE:YAHOO.env.ua.ie,_interval:null,_dri:null,DOMReady:false,throwErrors:false,startInterval:function(){if(!this._interval){var K=this;var L=function(){K._tryPreloadAttach();};this._interval=setInterval(L,this.POLL_INTERVAL);}},onAvailable:function(P,M,Q,O,N){var K=(YAHOO.lang.isString(P))?[P]:P;for(var L=0;L<K.length;L=L+1){F.push({id:K[L],fn:M,obj:Q,override:O,checkReady:N});}C=this.POLL_RETRYS;this.startInterval();},onContentReady:function(M,K,N,L){this.onAvailable(M,K,N,L,true);},onDOMReady:function(K,M,L){if(this.DOMReady){setTimeout(function(){var N=window;if(L){if(L===true){N=M;}else{N=L;}}K.call(N,"DOMReady",[],M);},0);}else{this.DOMReadyEvent.subscribe(K,M,L);}},addListener:function(M,K,V,Q,L){if(!V||!V.call){return false;}if(this._isValidCollection(M)){var W=true;for(var R=0,T=M.length;R<T;++R){W=this.on(M[R],K,V,Q,L)&&W;}return W;}else{if(YAHOO.lang.isString(M)){var P=this.getEl(M);if(P){M=P;}else{this.onAvailable(M,function(){YAHOO.util.Event.on(M,K,V,Q,L);});return true;}}}if(!M){return false;}if("unload"==K&&Q!==this){J[J.length]=[M,K,V,Q,L];return true;}var Y=M;if(L){if(L===true){Y=Q;}else{Y=L;}}var N=function(Z){return V.call(Y,YAHOO.util.Event.getEvent(Z,M),Q);};var X=[M,K,V,N,Y,Q,L];var S=I.length;I[S]=X;if(this.useLegacyEvent(M,K)){var O=this.getLegacyIndex(M,K);if(O==-1||M!=G[O][0]){O=G.length;B[M.id+K]=O;G[O]=[M,K,M["on"+K]];E[O]=[];M["on"+K]=function(Z){YAHOO.util.Event.fireLegacyEvent(YAHOO.util.Event.getEvent(Z),O);};}E[O].push(X);}else{try{this._simpleAdd(M,K,N,false);}catch(U){this.lastError=U;this.removeListener(M,K,V);return false;}}return true;},fireLegacyEvent:function(O,M){var Q=true,K,S,R,T,P;S=E[M].slice();for(var L=0,N=S.length;L<N;++L){R=S[L];if(R&&R[this.WFN]){T=R[this.ADJ_SCOPE];P=R[this.WFN].call(T,O);Q=(Q&&P);}}K=G[M];if(K&&K[2]){K[2](O);}return Q;},getLegacyIndex:function(L,M){var K=this.generateId(L)+M;if(typeof B[K]=="undefined"){return-1;}else{return B[K];}},useLegacyEvent:function(L,M){if(this.webkit&&("click"==M||"dblclick"==M)){var K=parseInt(this.webkit,10);if(!isNaN(K)&&K<418){return true;}}return false;},removeListener:function(L,K,T){var O,R,V;if(typeof L=="string"){L=this.getEl(L);}else{if(this._isValidCollection(L)){var U=true;for(O=L.length-1;O>-1;O--){U=(this.removeListener(L[O],K,T)&&U);}return U;}}if(!T||!T.call){return this.purgeElement(L,false,K);}if("unload"==K){for(O=J.length-1;O>-1;O--){V=J[O];if(V&&V[0]==L&&V[1]==K&&V[2]==T){J.splice(O,1);return true;}}return false;}var P=null;var Q=arguments[3];if("undefined"===typeof Q){Q=this._getCacheIndex(L,K,T);}if(Q>=0){P=I[Q];}if(!L||!P){return false;}if(this.useLegacyEvent(L,K)){var N=this.getLegacyIndex(L,K);var M=E[N];if(M){for(O=0,R=M.length;O<R;++O){V=M[O];if(V&&V[this.EL]==L&&V[this.TYPE]==K&&V[this.FN]==T){M.splice(O,1);break;}}}}else{try{this._simpleRemove(L,K,P[this.WFN],false);}catch(S){this.lastError=S;return false;}}delete I[Q][this.WFN];delete I[Q][this.FN];I.splice(Q,1);return true;},getTarget:function(M,L){var K=M.target||M.srcElement;return this.resolveTextNode(K);},resolveTextNode:function(L){try{if(L&&3==L.nodeType){return L.parentNode;}}catch(K){}return L;},getPageX:function(L){var K=L.pageX;if(!K&&0!==K){K=L.clientX||0;if(this.isIE){K+=this._getScrollLeft();}}return K;},getPageY:function(K){var L=K.pageY;if(!L&&0!==L){L=K.clientY||0;if(this.isIE){L+=this._getScrollTop();}}return L;},getXY:function(K){return[this.getPageX(K),this.getPageY(K)];},getRelatedTarget:function(L){var K=L.relatedTarget;if(!K){if(L.type=="mouseout"){K=L.toElement;}else{if(L.type=="mouseover"){K=L.fromElement;}}}return this.resolveTextNode(K);},getTime:function(M){if(!M.time){var L=new Date().getTime();try{M.time=L;}catch(K){this.lastError=K;return L;}}return M.time;},stopEvent:function(K){this.stopPropagation(K);this.preventDefault(K);},stopPropagation:function(K){if(K.stopPropagation){K.stopPropagation();}else{K.cancelBubble=true;}},preventDefault:function(K){if(K.preventDefault){K.preventDefault();}else{K.returnValue=false;}},getEvent:function(M,K){var L=M||window.event;if(!L){var N=this.getEvent.caller;while(N){L=N.arguments[0];if(L&&Event==L.constructor){break;}N=N.caller;}}return L;},getCharCode:function(L){var K=L.keyCode||L.charCode||0;if(YAHOO.env.ua.webkit&&(K in D)){K=D[K];}return K;},_getCacheIndex:function(O,P,N){for(var M=0,L=I.length;M<L;M=M+1){var K=I[M];if(K&&K[this.FN]==N&&K[this.EL]==O&&K[this.TYPE]==P){return M;}}return-1;},generateId:function(K){var L=K.id;if(!L){L="yuievtautoid-"+A;++A;K.id=L;}return L;},_isValidCollection:function(L){try{return(L&&typeof L!=="string"&&L.length&&!L.tagName&&!L.alert&&typeof L[0]!=="undefined");}catch(K){return false;}},elCache:{},getEl:function(K){return(typeof K==="string")?document.getElementById(K):K;},clearCache:function(){},DOMReadyEvent:new YAHOO.util.CustomEvent("DOMReady",this),_load:function(L){if(!H){H=true;var K=YAHOO.util.Event;K._ready();K._tryPreloadAttach();}},_ready:function(L){var K=YAHOO.util.Event;if(!K.DOMReady){K.DOMReady=true;K.DOMReadyEvent.fire();K._simpleRemove(document,"DOMContentLoaded",K._ready);}},_tryPreloadAttach:function(){if(F.length===0){C=0;clearInterval(this._interval);this._interval=null;return;}if(this.locked){return;}if(this.isIE){if(!this.DOMReady){this.startInterval();return;}}this.locked=true;var Q=!H;if(!Q){Q=(C>0&&F.length>0);}var P=[];var R=function(T,U){var S=T;if(U.override){if(U.override===true){S=U.obj;}else{S=U.override;}}U.fn.call(S,U.obj);};var L,K,O,N,M=[];for(L=0,K=F.length;L<K;L=L+1){O=F[L];if(O){N=this.getEl(O.id);if(N){if(O.checkReady){if(H||N.nextSibling||!Q){M.push(O);F[L]=null;}}else{R(N,O);F[L]=null;}}else{P.push(O);}}}for(L=0,K=M.length;L<K;L=L+1){O=M[L];R(this.getEl(O.id),O);}C--;if(Q){for(L=F.length-1;L>-1;L--){O=F[L];if(!O||!O.id){F.splice(L,1);}}this.startInterval();}else{clearInterval(this._interval);this._interval=null;}this.locked=false;},purgeElement:function(O,P,R){var M=(YAHOO.lang.isString(O))?this.getEl(O):O;var Q=this.getListeners(M,R),N,K;if(Q){for(N=Q.length-1;N>-1;N--){var L=Q[N];this.removeListener(M,L.type,L.fn);}}if(P&&M&&M.childNodes){for(N=0,K=M.childNodes.length;N<K;++N){this.purgeElement(M.childNodes[N],P,R);}}},getListeners:function(M,K){var P=[],L;if(!K){L=[I,J];}else{if(K==="unload"){L=[J];}else{L=[I];}}var R=(YAHOO.lang.isString(M))?this.getEl(M):M;for(var O=0;O<L.length;O=O+1){var T=L[O];if(T){for(var Q=0,S=T.length;Q<S;++Q){var N=T[Q];if(N&&N[this.EL]===R&&(!K||K===N[this.TYPE])){P.push({type:N[this.TYPE],fn:N[this.FN],obj:N[this.OBJ],adjust:N[this.OVERRIDE],scope:N[this.ADJ_SCOPE],index:Q});}}}}return(P.length)?P:null;},_unload:function(Q){var K=YAHOO.util.Event,N,M,L,P,O,R=J.slice();for(N=0,P=J.length;N<P;++N){L=R[N];if(L){var S=window;if(L[K.ADJ_SCOPE]){if(L[K.ADJ_SCOPE]===true){S=L[K.UNLOAD_OBJ];}else{S=L[K.ADJ_SCOPE];}}L[K.FN].call(S,K.getEvent(Q,L[K.EL]),L[K.UNLOAD_OBJ]);R[N]=null;L=null;S=null;}}J=null;if(I){for(M=I.length-1;M>-1;M--){L=I[M];if(L){K.removeListener(L[K.EL],L[K.TYPE],L[K.FN],M);}}L=null;}G=null;K._simpleRemove(window,"unload",K._unload);},_getScrollLeft:function(){return this._getScroll()[1];},_getScrollTop:function(){return this._getScroll()[0];},_getScroll:function(){var K=document.documentElement,L=document.body;if(K&&(K.scrollTop||K.scrollLeft)){return[K.scrollTop,K.scrollLeft];}else{if(L){return[L.scrollTop,L.scrollLeft];}else{return[0,0];}}},regCE:function(){},_simpleAdd:function(){if(window.addEventListener){return function(M,N,L,K){M.addEventListener(N,L,(K));};}else{if(window.attachEvent){return function(M,N,L,K){M.attachEvent("on"+N,L);};}else{return function(){};}}}(),_simpleRemove:function(){if(window.removeEventListener){return function(M,N,L,K){M.removeEventListener(N,L,(K));};}else{if(window.detachEvent){return function(L,M,K){L.detachEvent("on"+M,K);};}else{return function(){};}}}()};}();(function(){var EU=YAHOO.util.Event;EU.on=EU.addListener;if(EU.isIE){YAHOO.util.Event.onDOMReady(YAHOO.util.Event._tryPreloadAttach,YAHOO.util.Event,true);var n=document.createElement("p");EU._dri=setInterval(function(){try{n.doScroll("left");clearInterval(EU._dri);EU._dri=null;EU._ready();n=null;}catch(ex){}},EU.POLL_INTERVAL);}else{if(EU.webkit&&EU.webkit<525){EU._dri=setInterval(function(){var rs=document.readyState;if("loaded"==rs||"complete"==rs){clearInterval(EU._dri);EU._dri=null;EU._ready();}},EU.POLL_INTERVAL);}else{EU._simpleAdd(document,"DOMContentLoaded",EU._ready);}}EU._simpleAdd(window,"load",EU._load);EU._simpleAdd(window,"unload",EU._unload);EU._tryPreloadAttach();})();}YAHOO.util.EventProvider=function(){};YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(A,C,F,E){this.__yui_events=this.__yui_events||{};var D=this.__yui_events[A];if(D){D.subscribe(C,F,E);}else{this.__yui_subscribers=this.__yui_subscribers||{};var B=this.__yui_subscribers;if(!B[A]){B[A]=[];}B[A].push({fn:C,obj:F,override:E});}},unsubscribe:function(C,E,G){this.__yui_events=this.__yui_events||{};var A=this.__yui_events;if(C){var F=A[C];if(F){return F.unsubscribe(E,G);}}else{var B=true;for(var D in A){if(YAHOO.lang.hasOwnProperty(A,D)){B=B&&A[D].unsubscribe(E,G);}}return B;}return false;},unsubscribeAll:function(A){return this.unsubscribe(A);},createEvent:function(G,D){this.__yui_events=this.__yui_events||{};var A=D||{};var I=this.__yui_events;if(I[G]){}else{var H=A.scope||this;var E=(A.silent);var B=new YAHOO.util.CustomEvent(G,H,E,YAHOO.util.CustomEvent.FLAT);I[G]=B;if(A.onSubscribeCallback){B.subscribeEvent.subscribe(A.onSubscribeCallback);}this.__yui_subscribers=this.__yui_subscribers||{};var F=this.__yui_subscribers[G];if(F){for(var C=0;C<F.length;++C){B.subscribe(F[C].fn,F[C].obj,F[C].override);}}}return I[G];},fireEvent:function(E,D,A,C){this.__yui_events=this.__yui_events||{};var G=this.__yui_events[E];if(!G){return null;}var B=[];for(var F=1;F<arguments.length;++F){B.push(arguments[F]);}return G.fire.apply(G,B);},hasEvent:function(A){if(this.__yui_events){if(this.__yui_events[A]){return true;}}return false;}};YAHOO.util.KeyListener=function(A,F,B,C){if(!A){}else{if(!F){}else{if(!B){}}}if(!C){C=YAHOO.util.KeyListener.KEYDOWN;}var D=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(typeof A=="string"){A=document.getElementById(A);}if(typeof B=="function"){D.subscribe(B);}else{D.subscribe(B.fn,B.scope,B.correctScope);}function E(J,I){if(!F.shift){F.shift=false;}if(!F.alt){F.alt=false;}if(!F.ctrl){F.ctrl=false;}if(J.shiftKey==F.shift&&J.altKey==F.alt&&J.ctrlKey==F.ctrl){var G;if(F.keys instanceof Array){for(var H=0;H<F.keys.length;H++){G=F.keys[H];if(G==J.charCode){D.fire(J.charCode,J);break;}else{if(G==J.keyCode){D.fire(J.keyCode,J);break;}}}}else{G=F.keys;if(G==J.charCode){D.fire(J.charCode,J);}else{if(G==J.keyCode){D.fire(J.keyCode,J);}}}}}this.enable=function(){if(!this.enabled){YAHOO.util.Event.addListener(A,C,E);this.enabledEvent.fire(F);}this.enabled=true;};this.disable=function(){if(this.enabled){YAHOO.util.Event.removeListener(A,C,E);this.disabledEvent.fire(F);}this.enabled=false;};this.toString=function(){return"KeyListener ["+F.keys+"] "+A.tagName+(A.id?"["+A.id+"]":"");};};YAHOO.util.KeyListener.KEYDOWN="keydown";YAHOO.util.KeyListener.KEYUP="keyup";YAHOO.util.KeyListener.KEY={ALT:18,BACK_SPACE:8,CAPS_LOCK:20,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,META:224,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PRINTSCREEN:44,RIGHT:39,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,UP:38};YAHOO.register("event",YAHOO.util.Event,{version:"2.5.2",build:"1076"});
//from: http://yui.yahooapis.com/2.5.2/build/connection/connection-min.js

YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:true,_default_xhr_header:"XMLHttpRequest",_has_default_headers:true,_default_headers:{},_isFormSubmit:false,_isFileUpload:false,_formNode:null,_sFormData:null,_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,_submitElementValue:null,_hasSubmitListener:(function(){if(YAHOO.util.Event){YAHOO.util.Event.addListener(document,"click",function(B){var A=YAHOO.util.Event.getTarget(B);if(A.nodeName.toLowerCase()=="input"&&(A.type&&A.type.toLowerCase()=="submit")){YAHOO.util.Connect._submitElementValue=encodeURIComponent(A.name)+"="+encodeURIComponent(A.value);}});return true;}return false;})(),startEvent:new YAHOO.util.CustomEvent("start"),completeEvent:new YAHOO.util.CustomEvent("complete"),successEvent:new YAHOO.util.CustomEvent("success"),failureEvent:new YAHOO.util.CustomEvent("failure"),uploadEvent:new YAHOO.util.CustomEvent("upload"),abortEvent:new YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(A){this._msxml_progid.unshift(A);YAHOO.log("ActiveX Program Id  "+A+" added to _msxml_progid.","info","Connection");},setDefaultPostHeader:function(A){if(typeof A=="string"){this._default_post_header=A;YAHOO.log("Default POST header set to  "+A,"info","Connection");}else{if(typeof A=="boolean"){this._use_default_post_header=A;}}},setDefaultXhrHeader:function(A){if(typeof A=="string"){this._default_xhr_header=A;YAHOO.log("Default XHR header set to  "+A,"info","Connection");}else{this._use_default_xhr_header=A;}},setPollingInterval:function(A){if(typeof A=="number"&&isFinite(A)){this._polling_interval=A;YAHOO.log("Default polling interval set to "+A+"ms","info","Connection");}},createXhrObject:function(E){var D,A;try{A=new XMLHttpRequest();D={conn:A,tId:E};YAHOO.log("XHR object created for transaction "+E,"info","Connection");}catch(C){for(var B=0;B<this._msxml_progid.length;++B){try{A=new ActiveXObject(this._msxml_progid[B]);D={conn:A,tId:E};YAHOO.log("ActiveX XHR object created for transaction "+E,"info","Connection");break;}catch(C){}}}finally{return D;}},getConnectionObject:function(A){var C;var D=this._transaction_id;try{if(!A){C=this.createXhrObject(D);}else{C={};C.tId=D;C.isUpload=true;}if(C){this._transaction_id++;}}catch(B){}finally{return C;}},asyncRequest:function(F,C,E,A){var D=(this._isFileUpload)?this.getConnectionObject(true):this.getConnectionObject();var B=(E&&E.argument)?E.argument:null;if(!D){YAHOO.log("Unable to create connection object.","error","Connection");return null;}else{if(E&&E.customevents){this.initCustomEvents(D,E);}if(this._isFormSubmit){if(this._isFileUpload){this.uploadFile(D,E,C,A);return D;}if(F.toUpperCase()=="GET"){if(this._sFormData.length!==0){C+=((C.indexOf("?")==-1)?"?":"&")+this._sFormData;}}else{if(F.toUpperCase()=="POST"){A=A?this._sFormData+"&"+A:this._sFormData;}}}if(F.toUpperCase()=="GET"&&(E&&E.cache===false)){C+=((C.indexOf("?")==-1)?"?":"&")+"rnd="+new Date().valueOf().toString();}D.conn.open(F,C,true);if(this._use_default_xhr_header){if(!this._default_headers["X-Requested-With"]){this.initHeader("X-Requested-With",this._default_xhr_header,true);YAHOO.log("Initialize transaction header X-Request-Header to XMLHttpRequest.","info","Connection");}}if((F.toUpperCase()=="POST"&&this._use_default_post_header)&&this._isFormSubmit===false){this.initHeader("Content-Type",this._default_post_header);YAHOO.log("Initialize header Content-Type to application/x-www-form-urlencoded; UTF-8 for POST transaction.","info","Connection");}if(this._has_default_headers||this._has_http_headers){this.setHeader(D);}this.handleReadyState(D,E);D.conn.send(A||"");YAHOO.log("Transaction "+D.tId+" sent.","info","Connection");if(this._isFormSubmit===true){this.resetFormState();}this.startEvent.fire(D,B);if(D.startEvent){D.startEvent.fire(D,B);}return D;}},initCustomEvents:function(A,C){for(var B in C.customevents){if(this._customEvents[B][0]){A[this._customEvents[B][0]]=new YAHOO.util.CustomEvent(this._customEvents[B][1],(C.scope)?C.scope:null);YAHOO.log("Transaction-specific Custom Event "+A[this._customEvents[B][1]]+" created.","info","Connection");A[this._customEvents[B][0]].subscribe(C.customevents[B]);YAHOO.log("Transaction-specific Custom Event "+A[this._customEvents[B][1]]+" subscribed.","info","Connection");}}},handleReadyState:function(C,D){var B=this;var A=(D&&D.argument)?D.argument:null;if(D&&D.timeout){this._timeOut[C.tId]=window.setTimeout(function(){B.abort(C,D,true);},D.timeout);}this._poll[C.tId]=window.setInterval(function(){if(C.conn&&C.conn.readyState===4){window.clearInterval(B._poll[C.tId]);delete B._poll[C.tId];if(D&&D.timeout){window.clearTimeout(B._timeOut[C.tId]);delete B._timeOut[C.tId];}B.completeEvent.fire(C,A);if(C.completeEvent){C.completeEvent.fire(C,A);}B.handleTransactionResponse(C,D);}},this._polling_interval);},handleTransactionResponse:function(F,G,A){var D,C;var B=(G&&G.argument)?G.argument:null;try{if(F.conn.status!==undefined&&F.conn.status!==0){D=F.conn.status;}else{D=13030;}}catch(E){D=13030;}if(D>=200&&D<300||D===1223){C=this.createResponseObject(F,B);if(G&&G.success){if(!G.scope){G.success(C);YAHOO.log("Success callback. HTTP code is "+D,"info","Connection");}else{G.success.apply(G.scope,[C]);YAHOO.log("Success callback with scope. HTTP code is "+D,"info","Connection");}}this.successEvent.fire(C);if(F.successEvent){F.successEvent.fire(C);}}else{switch(D){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:C=this.createExceptionObject(F.tId,B,(A?A:false));if(G&&G.failure){if(!G.scope){G.failure(C);YAHOO.log("Failure callback. Exception detected. Status code is "+D,"warn","Connection");}else{G.failure.apply(G.scope,[C]);YAHOO.log("Failure callback with scope. Exception detected. Status code is "+D,"warn","Connection");}}break;default:C=this.createResponseObject(F,B);if(G&&G.failure){if(!G.scope){G.failure(C);YAHOO.log("Failure callback. HTTP status code is "+D,"warn","Connection");}else{G.failure.apply(G.scope,[C]);YAHOO.log("Failure callback with scope. HTTP status code is "+D,"warn","Connection");}}}this.failureEvent.fire(C);if(F.failureEvent){F.failureEvent.fire(C);}}this.releaseObject(F);C=null;},createResponseObject:function(A,G){var D={};var I={};try{var C=A.conn.getAllResponseHeaders();var F=C.split("\n");for(var E=0;E<F.length;E++){var B=F[E].indexOf(":");if(B!=-1){I[F[E].substring(0,B)]=F[E].substring(B+2);}}}catch(H){}D.tId=A.tId;D.status=(A.conn.status==1223)?204:A.conn.status;D.statusText=(A.conn.status==1223)?"No Content":A.conn.statusText;D.getResponseHeader=I;D.getAllResponseHeaders=C;D.responseText=A.conn.responseText;D.responseXML=A.conn.responseXML;if(G){D.argument=G;}return D;},createExceptionObject:function(H,D,A){var F=0;var G="communication failure";var C=-1;var B="transaction aborted";var E={};E.tId=H;if(A){E.status=C;E.statusText=B;}else{E.status=F;E.statusText=G;}if(D){E.argument=D;}return E;},initHeader:function(A,D,C){var B=(C)?this._default_headers:this._http_headers;B[A]=D;if(C){this._has_default_headers=true;}else{this._has_http_headers=true;}},setHeader:function(A){if(this._has_default_headers){for(var B in this._default_headers){if(YAHOO.lang.hasOwnProperty(this._default_headers,B)){A.conn.setRequestHeader(B,this._default_headers[B]);YAHOO.log("Default HTTP header "+B+" set with value of "+this._default_headers[B],"info","Connection");}}}if(this._has_http_headers){for(var B in this._http_headers){if(YAHOO.lang.hasOwnProperty(this._http_headers,B)){A.conn.setRequestHeader(B,this._http_headers[B]);YAHOO.log("HTTP header "+B+" set with value of "+this._http_headers[B],"info","Connection");}}delete this._http_headers;this._http_headers={};this._has_http_headers=false;}},resetDefaultHeaders:function(){delete this._default_headers;this._default_headers={};this._has_default_headers=false;},setForm:function(K,E,B){this.resetFormState();var J;if(typeof K=="string"){J=(document.getElementById(K)||document.forms[K]);}else{if(typeof K=="object"){J=K;}else{YAHOO.log("Unable to create form object "+K,"warn","Connection");return;}}if(E){var F=this.createFrame((window.location.href.toLowerCase().indexOf("https")===0||B)?true:false);this._isFormSubmit=true;this._isFileUpload=true;this._formNode=J;return;}var A,I,G,L;var H=false;for(var D=0;D<J.elements.length;D++){A=J.elements[D];L=A.disabled;I=A.name;G=A.value;if(!L&&I){switch(A.type){case"select-one":case"select-multiple":for(var C=0;C<A.options.length;C++){if(A.options[C].selected){if(window.ActiveXObject){this._sFormData+=encodeURIComponent(I)+"="+encodeURIComponent(A.options[C].attributes["value"].specified?A.options[C].value:A.options[C].text)+"&";}else{this._sFormData+=encodeURIComponent(I)+"="+encodeURIComponent(A.options[C].hasAttribute("value")?A.options[C].value:A.options[C].text)+"&";}}}break;case"radio":case"checkbox":if(A.checked){this._sFormData+=encodeURIComponent(I)+"="+encodeURIComponent(G)+"&";}break;case"file":case undefined:case"reset":case"button":break;case"submit":if(H===false){if(this._hasSubmitListener&&this._submitElementValue){this._sFormData+=this._submitElementValue+"&";}else{this._sFormData+=encodeURIComponent(I)+"="+encodeURIComponent(G)+"&";}H=true;}break;default:this._sFormData+=encodeURIComponent(I)+"="+encodeURIComponent(G)+"&";}}}this._isFormSubmit=true;this._sFormData=this._sFormData.substr(0,this._sFormData.length-1);YAHOO.log("Form initialized for transaction. HTML form POST message is: "+this._sFormData,"info","Connection");this.initHeader("Content-Type",this._default_form_header);YAHOO.log("Initialize header Content-Type to application/x-www-form-urlencoded for setForm() transaction.","info","Connection");return this._sFormData;},resetFormState:function(){this._isFormSubmit=false;this._isFileUpload=false;this._formNode=null;this._sFormData="";},createFrame:function(A){var B="yuiIO"+this._transaction_id;var C;if(window.ActiveXObject){C=document.createElement('<iframe id="'+B+'" name="'+B+'" />');if(typeof A=="boolean"){C.src="javascript:false";}}else{C=document.createElement("iframe");C.id=B;C.name=B;}C.style.position="absolute";C.style.top="-1000px";C.style.left="-1000px";document.body.appendChild(C);YAHOO.log("File upload iframe created. Id is:"+B,"info","Connection");},appendPostData:function(A){var D=[];var B=A.split("&");for(var C=0;C<B.length;C++){var E=B[C].indexOf("=");if(E!=-1){D[C]=document.createElement("input");D[C].type="hidden";D[C].name=B[C].substring(0,E);D[C].value=B[C].substring(E+1);this._formNode.appendChild(D[C]);}}return D;},uploadFile:function(D,M,E,C){var N=this;var H="yuiIO"+D.tId;var I="multipart/form-data";var K=document.getElementById(H);var J=(M&&M.argument)?M.argument:null;var B={action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")};this._formNode.setAttribute("action",E);this._formNode.setAttribute("method","POST");this._formNode.setAttribute("target",H);if(YAHOO.env.ua.ie){this._formNode.setAttribute("encoding",I);}else{this._formNode.setAttribute("enctype",I);}if(C){var L=this.appendPostData(C);}this._formNode.submit();this.startEvent.fire(D,J);if(D.startEvent){D.startEvent.fire(D,J);}if(M&&M.timeout){this._timeOut[D.tId]=window.setTimeout(function(){N.abort(D,M,true);},M.timeout);}if(L&&L.length>0){for(var G=0;G<L.length;G++){this._formNode.removeChild(L[G]);}}for(var A in B){if(YAHOO.lang.hasOwnProperty(B,A)){if(B[A]){this._formNode.setAttribute(A,B[A]);}else{this._formNode.removeAttribute(A);}}}this.resetFormState();var F=function(){if(M&&M.timeout){window.clearTimeout(N._timeOut[D.tId]);delete N._timeOut[D.tId];}N.completeEvent.fire(D,J);if(D.completeEvent){D.completeEvent.fire(D,J);}var P={};P.tId=D.tId;P.argument=M.argument;try{P.responseText=K.contentWindow.document.body?K.contentWindow.document.body.innerHTML:K.contentWindow.document.documentElement.textContent;P.responseXML=K.contentWindow.document.XMLDocument?K.contentWindow.document.XMLDocument:K.contentWindow.document;}catch(O){}if(M&&M.upload){if(!M.scope){M.upload(P);YAHOO.log("Upload callback.","info","Connection");}else{M.upload.apply(M.scope,[P]);YAHOO.log("Upload callback with scope.","info","Connection");}}N.uploadEvent.fire(P);if(D.uploadEvent){D.uploadEvent.fire(P);}YAHOO.util.Event.removeListener(K,"load",F);setTimeout(function(){document.body.removeChild(K);N.releaseObject(D);YAHOO.log("File upload iframe destroyed. Id is:"+H,"info","Connection");},100);};YAHOO.util.Event.addListener(K,"load",F);},abort:function(E,G,A){var D;var B=(G&&G.argument)?G.argument:null;if(E&&E.conn){if(this.isCallInProgress(E)){E.conn.abort();window.clearInterval(this._poll[E.tId]);delete this._poll[E.tId];if(A){window.clearTimeout(this._timeOut[E.tId]);delete this._timeOut[E.tId];}D=true;}}else{if(E&&E.isUpload===true){var C="yuiIO"+E.tId;var F=document.getElementById(C);if(F){YAHOO.util.Event.removeListener(F,"load");document.body.removeChild(F);YAHOO.log("File upload iframe destroyed. Id is:"+C,"info","Connection");if(A){window.clearTimeout(this._timeOut[E.tId]);delete this._timeOut[E.tId];}D=true;}}else{D=false;}}if(D===true){this.abortEvent.fire(E,B);if(E.abortEvent){E.abortEvent.fire(E,B);}this.handleTransactionResponse(E,G,true);YAHOO.log("Transaction "+E.tId+" aborted.","info","Connection");}return D;},isCallInProgress:function(B){if(B&&B.conn){return B.conn.readyState!==4&&B.conn.readyState!==0;}else{if(B&&B.isUpload===true){var A="yuiIO"+B.tId;return document.getElementById(A)?true:false;}else{return false;}}},releaseObject:function(A){if(A&&A.conn){A.conn=null;YAHOO.log("Connection object for transaction "+A.tId+" destroyed.","info","Connection");A=null;}}};YAHOO.register("connection",YAHOO.util.Connect,{version:"2.5.2",build:"1076"});
//from: http://yui.yahooapis.com/2.5.2/build/dragdrop/dragdrop-min.js

if(!YAHOO.util.DragDropMgr){YAHOO.util.DragDropMgr=function(){var A=YAHOO.util.Event;return{ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,interactionInfo:null,init:function(){this.initialized=true;},POINT:0,INTERSECT:1,STRICT_INTERSECT:2,mode:0,_execOnAll:function(D,C){for(var E in this.ids){for(var B in this.ids[E]){var F=this.ids[E][B];if(!this.isTypeOfDD(F)){continue;}F[D].apply(F,C);}}},_onLoad:function(){this.init();A.on(document,"mouseup",this.handleMouseUp,this,true);A.on(document,"mousemove",this.handleMouseMove,this,true);A.on(window,"unload",this._onUnload,this,true);A.on(window,"resize",this._onResize,this,true);},_onResize:function(B){this._execOnAll("resetConstraints",[]);},lock:function(){this.locked=true;},unlock:function(){this.locked=false;},isLocked:function(){return this.locked;},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:1000,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,fromTimeout:false,regDragDrop:function(C,B){if(!this.initialized){this.init();}if(!this.ids[B]){this.ids[B]={};}this.ids[B][C.id]=C;},removeDDFromGroup:function(D,B){if(!this.ids[B]){this.ids[B]={};}var C=this.ids[B];if(C&&C[D.id]){delete C[D.id];}},_remove:function(C){for(var B in C.groups){if(B&&this.ids[B][C.id]){delete this.ids[B][C.id];}}delete this.handleIds[C.id];},regHandle:function(C,B){if(!this.handleIds[C]){this.handleIds[C]={};}this.handleIds[C][B]=B;},isDragDrop:function(B){return(this.getDDById(B))?true:false;},getRelated:function(G,C){var F=[];for(var E in G.groups){for(var D in this.ids[E]){var B=this.ids[E][D];if(!this.isTypeOfDD(B)){continue;}if(!C||B.isTarget){F[F.length]=B;}}}return F;},isLegalTarget:function(F,E){var C=this.getRelated(F,true);for(var D=0,B=C.length;D<B;++D){if(C[D].id==E.id){return true;}}return false;},isTypeOfDD:function(B){return(B&&B.__ygDragDrop);},isHandle:function(C,B){return(this.handleIds[C]&&this.handleIds[C][B]);},getDDById:function(C){for(var B in this.ids){if(this.ids[B][C]){return this.ids[B][C];}}return null;},handleMouseDown:function(D,C){this.currentTarget=YAHOO.util.Event.getTarget(D);this.dragCurrent=C;var B=C.getEl();this.startX=YAHOO.util.Event.getPageX(D);this.startY=YAHOO.util.Event.getPageY(D);this.deltaX=this.startX-B.offsetLeft;this.deltaY=this.startY-B.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var E=YAHOO.util.DDM;E.startDrag(E.startX,E.startY);E.fromTimeout=true;},this.clickTimeThresh);},startDrag:function(B,D){clearTimeout(this.clickTimeout);var C=this.dragCurrent;if(C&&C.events.b4StartDrag){C.b4StartDrag(B,D);C.fireEvent("b4StartDragEvent",{x:B,y:D});}if(C&&C.events.startDrag){C.startDrag(B,D);C.fireEvent("startDragEvent",{x:B,y:D});}this.dragThreshMet=true;},handleMouseUp:function(B){if(this.dragCurrent){clearTimeout(this.clickTimeout);if(this.dragThreshMet){if(this.fromTimeout){this.fromTimeout=false;this.handleMouseMove(B);}this.fromTimeout=false;this.fireEvents(B,true);}else{}this.stopDrag(B);this.stopEvent(B);}},stopEvent:function(B){if(this.stopPropagation){YAHOO.util.Event.stopPropagation(B);}if(this.preventDefault){YAHOO.util.Event.preventDefault(B);}},stopDrag:function(D,C){var B=this.dragCurrent;if(B&&!C){if(this.dragThreshMet){if(B.events.b4EndDrag){B.b4EndDrag(D);B.fireEvent("b4EndDragEvent",{e:D});}if(B.events.endDrag){B.endDrag(D);B.fireEvent("endDragEvent",{e:D});}}if(B.events.mouseUp){B.onMouseUp(D);B.fireEvent("mouseUpEvent",{e:D});}}this.dragCurrent=null;this.dragOvers={};},handleMouseMove:function(E){var B=this.dragCurrent;if(B){if(YAHOO.util.Event.isIE&&!E.button){this.stopEvent(E);return this.handleMouseUp(E);}else{if(E.clientX<0||E.clientY<0){}}if(!this.dragThreshMet){var D=Math.abs(this.startX-YAHOO.util.Event.getPageX(E));var C=Math.abs(this.startY-YAHOO.util.Event.getPageY(E));if(D>this.clickPixelThresh||C>this.clickPixelThresh){this.startDrag(this.startX,this.startY);}}if(this.dragThreshMet){if(B&&B.events.b4Drag){B.b4Drag(E);B.fireEvent("b4DragEvent",{e:E});}if(B&&B.events.drag){B.onDrag(E);B.fireEvent("dragEvent",{e:E});}if(B){this.fireEvents(E,false);}}this.stopEvent(E);}},fireEvents:function(U,K){var Z=this.dragCurrent;if(!Z||Z.isLocked()||Z.dragOnly){return;}var M=YAHOO.util.Event.getPageX(U),L=YAHOO.util.Event.getPageY(U),O=new YAHOO.util.Point(M,L),J=Z.getTargetCoord(O.x,O.y),E=Z.getDragEl(),D=["out","over","drop","enter"],T=new YAHOO.util.Region(J.y,J.x+E.offsetWidth,J.y+E.offsetHeight,J.x),H=[],C={},P=[],a={outEvts:[],overEvts:[],dropEvts:[],enterEvts:[]};for(var R in this.dragOvers){var c=this.dragOvers[R];if(!this.isTypeOfDD(c)){continue;}if(!this.isOverTarget(O,c,this.mode,T)){a.outEvts.push(c);}H[R]=true;delete this.dragOvers[R];}for(var Q in Z.groups){if("string"!=typeof Q){continue;}for(R in this.ids[Q]){var F=this.ids[Q][R];if(!this.isTypeOfDD(F)){continue;}if(F.isTarget&&!F.isLocked()&&F!=Z){if(this.isOverTarget(O,F,this.mode,T)){C[Q]=true;if(K){a.dropEvts.push(F);}else{if(!H[F.id]){a.enterEvts.push(F);}else{a.overEvts.push(F);}this.dragOvers[F.id]=F;}}}}}this.interactionInfo={out:a.outEvts,enter:a.enterEvts,over:a.overEvts,drop:a.dropEvts,point:O,draggedRegion:T,sourceRegion:this.locationCache[Z.id],validDrop:K};for(var B in C){P.push(B);}if(K&&!a.dropEvts.length){this.interactionInfo.validDrop=false;if(Z.events.invalidDrop){Z.onInvalidDrop(U);Z.fireEvent("invalidDropEvent",{e:U});}}for(R=0;R<D.length;R++){var X=null;if(a[D[R]+"Evts"]){X=a[D[R]+"Evts"];}if(X&&X.length){var G=D[R].charAt(0).toUpperCase()+D[R].substr(1),W="onDrag"+G,I="b4Drag"+G,N="drag"+G+"Event",V="drag"+G;if(this.mode){if(Z.events[I]){Z[I](U,X,P);Z.fireEvent(I+"Event",{event:U,info:X,group:P});}if(Z.events[V]){Z[W](U,X,P);Z.fireEvent(N,{event:U,info:X,group:P});}}else{for(var Y=0,S=X.length;Y<S;++Y){if(Z.events[I]){Z[I](U,X[Y].id,P[0]);Z.fireEvent(I+"Event",{event:U,info:X[Y].id,group:P[0]});}if(Z.events[V]){Z[W](U,X[Y].id,P[0]);Z.fireEvent(N,{event:U,info:X[Y].id,group:P[0]});}}}}}},getBestMatch:function(D){var F=null;var C=D.length;if(C==1){F=D[0];}else{for(var E=0;E<C;++E){var B=D[E];if(this.mode==this.INTERSECT&&B.cursorIsOver){F=B;break;}else{if(!F||!F.overlap||(B.overlap&&F.overlap.getArea()<B.overlap.getArea())){F=B;}}}}return F;},refreshCache:function(C){var E=C||this.ids;for(var B in E){if("string"!=typeof B){continue;}for(var D in this.ids[B]){var F=this.ids[B][D];if(this.isTypeOfDD(F)){var G=this.getLocation(F);if(G){this.locationCache[F.id]=G;}else{delete this.locationCache[F.id];}}}}},verifyEl:function(C){try{if(C){var B=C.offsetParent;if(B){return true;}}}catch(D){}return false;},getLocation:function(G){if(!this.isTypeOfDD(G)){return null;}var E=G.getEl(),J,D,C,L,K,M,B,I,F;try{J=YAHOO.util.Dom.getXY(E);}catch(H){}if(!J){return null;}D=J[0];C=D+E.offsetWidth;L=J[1];K=L+E.offsetHeight;M=L-G.padding[0];B=C+G.padding[1];I=K+G.padding[2];F=D-G.padding[3];return new YAHOO.util.Region(M,B,I,F);},isOverTarget:function(J,B,D,E){var F=this.locationCache[B.id];if(!F||!this.useCache){F=this.getLocation(B);this.locationCache[B.id]=F;}if(!F){return false;}B.cursorIsOver=F.contains(J);var I=this.dragCurrent;if(!I||(!D&&!I.constrainX&&!I.constrainY)){return B.cursorIsOver;}B.overlap=null;if(!E){var G=I.getTargetCoord(J.x,J.y);var C=I.getDragEl();E=new YAHOO.util.Region(G.y,G.x+C.offsetWidth,G.y+C.offsetHeight,G.x);}var H=E.intersect(F);if(H){B.overlap=H;return(D)?true:B.cursorIsOver;}else{return false;}},_onUnload:function(C,B){this.unregAll();},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null;}this._execOnAll("unreg",[]);this.ids={};},elementCache:{},getElWrapper:function(C){var B=this.elementCache[C];if(!B||!B.el){B=this.elementCache[C]=new this.ElementWrapper(YAHOO.util.Dom.get(C));}return B;},getElement:function(B){return YAHOO.util.Dom.get(B);},getCss:function(C){var B=YAHOO.util.Dom.get(C);return(B)?B.style:null;},ElementWrapper:function(B){this.el=B||null;this.id=this.el&&B.id;this.css=this.el&&B.style;},getPosX:function(B){return YAHOO.util.Dom.getX(B);},getPosY:function(B){return YAHOO.util.Dom.getY(B);},swapNode:function(D,B){if(D.swapNode){D.swapNode(B);}else{var E=B.parentNode;var C=B.nextSibling;if(C==D){E.insertBefore(D,B);}else{if(B==D.nextSibling){E.insertBefore(B,D);}else{D.parentNode.replaceChild(B,D);E.insertBefore(D,C);}}}},getScroll:function(){var D,B,E=document.documentElement,C=document.body;if(E&&(E.scrollTop||E.scrollLeft)){D=E.scrollTop;B=E.scrollLeft;}else{if(C){D=C.scrollTop;B=C.scrollLeft;}else{}}return{top:D,left:B};},getStyle:function(C,B){return YAHOO.util.Dom.getStyle(C,B);},getScrollTop:function(){return this.getScroll().top;},getScrollLeft:function(){return this.getScroll().left;},moveToEl:function(B,D){var C=YAHOO.util.Dom.getXY(D);YAHOO.util.Dom.setXY(B,C);},getClientHeight:function(){return YAHOO.util.Dom.getViewportHeight();},getClientWidth:function(){return YAHOO.util.Dom.getViewportWidth();},numericSort:function(C,B){return(C-B);},_timeoutCount:0,_addListeners:function(){var B=YAHOO.util.DDM;if(YAHOO.util.Event&&document){B._onLoad();}else{if(B._timeoutCount>2000){}else{setTimeout(B._addListeners,10);if(document&&document.body){B._timeoutCount+=1;}}}},handleWasClicked:function(B,D){if(this.isHandle(D,B.id)){return true;}else{var C=B.parentNode;while(C){if(this.isHandle(D,C.id)){return true;}else{C=C.parentNode;}}}return false;}};}();YAHOO.util.DDM=YAHOO.util.DragDropMgr;YAHOO.util.DDM._addListeners();}(function(){var A=YAHOO.util.Event;var B=YAHOO.util.Dom;YAHOO.util.DragDrop=function(E,C,D){if(E){this.init(E,C,D);}};YAHOO.util.DragDrop.prototype={events:null,on:function(){this.subscribe.apply(this,arguments);},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true;},unlock:function(){this.locked=false;},isTarget:true,padding:null,dragOnly:false,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,deltaX:0,deltaY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,cursorIsOver:false,overlap:null,b4StartDrag:function(C,D){},startDrag:function(C,D){},b4Drag:function(C){},onDrag:function(C){},onDragEnter:function(C,D){},b4DragOver:function(C){},onDragOver:function(C,D){},b4DragOut:function(C){},onDragOut:function(C,D){},b4DragDrop:function(C){},onDragDrop:function(C,D){},onInvalidDrop:function(C){},b4EndDrag:function(C){},endDrag:function(C){},b4MouseDown:function(C){},onMouseDown:function(C){},onMouseUp:function(C){},onAvailable:function(){},getEl:function(){if(!this._domRef){this._domRef=B.get(this.id);}return this._domRef;},getDragEl:function(){return B.get(this.dragElId);},init:function(F,C,D){this.initTarget(F,C,D);A.on(this._domRef||this.id,"mousedown",this.handleMouseDown,this,true);for(var E in this.events){this.createEvent(E+"Event");}},initTarget:function(E,C,D){this.config=D||{};this.events={};this.DDM=YAHOO.util.DDM;this.groups={};if(typeof E!=="string"){this._domRef=E;E=B.generateId(E);}this.id=E;this.addToGroup((C)?C:"default");this.handleElId=E;A.onAvailable(E,this.handleOnAvailable,this,true);this.setDragElId(E);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();},applyConfig:function(){this.events={mouseDown:true,b4MouseDown:true,mouseUp:true,b4StartDrag:true,startDrag:true,b4EndDrag:true,endDrag:true,drag:true,b4Drag:true,invalidDrop:true,b4DragOut:true,dragOut:true,dragEnter:true,b4DragOver:true,dragOver:true,b4DragDrop:true,dragDrop:true};if(this.config.events){for(var C in this.config.events){if(this.config.events[C]===false){this.events[C]=false;}}}this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false);this.dragOnly=((this.config.dragOnly===true)?true:false);},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable();},setPadding:function(E,C,F,D){if(!C&&0!==C){this.padding=[E,E,E,E];}else{if(!F&&0!==F){this.padding=[E,C,E,C];}else{this.padding=[E,C,F,D];}}},setInitPosition:function(F,E){var G=this.getEl();if(!this.DDM.verifyEl(G)){if(G&&G.style&&(G.style.display=="none")){}else{}return;}var D=F||0;var C=E||0;var H=B.getXY(G);this.initPageX=H[0]-D;this.initPageY=H[1]-C;this.lastPageX=H[0];this.lastPageY=H[1];this.setStartPosition(H);},setStartPosition:function(D){var C=D||B.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=C[0];this.startPageY=C[1];},addToGroup:function(C){this.groups[C]=true;this.DDM.regDragDrop(this,C);},removeFromGroup:function(C){if(this.groups[C]){delete this.groups[C];}this.DDM.removeDDFromGroup(this,C);},setDragElId:function(C){this.dragElId=C;},setHandleElId:function(C){if(typeof C!=="string"){C=B.generateId(C);}this.handleElId=C;this.DDM.regHandle(this.id,C);},setOuterHandleElId:function(C){if(typeof C!=="string"){C=B.generateId(C);}A.on(C,"mousedown",this.handleMouseDown,this,true);this.setHandleElId(C);this.hasOuterHandles=true;},unreg:function(){A.removeListener(this.id,"mousedown",this.handleMouseDown);this._domRef=null;this.DDM._remove(this);},isLocked:function(){return(this.DDM.isLocked()||this.locked);},handleMouseDown:function(H,G){var D=H.which||H.button;if(this.primaryButtonOnly&&D>1){return;}if(this.isLocked()){return;}var C=this.b4MouseDown(H);if(this.events.b4MouseDown){C=this.fireEvent("b4MouseDownEvent",H);}var E=this.onMouseDown(H);if(this.events.mouseDown){E=this.fireEvent("mouseDownEvent",H);}if((C===false)||(E===false)){return;}this.DDM.refreshCache(this.groups);var F=new YAHOO.util.Point(A.getPageX(H),A.getPageY(H));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(F,this)){}else{if(this.clickValidator(H)){this.setStartPosition();this.DDM.handleMouseDown(H,this);this.DDM.stopEvent(H);}else{}}},clickValidator:function(D){var C=YAHOO.util.Event.getTarget(D);return(this.isValidHandleChild(C)&&(this.id==this.handleElId||this.DDM.handleWasClicked(C,this.id)));},getTargetCoord:function(E,D){var C=E-this.deltaX;var F=D-this.deltaY;if(this.constrainX){if(C<this.minX){C=this.minX;}if(C>this.maxX){C=this.maxX;}}if(this.constrainY){if(F<this.minY){F=this.minY;}if(F>this.maxY){F=this.maxY;}}C=this.getTick(C,this.xTicks);F=this.getTick(F,this.yTicks);return{x:C,y:F};},addInvalidHandleType:function(C){var D=C.toUpperCase();this.invalidHandleTypes[D]=D;},addInvalidHandleId:function(C){if(typeof C!=="string"){C=B.generateId(C);}this.invalidHandleIds[C]=C;},addInvalidHandleClass:function(C){this.invalidHandleClasses.push(C);},removeInvalidHandleType:function(C){var D=C.toUpperCase();delete this.invalidHandleTypes[D];},removeInvalidHandleId:function(C){if(typeof C!=="string"){C=B.generateId(C);}delete this.invalidHandleIds[C];},removeInvalidHandleClass:function(D){for(var E=0,C=this.invalidHandleClasses.length;E<C;++E){if(this.invalidHandleClasses[E]==D){delete this.invalidHandleClasses[E];}}},isValidHandleChild:function(F){var E=true;var H;try{H=F.nodeName.toUpperCase();}catch(G){H=F.nodeName;}E=E&&!this.invalidHandleTypes[H];E=E&&!this.invalidHandleIds[F.id];for(var D=0,C=this.invalidHandleClasses.length;E&&D<C;++D){E=!B.hasClass(F,this.invalidHandleClasses[D]);}return E;},setXTicks:function(F,C){this.xTicks=[];this.xTickSize=C;var E={};for(var D=this.initPageX;D>=this.minX;D=D-C){if(!E[D]){this.xTicks[this.xTicks.length]=D;E[D]=true;}}for(D=this.initPageX;D<=this.maxX;D=D+C){if(!E[D]){this.xTicks[this.xTicks.length]=D;E[D]=true;}}this.xTicks.sort(this.DDM.numericSort);},setYTicks:function(F,C){this.yTicks=[];this.yTickSize=C;var E={};for(var D=this.initPageY;D>=this.minY;D=D-C){if(!E[D]){this.yTicks[this.yTicks.length]=D;E[D]=true;}}for(D=this.initPageY;D<=this.maxY;D=D+C){if(!E[D]){this.yTicks[this.yTicks.length]=D;E[D]=true;}}this.yTicks.sort(this.DDM.numericSort);},setXConstraint:function(E,D,C){this.leftConstraint=parseInt(E,10);this.rightConstraint=parseInt(D,10);this.minX=this.initPageX-this.leftConstraint;this.maxX=this.initPageX+this.rightConstraint;if(C){this.setXTicks(this.initPageX,C);}this.constrainX=true;},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks();},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0;},setYConstraint:function(C,E,D){this.topConstraint=parseInt(C,10);this.bottomConstraint=parseInt(E,10);this.minY=this.initPageY-this.topConstraint;this.maxY=this.initPageY+this.bottomConstraint;if(D){this.setYTicks(this.initPageY,D);}this.constrainY=true;},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var D=(this.maintainOffset)?this.lastPageX-this.initPageX:0;var C=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(D,C);}else{this.setInitPosition();}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize);}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize);}},getTick:function(I,F){if(!F){return I;}else{if(F[0]>=I){return F[0];}else{for(var D=0,C=F.length;D<C;++D){var E=D+1;if(F[E]&&F[E]>=I){var H=I-F[D];var G=F[E]-I;return(G>H)?F[D]:F[E];}}return F[F.length-1];}}},toString:function(){return("DragDrop "+this.id);}};YAHOO.augment(YAHOO.util.DragDrop,YAHOO.util.EventProvider);})();YAHOO.util.DD=function(C,A,B){if(C){this.init(C,A,B);}};YAHOO.extend(YAHOO.util.DD,YAHOO.util.DragDrop,{scroll:true,autoOffset:function(C,B){var A=C-this.startPageX;var D=B-this.startPageY;this.setDelta(A,D);},setDelta:function(B,A){this.deltaX=B;this.deltaY=A;},setDragElPos:function(C,B){var A=this.getDragEl();this.alignElWithMouse(A,C,B);},alignElWithMouse:function(C,G,F){var E=this.getTargetCoord(G,F);if(!this.deltaSetXY){var H=[E.x,E.y];YAHOO.util.Dom.setXY(C,H);var D=parseInt(YAHOO.util.Dom.getStyle(C,"left"),10);var B=parseInt(YAHOO.util.Dom.getStyle(C,"top"),10);this.deltaSetXY=[D-E.x,B-E.y];}else{YAHOO.util.Dom.setStyle(C,"left",(E.x+this.deltaSetXY[0])+"px");YAHOO.util.Dom.setStyle(C,"top",(E.y+this.deltaSetXY[1])+"px");}this.cachePosition(E.x,E.y);var A=this;setTimeout(function(){A.autoScroll.call(A,E.x,E.y,C.offsetHeight,C.offsetWidth);},0);},cachePosition:function(B,A){if(B){this.lastPageX=B;this.lastPageY=A;}else{var C=YAHOO.util.Dom.getXY(this.getEl());this.lastPageX=C[0];this.lastPageY=C[1];}},autoScroll:function(J,I,E,K){if(this.scroll){var L=this.DDM.getClientHeight();var B=this.DDM.getClientWidth();var N=this.DDM.getScrollTop();var D=this.DDM.getScrollLeft();var H=E+I;var M=K+J;var G=(L+N-I-this.deltaY);var F=(B+D-J-this.deltaX);var C=40;var A=(document.all)?80:30;if(H>L&&G<C){window.scrollTo(D,N+A);}if(I<N&&N>0&&I-N<C){window.scrollTo(D,N-A);}if(M>B&&F<C){window.scrollTo(D+A,N);}if(J<D&&D>0&&J-D<C){window.scrollTo(D-A,N);}}},applyConfig:function(){YAHOO.util.DD.superclass.applyConfig.call(this);this.scroll=(this.config.scroll!==false);},b4MouseDown:function(A){this.setStartPosition();this.autoOffset(YAHOO.util.Event.getPageX(A),YAHOO.util.Event.getPageY(A));},b4Drag:function(A){this.setDragElPos(YAHOO.util.Event.getPageX(A),YAHOO.util.Event.getPageY(A));},toString:function(){return("DD "+this.id);}});YAHOO.util.DDProxy=function(C,A,B){if(C){this.init(C,A,B);this.initFrame();}};YAHOO.util.DDProxy.dragElId="ygddfdiv";YAHOO.extend(YAHOO.util.DDProxy,YAHOO.util.DD,{resizeFrame:true,centerFrame:false,createFrame:function(){var B=this,A=document.body;if(!A||!A.firstChild){setTimeout(function(){B.createFrame();},50);return;}var G=this.getDragEl(),E=YAHOO.util.Dom;if(!G){G=document.createElement("div");G.id=this.dragElId;var D=G.style;D.position="absolute";D.visibility="hidden";D.cursor="move";D.border="2px solid #aaa";D.zIndex=999;D.height="25px";D.width="25px";var C=document.createElement("div");E.setStyle(C,"height","100%");E.setStyle(C,"width","100%");E.setStyle(C,"background-color","#ccc");E.setStyle(C,"opacity","0");G.appendChild(C);if(YAHOO.env.ua.ie){var F=document.createElement("iframe");F.setAttribute("src","javascript:");F.setAttribute("scrolling","no");F.setAttribute("frameborder","0");G.insertBefore(F,G.firstChild);E.setStyle(F,"height","100%");E.setStyle(F,"width","100%");E.setStyle(F,"position","absolute");E.setStyle(F,"top","0");E.setStyle(F,"left","0");E.setStyle(F,"opacity","0");E.setStyle(F,"zIndex","-1");E.setStyle(F.nextSibling,"zIndex","2");}A.insertBefore(G,A.firstChild);}},initFrame:function(){this.createFrame();},applyConfig:function(){YAHOO.util.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||YAHOO.util.DDProxy.dragElId);},showFrame:function(E,D){var C=this.getEl();var A=this.getDragEl();var B=A.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(B.width,10)/2),Math.round(parseInt(B.height,10)/2));}this.setDragElPos(E,D);YAHOO.util.Dom.setStyle(A,"visibility","visible");},_resizeProxy:function(){if(this.resizeFrame){var H=YAHOO.util.Dom;var B=this.getEl();var C=this.getDragEl();var G=parseInt(H.getStyle(C,"borderTopWidth"),10);var I=parseInt(H.getStyle(C,"borderRightWidth"),10);var F=parseInt(H.getStyle(C,"borderBottomWidth"),10);var D=parseInt(H.getStyle(C,"borderLeftWidth"),10);if(isNaN(G)){G=0;}if(isNaN(I)){I=0;}if(isNaN(F)){F=0;}if(isNaN(D)){D=0;}var E=Math.max(0,B.offsetWidth-I-D);var A=Math.max(0,B.offsetHeight-G-F);H.setStyle(C,"width",E+"px");H.setStyle(C,"height",A+"px");}},b4MouseDown:function(B){this.setStartPosition();var A=YAHOO.util.Event.getPageX(B);var C=YAHOO.util.Event.getPageY(B);this.autoOffset(A,C);},b4StartDrag:function(A,B){this.showFrame(A,B);},b4EndDrag:function(A){YAHOO.util.Dom.setStyle(this.getDragEl(),"visibility","hidden");},endDrag:function(D){var C=YAHOO.util.Dom;var B=this.getEl();var A=this.getDragEl();C.setStyle(A,"visibility","");C.setStyle(B,"visibility","hidden");YAHOO.util.DDM.moveToEl(B,A);C.setStyle(A,"visibility","hidden");C.setStyle(B,"visibility","");},toString:function(){return("DDProxy "+this.id);}});YAHOO.util.DDTarget=function(C,A,B){if(C){this.initTarget(C,A,B);}};YAHOO.extend(YAHOO.util.DDTarget,YAHOO.util.DragDrop,{toString:function(){return("DDTarget "+this.id);}});YAHOO.register("dragdrop",YAHOO.util.DragDropMgr,{version:"2.5.2",build:"1076"});
//from: http://yui.yahooapis.com/2.5.2/build/container/container-min.js

(function(){YAHOO.util.Config=function(D){if(D){this.init(D);}};var B=YAHOO.lang,C=YAHOO.util.CustomEvent,A=YAHOO.util.Config;A.CONFIG_CHANGED_EVENT="configChanged";A.BOOLEAN_TYPE="boolean";A.prototype={owner:null,queueInProgress:false,config:null,initialConfig:null,eventQueue:null,configChangedEvent:null,init:function(D){this.owner=D;this.configChangedEvent=this.createEvent(A.CONFIG_CHANGED_EVENT);this.configChangedEvent.signature=C.LIST;this.queueInProgress=false;this.config={};this.initialConfig={};this.eventQueue=[];},checkBoolean:function(D){return(typeof D==A.BOOLEAN_TYPE);},checkNumber:function(D){return(!isNaN(D));},fireEvent:function(D,F){var E=this.config[D];if(E&&E.event){E.event.fire(F);}},addProperty:function(E,D){E=E.toLowerCase();this.config[E]=D;D.event=this.createEvent(E,{scope:this.owner});D.event.signature=C.LIST;D.key=E;if(D.handler){D.event.subscribe(D.handler,this.owner);}this.setProperty(E,D.value,true);if(!D.suppressEvent){this.queueProperty(E,D.value);}},getConfig:function(){var D={},F,E;for(F in this.config){E=this.config[F];if(E&&E.event){D[F]=E.value;}}return D;},getProperty:function(D){var E=this.config[D.toLowerCase()];if(E&&E.event){return E.value;}else{return undefined;}},resetProperty:function(D){D=D.toLowerCase();var E=this.config[D];if(E&&E.event){if(this.initialConfig[D]&&!B.isUndefined(this.initialConfig[D])){this.setProperty(D,this.initialConfig[D]);return true;}}else{return false;}},setProperty:function(E,G,D){var F;E=E.toLowerCase();if(this.queueInProgress&&!D){this.queueProperty(E,G);return true;}else{F=this.config[E];if(F&&F.event){if(F.validator&&!F.validator(G)){return false;}else{F.value=G;if(!D){this.fireEvent(E,G);this.configChangedEvent.fire([E,G]);}return true;}}else{return false;}}},queueProperty:function(S,P){S=S.toLowerCase();var R=this.config[S],K=false,J,G,H,I,O,Q,F,M,N,D,L,T,E;if(R&&R.event){if(!B.isUndefined(P)&&R.validator&&!R.validator(P)){return false;}else{if(!B.isUndefined(P)){R.value=P;}else{P=R.value;}K=false;J=this.eventQueue.length;for(L=0;L<J;L++){G=this.eventQueue[L];if(G){H=G[0];I=G[1];if(H==S){this.eventQueue[L]=null;this.eventQueue.push([S,(!B.isUndefined(P)?P:I)]);K=true;break;}}}if(!K&&!B.isUndefined(P)){this.eventQueue.push([S,P]);}}if(R.supercedes){O=R.supercedes.length;for(T=0;T<O;T++){Q=R.supercedes[T];F=this.eventQueue.length;for(E=0;E<F;E++){M=this.eventQueue[E];if(M){N=M[0];D=M[1];if(N==Q.toLowerCase()){this.eventQueue.push([N,D]);this.eventQueue[E]=null;break;}}}}}return true;}else{return false;}},refireEvent:function(D){D=D.toLowerCase();var E=this.config[D];if(E&&E.event&&!B.isUndefined(E.value)){if(this.queueInProgress){this.queueProperty(D);}else{this.fireEvent(D,E.value);}}},applyConfig:function(D,G){var F,E;if(G){E={};for(F in D){if(B.hasOwnProperty(D,F)){E[F.toLowerCase()]=D[F];}}this.initialConfig=E;}for(F in D){if(B.hasOwnProperty(D,F)){this.queueProperty(F,D[F]);}}},refresh:function(){var D;for(D in this.config){this.refireEvent(D);}},fireQueue:function(){var E,H,D,G,F;this.queueInProgress=true;for(E=0;E<this.eventQueue.length;E++){H=this.eventQueue[E];if(H){D=H[0];G=H[1];F=this.config[D];F.value=G;this.fireEvent(D,G);}}this.queueInProgress=false;this.eventQueue=[];},subscribeToConfigEvent:function(E,F,H,D){var G=this.config[E.toLowerCase()];if(G&&G.event){if(!A.alreadySubscribed(G.event,F,H)){G.event.subscribe(F,H,D);}return true;}else{return false;}},unsubscribeFromConfigEvent:function(D,E,G){var F=this.config[D.toLowerCase()];if(F&&F.event){return F.event.unsubscribe(E,G);}else{return false;}},toString:function(){var D="Config";if(this.owner){D+=" ["+this.owner.toString()+"]";}return D;},outputEventQueue:function(){var D="",G,E,F=this.eventQueue.length;for(E=0;E<F;E++){G=this.eventQueue[E];if(G){D+=G[0]+"="+G[1]+", ";}}return D;},destroy:function(){var E=this.config,D,F;for(D in E){if(B.hasOwnProperty(E,D)){F=E[D];F.event.unsubscribeAll();F.event=null;}}this.configChangedEvent.unsubscribeAll();this.configChangedEvent=null;this.owner=null;this.config=null;this.initialConfig=null;this.eventQueue=null;}};A.alreadySubscribed=function(E,H,I){var F=E.subscribers.length,D,G;if(F>0){G=F-1;do{D=E.subscribers[G];if(D&&D.obj==I&&D.fn==H){return true;}}while(G--);}return false;};YAHOO.lang.augmentProto(A,YAHOO.util.EventProvider);}());(function(){YAHOO.widget.Module=function(Q,P){if(Q){this.init(Q,P);}else{}};var F=YAHOO.util.Dom,D=YAHOO.util.Config,M=YAHOO.util.Event,L=YAHOO.util.CustomEvent,G=YAHOO.widget.Module,H,O,N,E,A={"BEFORE_INIT":"beforeInit","INIT":"init","APPEND":"append","BEFORE_RENDER":"beforeRender","RENDER":"render","CHANGE_HEADER":"changeHeader","CHANGE_BODY":"changeBody","CHANGE_FOOTER":"changeFooter","CHANGE_CONTENT":"changeContent","DESTORY":"destroy","BEFORE_SHOW":"beforeShow","SHOW":"show","BEFORE_HIDE":"beforeHide","HIDE":"hide"},I={"VISIBLE":{key:"visible",value:true,validator:YAHOO.lang.isBoolean},"EFFECT":{key:"effect",suppressEvent:true,supercedes:["visible"]},"MONITOR_RESIZE":{key:"monitorresize",value:true},"APPEND_TO_DOCUMENT_BODY":{key:"appendtodocumentbody",value:false}};G.IMG_ROOT=null;G.IMG_ROOT_SSL=null;G.CSS_MODULE="yui-module";G.CSS_HEADER="hd";G.CSS_BODY="bd";G.CSS_FOOTER="ft";G.RESIZE_MONITOR_SECURE_URL="javascript:false;";G.textResizeEvent=new L("textResize");function K(){if(!H){H=document.createElement("div");H.innerHTML=('<div class="'+G.CSS_HEADER+'"></div>'+'<div class="'+G.CSS_BODY+'"></div><div class="'+G.CSS_FOOTER+'"></div>');O=H.firstChild;N=O.nextSibling;E=N.nextSibling;}return H;}function J(){if(!O){K();}return(O.cloneNode(false));}function B(){if(!N){K();}return(N.cloneNode(false));}function C(){if(!E){K();}return(E.cloneNode(false));}G.prototype={constructor:G,element:null,header:null,body:null,footer:null,id:null,imageRoot:G.IMG_ROOT,initEvents:function(){var P=L.LIST;this.beforeInitEvent=this.createEvent(A.BEFORE_INIT);this.beforeInitEvent.signature=P;this.initEvent=this.createEvent(A.INIT);this.initEvent.signature=P;this.appendEvent=this.createEvent(A.APPEND);this.appendEvent.signature=P;this.beforeRenderEvent=this.createEvent(A.BEFORE_RENDER);this.beforeRenderEvent.signature=P;this.renderEvent=this.createEvent(A.RENDER);this.renderEvent.signature=P;this.changeHeaderEvent=this.createEvent(A.CHANGE_HEADER);this.changeHeaderEvent.signature=P;this.changeBodyEvent=this.createEvent(A.CHANGE_BODY);this.changeBodyEvent.signature=P;this.changeFooterEvent=this.createEvent(A.CHANGE_FOOTER);this.changeFooterEvent.signature=P;this.changeContentEvent=this.createEvent(A.CHANGE_CONTENT);this.changeContentEvent.signature=P;this.destroyEvent=this.createEvent(A.DESTORY);this.destroyEvent.signature=P;this.beforeShowEvent=this.createEvent(A.BEFORE_SHOW);this.beforeShowEvent.signature=P;this.showEvent=this.createEvent(A.SHOW);this.showEvent.signature=P;this.beforeHideEvent=this.createEvent(A.BEFORE_HIDE);this.beforeHideEvent.signature=P;this.hideEvent=this.createEvent(A.HIDE);this.hideEvent.signature=P;},platform:function(){var P=navigator.userAgent.toLowerCase();if(P.indexOf("windows")!=-1||P.indexOf("win32")!=-1){return"windows";}else{if(P.indexOf("macintosh")!=-1){return"mac";}else{return false;}}}(),browser:function(){var P=navigator.userAgent.toLowerCase();if(P.indexOf("opera")!=-1){return"opera";}else{if(P.indexOf("msie 7")!=-1){return"ie7";}else{if(P.indexOf("msie")!=-1){return"ie";}else{if(P.indexOf("safari")!=-1){return"safari";}else{if(P.indexOf("gecko")!=-1){return"gecko";}else{return false;}}}}}}(),isSecure:function(){if(window.location.href.toLowerCase().indexOf("https")===0){return true;}else{return false;}}(),initDefaultConfig:function(){this.cfg.addProperty(I.VISIBLE.key,{handler:this.configVisible,value:I.VISIBLE.value,validator:I.VISIBLE.validator});this.cfg.addProperty(I.EFFECT.key,{suppressEvent:I.EFFECT.suppressEvent,supercedes:I.EFFECT.supercedes});this.cfg.addProperty(I.MONITOR_RESIZE.key,{handler:this.configMonitorResize,value:I.MONITOR_RESIZE.value});this.cfg.addProperty(I.APPEND_TO_DOCUMENT_BODY.key,{value:I.APPEND_TO_DOCUMENT_BODY.value});},init:function(U,T){var R,V;this.initEvents();this.beforeInitEvent.fire(G);this.cfg=new D(this);if(this.isSecure){this.imageRoot=G.IMG_ROOT_SSL;}if(typeof U=="string"){R=U;U=document.getElementById(U);if(!U){U=(K()).cloneNode(false);U.id=R;}}this.element=U;if(U.id){this.id=U.id;}V=this.element.firstChild;if(V){var Q=false,P=false,S=false;do{if(1==V.nodeType){if(!Q&&F.hasClass(V,G.CSS_HEADER)){this.header=V;Q=true;}else{if(!P&&F.hasClass(V,G.CSS_BODY)){this.body=V;P=true;}else{if(!S&&F.hasClass(V,G.CSS_FOOTER)){this.footer=V;S=true;}}}}}while((V=V.nextSibling));}this.initDefaultConfig();F.addClass(this.element,G.CSS_MODULE);if(T){this.cfg.applyConfig(T,true);}if(!D.alreadySubscribed(this.renderEvent,this.cfg.fireQueue,this.cfg)){this.renderEvent.subscribe(this.cfg.fireQueue,this.cfg,true);}this.initEvent.fire(G);},initResizeMonitor:function(){var Q=(YAHOO.env.ua.gecko&&this.platform=="windows");if(Q){var P=this;setTimeout(function(){P._initResizeMonitor();},0);}else{this._initResizeMonitor();}},_initResizeMonitor:function(){var P,R,T;function V(){G.textResizeEvent.fire();}if(!YAHOO.env.ua.opera){R=F.get("_yuiResizeMonitor");var U=this._supportsCWResize();if(!R){R=document.createElement("iframe");if(this.isSecure&&G.RESIZE_MONITOR_SECURE_URL&&YAHOO.env.ua.ie){R.src=G.RESIZE_MONITOR_SECURE_URL;}if(!U){T=["<html><head><script ",'type="text/javascript">',"window.onresize=function(){window.parent.","YAHOO.widget.Module.textResizeEvent.","fire();};<","/script></head>","<body></body></html>"].join("");R.src="data:text/html;charset=utf-8,"+encodeURIComponent(T);}R.id="_yuiResizeMonitor";R.style.position="absolute";R.style.visibility="hidden";var Q=document.body,S=Q.firstChild;if(S){Q.insertBefore(R,S);}else{Q.appendChild(R);}R.style.width="10em";R.style.height="10em";R.style.top=(-1*R.offsetHeight)+"px";R.style.left=(-1*R.offsetWidth)+"px";R.style.borderWidth="0";R.style.visibility="visible";if(YAHOO.env.ua.webkit){P=R.contentWindow.document;P.open();P.close();}}if(R&&R.contentWindow){G.textResizeEvent.subscribe(this.onDomResize,this,true);if(!G.textResizeInitialized){if(U){if(!M.on(R.contentWindow,"resize",V)){M.on(R,"resize",V);}}G.textResizeInitialized=true;}this.resizeMonitor=R;}}},_supportsCWResize:function(){var P=true;if(YAHOO.env.ua.gecko&&YAHOO.env.ua.gecko<=1.8){P=false;}return P;},onDomResize:function(S,R){var Q=-1*this.resizeMonitor.offsetWidth,P=-1*this.resizeMonitor.offsetHeight;this.resizeMonitor.style.top=P+"px";this.resizeMonitor.style.left=Q+"px";},setHeader:function(Q){var P=this.header||(this.header=J());if(Q.nodeName){P.innerHTML="";P.appendChild(Q);}else{P.innerHTML=Q;}this.changeHeaderEvent.fire(Q);this.changeContentEvent.fire();},appendToHeader:function(Q){var P=this.header||(this.header=J());P.appendChild(Q);this.changeHeaderEvent.fire(Q);this.changeContentEvent.fire();},setBody:function(Q){var P=this.body||(this.body=B());if(Q.nodeName){P.innerHTML="";P.appendChild(Q);}else{P.innerHTML=Q;}this.changeBodyEvent.fire(Q);this.changeContentEvent.fire();},appendToBody:function(Q){var P=this.body||(this.body=B());P.appendChild(Q);this.changeBodyEvent.fire(Q);this.changeContentEvent.fire();},setFooter:function(Q){var P=this.footer||(this.footer=C());if(Q.nodeName){P.innerHTML="";P.appendChild(Q);}else{P.innerHTML=Q;}this.changeFooterEvent.fire(Q);this.changeContentEvent.fire();},appendToFooter:function(Q){var P=this.footer||(this.footer=C());P.appendChild(Q);this.changeFooterEvent.fire(Q);this.changeContentEvent.fire();},render:function(R,P){var S=this,T;function Q(U){if(typeof U=="string"){U=document.getElementById(U);}if(U){S._addToParent(U,S.element);S.appendEvent.fire();}}this.beforeRenderEvent.fire();if(!P){P=this.element;}if(R){Q(R);}else{if(!F.inDocument(this.element)){return false;}}if(this.header&&!F.inDocument(this.header)){T=P.firstChild;if(T){P.insertBefore(this.header,T);}else{P.appendChild(this.header);}}if(this.body&&!F.inDocument(this.body)){if(this.footer&&F.isAncestor(this.moduleElement,this.footer)){P.insertBefore(this.body,this.footer);}else{P.appendChild(this.body);}}if(this.footer&&!F.inDocument(this.footer)){P.appendChild(this.footer);}this.renderEvent.fire();return true;},destroy:function(){var P,Q;if(this.element){M.purgeElement(this.element,true);P=this.element.parentNode;}if(P){P.removeChild(this.element);}this.element=null;this.header=null;this.body=null;this.footer=null;G.textResizeEvent.unsubscribe(this.onDomResize,this);this.cfg.destroy();this.cfg=null;this.destroyEvent.fire();for(Q in this){if(Q instanceof L){Q.unsubscribeAll();}}},show:function(){this.cfg.setProperty("visible",true);},hide:function(){this.cfg.setProperty("visible",false);},configVisible:function(Q,P,R){var S=P[0];if(S){this.beforeShowEvent.fire();F.setStyle(this.element,"display","block");this.showEvent.fire();}else{this.beforeHideEvent.fire();F.setStyle(this.element,"display","none");this.hideEvent.fire();}},configMonitorResize:function(R,Q,S){var P=Q[0];if(P){this.initResizeMonitor();}else{G.textResizeEvent.unsubscribe(this.onDomResize,this,true);this.resizeMonitor=null;}},_addToParent:function(P,Q){if(!this.cfg.getProperty("appendtodocumentbody")&&P===document.body&&P.firstChild){P.insertBefore(Q,P.firstChild);}else{P.appendChild(Q);}},toString:function(){return"Module "+this.id;}};YAHOO.lang.augmentProto(G,YAHOO.util.EventProvider);}());(function(){YAHOO.widget.Overlay=function(L,K){YAHOO.widget.Overlay.superclass.constructor.call(this,L,K);};var F=YAHOO.lang,I=YAHOO.util.CustomEvent,E=YAHOO.widget.Module,J=YAHOO.util.Event,D=YAHOO.util.Dom,C=YAHOO.util.Config,B=YAHOO.widget.Overlay,G,A={"BEFORE_MOVE":"beforeMove","MOVE":"move"},H={"X":{key:"x",validator:F.isNumber,suppressEvent:true,supercedes:["iframe"]},"Y":{key:"y",validator:F.isNumber,suppressEvent:true,supercedes:["iframe"]},"XY":{key:"xy",suppressEvent:true,supercedes:["iframe"]},"CONTEXT":{key:"context",suppressEvent:true,supercedes:["iframe"]},"FIXED_CENTER":{key:"fixedcenter",value:false,validator:F.isBoolean,supercedes:["iframe","visible"]},"WIDTH":{key:"width",suppressEvent:true,supercedes:["context","fixedcenter","iframe"]},"HEIGHT":{key:"height",suppressEvent:true,supercedes:["context","fixedcenter","iframe"]},"ZINDEX":{key:"zindex",value:null},"CONSTRAIN_TO_VIEWPORT":{key:"constraintoviewport",value:false,validator:F.isBoolean,supercedes:["iframe","x","y","xy"]},"IFRAME":{key:"iframe",value:(YAHOO.env.ua.ie==6?true:false),validator:F.isBoolean,supercedes:["zindex"]}};B.IFRAME_SRC="javascript:false;";B.IFRAME_OFFSET=3;B.VIEWPORT_OFFSET=10;B.TOP_LEFT="tl";B.TOP_RIGHT="tr";B.BOTTOM_LEFT="bl";B.BOTTOM_RIGHT="br";B.CSS_OVERLAY="yui-overlay";B.windowScrollEvent=new I("windowScroll");B.windowResizeEvent=new I("windowResize");B.windowScrollHandler=function(K){if(YAHOO.env.ua.ie){if(!window.scrollEnd){window.scrollEnd=-1;}clearTimeout(window.scrollEnd);window.scrollEnd=setTimeout(function(){B.windowScrollEvent.fire();},1);}else{B.windowScrollEvent.fire();}};B.windowResizeHandler=function(K){if(YAHOO.env.ua.ie){if(!window.resizeEnd){window.resizeEnd=-1;}clearTimeout(window.resizeEnd);window.resizeEnd=setTimeout(function(){B.windowResizeEvent.fire();},100);}else{B.windowResizeEvent.fire();}};B._initialized=null;if(B._initialized===null){J.on(window,"scroll",B.windowScrollHandler);J.on(window,"resize",B.windowResizeHandler);B._initialized=true;}YAHOO.extend(B,E,{init:function(L,K){B.superclass.init.call(this,L);this.beforeInitEvent.fire(B);D.addClass(this.element,B.CSS_OVERLAY);if(K){this.cfg.applyConfig(K,true);}if(this.platform=="mac"&&YAHOO.env.ua.gecko){if(!C.alreadySubscribed(this.showEvent,this.showMacGeckoScrollbars,this)){this.showEvent.subscribe(this.showMacGeckoScrollbars,this,true);}if(!C.alreadySubscribed(this.hideEvent,this.hideMacGeckoScrollbars,this)){this.hideEvent.subscribe(this.hideMacGeckoScrollbars,this,true);}}this.initEvent.fire(B);},initEvents:function(){B.superclass.initEvents.call(this);var K=I.LIST;this.beforeMoveEvent=this.createEvent(A.BEFORE_MOVE);this.beforeMoveEvent.signature=K;this.moveEvent=this.createEvent(A.MOVE);this.moveEvent.signature=K;},initDefaultConfig:function(){B.superclass.initDefaultConfig.call(this);this.cfg.addProperty(H.X.key,{handler:this.configX,validator:H.X.validator,suppressEvent:H.X.suppressEvent,supercedes:H.X.supercedes});this.cfg.addProperty(H.Y.key,{handler:this.configY,validator:H.Y.validator,suppressEvent:H.Y.suppressEvent,supercedes:H.Y.supercedes});this.cfg.addProperty(H.XY.key,{handler:this.configXY,suppressEvent:H.XY.suppressEvent,supercedes:H.XY.supercedes});this.cfg.addProperty(H.CONTEXT.key,{handler:this.configContext,suppressEvent:H.CONTEXT.suppressEvent,supercedes:H.CONTEXT.supercedes});this.cfg.addProperty(H.FIXED_CENTER.key,{handler:this.configFixedCenter,value:H.FIXED_CENTER.value,validator:H.FIXED_CENTER.validator,supercedes:H.FIXED_CENTER.supercedes});this.cfg.addProperty(H.WIDTH.key,{handler:this.configWidth,suppressEvent:H.WIDTH.suppressEvent,supercedes:H.WIDTH.supercedes});this.cfg.addProperty(H.HEIGHT.key,{handler:this.configHeight,suppressEvent:H.HEIGHT.suppressEvent,supercedes:H.HEIGHT.supercedes});this.cfg.addProperty(H.ZINDEX.key,{handler:this.configzIndex,value:H.ZINDEX.value});this.cfg.addProperty(H.CONSTRAIN_TO_VIEWPORT.key,{handler:this.configConstrainToViewport,value:H.CONSTRAIN_TO_VIEWPORT.value,validator:H.CONSTRAIN_TO_VIEWPORT.validator,supercedes:H.CONSTRAIN_TO_VIEWPORT.supercedes});this.cfg.addProperty(H.IFRAME.key,{handler:this.configIframe,value:H.IFRAME.value,validator:H.IFRAME.validator,supercedes:H.IFRAME.supercedes});},moveTo:function(K,L){this.cfg.setProperty("xy",[K,L]);},hideMacGeckoScrollbars:function(){D.removeClass(this.element,"show-scrollbars");D.addClass(this.element,"hide-scrollbars");},showMacGeckoScrollbars:function(){D.removeClass(this.element,"hide-scrollbars");D.addClass(this.element,"show-scrollbars");},configVisible:function(N,K,T){var M=K[0],O=D.getStyle(this.element,"visibility"),U=this.cfg.getProperty("effect"),R=[],Q=(this.platform=="mac"&&YAHOO.env.ua.gecko),b=C.alreadySubscribed,S,L,a,Y,X,W,Z,V,P;if(O=="inherit"){a=this.element.parentNode;while(a.nodeType!=9&&a.nodeType!=11){O=D.getStyle(a,"visibility");if(O!="inherit"){break;}a=a.parentNode;}if(O=="inherit"){O="visible";}}if(U){if(U instanceof Array){V=U.length;for(Y=0;Y<V;Y++){S=U[Y];R[R.length]=S.effect(this,S.duration);}}else{R[R.length]=U.effect(this,U.duration);}}if(M){if(Q){this.showMacGeckoScrollbars();}if(U){if(M){if(O!="visible"||O===""){this.beforeShowEvent.fire();P=R.length;for(X=0;X<P;X++){L=R[X];if(X===0&&!b(L.animateInCompleteEvent,this.showEvent.fire,this.showEvent)){L.animateInCompleteEvent.subscribe(this.showEvent.fire,this.showEvent,true);}L.animateIn();}}}}else{if(O!="visible"||O===""){this.beforeShowEvent.fire();D.setStyle(this.element,"visibility","visible");this.cfg.refireEvent("iframe");this.showEvent.fire();}}}else{if(Q){this.hideMacGeckoScrollbars();}if(U){if(O=="visible"){this.beforeHideEvent.fire();P=R.length;for(W=0;W<P;W++){Z=R[W];if(W===0&&!b(Z.animateOutCompleteEvent,this.hideEvent.fire,this.hideEvent)){Z.animateOutCompleteEvent.subscribe(this.hideEvent.fire,this.hideEvent,true);}Z.animateOut();}}else{if(O===""){D.setStyle(this.element,"visibility","hidden");}}}else{if(O=="visible"||O===""){this.beforeHideEvent.fire();D.setStyle(this.element,"visibility","hidden");this.hideEvent.fire();}}}},doCenterOnDOMEvent:function(){if(this.cfg.getProperty("visible")){this.center();}},configFixedCenter:function(O,M,P){var Q=M[0],L=C.alreadySubscribed,N=B.windowResizeEvent,K=B.windowScrollEvent;if(Q){this.center();if(!L(this.beforeShowEvent,this.center,this)){this.beforeShowEvent.subscribe(this.center);}if(!L(N,this.doCenterOnDOMEvent,this)){N.subscribe(this.doCenterOnDOMEvent,this,true);}if(!L(K,this.doCenterOnDOMEvent,this)){K.subscribe(this.doCenterOnDOMEvent,this,true);}}else{this.beforeShowEvent.unsubscribe(this.center);N.unsubscribe(this.doCenterOnDOMEvent,this);K.unsubscribe(this.doCenterOnDOMEvent,this);}},configHeight:function(N,L,O){var K=L[0],M=this.element;D.setStyle(M,"height",K);this.cfg.refireEvent("iframe");},configWidth:function(N,K,O){var M=K[0],L=this.element;D.setStyle(L,"width",M);this.cfg.refireEvent("iframe");},configzIndex:function(M,K,N){var O=K[0],L=this.element;if(!O){O=D.getStyle(L,"zIndex");if(!O||isNaN(O)){O=0;}}if(this.iframe||this.cfg.getProperty("iframe")===true){if(O<=0){O=1;}}D.setStyle(L,"zIndex",O);this.cfg.setProperty("zIndex",O,true);if(this.iframe){this.stackIframe();}},configXY:function(M,L,N){var P=L[0],K=P[0],O=P[1];this.cfg.setProperty("x",K);this.cfg.setProperty("y",O);this.beforeMoveEvent.fire([K,O]);K=this.cfg.getProperty("x");O=this.cfg.getProperty("y");this.cfg.refireEvent("iframe");this.moveEvent.fire([K,O]);},configX:function(M,L,N){var K=L[0],O=this.cfg.getProperty("y");this.cfg.setProperty("x",K,true);this.cfg.setProperty("y",O,true);this.beforeMoveEvent.fire([K,O]);K=this.cfg.getProperty("x");O=this.cfg.getProperty("y");D.setX(this.element,K,true);this.cfg.setProperty("xy",[K,O],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([K,O]);},configY:function(M,L,N){var K=this.cfg.getProperty("x"),O=L[0];this.cfg.setProperty("x",K,true);this.cfg.setProperty("y",O,true);this.beforeMoveEvent.fire([K,O]);K=this.cfg.getProperty("x");O=this.cfg.getProperty("y");D.setY(this.element,O,true);this.cfg.setProperty("xy",[K,O],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([K,O]);},showIframe:function(){var L=this.iframe,K;if(L){K=this.element.parentNode;if(K!=L.parentNode){this._addToParent(K,L);}L.style.display="block";}},hideIframe:function(){if(this.iframe){this.iframe.style.display="none";}},syncIframe:function(){var K=this.iframe,M=this.element,O=B.IFRAME_OFFSET,L=(O*2),N;if(K){K.style.width=(M.offsetWidth+L+"px");K.style.height=(M.offsetHeight+L+"px");N=this.cfg.getProperty("xy");if(!F.isArray(N)||(isNaN(N[0])||isNaN(N[1]))){this.syncPosition();N=this.cfg.getProperty("xy");}D.setXY(K,[(N[0]-O),(N[1]-O)]);}},stackIframe:function(){if(this.iframe){var K=D.getStyle(this.element,"zIndex");if(!YAHOO.lang.isUndefined(K)&&!isNaN(K)){D.setStyle(this.iframe,"zIndex",(K-1));}}},configIframe:function(N,M,O){var K=M[0];function P(){var R=this.iframe,S=this.element,T;if(!R){if(!G){G=document.createElement("iframe");if(this.isSecure){G.src=B.IFRAME_SRC;}if(YAHOO.env.ua.ie){G.style.filter="alpha(opacity=0)";G.frameBorder=0;}else{G.style.opacity="0";}G.style.position="absolute";G.style.border="none";G.style.margin="0";G.style.padding="0";G.style.display="none";}R=G.cloneNode(false);T=S.parentNode;var Q=T||document.body;this._addToParent(Q,R);this.iframe=R;}this.showIframe();this.syncIframe();this.stackIframe();if(!this._hasIframeEventListeners){this.showEvent.subscribe(this.showIframe);this.hideEvent.subscribe(this.hideIframe);this.changeContentEvent.subscribe(this.syncIframe);this._hasIframeEventListeners=true;}}function L(){P.call(this);this.beforeShowEvent.unsubscribe(L);this._iframeDeferred=false;}if(K){if(this.cfg.getProperty("visible")){P.call(this);}else{if(!this._iframeDeferred){this.beforeShowEvent.subscribe(L);this._iframeDeferred=true;}}}else{this.hideIframe();if(this._hasIframeEventListeners){this.showEvent.unsubscribe(this.showIframe);this.hideEvent.unsubscribe(this.hideIframe);this.changeContentEvent.unsubscribe(this.syncIframe);this._hasIframeEventListeners=false;}}},_primeXYFromDOM:function(){if(YAHOO.lang.isUndefined(this.cfg.getProperty("xy"))){this.syncPosition();this.cfg.refireEvent("xy");this.beforeShowEvent.unsubscribe(this._primeXYFromDOM);}},configConstrainToViewport:function(L,K,M){var N=K[0];if(N){if(!C.alreadySubscribed(this.beforeMoveEvent,this.enforceConstraints,this)){this.beforeMoveEvent.subscribe(this.enforceConstraints,this,true);}if(!C.alreadySubscribed(this.beforeShowEvent,this._primeXYFromDOM)){this.beforeShowEvent.subscribe(this._primeXYFromDOM);}}else{this.beforeShowEvent.unsubscribe(this._primeXYFromDOM);this.beforeMoveEvent.unsubscribe(this.enforceConstraints,this);}},configContext:function(M,L,O){var Q=L[0],N,P,K;if(Q){N=Q[0];P=Q[1];K=Q[2];if(N){if(typeof N=="string"){this.cfg.setProperty("context",[document.getElementById(N),P,K],true);}if(P&&K){this.align(P,K);}}}},align:function(L,K){var Q=this.cfg.getProperty("context"),P=this,O,N,R;function M(S,T){switch(L){case B.TOP_LEFT:P.moveTo(T,S);break;case B.TOP_RIGHT:P.moveTo((T-N.offsetWidth),S);break;case B.BOTTOM_LEFT:P.moveTo(T,(S-N.offsetHeight));break;case B.BOTTOM_RIGHT:P.moveTo((T-N.offsetWidth),(S-N.offsetHeight));break;}}if(Q){O=Q[0];N=this.element;P=this;if(!L){L=Q[1];}if(!K){K=Q[2];}if(N&&O){R=D.getRegion(O);switch(K){case B.TOP_LEFT:M(R.top,R.left);break;case B.TOP_RIGHT:M(R.top,R.right);break;case B.BOTTOM_LEFT:M(R.bottom,R.left);break;case B.BOTTOM_RIGHT:M(R.bottom,R.right);break;}}}},enforceConstraints:function(L,K,M){var O=K[0];var N=this.getConstrainedXY(O[0],O[1]);this.cfg.setProperty("x",N[0],true);this.cfg.setProperty("y",N[1],true);this.cfg.setProperty("xy",N,true);},getConstrainedXY:function(V,T){var N=B.VIEWPORT_OFFSET,U=D.getViewportWidth(),Q=D.getViewportHeight(),M=this.element.offsetHeight,S=this.element.offsetWidth,Y=D.getDocumentScrollLeft(),W=D.getDocumentScrollTop();var P=V;var L=T;if(S+N<U){var R=Y+N;var X=Y+U-S-N;if(V<R){P=R;}else{if(V>X){P=X;}}}else{P=N+Y;}if(M+N<Q){var O=W+N;var K=W+Q-M-N;if(T<O){L=O;}else{if(T>K){L=K;}}}else{L=N+W;}return[P,L];},center:function(){var N=B.VIEWPORT_OFFSET,O=this.element.offsetWidth,M=this.element.offsetHeight,L=D.getViewportWidth(),P=D.getViewportHeight(),K,Q;if(O<L){K=(L/2)-(O/2)+D.getDocumentScrollLeft();}else{K=N+D.getDocumentScrollLeft();}if(M<P){Q=(P/2)-(M/2)+D.getDocumentScrollTop();}else{Q=N+D.getDocumentScrollTop();}this.cfg.setProperty("xy",[parseInt(K,10),parseInt(Q,10)]);this.cfg.refireEvent("iframe");},syncPosition:function(){var K=D.getXY(this.element);this.cfg.setProperty("x",K[0],true);this.cfg.setProperty("y",K[1],true);this.cfg.setProperty("xy",K,true);},onDomResize:function(M,L){var K=this;B.superclass.onDomResize.call(this,M,L);setTimeout(function(){K.syncPosition();K.cfg.refireEvent("iframe");K.cfg.refireEvent("context");},0);},bringToTop:function(){var O=[],N=this.element;function R(V,U){var X=D.getStyle(V,"zIndex"),W=D.getStyle(U,"zIndex"),T=(!X||isNaN(X))?0:parseInt(X,10),S=(!W||isNaN(W))?0:parseInt(W,10);if(T>S){return-1;}else{if(T<S){return 1;}else{return 0;}}}function M(U){var S=D.hasClass(U,B.CSS_OVERLAY),T=YAHOO.widget.Panel;if(S&&!D.isAncestor(N,S)){if(T&&D.hasClass(U,T.CSS_PANEL)){O[O.length]=U.parentNode;}else{O[O.length]=U;}}}D.getElementsBy(M,"DIV",document.body);O.sort(R);var K=O[0],Q;if(K){Q=D.getStyle(K,"zIndex");if(!isNaN(Q)){var P=false;if(K!=N){P=true;}else{if(O.length>1){var L=D.getStyle(O[1],"zIndex");if(!isNaN(L)&&(Q==L)){P=true;}}}if(P){this.cfg.setProperty("zindex",(parseInt(Q,10)+2));}}}},destroy:function(){if(this.iframe){this.iframe.parentNode.removeChild(this.iframe);}this.iframe=null;B.windowResizeEvent.unsubscribe(this.doCenterOnDOMEvent,this);B.windowScrollEvent.unsubscribe(this.doCenterOnDOMEvent,this);B.superclass.destroy.call(this);},toString:function(){return"Overlay "+this.id;}});}());(function(){YAHOO.widget.OverlayManager=function(G){this.init(G);};var D=YAHOO.widget.Overlay,C=YAHOO.util.Event,E=YAHOO.util.Dom,B=YAHOO.util.Config,F=YAHOO.util.CustomEvent,A=YAHOO.widget.OverlayManager;A.CSS_FOCUSED="focused";A.prototype={constructor:A,overlays:null,initDefaultConfig:function(){this.cfg.addProperty("overlays",{suppressEvent:true});this.cfg.addProperty("focusevent",{value:"mousedown"});},init:function(I){this.cfg=new B(this);this.initDefaultConfig();if(I){this.cfg.applyConfig(I,true);}this.cfg.fireQueue();var H=null;this.getActive=function(){return H;};this.focus=function(J){var K=this.find(J);if(K){if(H!=K){if(H){H.blur();}this.bringToTop(K);H=K;E.addClass(H.element,A.CSS_FOCUSED);K.focusEvent.fire();}}};this.remove=function(K){var M=this.find(K),J;if(M){if(H==M){H=null;}var L=(M.element===null&&M.cfg===null)?true:false;if(!L){J=E.getStyle(M.element,"zIndex");M.cfg.setProperty("zIndex",-1000,true);}this.overlays.sort(this.compareZIndexDesc);this.overlays=this.overlays.slice(0,(this.overlays.length-1));M.hideEvent.unsubscribe(M.blur);M.destroyEvent.unsubscribe(this._onOverlayDestroy,M);if(!L){C.removeListener(M.element,this.cfg.getProperty("focusevent"),this._onOverlayElementFocus);M.cfg.setProperty("zIndex",J,true);M.cfg.setProperty("manager",null);}M.focusEvent.unsubscribeAll();M.blurEvent.unsubscribeAll();M.focusEvent=null;M.blurEvent=null;M.focus=null;M.blur=null;}};this.blurAll=function(){var K=this.overlays.length,J;if(K>0){J=K-1;do{this.overlays[J].blur();}while(J--);}};this._onOverlayBlur=function(K,J){H=null;};var G=this.cfg.getProperty("overlays");if(!this.overlays){this.overlays=[];}if(G){this.register(G);this.overlays.sort(this.compareZIndexDesc);}},_onOverlayElementFocus:function(I){var G=C.getTarget(I),H=this.close;if(H&&(G==H||E.isAncestor(H,G))){this.blur();}else{this.focus();}},_onOverlayDestroy:function(H,G,I){this.remove(I);},register:function(G){var K=this,L,I,H,J;if(G instanceof D){G.cfg.addProperty("manager",{value:this});G.focusEvent=G.createEvent("focus");G.focusEvent.signature=F.LIST;G.blurEvent=G.createEvent("blur");G.blurEvent.signature=F.LIST;G.focus=function(){K.focus(this);};G.blur=function(){if(K.getActive()==this){E.removeClass(this.element,A.CSS_FOCUSED);this.blurEvent.fire();}};G.blurEvent.subscribe(K._onOverlayBlur);G.hideEvent.subscribe(G.blur);G.destroyEvent.subscribe(this._onOverlayDestroy,G,this);C.on(G.element,this.cfg.getProperty("focusevent"),this._onOverlayElementFocus,null,G);L=E.getStyle(G.element,"zIndex");if(!isNaN(L)){G.cfg.setProperty("zIndex",parseInt(L,10));}else{G.cfg.setProperty("zIndex",0);}this.overlays.push(G);this.bringToTop(G);return true;}else{if(G instanceof Array){I=0;J=G.length;for(H=0;H<J;H++){if(this.register(G[H])){I++;}}if(I>0){return true;}}else{return false;}}},bringToTop:function(M){var I=this.find(M),L,G,J;if(I){J=this.overlays;J.sort(this.compareZIndexDesc);G=J[0];if(G){L=E.getStyle(G.element,"zIndex");if(!isNaN(L)){var K=false;if(G!==I){K=true;}else{if(J.length>1){var H=E.getStyle(J[1].element,"zIndex");if(!isNaN(H)&&(L==H)){K=true;}}}if(K){I.cfg.setProperty("zindex",(parseInt(L,10)+2));}}J.sort(this.compareZIndexDesc);}}},find:function(G){var I=this.overlays,J=I.length,H;if(J>0){H=J-1;if(G instanceof D){do{if(I[H]==G){return I[H];}}while(H--);}else{if(typeof G=="string"){do{if(I[H].id==G){return I[H];}}while(H--);}}return null;}},compareZIndexDesc:function(J,I){var H=(J.cfg)?J.cfg.getProperty("zIndex"):null,G=(I.cfg)?I.cfg.getProperty("zIndex"):null;if(H===null&&G===null){return 0;}else{if(H===null){return 1;}else{if(G===null){return-1;}else{if(H>G){return-1;}else{if(H<G){return 1;}else{return 0;}}}}}},showAll:function(){var H=this.overlays,I=H.length,G;if(I>0){G=I-1;do{H[G].show();}while(G--);}},hideAll:function(){var H=this.overlays,I=H.length,G;if(I>0){G=I-1;do{H[G].hide();}while(G--);}},toString:function(){return"OverlayManager";}};}());(function(){YAHOO.widget.Tooltip=function(N,M){YAHOO.widget.Tooltip.superclass.constructor.call(this,N,M);};var E=YAHOO.lang,L=YAHOO.util.Event,K=YAHOO.util.CustomEvent,C=YAHOO.util.Dom,G=YAHOO.widget.Tooltip,F,H={"PREVENT_OVERLAP":{key:"preventoverlap",value:true,validator:E.isBoolean,supercedes:["x","y","xy"]},"SHOW_DELAY":{key:"showdelay",value:200,validator:E.isNumber},"AUTO_DISMISS_DELAY":{key:"autodismissdelay",value:5000,validator:E.isNumber},"HIDE_DELAY":{key:"hidedelay",value:250,validator:E.isNumber},"TEXT":{key:"text",suppressEvent:true},"CONTAINER":{key:"container"},"DISABLED":{key:"disabled",value:false,suppressEvent:true}},A={"CONTEXT_MOUSE_OVER":"contextMouseOver","CONTEXT_MOUSE_OUT":"contextMouseOut","CONTEXT_TRIGGER":"contextTrigger"};G.CSS_TOOLTIP="yui-tt";function I(N,M,O){var R=O[0],P=O[1],Q=this.cfg,S=Q.getProperty("width");if(S==P){Q.setProperty("width",R);}this.unsubscribe("hide",this._onHide,O);}function D(N,M){var O=document.body,S=this.cfg,R=S.getProperty("width"),P,Q;if((!R||R=="auto")&&(S.getProperty("container")!=O||S.getProperty("x")>=C.getViewportWidth()||S.getProperty("y")>=C.getViewportHeight())){Q=this.element.cloneNode(true);Q.style.visibility="hidden";Q.style.top="0px";Q.style.left="0px";O.appendChild(Q);P=(Q.offsetWidth+"px");O.removeChild(Q);Q=null;S.setProperty("width",P);S.refireEvent("xy");this.subscribe("hide",I,[(R||""),P]);}}function B(N,M,O){this.render(O);}function J(){L.onDOMReady(B,this.cfg.getProperty("container"),this);}YAHOO.extend(G,YAHOO.widget.Overlay,{init:function(N,M){G.superclass.init.call(this,N);this.beforeInitEvent.fire(G);C.addClass(this.element,G.CSS_TOOLTIP);if(M){this.cfg.applyConfig(M,true);}this.cfg.queueProperty("visible",false);this.cfg.queueProperty("constraintoviewport",true);this.setBody("");this.subscribe("beforeShow",D);this.subscribe("init",J);this.subscribe("render",this.onRender);this.initEvent.fire(G);},initEvents:function(){G.superclass.initEvents.call(this);var M=K.LIST;this.contextMouseOverEvent=this.createEvent(A.CONTEXT_MOUSE_OVER);this.contextMouseOverEvent.signature=M;this.contextMouseOutEvent=this.createEvent(A.CONTEXT_MOUSE_OUT);this.contextMouseOutEvent.signature=M;this.contextTriggerEvent=this.createEvent(A.CONTEXT_TRIGGER);this.contextTriggerEvent.signature=M;},initDefaultConfig:function(){G.superclass.initDefaultConfig.call(this);this.cfg.addProperty(H.PREVENT_OVERLAP.key,{value:H.PREVENT_OVERLAP.value,validator:H.PREVENT_OVERLAP.validator,supercedes:H.PREVENT_OVERLAP.supercedes});this.cfg.addProperty(H.SHOW_DELAY.key,{handler:this.configShowDelay,value:200,validator:H.SHOW_DELAY.validator});this.cfg.addProperty(H.AUTO_DISMISS_DELAY.key,{handler:this.configAutoDismissDelay,value:H.AUTO_DISMISS_DELAY.value,validator:H.AUTO_DISMISS_DELAY.validator});this.cfg.addProperty(H.HIDE_DELAY.key,{handler:this.configHideDelay,value:H.HIDE_DELAY.value,validator:H.HIDE_DELAY.validator});this.cfg.addProperty(H.TEXT.key,{handler:this.configText,suppressEvent:H.TEXT.suppressEvent});this.cfg.addProperty(H.CONTAINER.key,{handler:this.configContainer,value:document.body});this.cfg.addProperty(H.DISABLED.key,{handler:this.configContainer,value:H.DISABLED.value,supressEvent:H.DISABLED.suppressEvent});},configText:function(N,M,O){var P=M[0];if(P){this.setBody(P);}},configContainer:function(O,N,P){var M=N[0];if(typeof M=="string"){this.cfg.setProperty("container",document.getElementById(M),true);}},_removeEventListeners:function(){var P=this._context,M,O,N;if(P){M=P.length;if(M>0){N=M-1;do{O=P[N];L.removeListener(O,"mouseover",this.onContextMouseOver);L.removeListener(O,"mousemove",this.onContextMouseMove);L.removeListener(O,"mouseout",this.onContextMouseOut);}while(N--);}}},configContext:function(R,N,S){var Q=N[0],T,M,P,O;if(Q){if(!(Q instanceof Array)){if(typeof Q=="string"){this.cfg.setProperty("context",[document.getElementById(Q)],true);}else{this.cfg.setProperty("context",[Q],true);}Q=this.cfg.getProperty("context");}this._removeEventListeners();this._context=Q;T=this._context;if(T){M=T.length;if(M>0){O=M-1;do{P=T[O];L.on(P,"mouseover",this.onContextMouseOver,this);L.on(P,"mousemove",this.onContextMouseMove,this);L.on(P,"mouseout",this.onContextMouseOut,this);}while(O--);}}}},onContextMouseMove:function(N,M){M.pageX=L.getPageX(N);M.pageY=L.getPageY(N);},onContextMouseOver:function(O,N){var M=this;if(M.title){N._tempTitle=M.title;M.title="";}if(N.fireEvent("contextMouseOver",M,O)!==false&&!N.cfg.getProperty("disabled")){if(N.hideProcId){clearTimeout(N.hideProcId);N.hideProcId=null;}L.on(M,"mousemove",N.onContextMouseMove,N);N.showProcId=N.doShow(O,M);}},onContextMouseOut:function(O,N){var M=this;if(N._tempTitle){M.title=N._tempTitle;N._tempTitle=null;}if(N.showProcId){clearTimeout(N.showProcId);N.showProcId=null;}if(N.hideProcId){clearTimeout(N.hideProcId);N.hideProcId=null;}N.fireEvent("contextMouseOut",M,O);N.hideProcId=setTimeout(function(){N.hide();},N.cfg.getProperty("hidedelay"));},doShow:function(O,M){var P=25,N=this;if(YAHOO.env.ua.opera&&M.tagName&&M.tagName.toUpperCase()=="A"){P+=12;}return setTimeout(function(){var Q=N.cfg.getProperty("text");if(N._tempTitle&&(Q===""||YAHOO.lang.isUndefined(Q)||YAHOO.lang.isNull(Q))){N.setBody(N._tempTitle);}else{N.cfg.refireEvent("text");}N.moveTo(N.pageX,N.pageY+P);if(N.cfg.getProperty("preventoverlap")){N.preventOverlap(N.pageX,N.pageY);}L.removeListener(M,"mousemove",N.onContextMouseMove);N.contextTriggerEvent.fire(M);N.show();N.hideProcId=N.doHide();},this.cfg.getProperty("showdelay"));},doHide:function(){var M=this;return setTimeout(function(){M.hide();},this.cfg.getProperty("autodismissdelay"));},preventOverlap:function(Q,P){var M=this.element.offsetHeight,O=new YAHOO.util.Point(Q,P),N=C.getRegion(this.element);N.top-=5;N.left-=5;N.right+=5;N.bottom+=5;if(N.contains(O)){this.cfg.setProperty("y",(P-M-5));}},onRender:function(Q,P){function R(){var U=this.element,T=this._shadow;if(T){T.style.width=(U.offsetWidth+6)+"px";T.style.height=(U.offsetHeight+1)+"px";}}function N(){C.addClass(this._shadow,"yui-tt-shadow-visible");}function M(){C.removeClass(this._shadow,"yui-tt-shadow-visible");}function S(){var V=this._shadow,U,T,X,W;if(!V){U=this.element;T=YAHOO.widget.Module;X=YAHOO.env.ua.ie;W=this;if(!F){F=document.createElement("div");F.className="yui-tt-shadow";}V=F.cloneNode(false);U.appendChild(V);this._shadow=V;N.call(this);this.subscribe("beforeShow",N);this.subscribe("beforeHide",M);if(X==6||(X==7&&document.compatMode=="BackCompat")){window.setTimeout(function(){R.call(W);},0);this.cfg.subscribeToConfigEvent("width",R);this.cfg.subscribeToConfigEvent("height",R);this.subscribe("changeContent",R);T.textResizeEvent.subscribe(R,this,true);this.subscribe("destroy",function(){T.textResizeEvent.unsubscribe(R,this);});}}}function O(){S.call(this);this.unsubscribe("beforeShow",O);}if(this.cfg.getProperty("visible")){S.call(this);}else{this.subscribe("beforeShow",O);}},destroy:function(){this._removeEventListeners();G.superclass.destroy.call(this);},toString:function(){return"Tooltip "+this.id;}});}());(function(){YAHOO.widget.Panel=function(R,Q){YAHOO.widget.Panel.superclass.constructor.call(this,R,Q);};var I=YAHOO.lang,E=YAHOO.util.DD,F=YAHOO.util.Dom,P=YAHOO.util.Event,B=YAHOO.widget.Overlay,O=YAHOO.util.CustomEvent,C=YAHOO.util.Config,N=YAHOO.widget.Panel,H,L,D,A={"SHOW_MASK":"showMask","HIDE_MASK":"hideMask","DRAG":"drag"},J={"CLOSE":{key:"close",value:true,validator:I.isBoolean,supercedes:["visible"]},"DRAGGABLE":{key:"draggable",value:(E?true:false),validator:I.isBoolean,supercedes:["visible"]},"DRAG_ONLY":{key:"dragonly",value:false,validator:I.isBoolean,supercedes:["draggable"]},"UNDERLAY":{key:"underlay",value:"shadow",supercedes:["visible"]},"MODAL":{key:"modal",value:false,validator:I.isBoolean,supercedes:["visible","zindex"]},"KEY_LISTENERS":{key:"keylisteners",suppressEvent:true,supercedes:["visible"]}};N.CSS_PANEL="yui-panel";N.CSS_PANEL_CONTAINER="yui-panel-container";N.FOCUSABLE=["a","button","select","textarea","input"];function M(R,Q){if(!this.header&&this.cfg.getProperty("draggable")){this.setHeader("&#160;");}}function K(R,Q,S){var V=S[0],T=S[1],U=this.cfg,W=U.getProperty("width");if(W==T){U.setProperty("width",V);}this.unsubscribe("hide",K,S);}function G(R,Q){var V=YAHOO.env.ua.ie,U,T,S;if(V==6||(V==7&&document.compatMode=="BackCompat")){U=this.cfg;T=U.getProperty("width");if(!T||T=="auto"){S=(this.element.offsetWidth+"px");U.setProperty("width",S);this.subscribe("hide",K,[(T||""),S]);}}}YAHOO.extend(N,B,{init:function(R,Q){N.superclass.init.call(this,R);this.beforeInitEvent.fire(N);F.addClass(this.element,N.CSS_PANEL);this.buildWrapper();if(Q){this.cfg.applyConfig(Q,true);}this.subscribe("showMask",this._addFocusHandlers);this.subscribe("hideMask",this._removeFocusHandlers);this.subscribe("beforeRender",M);this.initEvent.fire(N);},_onElementFocus:function(Q){this.blur();},_addFocusHandlers:function(Y,S){var V=this,Z="focus",U="hidden";function X(a){if(a.type!==U&&!F.isAncestor(V.element,a)){P.on(a,Z,V._onElementFocus);return true;}return false;}var W=N.FOCUSABLE,Q=W.length,T=[];for(var R=0;R<Q;R++){T=T.concat(F.getElementsBy(X,W[R]));}this.focusableElements=T;},_removeFocusHandlers:function(T,S){var V=this.focusableElements,Q=V.length,R="focus";if(V){for(var U=0;U<Q;U++){P.removeListener(V[U],R,this._onElementFocus);}}},initEvents:function(){N.superclass.initEvents.call(this);var Q=O.LIST;this.showMaskEvent=this.createEvent(A.SHOW_MASK);this.showMaskEvent.signature=Q;this.hideMaskEvent=this.createEvent(A.HIDE_MASK);this.hideMaskEvent.signature=Q;this.dragEvent=this.createEvent(A.DRAG);this.dragEvent.signature=Q;},initDefaultConfig:function(){N.superclass.initDefaultConfig.call(this);this.cfg.addProperty(J.CLOSE.key,{handler:this.configClose,value:J.CLOSE.value,validator:J.CLOSE.validator,supercedes:J.CLOSE.supercedes});this.cfg.addProperty(J.DRAGGABLE.key,{handler:this.configDraggable,value:J.DRAGGABLE.value,validator:J.DRAGGABLE.validator,supercedes:J.DRAGGABLE.supercedes});this.cfg.addProperty(J.DRAG_ONLY.key,{value:J.DRAG_ONLY.value,validator:J.DRAG_ONLY.validator,supercedes:J.DRAG_ONLY.supercedes});this.cfg.addProperty(J.UNDERLAY.key,{handler:this.configUnderlay,value:J.UNDERLAY.value,supercedes:J.UNDERLAY.supercedes});this.cfg.addProperty(J.MODAL.key,{handler:this.configModal,value:J.MODAL.value,validator:J.MODAL.validator,supercedes:J.MODAL.supercedes});this.cfg.addProperty(J.KEY_LISTENERS.key,{handler:this.configKeyListeners,suppressEvent:J.KEY_LISTENERS.suppressEvent,supercedes:J.KEY_LISTENERS.supercedes});},configClose:function(S,Q,U){var V=Q[0],R=this.close;function T(X,W){W.hide();}if(V){if(!R){if(!D){D=document.createElement("span");D.innerHTML="&#160;";D.className="container-close";}R=D.cloneNode(true);this.innerElement.appendChild(R);P.on(R,"click",T,this);this.close=R;}else{R.style.display="block";}}else{if(R){R.style.display="none";}}},configDraggable:function(R,Q,S){var T=Q[0];if(T){if(!E){this.cfg.setProperty("draggable",false);return;}if(this.header){F.setStyle(this.header,"cursor","move");this.registerDragDrop();}this.subscribe("beforeShow",G);}else{if(this.dd){this.dd.unreg();}if(this.header){F.setStyle(this.header,"cursor","auto");}this.unsubscribe("beforeShow",G);}},configUnderlay:function(b,a,V){var Z=YAHOO.env.ua,X=(this.platform=="mac"&&Z.gecko),Y=(Z.ie==6||(Z.ie==7&&document.compatMode=="BackCompat")),c=a[0].toLowerCase(),R=this.underlay,S=this.element;function d(){var e=this.underlay;F.addClass(e,"yui-force-redraw");window.setTimeout(function(){F.removeClass(e,"yui-force-redraw");},0);}function T(){var e=false;if(!R){if(!L){L=document.createElement("div");L.className="underlay";}R=L.cloneNode(false);this.element.appendChild(R);this.underlay=R;if(Y){this.sizeUnderlay();this.cfg.subscribeToConfigEvent("width",this.sizeUnderlay);this.cfg.subscribeToConfigEvent("height",this.sizeUnderlay);this.changeContentEvent.subscribe(this.sizeUnderlay);YAHOO.widget.Module.textResizeEvent.subscribe(this.sizeUnderlay,this,true);}if(Z.webkit&&Z.webkit<420){this.changeContentEvent.subscribe(d);}e=true;}}function W(){var e=T.call(this);if(!e&&Y){this.sizeUnderlay();}this._underlayDeferred=false;this.beforeShowEvent.unsubscribe(W);}function U(){if(this._underlayDeferred){this.beforeShowEvent.unsubscribe(W);this._underlayDeferred=false;}if(R){this.cfg.unsubscribeFromConfigEvent("width",this.sizeUnderlay);this.cfg.unsubscribeFromConfigEvent("height",this.sizeUnderlay);this.changeContentEvent.unsubscribe(this.sizeUnderlay);this.changeContentEvent.unsubscribe(d);YAHOO.widget.Module.textResizeEvent.unsubscribe(this.sizeUnderlay,this,true);this.element.removeChild(R);this.underlay=null;}}switch(c){case"shadow":F.removeClass(S,"matte");F.addClass(S,"shadow");break;case"matte":if(!X){U.call(this);}F.removeClass(S,"shadow");F.addClass(S,"matte");break;default:if(!X){U.call(this);}F.removeClass(S,"shadow");F.removeClass(S,"matte");break;}if((c=="shadow")||(X&&!R)){if(this.cfg.getProperty("visible")){var Q=T.call(this);if(!Q&&Y){this.sizeUnderlay();}}else{if(!this._underlayDeferred){this.beforeShowEvent.subscribe(W);this._underlayDeferred=true;}}}},configModal:function(R,Q,T){var S=Q[0];if(S){if(!this._hasModalityEventListeners){this.subscribe("beforeShow",this.buildMask);this.subscribe("beforeShow",this.bringToTop);this.subscribe("beforeShow",this.showMask);this.subscribe("hide",this.hideMask);B.windowResizeEvent.subscribe(this.sizeMask,this,true);this._hasModalityEventListeners=true;}}else{if(this._hasModalityEventListeners){if(this.cfg.getProperty("visible")){this.hideMask();this.removeMask();}this.unsubscribe("beforeShow",this.buildMask);this.unsubscribe("beforeShow",this.bringToTop);this.unsubscribe("beforeShow",this.showMask);this.unsubscribe("hide",this.hideMask);B.windowResizeEvent.unsubscribe(this.sizeMask,this);this._hasModalityEventListeners=false;}}},removeMask:function(){var R=this.mask,Q;if(R){this.hideMask();Q=R.parentNode;if(Q){Q.removeChild(R);}this.mask=null;}},configKeyListeners:function(T,Q,W){var S=Q[0],V,U,R;if(S){if(S instanceof Array){U=S.length;for(R=0;R<U;R++){V=S[R];if(!C.alreadySubscribed(this.showEvent,V.enable,V)){this.showEvent.subscribe(V.enable,V,true);}if(!C.alreadySubscribed(this.hideEvent,V.disable,V)){this.hideEvent.subscribe(V.disable,V,true);this.destroyEvent.subscribe(V.disable,V,true);}}}else{if(!C.alreadySubscribed(this.showEvent,S.enable,S)){this.showEvent.subscribe(S.enable,S,true);}if(!C.alreadySubscribed(this.hideEvent,S.disable,S)){this.hideEvent.subscribe(S.disable,S,true);this.destroyEvent.subscribe(S.disable,S,true);}}}},configHeight:function(T,R,U){var Q=R[0],S=this.innerElement;F.setStyle(S,"height",Q);this.cfg.refireEvent("iframe");},configWidth:function(T,Q,U){var S=Q[0],R=this.innerElement;F.setStyle(R,"width",S);this.cfg.refireEvent("iframe");},configzIndex:function(R,Q,T){N.superclass.configzIndex.call(this,R,Q,T);if(this.mask||this.cfg.getProperty("modal")===true){var S=F.getStyle(this.element,"zIndex");if(!S||isNaN(S)){S=0;}if(S===0){this.cfg.setProperty("zIndex",1);}else{this.stackMask();}}},buildWrapper:function(){var S=this.element.parentNode,Q=this.element,R=document.createElement("div");R.className=N.CSS_PANEL_CONTAINER;R.id=Q.id+"_c";if(S){S.insertBefore(R,Q);}R.appendChild(Q);this.element=R;this.innerElement=Q;F.setStyle(this.innerElement,"visibility","inherit");},sizeUnderlay:function(){var R=this.underlay,Q;if(R){Q=this.element;R.style.width=Q.offsetWidth+"px";R.style.height=Q.offsetHeight+"px";}},registerDragDrop:function(){var R=this;if(this.header){if(!E){return;}var Q=(this.cfg.getProperty("dragonly")===true);this.dd=new E(this.element.id,this.id,{dragOnly:Q});if(!this.header.id){this.header.id=this.id+"_h";}this.dd.startDrag=function(){var T,V,S,Y,X,W;if(YAHOO.env.ua.ie==6){F.addClass(R.element,"drag");}if(R.cfg.getProperty("constraintoviewport")){var U=B.VIEWPORT_OFFSET;T=R.element.offsetHeight;V=R.element.offsetWidth;S=F.getViewportWidth();Y=F.getViewportHeight();X=F.getDocumentScrollLeft();W=F.getDocumentScrollTop();if(T+U<Y){this.minY=W+U;this.maxY=W+Y-T-U;}else{this.minY=W+U;this.maxY=W+U;}if(V+U<S){this.minX=X+U;this.maxX=X+S-V-U;}else{this.minX=X+U;this.maxX=X+U;}this.constrainX=true;this.constrainY=true;}else{this.constrainX=false;this.constrainY=false;}R.dragEvent.fire("startDrag",arguments);};this.dd.onDrag=function(){R.syncPosition();R.cfg.refireEvent("iframe");if(this.platform=="mac"&&YAHOO.env.ua.gecko){this.showMacGeckoScrollbars();}R.dragEvent.fire("onDrag",arguments);};this.dd.endDrag=function(){if(YAHOO.env.ua.ie==6){F.removeClass(R.element,"drag");}R.dragEvent.fire("endDrag",arguments);R.moveEvent.fire(R.cfg.getProperty("xy"));};this.dd.setHandleElId(this.header.id);this.dd.addInvalidHandleType("INPUT");this.dd.addInvalidHandleType("SELECT");this.dd.addInvalidHandleType("TEXTAREA");}},buildMask:function(){var Q=this.mask;if(!Q){if(!H){H=document.createElement("div");H.className="mask";H.innerHTML="&#160;";}Q=H.cloneNode(true);Q.id=this.id+"_mask";document.body.insertBefore(Q,document.body.firstChild);this.mask=Q;if(YAHOO.env.ua.gecko&&this.platform=="mac"){F.addClass(this.mask,"block-scrollbars");}this.stackMask();}},hideMask:function(){if(this.cfg.getProperty("modal")&&this.mask){this.mask.style.display="none";this.hideMaskEvent.fire();F.removeClass(document.body,"masked");}},showMask:function(){if(this.cfg.getProperty("modal")&&this.mask){F.addClass(document.body,"masked");this.sizeMask();this.mask.style.display="block";this.showMaskEvent.fire();}},sizeMask:function(){if(this.mask){this.mask.style.height=F.getDocumentHeight()+"px";this.mask.style.width=F.getDocumentWidth()+"px";}},stackMask:function(){if(this.mask){var Q=F.getStyle(this.element,"zIndex");if(!YAHOO.lang.isUndefined(Q)&&!isNaN(Q)){F.setStyle(this.mask,"zIndex",Q-1);}}},render:function(Q){return N.superclass.render.call(this,Q,this.innerElement);},destroy:function(){B.windowResizeEvent.unsubscribe(this.sizeMask,this);this.removeMask();if(this.close){P.purgeElement(this.close);}N.superclass.destroy.call(this);},toString:function(){return"Panel "+this.id;}});}());(function(){YAHOO.widget.Dialog=function(L,K){YAHOO.widget.Dialog.superclass.constructor.call(this,L,K);};var J=YAHOO.util.Event,I=YAHOO.util.CustomEvent,D=YAHOO.util.Dom,B=YAHOO.util.KeyListener,H=YAHOO.util.Connect,F=YAHOO.widget.Dialog,E=YAHOO.lang,A={"BEFORE_SUBMIT":"beforeSubmit","SUBMIT":"submit","MANUAL_SUBMIT":"manualSubmit","ASYNC_SUBMIT":"asyncSubmit","FORM_SUBMIT":"formSubmit","CANCEL":"cancel"},G={"POST_METHOD":{key:"postmethod",value:"async"},"BUTTONS":{key:"buttons",value:"none"},"HIDEAFTERSUBMIT":{key:"hideaftersubmit",value:true}};F.CSS_DIALOG="yui-dialog";function C(){var N=this._aButtons,L,M,K;if(E.isArray(N)){L=N.length;if(L>0){K=L-1;do{M=N[K];if(YAHOO.widget.Button&&M instanceof YAHOO.widget.Button){M.destroy();}else{if(M.tagName.toUpperCase()=="BUTTON"){J.purgeElement(M);J.purgeElement(M,false);}}}while(K--);}}}YAHOO.extend(F,YAHOO.widget.Panel,{form:null,initDefaultConfig:function(){F.superclass.initDefaultConfig.call(this);this.callback={success:null,failure:null,argument:null};this.cfg.addProperty(G.POST_METHOD.key,{handler:this.configPostMethod,value:G.POST_METHOD.value,validator:function(K){if(K!="form"&&K!="async"&&K!="none"&&K!="manual"){return false;}else{return true;}}});this.cfg.addProperty(G.HIDEAFTERSUBMIT.key,{value:G.HIDEAFTERSUBMIT.value});this.cfg.addProperty(G.BUTTONS.key,{handler:this.configButtons,value:G.BUTTONS.value});},initEvents:function(){F.superclass.initEvents.call(this);var K=I.LIST;this.beforeSubmitEvent=this.createEvent(A.BEFORE_SUBMIT);this.beforeSubmitEvent.signature=K;this.submitEvent=this.createEvent(A.SUBMIT);this.submitEvent.signature=K;this.manualSubmitEvent=this.createEvent(A.MANUAL_SUBMIT);this.manualSubmitEvent.signature=K;this.asyncSubmitEvent=this.createEvent(A.ASYNC_SUBMIT);this.asyncSubmitEvent.signature=K;this.formSubmitEvent=this.createEvent(A.FORM_SUBMIT);this.formSubmitEvent.signature=K;this.cancelEvent=this.createEvent(A.CANCEL);this.cancelEvent.signature=K;},init:function(L,K){F.superclass.init.call(this,L);this.beforeInitEvent.fire(F);D.addClass(this.element,F.CSS_DIALOG);this.cfg.setProperty("visible",false);if(K){this.cfg.applyConfig(K,true);}this.showEvent.subscribe(this.focusFirst,this,true);this.beforeHideEvent.subscribe(this.blurButtons,this,true);this.subscribe("changeBody",this.registerForm);this.initEvent.fire(F);},doSubmit:function(){var Q=this.form,O=false,N=false,P,K,M,L;switch(this.cfg.getProperty("postmethod")){case"async":P=Q.elements;K=P.length;if(K>0){M=K-1;do{if(P[M].type=="file"){O=true;break;}}while(M--);}if(O&&YAHOO.env.ua.ie&&this.isSecure){N=true;}L=(Q.getAttribute("method")||"POST").toUpperCase();H.setForm(Q,O,N);H.asyncRequest(L,Q.getAttribute("action"),this.callback);this.asyncSubmitEvent.fire();break;case"form":Q.submit();this.formSubmitEvent.fire();break;case"none":case"manual":this.manualSubmitEvent.fire();break;}},registerForm:function(){var M=this.element.getElementsByTagName("form")[0],L=this,K,N;if(this.form){if(this.form==M&&D.isAncestor(this.element,this.form)){return;}else{J.purgeElement(this.form);this.form=null;}}if(!M){M=document.createElement("form");M.name="frm_"+this.id;this.body.appendChild(M);}if(M){this.form=M;J.on(M,"submit",function(O){J.stopEvent(O);this.submit();this.form.blur();},this,true);this.firstFormElement=function(){var Q,P,O=M.elements.length;for(Q=0;Q<O;Q++){P=M.elements[Q];if(P.focus&&!P.disabled&&P.type!="hidden"){return P;}}return null;}();this.lastFormElement=function(){var Q,P,O=M.elements.length;for(Q=O-1;Q>=0;Q--){P=M.elements[Q];if(P.focus&&!P.disabled&&P.type!="hidden"){return P;}}return null;}();if(this.cfg.getProperty("modal")){K=this.firstFormElement||this.firstButton;if(K){this.preventBackTab=new B(K,{shift:true,keys:9},{fn:L.focusLast,scope:L,correctScope:true});this.showEvent.subscribe(this.preventBackTab.enable,this.preventBackTab,true);this.hideEvent.subscribe(this.preventBackTab.disable,this.preventBackTab,true);}N=this.lastButton||this.lastFormElement;if(N){this.preventTabOut=new B(N,{shift:false,keys:9},{fn:L.focusFirst,scope:L,correctScope:true});this.showEvent.subscribe(this.preventTabOut.enable,this.preventTabOut,true);this.hideEvent.subscribe(this.preventTabOut.disable,this.preventTabOut,true);}}}},configClose:function(M,K,N){var O=K[0];function L(Q,P){P.cancel();}if(O){if(!this.close){this.close=document.createElement("div");D.addClass(this.close,"container-close");this.close.innerHTML="&#160;";this.innerElement.appendChild(this.close);J.on(this.close,"click",L,this);}else{this.close.style.display="block";}}else{if(this.close){this.close.style.display="none";}}},configButtons:function(U,T,O){var P=YAHOO.widget.Button,W=T[0],M=this.innerElement,V,R,L,S,Q,K,N;C.call(this);this._aButtons=null;if(E.isArray(W)){Q=document.createElement("span");Q.className="button-group";S=W.length;this._aButtons=[];for(N=0;N<S;N++){V=W[N];if(P){L=new P({label:V.text,container:Q});R=L.get("element");if(V.isDefault){L.addClass("default");this.defaultHtmlButton=R;}if(E.isFunction(V.handler)){L.set("onclick",{fn:V.handler,obj:this,scope:this});}else{if(E.isObject(V.handler)&&E.isFunction(V.handler.fn)){L.set("onclick",{fn:V.handler.fn,obj:((!E.isUndefined(V.handler.obj))?V.handler.obj:this),scope:(V.handler.scope||this)});}}this._aButtons[this._aButtons.length]=L;}else{R=document.createElement("button");R.setAttribute("type","button");if(V.isDefault){R.className="default";this.defaultHtmlButton=R;}R.innerHTML=V.text;if(E.isFunction(V.handler)){J.on(R,"click",V.handler,this,true);}else{if(E.isObject(V.handler)&&E.isFunction(V.handler.fn)){J.on(R,"click",V.handler.fn,((!E.isUndefined(V.handler.obj))?V.handler.obj:this),(V.handler.scope||this));}}Q.appendChild(R);this._aButtons[this._aButtons.length]=R;}V.htmlButton=R;if(N===0){this.firstButton=R;}if(N==(S-1)){this.lastButton=R;}}this.setFooter(Q);K=this.footer;if(D.inDocument(this.element)&&!D.isAncestor(M,K)){M.appendChild(K);}this.buttonSpan=Q;}else{Q=this.buttonSpan;K=this.footer;if(Q&&K){K.removeChild(Q);this.buttonSpan=null;this.firstButton=null;this.lastButton=null;this.defaultHtmlButton=null;}}this.cfg.refireEvent("iframe");this.cfg.refireEvent("underlay");},getButtons:function(){var K=this._aButtons;if(K){return K;}},focusFirst:function(N,L,P){var M=this.firstFormElement,K;if(L){K=L[1];if(K){J.stopEvent(K);}}if(M){try{M.focus();}catch(O){}}else{this.focusDefaultButton();}},focusLast:function(N,L,P){var Q=this.cfg.getProperty("buttons"),M=this.lastFormElement,K;if(L){K=L[1];if(K){J.stopEvent(K);}}if(Q&&E.isArray(Q)){this.focusLastButton();}else{if(M){try{M.focus();}catch(O){}}}},focusDefaultButton:function(){var K=this.defaultHtmlButton;if(K){try{K.focus();}catch(L){}}},blurButtons:function(){var P=this.cfg.getProperty("buttons"),M,O,L,K;if(P&&E.isArray(P)){M=P.length;if(M>0){K=(M-1);do{O=P[K];if(O){L=O.htmlButton;if(L){try{L.blur();}catch(N){}}}}while(K--);}}},focusFirstButton:function(){var N=this.cfg.getProperty("buttons"),M,K;if(N&&E.isArray(N)){M=N[0];if(M){K=M.htmlButton;if(K){try{K.focus();}catch(L){}}}}},focusLastButton:function(){var O=this.cfg.getProperty("buttons"),L,N,K;if(O&&E.isArray(O)){L=O.length;if(L>0){N=O[(L-1)];if(N){K=N.htmlButton;if(K){try{K.focus();}catch(M){}}}}}},configPostMethod:function(L,K,M){this.registerForm();},validate:function(){return true;},submit:function(){if(this.validate()){this.beforeSubmitEvent.fire();this.doSubmit();this.submitEvent.fire();if(this.cfg.getProperty("hideaftersubmit")){this.hide();}return true;}else{return false;}},cancel:function(){this.cancelEvent.fire();this.hide();},getData:function(){var a=this.form,M,T,W,O,U,R,Q,L,X,N,Y,b,K,P,c,Z,V;function S(e){var d=e.tagName.toUpperCase();return((d=="INPUT"||d=="TEXTAREA"||d=="SELECT")&&e.name==O);}if(a){M=a.elements;T=M.length;W={};for(Z=0;Z<T;Z++){O=M[Z].name;U=D.getElementsBy(S,"*",a);R=U.length;if(R>0){if(R==1){U=U[0];Q=U.type;L=U.tagName.toUpperCase();switch(L){case"INPUT":if(Q=="checkbox"){W[O]=U.checked;}else{if(Q!="radio"){W[O]=U.value;}}break;case"TEXTAREA":W[O]=U.value;break;case"SELECT":X=U.options;N=X.length;Y=[];for(V=0;V<N;V++){b=X[V];if(b.selected){K=b.value;if(!K||K===""){K=b.text;}Y[Y.length]=K;}}W[O]=Y;break;}}else{Q=U[0].type;switch(Q){case"radio":for(V=0;V<R;V++){P=U[V];if(P.checked){W[O]=P.value;break;}}break;case"checkbox":Y=[];for(V=0;V<R;V++){c=U[V];if(c.checked){Y[Y.length]=c.value;}}W[O]=Y;break;}}}}}return W;},destroy:function(){C.call(this);this._aButtons=null;var K=this.element.getElementsByTagName("form"),L;if(K.length>0){L=K[0];if(L){J.purgeElement(L);if(L.parentNode){L.parentNode.removeChild(L);}this.form=null;}}F.superclass.destroy.call(this);},toString:function(){return"Dialog "+this.id;}});}());(function(){YAHOO.widget.SimpleDialog=function(E,D){YAHOO.widget.SimpleDialog.superclass.constructor.call(this,E,D);};var C=YAHOO.util.Dom,B=YAHOO.widget.SimpleDialog,A={"ICON":{key:"icon",value:"none",suppressEvent:true},"TEXT":{key:"text",value:"",suppressEvent:true,supercedes:["icon"]}};B.ICON_BLOCK="blckicon";B.ICON_ALARM="alrticon";B.ICON_HELP="hlpicon";B.ICON_INFO="infoicon";B.ICON_WARN="warnicon";B.ICON_TIP="tipicon";B.ICON_CSS_CLASSNAME="yui-icon";B.CSS_SIMPLEDIALOG="yui-simple-dialog";YAHOO.extend(B,YAHOO.widget.Dialog,{initDefaultConfig:function(){B.superclass.initDefaultConfig.call(this);this.cfg.addProperty(A.ICON.key,{handler:this.configIcon,value:A.ICON.value,suppressEvent:A.ICON.suppressEvent});this.cfg.addProperty(A.TEXT.key,{handler:this.configText,value:A.TEXT.value,suppressEvent:A.TEXT.suppressEvent,supercedes:A.TEXT.supercedes});},init:function(E,D){B.superclass.init.call(this,E);this.beforeInitEvent.fire(B);C.addClass(this.element,B.CSS_SIMPLEDIALOG);this.cfg.queueProperty("postmethod","manual");if(D){this.cfg.applyConfig(D,true);}this.beforeRenderEvent.subscribe(function(){if(!this.body){this.setBody("");}},this,true);this.initEvent.fire(B);},registerForm:function(){B.superclass.registerForm.call(this);this.form.innerHTML+='<input type="hidden" name="'+this.id+'" value=""/>';},configIcon:function(F,E,J){var K=E[0],D=this.body,I=B.ICON_CSS_CLASSNAME,H,G;if(K&&K!="none"){H=C.getElementsByClassName(I,"*",D);if(H){G=H.parentNode;if(G){G.removeChild(H);H=null;}}if(K.indexOf(".")==-1){H=document.createElement("span");H.className=(I+" "+K);H.innerHTML="&#160;";}else{H=document.createElement("img");H.src=(this.imageRoot+K);H.className=I;}if(H){D.insertBefore(H,D.firstChild);}}},configText:function(E,D,F){var G=D[0];if(G){this.setBody(G);this.cfg.refireEvent("icon");}},toString:function(){return"SimpleDialog "+this.id;}});}());(function(){YAHOO.widget.ContainerEffect=function(F,I,H,E,G){if(!G){G=YAHOO.util.Anim;}this.overlay=F;this.attrIn=I;this.attrOut=H;this.targetElement=E||F.element;this.animClass=G;};var B=YAHOO.util.Dom,D=YAHOO.util.CustomEvent,C=YAHOO.util.Easing,A=YAHOO.widget.ContainerEffect;A.FADE=function(E,G){var I={attributes:{opacity:{from:0,to:1}},duration:G,method:C.easeIn};var F={attributes:{opacity:{to:0}},duration:G,method:C.easeOut};var H=new A(E,I,F,E.element);H.handleUnderlayStart=function(){var K=this.overlay.underlay;if(K&&YAHOO.env.ua.ie){var J=(K.filters&&K.filters.length>0);if(J){B.addClass(E.element,"yui-effect-fade");}}};H.handleUnderlayComplete=function(){var J=this.overlay.underlay;if(J&&YAHOO.env.ua.ie){B.removeClass(E.element,"yui-effect-fade");}};H.handleStartAnimateIn=function(K,J,L){B.addClass(L.overlay.element,"hide-select");if(!L.overlay.underlay){L.overlay.cfg.refireEvent("underlay");}L.handleUnderlayStart();B.setStyle(L.overlay.element,"visibility","visible");B.setStyle(L.overlay.element,"opacity",0);};H.handleCompleteAnimateIn=function(K,J,L){B.removeClass(L.overlay.element,"hide-select");if(L.overlay.element.style.filter){L.overlay.element.style.filter=null;}L.handleUnderlayComplete();L.overlay.cfg.refireEvent("iframe");L.animateInCompleteEvent.fire();};H.handleStartAnimateOut=function(K,J,L){B.addClass(L.overlay.element,"hide-select");L.handleUnderlayStart();};H.handleCompleteAnimateOut=function(K,J,L){B.removeClass(L.overlay.element,"hide-select");if(L.overlay.element.style.filter){L.overlay.element.style.filter=null;}B.setStyle(L.overlay.element,"visibility","hidden");B.setStyle(L.overlay.element,"opacity",1);L.handleUnderlayComplete();L.overlay.cfg.refireEvent("iframe");L.animateOutCompleteEvent.fire();};H.init();return H;};A.SLIDE=function(G,I){var F=G.cfg.getProperty("x")||B.getX(G.element),K=G.cfg.getProperty("y")||B.getY(G.element),J=B.getClientWidth(),H=G.element.offsetWidth,E=new A(G,{attributes:{points:{to:[F,K]}},duration:I,method:C.easeIn},{attributes:{points:{to:[(J+25),K]}},duration:I,method:C.easeOut},G.element,YAHOO.util.Motion);E.handleStartAnimateIn=function(M,L,N){N.overlay.element.style.left=((-25)-H)+"px";N.overlay.element.style.top=K+"px";};E.handleTweenAnimateIn=function(O,N,P){var Q=B.getXY(P.overlay.element),M=Q[0],L=Q[1];if(B.getStyle(P.overlay.element,"visibility")=="hidden"&&M<F){B.setStyle(P.overlay.element,"visibility","visible");}P.overlay.cfg.setProperty("xy",[M,L],true);P.overlay.cfg.refireEvent("iframe");};E.handleCompleteAnimateIn=function(M,L,N){N.overlay.cfg.setProperty("xy",[F,K],true);N.startX=F;N.startY=K;N.overlay.cfg.refireEvent("iframe");N.animateInCompleteEvent.fire();};E.handleStartAnimateOut=function(M,L,P){var N=B.getViewportWidth(),Q=B.getXY(P.overlay.element),O=Q[1];P.animOut.attributes.points.to=[(N+25),O];};E.handleTweenAnimateOut=function(N,M,O){var Q=B.getXY(O.overlay.element),L=Q[0],P=Q[1];O.overlay.cfg.setProperty("xy",[L,P],true);O.overlay.cfg.refireEvent("iframe");};E.handleCompleteAnimateOut=function(M,L,N){B.setStyle(N.overlay.element,"visibility","hidden");N.overlay.cfg.setProperty("xy",[F,K]);N.animateOutCompleteEvent.fire();};E.init();return E;};A.prototype={init:function(){this.beforeAnimateInEvent=this.createEvent("beforeAnimateIn");this.beforeAnimateInEvent.signature=D.LIST;this.beforeAnimateOutEvent=this.createEvent("beforeAnimateOut");this.beforeAnimateOutEvent.signature=D.LIST;this.animateInCompleteEvent=this.createEvent("animateInComplete");this.animateInCompleteEvent.signature=D.LIST;this.animateOutCompleteEvent=this.createEvent("animateOutComplete");this.animateOutCompleteEvent.signature=D.LIST;this.animIn=new this.animClass(this.targetElement,this.attrIn.attributes,this.attrIn.duration,this.attrIn.method);this.animIn.onStart.subscribe(this.handleStartAnimateIn,this);this.animIn.onTween.subscribe(this.handleTweenAnimateIn,this);this.animIn.onComplete.subscribe(this.handleCompleteAnimateIn,this);this.animOut=new this.animClass(this.targetElement,this.attrOut.attributes,this.attrOut.duration,this.attrOut.method);this.animOut.onStart.subscribe(this.handleStartAnimateOut,this);this.animOut.onTween.subscribe(this.handleTweenAnimateOut,this);this.animOut.onComplete.subscribe(this.handleCompleteAnimateOut,this);},animateIn:function(){this.beforeAnimateInEvent.fire();this.animIn.animate();},animateOut:function(){this.beforeAnimateOutEvent.fire();this.animOut.animate();},handleStartAnimateIn:function(F,E,G){},handleTweenAnimateIn:function(F,E,G){},handleCompleteAnimateIn:function(F,E,G){},handleStartAnimateOut:function(F,E,G){},handleTweenAnimateOut:function(F,E,G){},handleCompleteAnimateOut:function(F,E,G){},toString:function(){var E="ContainerEffect";if(this.overlay){E+=" ["+this.overlay.toString()+"]";}return E;}};YAHOO.lang.augmentProto(A,YAHOO.util.EventProvider);})();YAHOO.register("container",YAHOO.widget.Module,{version:"2.5.2",build:"1076"});
//from: http://yui.yahooapis.com/2.5.2/build/slider/slider-min.js

YAHOO.widget.Slider=function(C,A,B,D){YAHOO.widget.Slider.ANIM_AVAIL=(!YAHOO.lang.isUndefined(YAHOO.util.Anim));if(C){this.init(C,A,true);this.initSlider(D);this.initThumb(B);}};YAHOO.widget.Slider.getHorizSlider=function(B,C,E,D,A){return new YAHOO.widget.Slider(B,B,new YAHOO.widget.SliderThumb(C,B,E,D,0,0,A),"horiz");};YAHOO.widget.Slider.getVertSlider=function(C,D,A,E,B){return new YAHOO.widget.Slider(C,C,new YAHOO.widget.SliderThumb(D,C,0,0,A,E,B),"vert");};YAHOO.widget.Slider.getSliderRegion=function(C,D,F,E,A,G,B){return new YAHOO.widget.Slider(C,C,new YAHOO.widget.SliderThumb(D,C,F,E,A,G,B),"region");};YAHOO.widget.Slider.ANIM_AVAIL=false;YAHOO.extend(YAHOO.widget.Slider,YAHOO.util.DragDrop,{dragOnly:true,initSlider:function(A){this.type=A;this.createEvent("change",this);this.createEvent("slideStart",this);this.createEvent("slideEnd",this);this.isTarget=false;this.animate=YAHOO.widget.Slider.ANIM_AVAIL;this.backgroundEnabled=true;this.tickPause=40;this.enableKeys=true;this.keyIncrement=20;this.moveComplete=true;this.animationDuration=0.2;this.SOURCE_UI_EVENT=1;this.SOURCE_SET_VALUE=2;this.valueChangeSource=0;this._silent=false;this.lastOffset=[0,0];},initThumb:function(B){var A=this;this.thumb=B;B.cacheBetweenDrags=true;if(B._isHoriz&&B.xTicks&&B.xTicks.length){this.tickPause=Math.round(360/B.xTicks.length);}else{if(B.yTicks&&B.yTicks.length){this.tickPause=Math.round(360/B.yTicks.length);}}B.onAvailable=function(){return A.setStartSliderState();};B.onMouseDown=function(){return A.focus();};B.startDrag=function(){A._slideStart();};B.onDrag=function(){A.fireEvents(true);};B.onMouseUp=function(){A.thumbMouseUp();};},onAvailable:function(){var A=YAHOO.util.Event;A.on(this.id,"keydown",this.handleKeyDown,this,true);A.on(this.id,"keypress",this.handleKeyPress,this,true);},handleKeyPress:function(C){if(this.enableKeys){var A=YAHOO.util.Event;var B=A.getCharCode(C);switch(B){case 37:case 38:case 39:case 40:case 36:case 35:A.preventDefault(C);break;default:}}},handleKeyDown:function(E){if(this.enableKeys){var G=YAHOO.util.Event;var C=G.getCharCode(E),I=this.thumb;var B=this.getXValue(),F=this.getYValue();var H=false;var D=true;switch(C){case 37:B-=this.keyIncrement;break;case 38:F-=this.keyIncrement;break;case 39:B+=this.keyIncrement;break;case 40:F+=this.keyIncrement;break;case 36:B=I.leftConstraint;F=I.topConstraint;break;case 35:B=I.rightConstraint;F=I.bottomConstraint;break;default:D=false;}if(D){if(I._isRegion){this.setRegionValue(B,F,true);}else{var A=(I._isHoriz)?B:F;this.setValue(A,true);}G.stopEvent(E);}}},setStartSliderState:function(){this.setThumbCenterPoint();this.baselinePos=YAHOO.util.Dom.getXY(this.getEl());this.thumb.startOffset=this.thumb.getOffsetFromParent(this.baselinePos);if(this.thumb._isRegion){if(this.deferredSetRegionValue){this.setRegionValue.apply(this,this.deferredSetRegionValue,true);this.deferredSetRegionValue=null;}else{this.setRegionValue(0,0,true,true,true);}}else{if(this.deferredSetValue){this.setValue.apply(this,this.deferredSetValue,true);this.deferredSetValue=null;}else{this.setValue(0,true,true,true);}}},setThumbCenterPoint:function(){var A=this.thumb.getEl();if(A){this.thumbCenterPoint={x:parseInt(A.offsetWidth/2,10),y:parseInt(A.offsetHeight/2,10)};}},lock:function(){this.thumb.lock();this.locked=true;},unlock:function(){this.thumb.unlock();this.locked=false;},thumbMouseUp:function(){if(!this.isLocked()&&!this.moveComplete){this.endMove();}},onMouseUp:function(){if(!this.isLocked()&&!this.moveComplete){this.endMove();}},getThumb:function(){return this.thumb;},focus:function(){this.valueChangeSource=this.SOURCE_UI_EVENT;var A=this.getEl();if(A.focus){try{A.focus();}catch(B){}}this.verifyOffset();if(this.isLocked()){return false;}else{this._slideStart();return true;}},onChange:function(A,B){},onSlideStart:function(){},onSlideEnd:function(){},getValue:function(){return this.thumb.getValue();},getXValue:function(){return this.thumb.getXValue();},getYValue:function(){return this.thumb.getYValue();},handleThumbChange:function(){},setValue:function(G,C,D,A){this._silent=A;this.valueChangeSource=this.SOURCE_SET_VALUE;if(!this.thumb.available){this.deferredSetValue=arguments;return false;}if(this.isLocked()&&!D){return false;}if(isNaN(G)){return false;}var B=this.thumb;B.lastOffset=[G,G];var F,E;this.verifyOffset(true);if(B._isRegion){return false;}else{if(B._isHoriz){this._slideStart();F=B.initPageX+G+this.thumbCenterPoint.x;this.moveThumb(F,B.initPageY,C);}else{this._slideStart();E=B.initPageY+G+this.thumbCenterPoint.y;this.moveThumb(B.initPageX,E,C);}}return true;},setRegionValue:function(H,A,D,E,B){this._silent=B;this.valueChangeSource=this.SOURCE_SET_VALUE;if(!this.thumb.available){this.deferredSetRegionValue=arguments;return false;}if(this.isLocked()&&!E){return false;}if(isNaN(H)){return false;}var C=this.thumb;C.lastOffset=[H,A];this.verifyOffset(true);if(C._isRegion){this._slideStart();var G=C.initPageX+H+this.thumbCenterPoint.x;var F=C.initPageY+A+this.thumbCenterPoint.y;this.moveThumb(G,F,D);return true;}return false;},verifyOffset:function(B){var A=YAHOO.util.Dom.getXY(this.getEl());if(A){if(A[0]!=this.baselinePos[0]||A[1]!=this.baselinePos[1]){this.thumb.resetConstraints();this.baselinePos=A;return false;}}return true;},moveThumb:function(G,F,E,D){var H=this.thumb;var I=this;if(!H.available){return;}H.setDelta(this.thumbCenterPoint.x,this.thumbCenterPoint.y);var B=H.getTargetCoord(G,F);var C=[B.x,B.y];this._slideStart();if(this.animate&&YAHOO.widget.Slider.ANIM_AVAIL&&H._graduated&&!E){this.lock();this.curCoord=YAHOO.util.Dom.getXY(this.thumb.getEl());setTimeout(function(){I.moveOneTick(C);},this.tickPause);}else{if(this.animate&&YAHOO.widget.Slider.ANIM_AVAIL&&!E){this.lock();var A=new YAHOO.util.Motion(H.id,{points:{to:C}},this.animationDuration,YAHOO.util.Easing.easeOut);A.onComplete.subscribe(function(){I.endMove();});A.animate();}else{H.setDragElPos(G,F);if(!D){this.endMove();}}}},_slideStart:function(){if(!this._sliding){if(!this._silent){this.onSlideStart();this.fireEvent("slideStart");}this._sliding=true;}},_slideEnd:function(){if(this._sliding&&this.moveComplete){if(!this._silent){this.onSlideEnd();this.fireEvent("slideEnd");}this._sliding=false;this._silent=false;this.moveComplete=false;}},moveOneTick:function(B){var E=this.thumb,D;var F=null;if(E._isRegion){F=this._getNextX(this.curCoord,B);var A=(F)?F[0]:this.curCoord[0];F=this._getNextY([A,this.curCoord[1]],B);}else{if(E._isHoriz){F=this._getNextX(this.curCoord,B);}else{F=this._getNextY(this.curCoord,B);}}if(F){this.curCoord=F;this.thumb.alignElWithMouse(E.getEl(),F[0],F[1]);if(!(F[0]==B[0]&&F[1]==B[1])){var C=this;setTimeout(function(){C.moveOneTick(B);},this.tickPause);}else{this.endMove();}}else{this.endMove();}},_getNextX:function(A,B){var D=this.thumb;var F;var C=[];var E=null;if(A[0]>B[0]){F=D.tickSize-this.thumbCenterPoint.x;C=D.getTargetCoord(A[0]-F,A[1]);E=[C.x,C.y];}else{if(A[0]<B[0]){F=D.tickSize+this.thumbCenterPoint.x;C=D.getTargetCoord(A[0]+F,A[1]);E=[C.x,C.y];}else{}}return E;},_getNextY:function(A,B){var D=this.thumb;var F;var C=[];var E=null;if(A[1]>B[1]){F=D.tickSize-this.thumbCenterPoint.y;C=D.getTargetCoord(A[0],A[1]-F);E=[C.x,C.y];}else{if(A[1]<B[1]){F=D.tickSize+this.thumbCenterPoint.y;C=D.getTargetCoord(A[0],A[1]+F);E=[C.x,C.y];}else{}}return E;},b4MouseDown:function(A){this.thumb.autoOffset();this.thumb.resetConstraints();},onMouseDown:function(B){if(!this.isLocked()&&this.backgroundEnabled){var A=YAHOO.util.Event.getPageX(B);var C=YAHOO.util.Event.getPageY(B);this.focus();this.moveThumb(A,C);}},onDrag:function(B){if(!this.isLocked()){var A=YAHOO.util.Event.getPageX(B);var C=YAHOO.util.Event.getPageY(B);this.moveThumb(A,C,true,true);this.fireEvents();}},endMove:function(){this.unlock();this.moveComplete=true;this.fireEvents();},fireEvents:function(C){var B=this.thumb;if(!C){B.cachePosition();}if(!this.isLocked()){if(B._isRegion){var E=B.getXValue();var D=B.getYValue();if(E!=this.previousX||D!=this.previousY){if(!this._silent){this.onChange(E,D);this.fireEvent("change",{x:E,y:D});}}this.previousX=E;this.previousY=D;}else{var A=B.getValue();if(A!=this.previousVal){if(!this._silent){this.onChange(A);this.fireEvent("change",A);}}this.previousVal=A;}this._slideEnd();}},toString:function(){return("Slider ("+this.type+") "+this.id);}});YAHOO.augment(YAHOO.widget.Slider,YAHOO.util.EventProvider);YAHOO.widget.SliderThumb=function(G,B,E,D,A,F,C){if(G){YAHOO.widget.SliderThumb.superclass.constructor.call(this,G,B);this.parentElId=B;}this.isTarget=false;this.tickSize=C;this.maintainOffset=true;this.initSlider(E,D,A,F,C);this.scroll=false;};YAHOO.extend(YAHOO.widget.SliderThumb,YAHOO.util.DD,{startOffset:null,dragOnly:true,_isHoriz:false,_prevVal:0,_graduated:false,getOffsetFromParent0:function(C){var A=YAHOO.util.Dom.getXY(this.getEl());var B=C||YAHOO.util.Dom.getXY(this.parentElId);return[(A[0]-B[0]),(A[1]-B[1])];},getOffsetFromParent:function(H){var A=this.getEl(),E;if(!this.deltaOffset){var I=YAHOO.util.Dom.getXY(A);var F=H||YAHOO.util.Dom.getXY(this.parentElId);E=[(I[0]-F[0]),(I[1]-F[1])];var B=parseInt(YAHOO.util.Dom.getStyle(A,"left"),10);var K=parseInt(YAHOO.util.Dom.getStyle(A,"top"),10);var D=B-E[0];var C=K-E[1];if(isNaN(D)||isNaN(C)){}else{this.deltaOffset=[D,C];}}else{var J=parseInt(YAHOO.util.Dom.getStyle(A,"left"),10);var G=parseInt(YAHOO.util.Dom.getStyle(A,"top"),10);E=[J+this.deltaOffset[0],G+this.deltaOffset[1]];}return E;},initSlider:function(D,C,A,E,B){this.initLeft=D;this.initRight=C;this.initUp=A;this.initDown=E;this.setXConstraint(D,C,B);this.setYConstraint(A,E,B);if(B&&B>1){this._graduated=true;}this._isHoriz=(D||C);this._isVert=(A||E);this._isRegion=(this._isHoriz&&this._isVert);},clearTicks:function(){YAHOO.widget.SliderThumb.superclass.clearTicks.call(this);this.tickSize=0;this._graduated=false;},getValue:function(){return(this._isHoriz)?this.getXValue():this.getYValue();},getXValue:function(){if(!this.available){return 0;}var A=this.getOffsetFromParent();if(YAHOO.lang.isNumber(A[0])){this.lastOffset=A;return(A[0]-this.startOffset[0]);}else{return(this.lastOffset[0]-this.startOffset[0]);}},getYValue:function(){if(!this.available){return 0;}var A=this.getOffsetFromParent();if(YAHOO.lang.isNumber(A[1])){this.lastOffset=A;return(A[1]-this.startOffset[1]);}else{return(this.lastOffset[1]-this.startOffset[1]);}},toString:function(){return"SliderThumb "+this.id;},onChange:function(A,B){}});YAHOO.widget.DualSlider=function(E,B,D,A){var C=this,G=YAHOO.lang;this.minSlider=E;this.maxSlider=B;this.activeSlider=E;this.isHoriz=E.thumb._isHoriz;A=YAHOO.lang.isArray(A)?A:[0,D];A[0]=Math.min(Math.max(parseInt(A[0],10)|0,0),D);A[1]=Math.max(Math.min(parseInt(A[1],10)|0,D),0);if(A[0]>A[1]){A.splice(0,2,A[1],A[0]);}var F={min:false,max:false};this.minSlider.thumb.onAvailable=function(){E.setStartSliderState();F.min=true;if(F.max){E.setValue(A[0],true,true,true);B.setValue(A[1],true,true,true);C.updateValue(true);C.fireEvent("ready",C);}};this.maxSlider.thumb.onAvailable=function(){B.setStartSliderState();F.max=true;if(F.min){E.setValue(A[0],true,true,true);B.setValue(A[1],true,true,true);C.updateValue(true);C.fireEvent("ready",C);}};E.onMouseDown=function(H){C._handleMouseDown(H);};B.onMouseDown=function(H){YAHOO.util.Event.stopEvent(H);};E.onDrag=B.onDrag=function(H){C._handleDrag(H);};E.subscribe("change",this._handleMinChange,E,this);E.subscribe("slideStart",this._handleSlideStart,E,this);E.subscribe("slideEnd",this._handleSlideEnd,E,this);B.subscribe("change",this._handleMaxChange,B,this);B.subscribe("slideStart",this._handleSlideStart,B,this);B.subscribe("slideEnd",this._handleSlideEnd,B,this);this.createEvent("ready",this);this.createEvent("change",this);this.createEvent("slideStart",this);this.createEvent("slideEnd",this);};YAHOO.widget.DualSlider.prototype={minVal:-1,maxVal:-1,minRange:0,_handleSlideStart:function(B,A){this.fireEvent("slideStart",A);},_handleSlideEnd:function(B,A){this.fireEvent("slideEnd",A);},_handleDrag:function(A){YAHOO.widget.Slider.prototype.onDrag.call(this.activeSlider,A);},_handleMinChange:function(){this.activeSlider=this.minSlider;this.updateValue();},_handleMaxChange:function(){this.activeSlider=this.maxSlider;this.updateValue();},setValues:function(E,H,F,B,G){var C=this.minSlider,J=this.maxSlider,A=C.thumb,I=J.thumb,K=this,D={min:false,max:false};if(A._isHoriz){A.setXConstraint(A.leftConstraint,I.rightConstraint,A.tickSize);I.setXConstraint(A.leftConstraint,I.rightConstraint,I.tickSize);}else{A.setYConstraint(A.topConstraint,I.bottomConstraint,A.tickSize);I.setYConstraint(A.topConstraint,I.bottomConstraint,I.tickSize);}this._oneTimeCallback(C,"slideEnd",function(){D.min=true;if(D.max){K.updateValue(G);setTimeout(function(){K._cleanEvent(C,"slideEnd");K._cleanEvent(J,"slideEnd");},0);}});this._oneTimeCallback(J,"slideEnd",function(){D.max=true;if(D.min){K.updateValue(G);setTimeout(function(){K._cleanEvent(C,"slideEnd");K._cleanEvent(J,"slideEnd");},0);}});C.setValue(E,F,B,G);J.setValue(H,F,B,G);},setMinValue:function(C,E,F,B){var D=this.minSlider;this.activeSlider=D;var A=this;this._oneTimeCallback(D,"slideEnd",function(){A.updateValue(B);setTimeout(function(){A._cleanEvent(D,"slideEnd");},0);});D.setValue(C,E,F,B);},setMaxValue:function(A,E,F,C){var D=this.maxSlider;this.activeSlider=D;var B=this;this._oneTimeCallback(D,"slideEnd",function(){B.updateValue(C);setTimeout(function(){B._cleanEvent(D,"slideEnd");},0);});D.setValue(A,E,F,C);},updateValue:function(F){var B=this.minSlider.getValue(),G=this.maxSlider.getValue(),C=false;if(B!=this.minVal||G!=this.maxVal){C=true;var A=this.minSlider.thumb;var I=this.maxSlider.thumb;var D=this.minSlider.thumbCenterPoint.x+this.maxSlider.thumbCenterPoint.x;var E=Math.max(G-D-this.minRange,0);var H=Math.min(-B-D-this.minRange,0);if(this.isHoriz){E=Math.min(E,I.rightConstraint);A.setXConstraint(A.leftConstraint,E,A.tickSize);I.setXConstraint(H,I.rightConstraint,I.tickSize);}else{E=Math.min(E,I.bottomConstraint);A.setYConstraint(A.leftConstraint,E,A.tickSize);I.setYConstraint(H,I.bottomConstraint,I.tickSize);}}this.minVal=B;this.maxVal=G;if(C&&!F){this.fireEvent("change",this);}},selectActiveSlider:function(C){var B=this.minSlider.getValue(),A=this.maxSlider.getValue(),D;if(this.isHoriz){D=YAHOO.util.Event.getPageX(C)-this.minSlider.initPageX-this.minSlider.thumbCenterPoint.x;}else{D=YAHOO.util.Event.getPageY(C)-this.minSlider.initPageY-this.minSlider.thumbCenterPoint.y;}if(D<B){this.activeSlider=this.minSlider;}else{if(D>A){this.activeSlider=this.maxSlider;}else{this.activeSlider=D*2>A+B?this.maxSlider:this.minSlider;}}},_handleMouseDown:function(A){this.selectActiveSlider(A);YAHOO.widget.Slider.prototype.onMouseDown.call(this.activeSlider,A);},_oneTimeCallback:function(C,A,B){C.subscribe(A,function(){C.unsubscribe(A,arguments.callee);B.apply({},[].slice.apply(arguments));});},_cleanEvent:function(H,B){if(H.__yui_events&&H.events[B]){var G,F,A;for(F=H.__yui_events.length;F>=0;--F){if(H.__yui_events[F].type===B){G=H.__yui_events[F];break;}}if(G){var E=G.subscribers,C=[],D=0;for(F=0,A=E.length;F<A;++F){if(E[F]){C[D++]=E[F];}}G.subscribers=C;}}}};YAHOO.augment(YAHOO.widget.DualSlider,YAHOO.util.EventProvider);YAHOO.widget.Slider.getHorizDualSlider=function(F,C,K,G,H,B){var A,J;var D=YAHOO.widget,E=D.Slider,I=D.SliderThumb;A=new I(C,F,0,G,0,0,H);J=new I(K,F,0,G,0,0,H);return new D.DualSlider(new E(F,F,A,"horiz"),new E(F,F,J,"horiz"),G,B);};YAHOO.widget.Slider.getVertDualSlider=function(F,C,K,G,H,B){var A,J;var D=YAHOO.widget,E=D.Slider,I=D.SliderThumb;A=new I(C,F,0,0,0,G,H);J=new I(K,F,0,0,0,G,H);return new D.DualSlider(new E(F,F,A,"vert"),new E(F,F,J,"vert"),G,B);};YAHOO.register("slider",YAHOO.widget.Slider,{version:"2.5.2",build:"1076"});
//from: http://yui.yahooapis.com/2.5.2/build/menu/menu-min.js

(function(){var B=YAHOO.util.Dom,A=YAHOO.util.Event;YAHOO.widget.MenuManager=function(){var N=false,F={},Q={},J={},E={"click":"clickEvent","mousedown":"mouseDownEvent","mouseup":"mouseUpEvent","mouseover":"mouseOverEvent","mouseout":"mouseOutEvent","keydown":"keyDownEvent","keyup":"keyUpEvent","keypress":"keyPressEvent"},K=null;function D(S){var R;if(S&&S.tagName){switch(S.tagName.toUpperCase()){case"DIV":R=S.parentNode;if((B.hasClass(S,"hd")||B.hasClass(S,"bd")||B.hasClass(S,"ft"))&&R&&R.tagName&&R.tagName.toUpperCase()=="DIV"){return R;}else{return S;}break;case"LI":return S;default:R=S.parentNode;if(R){return D(R);}break;}}}function G(V){var R=A.getTarget(V),S=D(R),X,T,U,Z,Y;if(S){T=S.tagName.toUpperCase();if(T=="LI"){U=S.id;if(U&&J[U]){Z=J[U];Y=Z.parent;}}else{if(T=="DIV"){if(S.id){Y=F[S.id];}}}}if(Y){X=E[V.type];if(Z&&!Z.cfg.getProperty("disabled")){Z[X].fire(V);if(V.type=="keyup"||V.type=="mousedown"){if(K!=Z){if(K){K.blurEvent.fire();}Z.focusEvent.fire();}}}Y[X].fire(V,Z);}else{if(V.type=="mousedown"){if(K){K.blurEvent.fire();K=null;}for(var W in Q){if(YAHOO.lang.hasOwnProperty(Q,W)){Y=Q[W];if(Y.cfg.getProperty("clicktohide")&&!(Y instanceof YAHOO.widget.MenuBar)&&Y.cfg.getProperty("position")=="dynamic"){Y.hide();}else{if(Y.cfg.getProperty("showdelay")>0){Y._cancelShowDelay();}if(Y.activeItem){Y.activeItem.blur();Y.activeItem.cfg.setProperty("selected",false);Y.activeItem=null;}}}}}else{if(V.type=="keyup"){if(K){K.blurEvent.fire();K=null;}}}}}function P(S,R,T){if(F[T.id]){this.removeMenu(T);}}function M(S,R){var T=R[0];if(T){K=T;}}function H(S,R){K=null;}function C(T,S){var R=S[0],U=this.id;if(R){Q[U]=this;}else{if(Q[U]){delete Q[U];}}}function L(S,R){O(this);}function O(S){var R=S.id;if(R&&J[R]){if(K==S){K=null;}delete J[R];S.destroyEvent.unsubscribe(L);}}function I(S,R){var U=R[0],T;if(U instanceof YAHOO.widget.MenuItem){T=U.id;if(!J[T]){J[T]=U;U.destroyEvent.subscribe(L);}}}return{addMenu:function(S){var R;if(S instanceof YAHOO.widget.Menu&&S.id&&!F[S.id]){F[S.id]=S;if(!N){R=document;A.on(R,"mouseover",G,this,true);A.on(R,"mouseout",G,this,true);A.on(R,"mousedown",G,this,true);A.on(R,"mouseup",G,this,true);A.on(R,"click",G,this,true);A.on(R,"keydown",G,this,true);A.on(R,"keyup",G,this,true);A.on(R,"keypress",G,this,true);N=true;}S.cfg.subscribeToConfigEvent("visible",C);S.destroyEvent.subscribe(P,S,this);S.itemAddedEvent.subscribe(I);S.focusEvent.subscribe(M);S.blurEvent.subscribe(H);}},removeMenu:function(U){var S,R,T;if(U){S=U.id;if(F[S]==U){R=U.getItems();if(R&&R.length>0){T=R.length-1;do{O(R[T]);}while(T--);}delete F[S];if(Q[S]==U){delete Q[S];}if(U.cfg){U.cfg.unsubscribeFromConfigEvent("visible",C);}U.destroyEvent.unsubscribe(P,U);U.itemAddedEvent.unsubscribe(I);U.focusEvent.unsubscribe(M);U.blurEvent.unsubscribe(H);}}},hideVisible:function(){var R;for(var S in Q){if(YAHOO.lang.hasOwnProperty(Q,S)){R=Q[S];if(!(R instanceof YAHOO.widget.MenuBar)&&R.cfg.getProperty("position")=="dynamic"){R.hide();}}}},getVisible:function(){return Q;},getMenus:function(){return F;},getMenu:function(S){var R=F[S];if(R){return R;}},getMenuItem:function(R){var S=J[R];if(S){return S;}},getMenuItemGroup:function(U){var S=B.get(U),R,W,V,T;if(S&&S.tagName&&S.tagName.toUpperCase()=="UL"){W=S.firstChild;if(W){R=[];do{T=W.id;if(T){V=this.getMenuItem(T);if(V){R[R.length]=V;}}}while((W=W.nextSibling));if(R.length>0){return R;}}}},getFocusedMenuItem:function(){return K;},getFocusedMenu:function(){if(K){return(K.parent.getRoot());}},toString:function(){return"MenuManager";}};}();})();(function(){YAHOO.widget.Menu=function(O,N){if(N){this.parent=N.parent;this.lazyLoad=N.lazyLoad||N.lazyload;this.itemData=N.itemData||N.itemdata;}YAHOO.widget.Menu.superclass.constructor.call(this,O,N);};function I(N){if(typeof N=="string"){return("dynamic,static".indexOf((N.toLowerCase()))!=-1);}}var C=YAHOO.util.Dom,M=YAHOO.util.Event,D=YAHOO.widget.Module,B=YAHOO.widget.Overlay,F=YAHOO.widget.Menu,K=YAHOO.widget.MenuManager,L=YAHOO.util.CustomEvent,E=YAHOO.lang,H=YAHOO.env.ua,G,A={"MOUSE_OVER":"mouseover","MOUSE_OUT":"mouseout","MOUSE_DOWN":"mousedown","MOUSE_UP":"mouseup","CLICK":"click","KEY_PRESS":"keypress","KEY_DOWN":"keydown","KEY_UP":"keyup","FOCUS":"focus","BLUR":"blur","ITEM_ADDED":"itemAdded","ITEM_REMOVED":"itemRemoved"},J={"VISIBLE":{key:"visible",value:false,validator:E.isBoolean},"CONSTRAIN_TO_VIEWPORT":{key:"constraintoviewport",value:true,validator:E.isBoolean,supercedes:["iframe","x","y","xy"]},"POSITION":{key:"position",value:"dynamic",validator:I,supercedes:["visible","iframe"]},"SUBMENU_ALIGNMENT":{key:"submenualignment",value:["tl","tr"],suppressEvent:true},"AUTO_SUBMENU_DISPLAY":{key:"autosubmenudisplay",value:true,validator:E.isBoolean,suppressEvent:true},"SHOW_DELAY":{key:"showdelay",value:250,validator:E.isNumber,suppressEvent:true},"HIDE_DELAY":{key:"hidedelay",value:0,validator:E.isNumber,suppressEvent:true},"SUBMENU_HIDE_DELAY":{key:"submenuhidedelay",value:250,validator:E.isNumber,suppressEvent:true},"CLICK_TO_HIDE":{key:"clicktohide",value:true,validator:E.isBoolean,suppressEvent:true},"CONTAINER":{key:"container",suppressEvent:true},"SCROLL_INCREMENT":{key:"scrollincrement",value:1,validator:E.isNumber,supercedes:["maxheight"],suppressEvent:true},"MIN_SCROLL_HEIGHT":{key:"minscrollheight",value:90,validator:E.isNumber,supercedes:["maxheight"],suppressEvent:true},"MAX_HEIGHT":{key:"maxheight",value:0,validator:E.isNumber,supercedes:["iframe"],suppressEvent:true},"CLASS_NAME":{key:"classname",value:null,validator:E.isString,suppressEvent:true},"DISABLED":{key:"disabled",value:false,validator:E.isBoolean,suppressEvent:true}};YAHOO.lang.extend(F,B,{CSS_CLASS_NAME:"yuimenu",ITEM_TYPE:null,GROUP_TITLE_TAG_NAME:"h6",OFF_SCREEN_POSITION:[-10000,-10000],_nHideDelayId:null,_nShowDelayId:null,_nSubmenuHideDelayId:null,_nBodyScrollId:null,_bHideDelayEventHandlersAssigned:false,_bHandledMouseOverEvent:false,_bHandledMouseOutEvent:false,_aGroupTitleElements:null,_aItemGroups:null,_aListElements:null,_nCurrentMouseX:0,_bStopMouseEventHandlers:false,_sClassName:null,lazyLoad:false,itemData:null,activeItem:null,parent:null,srcElement:null,mouseOverEvent:null,mouseOutEvent:null,mouseDownEvent:null,mouseUpEvent:null,clickEvent:null,keyPressEvent:null,keyDownEvent:null,keyUpEvent:null,itemAddedEvent:null,itemRemovedEvent:null,init:function(P,O){this._aItemGroups=[];this._aListElements=[];this._aGroupTitleElements=[];if(!this.ITEM_TYPE){this.ITEM_TYPE=YAHOO.widget.MenuItem;}var N;if(typeof P=="string"){N=document.getElementById(P);}else{if(P.tagName){N=P;}}if(N&&N.tagName){switch(N.tagName.toUpperCase()){case"DIV":this.srcElement=N;if(!N.id){N.setAttribute("id",C.generateId());}F.superclass.init.call(this,N);this.beforeInitEvent.fire(F);break;case"SELECT":this.srcElement=N;F.superclass.init.call(this,C.generateId());this.beforeInitEvent.fire(F);break;}}else{F.superclass.init.call(this,P);this.beforeInitEvent.fire(F);}if(this.element){C.addClass(this.element,this.CSS_CLASS_NAME);this.initEvent.subscribe(this._onInit);this.beforeRenderEvent.subscribe(this._onBeforeRender);this.renderEvent.subscribe(this._onRender);this.renderEvent.subscribe(this.onRender);this.beforeShowEvent.subscribe(this._onBeforeShow);this.hideEvent.subscribe(this.positionOffScreen);this.showEvent.subscribe(this._onShow);this.beforeHideEvent.subscribe(this._onBeforeHide);this.mouseOverEvent.subscribe(this._onMouseOver);this.mouseOutEvent.subscribe(this._onMouseOut);this.clickEvent.subscribe(this._onClick);this.keyDownEvent.subscribe(this._onKeyDown);this.keyPressEvent.subscribe(this._onKeyPress);if(H.gecko||H.webkit){this.cfg.subscribeToConfigEvent("y",this._onYChange);}if(O){this.cfg.applyConfig(O,true);}K.addMenu(this);this.initEvent.fire(F);}},_initSubTree:function(){var O=this.srcElement,N,Q,T,U,S,R,P;if(O){N=(O.tagName&&O.tagName.toUpperCase());if(N=="DIV"){U=this.body.firstChild;if(U){Q=0;T=this.GROUP_TITLE_TAG_NAME.toUpperCase();do{if(U&&U.tagName){switch(U.tagName.toUpperCase()){case T:this._aGroupTitleElements[Q]=U;break;case"UL":this._aListElements[Q]=U;this._aItemGroups[Q]=[];Q++;break;}}}while((U=U.nextSibling));if(this._aListElements[0]){C.addClass(this._aListElements[0],"first-of-type");}}}U=null;if(N){switch(N){case"DIV":S=this._aListElements;R=S.length;if(R>0){P=R-1;do{U=S[P].firstChild;if(U){do{if(U&&U.tagName&&U.tagName.toUpperCase()=="LI"){this.addItem(new this.ITEM_TYPE(U,{parent:this}),P);}}while((U=U.nextSibling));}}while(P--);}break;case"SELECT":U=O.firstChild;do{if(U&&U.tagName){switch(U.tagName.toUpperCase()){case"OPTGROUP":case"OPTION":this.addItem(new this.ITEM_TYPE(U,{parent:this}));break;}}}while((U=U.nextSibling));break;}}}},_getFirstEnabledItem:function(){var N=this.getItems(),Q=N.length,P;for(var O=0;O<Q;O++){P=N[O];if(P&&!P.cfg.getProperty("disabled")&&P.element.style.display!="none"){return P;}}},_addItemToGroup:function(S,T,W){var U,X,Q,V,R,O,P;function N(Y,Z){return(Y[Z]||N(Y,(Z+1)));}if(T instanceof this.ITEM_TYPE){U=T;U.parent=this;}else{if(typeof T=="string"){U=new this.ITEM_TYPE(T,{parent:this});}else{if(typeof T=="object"){T.parent=this;U=new this.ITEM_TYPE(T.text,T);}}}if(U){if(U.cfg.getProperty("selected")){this.activeItem=U;}X=typeof S=="number"?S:0;Q=this._getItemGroup(X);if(!Q){Q=this._createItemGroup(X);}if(typeof W=="number"){R=(W>=Q.length);if(Q[W]){Q.splice(W,0,U);}else{Q[W]=U;}V=Q[W];if(V){if(R&&(!V.element.parentNode||V.element.parentNode.nodeType==11)){this._aListElements[X].appendChild(V.element);}else{O=N(Q,(W+1));if(O&&(!V.element.parentNode||V.element.parentNode.nodeType==11)){this._aListElements[X].insertBefore(V.element,O.element);}}V.parent=this;this._subscribeToItemEvents(V);this._configureSubmenu(V);this._updateItemProperties(X);this.itemAddedEvent.fire(V);this.changeContentEvent.fire();return V;}}else{P=Q.length;Q[P]=U;V=Q[P];if(V){if(!C.isAncestor(this._aListElements[X],V.element)){this._aListElements[X].appendChild(V.element);}V.element.setAttribute("groupindex",X);V.element.setAttribute("index",P);V.parent=this;V.index=P;V.groupIndex=X;this._subscribeToItemEvents(V);this._configureSubmenu(V);if(P===0){C.addClass(V.element,"first-of-type");}this.itemAddedEvent.fire(V);this.changeContentEvent.fire();return V;}}}},_removeItemFromGroupByIndex:function(Q,O){var P=typeof Q=="number"?Q:0,R=this._getItemGroup(P),T,S,N;if(R){T=R.splice(O,1);S=T[0];if(S){this._updateItemProperties(P);if(R.length===0){N=this._aListElements[P];if(this.body&&N){this.body.removeChild(N);}this._aItemGroups.splice(P,1);this._aListElements.splice(P,1);N=this._aListElements[0];if(N){C.addClass(N,"first-of-type");}}this.itemRemovedEvent.fire(S);this.changeContentEvent.fire();return S;}}},_removeItemFromGroupByValue:function(P,N){var R=this._getItemGroup(P),S,Q,O;if(R){S=R.length;Q=-1;if(S>0){O=S-1;do{if(R[O]==N){Q=O;break;}}while(O--);if(Q>-1){return(this._removeItemFromGroupByIndex(P,Q));}}}},_updateItemProperties:function(O){var P=this._getItemGroup(O),S=P.length,R,Q,N;if(S>0){N=S-1;do{R=P[N];if(R){Q=R.element;R.index=N;R.groupIndex=O;Q.setAttribute("groupindex",O);Q.setAttribute("index",N);C.removeClass(Q,"first-of-type");}}while(N--);if(Q){C.addClass(Q,"first-of-type");}}},_createItemGroup:function(O){var N;if(!this._aItemGroups[O]){this._aItemGroups[O]=[];N=document.createElement("ul");this._aListElements[O]=N;return this._aItemGroups[O];}},_getItemGroup:function(O){var N=((typeof O=="number")?O:0);return this._aItemGroups[N];},_configureSubmenu:function(N){var O=N.cfg.getProperty("submenu");if(O){this.cfg.configChangedEvent.subscribe(this._onParentMenuConfigChange,O,true);this.renderEvent.subscribe(this._onParentMenuRender,O,true);O.beforeShowEvent.subscribe(this._onSubmenuBeforeShow);}},_subscribeToItemEvents:function(N){N.focusEvent.subscribe(this._onMenuItemFocus);N.blurEvent.subscribe(this._onMenuItemBlur);N.destroyEvent.subscribe(this._onMenuItemDestroy,N,this);N.cfg.configChangedEvent.subscribe(this._onMenuItemConfigChange,N,this);},_onVisibleChange:function(P,O){var N=O[0];if(N){C.addClass(this.element,"visible");}else{C.removeClass(this.element,"visible");}},_cancelHideDelay:function(){var N=this.getRoot();if(N._nHideDelayId){window.clearTimeout(N._nHideDelayId);}},_execHideDelay:function(){this._cancelHideDelay();var O=this.getRoot(),P=this;function N(){if(O.activeItem){O.clearActiveItem();}if(O==P&&!(P instanceof YAHOO.widget.MenuBar)&&P.cfg.getProperty("position")=="dynamic"){P.hide();}}O._nHideDelayId=window.setTimeout(N,O.cfg.getProperty("hidedelay"));},_cancelShowDelay:function(){var N=this.getRoot();if(N._nShowDelayId){window.clearTimeout(N._nShowDelayId);}},_execShowDelay:function(P){var O=this.getRoot();function N(){if(P.parent.cfg.getProperty("selected")){P.show();}}O._nShowDelayId=window.setTimeout(N,O.cfg.getProperty("showdelay"));},_execSubmenuHideDelay:function(Q,O,N){var P=this;Q._nSubmenuHideDelayId=window.setTimeout(function(){if(P._nCurrentMouseX>(O+10)){Q._nSubmenuHideDelayId=window.setTimeout(function(){Q.hide();},N);}else{Q.hide();}},50);},_disableScrollHeader:function(){if(!this._bHeaderDisabled){C.addClass(this.header,"topscrollbar_disabled");this._bHeaderDisabled=true;}},_disableScrollFooter:function(){if(!this._bFooterDisabled){C.addClass(this.footer,"bottomscrollbar_disabled");this._bFooterDisabled=true;}},_enableScrollHeader:function(){if(this._bHeaderDisabled){C.removeClass(this.header,"topscrollbar_disabled");this._bHeaderDisabled=false;}},_enableScrollFooter:function(){if(this._bFooterDisabled){C.removeClass(this.footer,"bottomscrollbar_disabled");this._bFooterDisabled=false;}},_onMouseOver:function(W,R){if(this._bStopMouseEventHandlers){return false;}var X=R[0],V=R[1],N=M.getTarget(X),O,Q,U,P,T,S;if(!this._bHandledMouseOverEvent&&(N==this.element||C.isAncestor(this.element,N))){this._nCurrentMouseX=0;M.on(this.element,"mousemove",this._onMouseMove,this,true);this.clearActiveItem();if(this.parent&&this._nSubmenuHideDelayId){window.clearTimeout(this._nSubmenuHideDelayId);this.parent.cfg.setProperty("selected",true);O=this.parent.parent;O._bHandledMouseOutEvent=true;O._bHandledMouseOverEvent=false;}this._bHandledMouseOverEvent=true;this._bHandledMouseOutEvent=false;}if(V&&!V.handledMouseOverEvent&&!V.cfg.getProperty("disabled")&&(N==V.element||C.isAncestor(V.element,N))){Q=this.cfg.getProperty("showdelay");U=(Q>0);if(U){this._cancelShowDelay();}P=this.activeItem;if(P){P.cfg.setProperty("selected",false);}T=V.cfg;T.setProperty("selected",true);if(this.hasFocus()){V.focus();}if(this.cfg.getProperty("autosubmenudisplay")){S=T.getProperty("submenu");if(S){if(U){this._execShowDelay(S);}else{S.show();}}}V.handledMouseOverEvent=true;V.handledMouseOutEvent=false;}},_onMouseOut:function(V,P){if(this._bStopMouseEventHandlers){return false;}var W=P[0],T=P[1],Q=M.getRelatedTarget(W),U=false,S,R,N,O;if(T&&!T.cfg.getProperty("disabled")){S=T.cfg;R=S.getProperty("submenu");if(R&&(Q==R.element||C.isAncestor(R.element,Q))){U=true;}if(!T.handledMouseOutEvent&&((Q!=T.element&&!C.isAncestor(T.element,Q))||U)){if(!U){T.cfg.setProperty("selected",false);if(R){N=this.cfg.getProperty("submenuhidedelay");O=this.cfg.getProperty("showdelay");if(!(this instanceof YAHOO.widget.MenuBar)&&N>0&&O>=N){this._execSubmenuHideDelay(R,M.getPageX(W),N);}else{R.hide();}}}T.handledMouseOutEvent=true;T.handledMouseOverEvent=false;}}if(!this._bHandledMouseOutEvent&&((Q!=this.element&&!C.isAncestor(this.element,Q))||U)){M.removeListener(this.element,"mousemove",this._onMouseMove);this._nCurrentMouseX=M.getPageX(W);this._bHandledMouseOutEvent=true;this._bHandledMouseOverEvent=false;}},_onMouseMove:function(O,N){if(this._bStopMouseEventHandlers){return false;}this._nCurrentMouseX=M.getPageX(O);},_onClick:function(W,P){var X=P[0],S=P[1],U=false,Q,O,N,R,T,V;if(S){if(S.cfg.getProperty("disabled")){M.preventDefault(X);}else{Q=S.cfg.getProperty("submenu");R=S.cfg.getProperty("url");if(R){T=R.indexOf("#");V=R.length;if(T!=-1){R=R.substr(T,V);V=R.length;if(V>1){N=R.substr(1,V);U=C.isAncestor(this.element,N);}else{if(V===1){U=true;}}}}if(U&&!S.cfg.getProperty("target")){M.preventDefault(X);if(H.webkit){S.focus();}else{S.focusEvent.fire();}}if(!Q){if((H.gecko&&this.platform=="windows")&&X.button>0){return;}O=this.getRoot();if(O instanceof YAHOO.widget.MenuBar||O.cfg.getProperty("position")=="static"){O.clearActiveItem();}else{O.hide();}}}}},_onKeyDown:function(b,V){var Y=V[0],X=V[1],f=this,U,Z,O,S,c,N,e,R,a,Q,W,d,T;function P(){f._bStopMouseEventHandlers=true;window.setTimeout(function(){f._bStopMouseEventHandlers=false;},10);}if(X&&!X.cfg.getProperty("disabled")){Z=X.cfg;O=this.parent;switch(Y.keyCode){case 38:case 40:c=(Y.keyCode==38)?X.getPreviousEnabledSibling():X.getNextEnabledSibling();if(c){this.clearActiveItem();c.cfg.setProperty("selected",true);c.focus();if(this.cfg.getProperty("maxheight")>0){N=this.body;e=N.scrollTop;R=N.offsetHeight;a=this.getItems();Q=a.length-1;W=c.element.offsetTop;if(Y.keyCode==40){if(W>=(R+e)){N.scrollTop=W-R;}else{if(W<=e){N.scrollTop=0;}}if(c==a[Q]){N.scrollTop=c.element.offsetTop;}}else{if(W<=e){N.scrollTop=W-c.element.offsetHeight;}else{if(W>=(e+R)){N.scrollTop=W;}}if(c==a[0]){N.scrollTop=0;}}e=N.scrollTop;d=N.scrollHeight-N.offsetHeight;if(e===0){this._disableScrollHeader();this._enableScrollFooter();}else{if(e==d){this._enableScrollHeader();this._disableScrollFooter();}else{this._enableScrollHeader();this._enableScrollFooter();}}}}M.preventDefault(Y);P();break;case 39:U=Z.getProperty("submenu");if(U){if(!Z.getProperty("selected")){Z.setProperty("selected",true);}U.show();U.setInitialFocus();U.setInitialSelection();}else{S=this.getRoot();if(S instanceof YAHOO.widget.MenuBar){c=S.activeItem.getNextEnabledSibling();if(c){S.clearActiveItem();c.cfg.setProperty("selected",true);U=c.cfg.getProperty("submenu");if(U){U.show();}c.focus();}}}M.preventDefault(Y);P();break;case 37:if(O){T=O.parent;if(T instanceof YAHOO.widget.MenuBar){c=T.activeItem.getPreviousEnabledSibling();if(c){T.clearActiveItem();c.cfg.setProperty("selected",true);U=c.cfg.getProperty("submenu");if(U){U.show();}c.focus();}}else{this.hide();O.focus();}}M.preventDefault(Y);P();break;}}if(Y.keyCode==27){if(this.cfg.getProperty("position")=="dynamic"){this.hide();if(this.parent){this.parent.focus();}}else{if(this.activeItem){U=this.activeItem.cfg.getProperty("submenu");if(U&&U.cfg.getProperty("visible")){U.hide();this.activeItem.focus();}else{this.activeItem.blur();this.activeItem.cfg.setProperty("selected",false);}}}M.preventDefault(Y);}},_onKeyPress:function(P,O){var N=O[0];if(N.keyCode==40||N.keyCode==38){M.preventDefault(N);}},_onYChange:function(O,N){var Q=this.parent,S,P,R;if(Q){S=Q.parent.body.scrollTop;if(S>0){R=(this.cfg.getProperty("y")-S);C.setY(this.element,R);P=this.iframe;if(P){C.setY(P,R);}this.cfg.setProperty("y",R,true);}}},_onScrollTargetMouseOver:function(T,W){this._cancelHideDelay();var P=M.getTarget(T),R=this.body,V=this,Q=this.cfg.getProperty("scrollincrement"),N,O;function U(){var X=R.scrollTop;if(X<N){R.scrollTop=(X+Q);V._enableScrollHeader();}else{R.scrollTop=N;window.clearInterval(V._nBodyScrollId);V._disableScrollFooter();}}function S(){var X=R.scrollTop;if(X>0){R.scrollTop=(X-Q);V._enableScrollFooter();}else{R.scrollTop=0;window.clearInterval(V._nBodyScrollId);V._disableScrollHeader();}}if(C.hasClass(P,"hd")){O=S;}else{N=R.scrollHeight-R.offsetHeight;O=U;}this._nBodyScrollId=window.setInterval(O,10);},_onScrollTargetMouseOut:function(O,N){window.clearInterval(this._nBodyScrollId);this._cancelHideDelay();},_onInit:function(O,N){this.cfg.subscribeToConfigEvent("visible",this._onVisibleChange);var P=!this.parent,Q=this.lazyLoad;if(((P&&!Q)||(P&&(this.cfg.getProperty("visible")||this.cfg.getProperty("position")=="static"))||(!P&&!Q))&&this.getItemGroups().length===0){if(this.srcElement){this._initSubTree();}if(this.itemData){this.addItems(this.itemData);}}else{if(Q){this.cfg.fireQueue();}}},_onBeforeRender:function(Q,P){var R=this.element,U=this._aListElements.length,O=true,T=0,N,S;if(U>0){do{N=this._aListElements[T];if(N){if(O){C.addClass(N,"first-of-type");O=false;}if(!C.isAncestor(R,N)){this.appendToBody(N);}S=this._aGroupTitleElements[T];if(S){if(!C.isAncestor(R,S)){N.parentNode.insertBefore(S,N);}C.addClass(N,"hastitle");}}T++;}while(T<U);}},_onRender:function(O,N){if(this.cfg.getProperty("position")=="dynamic"){if(!this.cfg.getProperty("visible")){this.positionOffScreen();}}},_onBeforeShow:function(W,R){var V,O,S,Q,T;if(this.lazyLoad&&this.getItemGroups().length===0){if(this.srcElement){this._initSubTree();}if(this.itemData){if(this.parent&&this.parent.parent&&this.parent.parent.srcElement&&this.parent.parent.srcElement.tagName.toUpperCase()=="SELECT"){V=this.itemData.length;for(O=0;O<V;O++){if(this.itemData[O].tagName){this.addItem((new this.ITEM_TYPE(this.itemData[O])));}}}else{this.addItems(this.itemData);}}T=this.srcElement;if(T){if(T.tagName.toUpperCase()=="SELECT"){if(C.inDocument(T)){this.render(T.parentNode);}else{this.render(this.cfg.getProperty("container"));}}else{this.render();}}else{if(this.parent){this.render(this.parent.element);}else{this.render(this.cfg.getProperty("container"));}}}var P=this.cfg.getProperty("maxheight"),N=this.cfg.getProperty("minscrollheight"),U=this.cfg.getProperty("position")=="dynamic";if(!this.parent&&U){this.cfg.refireEvent("xy");}function X(){this.cfg.setProperty("maxheight",0);this.hideEvent.unsubscribe(X);}if(!(this instanceof YAHOO.widget.MenuBar)&&U){if(P===0){S=C.getViewportHeight();if(this.parent&&this.parent.parent instanceof YAHOO.widget.MenuBar){Q=YAHOO.util.Region.getRegion(this.parent.element);S=(S-Q.bottom);}if(this.element.offsetHeight>=S){P=(S-(B.VIEWPORT_OFFSET*2));if(P<N){P=N;}this.cfg.setProperty("maxheight",P);this.hideEvent.subscribe(X);}}}},_onShow:function(Q,P){var T=this.parent,S,N,O;function R(V){var U;if(V.type=="mousedown"||(V.type=="keydown"&&V.keyCode==27)){U=M.getTarget(V);if(U!=S.element||!C.isAncestor(S.element,U)){S.cfg.setProperty("autosubmenudisplay",false);M.removeListener(document,"mousedown",R);M.removeListener(document,"keydown",R);}}}if(T){S=T.parent;N=S.cfg.getProperty("submenualignment");O=this.cfg.getProperty("submenualignment");if((N[0]!=O[0])&&(N[1]!=O[1])){this.cfg.setProperty("submenualignment",[N[0],N[1]]);}if(!S.cfg.getProperty("autosubmenudisplay")&&(S instanceof YAHOO.widget.MenuBar||S.cfg.getProperty("position")=="static")){S.cfg.setProperty("autosubmenudisplay",true);M.on(document,"mousedown",R);M.on(document,"keydown",R);}}},_onBeforeHide:function(P,O){var N=this.activeItem,R,Q;if(N){R=N.cfg;R.setProperty("selected",false);Q=R.getProperty("submenu");if(Q){Q.hide();}}if(this.getRoot()==this){this.blur();}},_onParentMenuConfigChange:function(O,N,R){var P=N[0][0],Q=N[0][1];switch(P){case"iframe":case"constraintoviewport":case"hidedelay":case"showdelay":case"submenuhidedelay":case"clicktohide":case"effect":case"classname":case"scrollincrement":case"minscrollheight":R.cfg.setProperty(P,Q);break;}},_onParentMenuRender:function(O,N,S){var P=S.parent.parent.cfg,Q={constraintoviewport:P.getProperty("constraintoviewport"),xy:[0,0],clicktohide:P.getProperty("clicktohide"),effect:P.getProperty("effect"),showdelay:P.getProperty("showdelay"),hidedelay:P.getProperty("hidedelay"),submenuhidedelay:P.getProperty("submenuhidedelay"),classname:P.getProperty("classname"),scrollincrement:P.getProperty("scrollincrement"),minscrollheight:P.getProperty("minscrollheight"),iframe:P.getProperty("iframe")},R;S.cfg.applyConfig(Q);if(!this.lazyLoad){R=this.parent.element;if(this.element.parentNode==R){this.render();}else{this.render(R);}}},_onSubmenuBeforeShow:function(P,O){var Q=this.parent,N=Q.parent.cfg.getProperty("submenualignment");if(!this.cfg.getProperty("context")){this.cfg.setProperty("context",[Q.element,N[0],N[1]]);}else{this.align();}},_onMenuItemFocus:function(O,N){this.parent.focusEvent.fire(this);},_onMenuItemBlur:function(O,N){this.parent.blurEvent.fire(this);},_onMenuItemDestroy:function(P,O,N){this._removeItemFromGroupByValue(N.groupIndex,N);},_onMenuItemConfigChange:function(P,O,N){var R=O[0][0],S=O[0][1],Q;switch(R){case"selected":if(S===true){this.activeItem=N;}break;case"submenu":Q=O[0][1];if(Q){this._configureSubmenu(N);}break;}},enforceConstraints:function(P,N,T){YAHOO.widget.Menu.superclass.enforceConstraints.apply(this,arguments);var S=this.parent,O,R,Q,U;if(S){O=S.parent;if(!(O instanceof YAHOO.widget.MenuBar)){R=O.cfg.getProperty("x");U=this.cfg.getProperty("x");if(U<(R+S.element.offsetWidth)){Q=(R-this.element.offsetWidth);this.cfg.setProperty("x",Q,true);this.cfg.setProperty("xy",[Q,(this.cfg.getProperty("y"))],true);}}}},configVisible:function(P,O,Q){var N,R;if(this.cfg.getProperty("position")=="dynamic"){F.superclass.configVisible.call(this,P,O,Q);}else{N=O[0];R=C.getStyle(this.element,"display");C.setStyle(this.element,"visibility","visible");if(N){if(R!="block"){this.beforeShowEvent.fire();C.setStyle(this.element,"display","block");this.showEvent.fire();}}else{if(R=="block"){this.beforeHideEvent.fire();C.setStyle(this.element,"display","none");this.hideEvent.fire();}}}},configPosition:function(P,O,S){var R=this.element,Q=O[0]=="static"?"static":"absolute",T=this.cfg,N;C.setStyle(R,"position",Q);if(Q=="static"){C.setStyle(R,"display","block");T.setProperty("visible",true);}else{C.setStyle(R,"visibility","hidden");}if(Q=="absolute"){N=T.getProperty("zindex");if(!N||N===0){N=this.parent?(this.parent.parent.cfg.getProperty("zindex")+1):1;T.setProperty("zindex",N);}}},configIframe:function(O,N,P){if(this.cfg.getProperty("position")=="dynamic"){F.superclass.configIframe.call(this,O,N,P);}},configHideDelay:function(O,N,R){var T=N[0],S=this.mouseOutEvent,P=this.mouseOverEvent,Q=this.keyDownEvent;if(T>0){if(!this._bHideDelayEventHandlersAssigned){S.subscribe(this._execHideDelay);P.subscribe(this._cancelHideDelay);Q.subscribe(this._cancelHideDelay);this._bHideDelayEventHandlersAssigned=true;}}else{S.unsubscribe(this._execHideDelay);P.unsubscribe(this._cancelHideDelay);Q.unsubscribe(this._cancelHideDelay);this._bHideDelayEventHandlersAssigned=false;}},configContainer:function(O,N,Q){var P=N[0];if(typeof P=="string"){this.cfg.setProperty("container",document.getElementById(P),true);}},_setMaxHeight:function(O,N,P){this.cfg.setProperty("maxheight",P);this.renderEvent.unsubscribe(this._setMaxHeight);},configMaxHeight:function(a,U,X){var T=U[0],Q=this.element,R=this.body,Y=this.header,O=this.footer,W=this._onScrollTargetMouseOver,b=this._onScrollTargetMouseOut,N=this.cfg.getProperty("minscrollheight"),V,S,P;if(T!==0&&T<N){T=N;}if(this.lazyLoad&&!R){this.renderEvent.unsubscribe(this._setMaxHeight);if(T>0){this.renderEvent.subscribe(this._setMaxHeight,T,this);}return;}C.setStyle(R,"height","");C.removeClass(R,"yui-menu-body-scrolled");var Z=((H.gecko&&this.parent&&this.parent.parent&&this.parent.parent.cfg.getProperty("position")=="dynamic")||H.ie);if(Z){if(!this.cfg.getProperty("width")){S=Q.offsetWidth;Q.style.width=S+"px";P=(S-(Q.offsetWidth-S))+"px";this.cfg.setProperty("width",P);}}if(!Y&&!O){this.setHeader("&#32;");this.setFooter("&#32;");Y=this.header;O=this.footer;C.addClass(Y,"topscrollbar");C.addClass(O,"bottomscrollbar");Q.insertBefore(Y,R);Q.appendChild(O);}V=(T-(Y.offsetHeight+Y.offsetHeight));if(V>0&&(R.offsetHeight>T)){C.addClass(R,"yui-menu-body-scrolled");C.setStyle(R,"height",(V+"px"));M.on(Y,"mouseover",W,this,true);M.on(Y,"mouseout",b,this,true);M.on(O,"mouseover",W,this,true);M.on(O,"mouseout",b,this,true);this._disableScrollHeader();this._enableScrollFooter();}else{if(Y&&O){if(Z){this.cfg.setProperty("width","");}this._enableScrollHeader();this._enableScrollFooter();M.removeListener(Y,"mouseover",W);M.removeListener(Y,"mouseout",b);M.removeListener(O,"mouseover",W);M.removeListener(O,"mouseout",b);Q.removeChild(Y);Q.removeChild(O);this.header=null;this.footer=null;}}this.cfg.refireEvent("iframe");},configClassName:function(P,O,Q){var N=O[0];if(this._sClassName){C.removeClass(this.element,this._sClassName);}C.addClass(this.element,N);this._sClassName=N;},_onItemAdded:function(O,N){var P=N[0];if(P){P.cfg.setProperty("disabled",true);}},configDisabled:function(P,O,S){var R=O[0],N=this.getItems(),T,Q;if(E.isArray(N)){T=N.length;if(T>0){Q=T-1;do{N[Q].cfg.setProperty("disabled",R);}while(Q--);}if(R){this.clearActiveItem(true);C.addClass(this.element,"disabled");this.itemAddedEvent.subscribe(this._onItemAdded);}else{C.removeClass(this.element,"disabled");this.itemAddedEvent.unsubscribe(this._onItemAdded);}}},onRender:function(R,Q){function S(){var W=this.element,V=this._shadow;if(V&&W){if(V.style.width&&V.style.height){V.style.width="";V.style.height="";}V.style.width=(W.offsetWidth+6)+"px";V.style.height=(W.offsetHeight+1)+"px";}}function U(){this.element.appendChild(this._shadow);}function O(){C.addClass(this._shadow,"yui-menu-shadow-visible");}function N(){C.removeClass(this._shadow,"yui-menu-shadow-visible");}function T(){var W=this._shadow,V,X;if(!W){V=this.element;X=this;if(!G){G=document.createElement("div");G.className="yui-menu-shadow yui-menu-shadow-visible";}W=G.cloneNode(false);V.appendChild(W);this._shadow=W;this.beforeShowEvent.subscribe(O);this.beforeHideEvent.subscribe(N);if(H.ie){window.setTimeout(function(){S.call(X);X.syncIframe();},0);this.cfg.subscribeToConfigEvent("width",S);this.cfg.subscribeToConfigEvent("height",S);this.cfg.subscribeToConfigEvent("maxheight",S);this.changeContentEvent.subscribe(S);D.textResizeEvent.subscribe(S,X,true);this.destroyEvent.subscribe(function(){D.textResizeEvent.unsubscribe(S,X);});}this.cfg.subscribeToConfigEvent("maxheight",U);}}function P(){T.call(this);this.beforeShowEvent.unsubscribe(P);}if(this.cfg.getProperty("position")=="dynamic"){if(this.cfg.getProperty("visible")){T.call(this);}else{this.beforeShowEvent.subscribe(P);}}},initEvents:function(){F.superclass.initEvents.call(this);var N=L.LIST;this.mouseOverEvent=this.createEvent(A.MOUSE_OVER);this.mouseOverEvent.signature=N;this.mouseOutEvent=this.createEvent(A.MOUSE_OUT);this.mouseOutEvent.signature=N;this.mouseDownEvent=this.createEvent(A.MOUSE_DOWN);this.mouseDownEvent.signature=N;this.mouseUpEvent=this.createEvent(A.MOUSE_UP);this.mouseUpEvent.signature=N;this.clickEvent=this.createEvent(A.CLICK);this.clickEvent.signature=N;this.keyPressEvent=this.createEvent(A.KEY_PRESS);this.keyPressEvent.signature=N;this.keyDownEvent=this.createEvent(A.KEY_DOWN);this.keyDownEvent.signature=N;this.keyUpEvent=this.createEvent(A.KEY_UP);this.keyUpEvent.signature=N;this.focusEvent=this.createEvent(A.FOCUS);this.focusEvent.signature=N;this.blurEvent=this.createEvent(A.BLUR);this.blurEvent.signature=N;this.itemAddedEvent=this.createEvent(A.ITEM_ADDED);this.itemAddedEvent.signature=N;this.itemRemovedEvent=this.createEvent(A.ITEM_REMOVED);this.itemRemovedEvent.signature=N;},positionOffScreen:function(){var O=this.iframe,N=this.OFF_SCREEN_POSITION;C.setXY(this.element,N);if(O){C.setXY(O,N);}},getRoot:function(){var O=this.parent,N;if(O){N=O.parent;return N?N.getRoot():this;}else{return this;}},toString:function(){var O="Menu",N=this.id;if(N){O+=(" "+N);}return O;},setItemGroupTitle:function(S,R){var Q,P,O,N;if(typeof S=="string"&&S.length>0){Q=typeof R=="number"?R:0;P=this._aGroupTitleElements[Q];if(P){P.innerHTML=S;}else{P=document.createElement(this.GROUP_TITLE_TAG_NAME);P.innerHTML=S;this._aGroupTitleElements[Q]=P;}O=this._aGroupTitleElements.length-1;do{if(this._aGroupTitleElements[O]){C.removeClass(this._aGroupTitleElements[O],"first-of-type");N=O;}}while(O--);if(N!==null){C.addClass(this._aGroupTitleElements[N],"first-of-type");}this.changeContentEvent.fire();}},addItem:function(N,O){if(N){return this._addItemToGroup(O,N);}},addItems:function(Q,P){var S,N,R,O;if(E.isArray(Q)){S=Q.length;N=[];for(O=0;O<S;O++){R=Q[O];if(R){if(E.isArray(R)){N[N.length]=this.addItems(R,O);}else{N[N.length]=this._addItemToGroup(P,R);}}}if(N.length){return N;}}},insertItem:function(N,O,P){if(N){return this._addItemToGroup(P,N,O);}},removeItem:function(N,O){var P;if(typeof N!="undefined"){if(N instanceof YAHOO.widget.MenuItem){P=this._removeItemFromGroupByValue(O,N);}else{if(typeof N=="number"){P=this._removeItemFromGroupByIndex(O,N);}}if(P){P.destroy();return P;}}},getItems:function(){var P=this._aItemGroups,O,N=[];if(E.isArray(P)){O=P.length;return((O==1)?P[0]:(Array.prototype.concat.apply(N,P)));}},getItemGroups:function(){return this._aItemGroups;},getItem:function(N,O){var P;if(typeof N=="number"){P=this._getItemGroup(O);if(P){return P[N];}}},getSubmenus:function(){var O=this.getItems(),S=O.length,N,P,R,Q;if(S>0){N=[];for(Q=0;Q<S;Q++){R=O[Q];if(R){P=R.cfg.getProperty("submenu");if(P){N[N.length]=P;}}}}return N;},clearContent:function(){var R=this.getItems(),O=R.length,P=this.element,Q=this.body,V=this.header,N=this.footer,U,T,S;if(O>0){S=O-1;do{U=R[S];if(U){T=U.cfg.getProperty("submenu");if(T){this.cfg.configChangedEvent.unsubscribe(this._onParentMenuConfigChange,T);this.renderEvent.unsubscribe(this._onParentMenuRender,T);}this.removeItem(U);}}while(S--);}if(V){M.purgeElement(V);P.removeChild(V);}if(N){M.purgeElement(N);P.removeChild(N);}if(Q){M.purgeElement(Q);Q.innerHTML="";}this.activeItem=null;this._aItemGroups=[];this._aListElements=[];this._aGroupTitleElements=[];this.cfg.setProperty("width",null);},destroy:function(){this.clearContent();this._aItemGroups=null;this._aListElements=null;this._aGroupTitleElements=null;F.superclass.destroy.call(this);},setInitialFocus:function(){var N=this._getFirstEnabledItem();if(N){N.focus();}},setInitialSelection:function(){var N=this._getFirstEnabledItem();if(N){N.cfg.setProperty("selected",true);}},clearActiveItem:function(P){if(this.cfg.getProperty("showdelay")>0){this._cancelShowDelay();}var N=this.activeItem,Q,O;if(N){Q=N.cfg;if(P){N.blur();}Q.setProperty("selected",false);O=Q.getProperty("submenu");if(O){O.hide();}this.activeItem=null;}},focus:function(){if(!this.hasFocus()){this.setInitialFocus();}},blur:function(){var N;if(this.hasFocus()){N=K.getFocusedMenuItem();if(N){N.blur();}}},hasFocus:function(){return(K.getFocusedMenu()==this.getRoot());},subscribe:function(){function Q(V,U,X){var Y=U[0],W=Y.cfg.getProperty("submenu");if(W){W.subscribe.apply(W,X);}}function T(V,U,X){var W=this.cfg.getProperty("submenu");if(W){W.subscribe.apply(W,X);}}F.superclass.subscribe.apply(this,arguments);F.superclass.subscribe.call(this,"itemAdded",Q,arguments);var N=this.getItems(),S,R,O,P;if(N){S=N.length;if(S>0){P=S-1;do{R=N[P];O=R.cfg.getProperty("submenu");if(O){O.subscribe.apply(O,arguments);}else{R.cfg.subscribeToConfigEvent("submenu",T,arguments);}}while(P--);}}},initDefaultConfig:function(){F.superclass.initDefaultConfig.call(this);var N=this.cfg;N.addProperty(J.VISIBLE.key,{handler:this.configVisible,value:J.VISIBLE.value,validator:J.VISIBLE.validator});N.addProperty(J.CONSTRAIN_TO_VIEWPORT.key,{handler:this.configConstrainToViewport,value:J.CONSTRAIN_TO_VIEWPORT.value,validator:J.CONSTRAIN_TO_VIEWPORT.validator,supercedes:J.CONSTRAIN_TO_VIEWPORT.supercedes});N.addProperty(J.POSITION.key,{handler:this.configPosition,value:J.POSITION.value,validator:J.POSITION.validator,supercedes:J.POSITION.supercedes});N.addProperty(J.SUBMENU_ALIGNMENT.key,{value:J.SUBMENU_ALIGNMENT.value,suppressEvent:J.SUBMENU_ALIGNMENT.suppressEvent});N.addProperty(J.AUTO_SUBMENU_DISPLAY.key,{value:J.AUTO_SUBMENU_DISPLAY.value,validator:J.AUTO_SUBMENU_DISPLAY.validator,suppressEvent:J.AUTO_SUBMENU_DISPLAY.suppressEvent});N.addProperty(J.SHOW_DELAY.key,{value:J.SHOW_DELAY.value,validator:J.SHOW_DELAY.validator,suppressEvent:J.SHOW_DELAY.suppressEvent});N.addProperty(J.HIDE_DELAY.key,{handler:this.configHideDelay,value:J.HIDE_DELAY.value,validator:J.HIDE_DELAY.validator,suppressEvent:J.HIDE_DELAY.suppressEvent});N.addProperty(J.SUBMENU_HIDE_DELAY.key,{value:J.SUBMENU_HIDE_DELAY.value,validator:J.SUBMENU_HIDE_DELAY.validator,suppressEvent:J.SUBMENU_HIDE_DELAY.suppressEvent});N.addProperty(J.CLICK_TO_HIDE.key,{value:J.CLICK_TO_HIDE.value,validator:J.CLICK_TO_HIDE.validator,suppressEvent:J.CLICK_TO_HIDE.suppressEvent});N.addProperty(J.CONTAINER.key,{handler:this.configContainer,value:document.body,suppressEvent:J.CONTAINER.suppressEvent});N.addProperty(J.SCROLL_INCREMENT.key,{value:J.SCROLL_INCREMENT.value,validator:J.SCROLL_INCREMENT.validator,supercedes:J.SCROLL_INCREMENT.supercedes,suppressEvent:J.SCROLL_INCREMENT.suppressEvent});N.addProperty(J.MIN_SCROLL_HEIGHT.key,{value:J.MIN_SCROLL_HEIGHT.value,validator:J.MIN_SCROLL_HEIGHT.validator,supercedes:J.MIN_SCROLL_HEIGHT.supercedes,suppressEvent:J.MIN_SCROLL_HEIGHT.suppressEvent});N.addProperty(J.MAX_HEIGHT.key,{handler:this.configMaxHeight,value:J.MAX_HEIGHT.value,validator:J.MAX_HEIGHT.validator,suppressEvent:J.MAX_HEIGHT.suppressEvent,supercedes:J.MAX_HEIGHT.supercedes});N.addProperty(J.CLASS_NAME.key,{handler:this.configClassName,value:J.CLASS_NAME.value,validator:J.CLASS_NAME.validator,supercedes:J.CLASS_NAME.supercedes});N.addProperty(J.DISABLED.key,{handler:this.configDisabled,value:J.DISABLED.value,validator:J.DISABLED.validator,suppressEvent:J.DISABLED.suppressEvent});}});})();(function(){YAHOO.widget.MenuItem=function(K,J){if(K){if(J){this.parent=J.parent;this.value=J.value;this.id=J.id;}this.init(K,J);}};var B=YAHOO.util.Dom,C=YAHOO.widget.Module,E=YAHOO.widget.Menu,H=YAHOO.widget.MenuItem,I=YAHOO.util.CustomEvent,F=YAHOO.lang,D,A={"MOUSE_OVER":"mouseover","MOUSE_OUT":"mouseout","MOUSE_DOWN":"mousedown","MOUSE_UP":"mouseup","CLICK":"click","KEY_PRESS":"keypress","KEY_DOWN":"keydown","KEY_UP":"keyup","ITEM_ADDED":"itemAdded","ITEM_REMOVED":"itemRemoved","FOCUS":"focus","BLUR":"blur","DESTROY":"destroy"},G={"TEXT":{key:"text",value:"",validator:F.isString,suppressEvent:true},"HELP_TEXT":{key:"helptext",supercedes:["text"],suppressEvent:true},"URL":{key:"url",value:"#",suppressEvent:true},"TARGET":{key:"target",suppressEvent:true},"EMPHASIS":{key:"emphasis",value:false,validator:F.isBoolean,suppressEvent:true,supercedes:["text"]},"STRONG_EMPHASIS":{key:"strongemphasis",value:false,validator:F.isBoolean,suppressEvent:true,supercedes:["text"]},"CHECKED":{key:"checked",value:false,validator:F.isBoolean,suppressEvent:true,supercedes:["disabled","selected"]},"SUBMENU":{key:"submenu",suppressEvent:true,supercedes:["disabled","selected"]},"DISABLED":{key:"disabled",value:false,validator:F.isBoolean,suppressEvent:true,supercedes:["text","selected"]},"SELECTED":{key:"selected",value:false,validator:F.isBoolean,suppressEvent:true},"ONCLICK":{key:"onclick",suppressEvent:true},"CLASS_NAME":{key:"classname",value:null,validator:F.isString,suppressEvent:true}};H.prototype={CSS_CLASS_NAME:"yuimenuitem",CSS_LABEL_CLASS_NAME:"yuimenuitemlabel",SUBMENU_TYPE:null,_oAnchor:null,_oHelpTextEM:null,_oSubmenu:null,_oOnclickAttributeValue:null,_sClassName:null,constructor:H,index:null,groupIndex:null,parent:null,element:null,srcElement:null,value:null,browser:C.prototype.browser,id:null,destroyEvent:null,mouseOverEvent:null,mouseOutEvent:null,mouseDownEvent:null,mouseUpEvent:null,clickEvent:null,keyPressEvent:null,keyDownEvent:null,keyUpEvent:null,focusEvent:null,blurEvent:null,init:function(J,R){if(!this.SUBMENU_TYPE){this.SUBMENU_TYPE=E;}this.cfg=new YAHOO.util.Config(this);this.initDefaultConfig();var O=I.LIST,N=this.cfg,P="#",Q,K,M,L;if(F.isString(J)){this._createRootNodeStructure();N.queueProperty("text",J);}else{if(J&&J.tagName){switch(J.tagName.toUpperCase()){case"OPTION":this._createRootNodeStructure();N.queueProperty("text",J.text);N.queueProperty("disabled",J.disabled);this.value=J.value;this.srcElement=J;break;case"OPTGROUP":this._createRootNodeStructure();N.queueProperty("text",J.label);N.queueProperty("disabled",J.disabled);this.srcElement=J;this._initSubTree();break;case"LI":Q=B.getFirstChild(J);if(Q){P=Q.getAttribute("href",2);K=Q.getAttribute("target");M=Q.innerHTML;}this.srcElement=J;this.element=J;this._oAnchor=Q;N.setProperty("text",M,true);N.setProperty("url",P,true);N.setProperty("target",K,true);this._initSubTree();break;}}}if(this.element){L=(this.srcElement||this.element).id;if(!L){L=this.id||B.generateId();this.element.id=L;}this.id=L;B.addClass(this.element,this.CSS_CLASS_NAME);B.addClass(this._oAnchor,this.CSS_LABEL_CLASS_NAME);this.mouseOverEvent=this.createEvent(A.MOUSE_OVER);this.mouseOverEvent.signature=O;this.mouseOutEvent=this.createEvent(A.MOUSE_OUT);this.mouseOutEvent.signature=O;this.mouseDownEvent=this.createEvent(A.MOUSE_DOWN);this.mouseDownEvent.signature=O;this.mouseUpEvent=this.createEvent(A.MOUSE_UP);this.mouseUpEvent.signature=O;this.clickEvent=this.createEvent(A.CLICK);this.clickEvent.signature=O;this.keyPressEvent=this.createEvent(A.KEY_PRESS);this.keyPressEvent.signature=O;this.keyDownEvent=this.createEvent(A.KEY_DOWN);this.keyDownEvent.signature=O;this.keyUpEvent=this.createEvent(A.KEY_UP);this.keyUpEvent.signature=O;this.focusEvent=this.createEvent(A.FOCUS);this.focusEvent.signature=O;this.blurEvent=this.createEvent(A.BLUR);this.blurEvent.signature=O;this.destroyEvent=this.createEvent(A.DESTROY);this.destroyEvent.signature=O;if(R){N.applyConfig(R);}N.fireQueue();}},_createRootNodeStructure:function(){var J,K;if(!D){D=document.createElement("li");D.innerHTML='<a href="#"></a>';}J=D.cloneNode(true);J.className=this.CSS_CLASS_NAME;K=J.firstChild;K.className=this.CSS_LABEL_CLASS_NAME;this.element=J;this._oAnchor=K;},_initSubTree:function(){var P=this.srcElement,L=this.cfg,N,M,K,J,O;if(P.childNodes.length>0){if(this.parent.lazyLoad&&this.parent.srcElement&&this.parent.srcElement.tagName.toUpperCase()=="SELECT"){L.setProperty("submenu",{id:B.generateId(),itemdata:P.childNodes});}else{N=P.firstChild;M=[];do{if(N&&N.tagName){switch(N.tagName.toUpperCase()){case"DIV":L.setProperty("submenu",N);break;case"OPTION":M[M.length]=N;break;}}}while((N=N.nextSibling));K=M.length;if(K>0){J=new this.SUBMENU_TYPE(B.generateId());L.setProperty("submenu",J);for(O=0;O<K;O++){J.addItem((new J.ITEM_TYPE(M[O])));}}}}},configText:function(S,L,N){var K=L[0],M=this.cfg,Q=this._oAnchor,J=M.getProperty("helptext"),R="",O="",P="";if(K){if(J){R='<em class="helptext">'+J+"</em>";}if(M.getProperty("emphasis")){O="<em>";P="</em>";}if(M.getProperty("strongemphasis")){O="<strong>";P="</strong>";}Q.innerHTML=(O+K+P+R);}},configHelpText:function(L,K,J){this.cfg.refireEvent("text");},configURL:function(L,K,J){var N=K[0];if(!N){N="#";}var M=this._oAnchor;if(YAHOO.env.ua.opera){M.removeAttribute("href");}M.setAttribute("href",N);},configTarget:function(M,L,K){var J=L[0],N=this._oAnchor;if(J&&J.length>0){N.setAttribute("target",J);}else{N.removeAttribute("target");}},configEmphasis:function(L,K,J){var N=K[0],M=this.cfg;if(N&&M.getProperty("strongemphasis")){M.setProperty("strongemphasis",false);}M.refireEvent("text");},configStrongEmphasis:function(M,L,K){var J=L[0],N=this.cfg;if(J&&N.getProperty("emphasis")){N.setProperty("emphasis",false);}N.refireEvent("text");},configChecked:function(S,M,O){var R=M[0],K=this.element,Q=this._oAnchor,N=this.cfg,J="-checked",L=this.CSS_CLASS_NAME+J,P=this.CSS_LABEL_CLASS_NAME+J;if(R){B.addClass(K,L);B.addClass(Q,P);}else{B.removeClass(K,L);B.removeClass(Q,P);}N.refireEvent("text");if(N.getProperty("disabled")){N.refireEvent("disabled");}if(N.getProperty("selected")){N.refireEvent("selected");}},configDisabled:function(X,R,a){var Z=R[0],L=this.cfg,P=L.getProperty("submenu"),O=L.getProperty("checked"),S=this.element,V=this._oAnchor,U="-disabled",W="-checked"+U,Y="-hassubmenu"+U,M=this.CSS_CLASS_NAME+U,N=this.CSS_LABEL_CLASS_NAME+U,T=this.CSS_CLASS_NAME+W,Q=this.CSS_LABEL_CLASS_NAME+W,K=this.CSS_CLASS_NAME+Y,J=this.CSS_LABEL_CLASS_NAME+Y;if(Z){if(L.getProperty("selected")){L.setProperty("selected",false);}B.addClass(S,M);B.addClass(V,N);if(P){B.addClass(S,K);B.addClass(V,J);}if(O){B.addClass(S,T);B.addClass(V,Q);}}else{B.removeClass(S,M);B.removeClass(V,N);if(P){B.removeClass(S,K);B.removeClass(V,J);}if(O){B.removeClass(S,T);B.removeClass(V,Q);}}},configSelected:function(X,R,a){var L=this.cfg,Y=R[0],S=this.element,V=this._oAnchor,O=L.getProperty("checked"),P=L.getProperty("submenu"),U="-selected",W="-checked"+U,Z="-hassubmenu"+U,M=this.CSS_CLASS_NAME+U,N=this.CSS_LABEL_CLASS_NAME+U,T=this.CSS_CLASS_NAME+W,Q=this.CSS_LABEL_CLASS_NAME+W,K=this.CSS_CLASS_NAME+Z,J=this.CSS_LABEL_CLASS_NAME+Z;if(YAHOO.env.ua.opera){V.blur();}if(Y&&!L.getProperty("disabled")){B.addClass(S,M);B.addClass(V,N);if(P){B.addClass(S,K);B.addClass(V,J);}if(O){B.addClass(S,T);B.addClass(V,Q);}}else{B.removeClass(S,M);B.removeClass(V,N);if(P){B.removeClass(S,K);B.removeClass(V,J);}if(O){B.removeClass(S,T);B.removeClass(V,Q);}}if(this.hasFocus()&&YAHOO.env.ua.opera){V.focus();}},_onSubmenuBeforeHide:function(M,L){var N=this.parent,J;function K(){N._oAnchor.blur();J.beforeHideEvent.unsubscribe(K);}if(N.hasFocus()){J=N.parent;J.beforeHideEvent.subscribe(K);}},configSubmenu:function(V,O,R){var Q=O[0],P=this.cfg,K=this.element,T=this._oAnchor,N=this.parent&&this.parent.lazyLoad,J="-hassubmenu",L=this.CSS_CLASS_NAME+J,S=this.CSS_LABEL_CLASS_NAME+J,U,W,M;if(Q){if(Q instanceof E){U=Q;U.parent=this;U.lazyLoad=N;}else{if(typeof Q=="object"&&Q.id&&!Q.nodeType){W=Q.id;M=Q;M.lazyload=N;M.parent=this;U=new this.SUBMENU_TYPE(W,M);P.setProperty("submenu",U,true);}else{U=new this.SUBMENU_TYPE(Q,{lazyload:N,parent:this});P.setProperty("submenu",U,true);}}if(U){B.addClass(K,L);B.addClass(T,S);this._oSubmenu=U;if(YAHOO.env.ua.opera){U.beforeHideEvent.subscribe(this._onSubmenuBeforeHide);}}}else{B.removeClass(K,L);B.removeClass(T,S);if(this._oSubmenu){this._oSubmenu.destroy();}}if(P.getProperty("disabled")){P.refireEvent("disabled");}if(P.getProperty("selected")){P.refireEvent("selected");}},configOnClick:function(L,K,J){var M=K[0];if(this._oOnclickAttributeValue&&(this._oOnclickAttributeValue!=M)){this.clickEvent.unsubscribe(this._oOnclickAttributeValue.fn,this._oOnclickAttributeValue.obj);this._oOnclickAttributeValue=null;}if(!this._oOnclickAttributeValue&&typeof M=="object"&&typeof M.fn=="function"){this.clickEvent.subscribe(M.fn,((!YAHOO.lang.isUndefined(M.obj))?M.obj:this),M.scope);this._oOnclickAttributeValue=M;}},configClassName:function(M,L,K){var J=L[0];if(this._sClassName){B.removeClass(this.element,this._sClassName);}B.addClass(this.element,J);this._sClassName=J;},initDefaultConfig:function(){var J=this.cfg;J.addProperty(G.TEXT.key,{handler:this.configText,value:G.TEXT.value,validator:G.TEXT.validator,suppressEvent:G.TEXT.suppressEvent});J.addProperty(G.HELP_TEXT.key,{handler:this.configHelpText,supercedes:G.HELP_TEXT.supercedes,suppressEvent:G.HELP_TEXT.suppressEvent});J.addProperty(G.URL.key,{handler:this.configURL,value:G.URL.value,suppressEvent:G.URL.suppressEvent});J.addProperty(G.TARGET.key,{handler:this.configTarget,suppressEvent:G.TARGET.suppressEvent});J.addProperty(G.EMPHASIS.key,{handler:this.configEmphasis,value:G.EMPHASIS.value,validator:G.EMPHASIS.validator,suppressEvent:G.EMPHASIS.suppressEvent,supercedes:G.EMPHASIS.supercedes});J.addProperty(G.STRONG_EMPHASIS.key,{handler:this.configStrongEmphasis,value:G.STRONG_EMPHASIS.value,validator:G.STRONG_EMPHASIS.validator,suppressEvent:G.STRONG_EMPHASIS.suppressEvent,supercedes:G.STRONG_EMPHASIS.supercedes});J.addProperty(G.CHECKED.key,{handler:this.configChecked,value:G.CHECKED.value,validator:G.CHECKED.validator,suppressEvent:G.CHECKED.suppressEvent,supercedes:G.CHECKED.supercedes});J.addProperty(G.DISABLED.key,{handler:this.configDisabled,value:G.DISABLED.value,validator:G.DISABLED.validator,suppressEvent:G.DISABLED.suppressEvent});J.addProperty(G.SELECTED.key,{handler:this.configSelected,value:G.SELECTED.value,validator:G.SELECTED.validator,suppressEvent:G.SELECTED.suppressEvent});J.addProperty(G.SUBMENU.key,{handler:this.configSubmenu,supercedes:G.SUBMENU.supercedes,suppressEvent:G.SUBMENU.suppressEvent});J.addProperty(G.ONCLICK.key,{handler:this.configOnClick,suppressEvent:G.ONCLICK.suppressEvent});J.addProperty(G.CLASS_NAME.key,{handler:this.configClassName,value:G.CLASS_NAME.value,validator:G.CLASS_NAME.validator,suppressEvent:G.CLASS_NAME.suppressEvent});},getNextEnabledSibling:function(){var L,O,J,N,M;function K(P,Q){return P[Q]||K(P,(Q+1));}if(this.parent instanceof E){L=this.groupIndex;O=this.parent.getItemGroups();if(this.index<(O[L].length-1)){J=K(O[L],(this.index+1));}else{if(L<(O.length-1)){N=L+1;}else{N=0;}M=K(O,N);J=K(M,0);}return(J.cfg.getProperty("disabled")||J.element.style.display=="none")?J.getNextEnabledSibling():J;}},getPreviousEnabledSibling:function(){var N,P,K,J,M;function O(Q,R){return Q[R]||O(Q,(R-1));}function L(Q,R){return Q[R]?R:L(Q,(R+1));}if(this.parent instanceof E){N=this.groupIndex;P=this.parent.getItemGroups();if(this.index>L(P[N],0)){K=O(P[N],(this.index-1));}else{if(N>L(P,0)){J=N-1;}else{J=P.length-1;}M=O(P,J);K=O(M,(M.length-1));}return(K.cfg.getProperty("disabled")||K.element.style.display=="none")?K.getPreviousEnabledSibling():K;}},focus:function(){var N=this.parent,M=this._oAnchor,J=N.activeItem,L=this;function K(){try{if(YAHOO.env.ua.ie&&!document.hasFocus()){return;}if(J){J.blurEvent.fire();}M.focus();L.focusEvent.fire();}catch(O){}}if(!this.cfg.getProperty("disabled")&&N&&N.cfg.getProperty("visible")&&this.element.style.display!="none"){window.setTimeout(K,0);}},blur:function(){var K=this.parent;if(!this.cfg.getProperty("disabled")&&K&&K.cfg.getProperty("visible")){var J=this;window.setTimeout(function(){try{J._oAnchor.blur();J.blurEvent.fire();}catch(L){}},0);}},hasFocus:function(){return(YAHOO.widget.MenuManager.getFocusedMenuItem()==this);},destroy:function(){var L=this.element,K,J;if(L){K=this.cfg.getProperty("submenu");if(K){K.destroy();}this.mouseOverEvent.unsubscribeAll();this.mouseOutEvent.unsubscribeAll();this.mouseDownEvent.unsubscribeAll();this.mouseUpEvent.unsubscribeAll();this.clickEvent.unsubscribeAll();this.keyPressEvent.unsubscribeAll();this.keyDownEvent.unsubscribeAll();this.keyUpEvent.unsubscribeAll();this.focusEvent.unsubscribeAll();this.blurEvent.unsubscribeAll();this.cfg.configChangedEvent.unsubscribeAll();J=L.parentNode;if(J){J.removeChild(L);this.destroyEvent.fire();}this.destroyEvent.unsubscribeAll();}},toString:function(){var K="MenuItem",J=this.id;if(J){K+=(" "+J);}return K;}};F.augmentProto(H,YAHOO.util.EventProvider);})();(function(){YAHOO.widget.ContextMenu=function(G,F){YAHOO.widget.ContextMenu.superclass.constructor.call(this,G,F);};var B=YAHOO.util.Event,E=YAHOO.widget.ContextMenu,D={"TRIGGER_CONTEXT_MENU":"triggerContextMenu","CONTEXT_MENU":(YAHOO.env.ua.opera?"mousedown":"contextmenu"),"CLICK":"click"},C={"TRIGGER":{key:"trigger",suppressEvent:true}};function A(G,F,H){this.cfg.setProperty("xy",H);this.beforeShowEvent.unsubscribe(A,H);}YAHOO.lang.extend(E,YAHOO.widget.Menu,{_oTrigger:null,_bCancelled:false,contextEventTarget:null,triggerContextMenuEvent:null,init:function(G,F){E.superclass.init.call(this,G);this.beforeInitEvent.fire(E);if(F){this.cfg.applyConfig(F,true);}this.initEvent.fire(E);},initEvents:function(){E.superclass.initEvents.call(this);this.triggerContextMenuEvent=this.createEvent(D.TRIGGER_CONTEXT_MENU);this.triggerContextMenuEvent.signature=YAHOO.util.CustomEvent.LIST;},cancel:function(){this._bCancelled=true;},_removeEventHandlers:function(){var F=this._oTrigger;if(F){B.removeListener(F,D.CONTEXT_MENU,this._onTriggerContextMenu);if(YAHOO.env.ua.opera){B.removeListener(F,D.CLICK,this._onTriggerClick);}}},_onTriggerClick:function(G,F){if(G.ctrlKey){B.stopEvent(G);}},_onTriggerContextMenu:function(H,F){if(H.type=="mousedown"&&!H.ctrlKey){return;}var G;B.stopEvent(H);this.contextEventTarget=B.getTarget(H);this.triggerContextMenuEvent.fire(H);YAHOO.widget.MenuManager.hideVisible();if(!this._bCancelled){G=B.getXY(H);if(!YAHOO.util.Dom.inDocument(this.element)){this.beforeShowEvent.subscribe(A,G);}else{this.cfg.setProperty("xy",G);}this.show();}this._bCancelled=false;},toString:function(){var G="ContextMenu",F=this.id;if(F){G+=(" "+F);}return G;},initDefaultConfig:function(){E.superclass.initDefaultConfig.call(this);this.cfg.addProperty(C.TRIGGER.key,{handler:this.configTrigger,suppressEvent:C.TRIGGER.suppressEvent});},destroy:function(){this._removeEventHandlers();E.superclass.destroy.call(this);},configTrigger:function(G,F,I){var H=F[0];if(H){if(this._oTrigger){this._removeEventHandlers();}this._oTrigger=H;B.on(H,D.CONTEXT_MENU,this._onTriggerContextMenu,this,true);if(YAHOO.env.ua.opera){B.on(H,D.CLICK,this._onTriggerClick,this,true);}}else{this._removeEventHandlers();}}});}());YAHOO.widget.ContextMenuItem=YAHOO.widget.MenuItem;(function(){YAHOO.widget.MenuBar=function(F,E){YAHOO.widget.MenuBar.superclass.constructor.call(this,F,E);};function D(E){if(typeof E=="string"){return("dynamic,static".indexOf((E.toLowerCase()))!=-1);}}var B=YAHOO.util.Event,A=YAHOO.widget.MenuBar,C={"POSITION":{key:"position",value:"static",validator:D,supercedes:["visible"]},"SUBMENU_ALIGNMENT":{key:"submenualignment",value:["tl","bl"],suppressEvent:true},"AUTO_SUBMENU_DISPLAY":{key:"autosubmenudisplay",value:false,validator:YAHOO.lang.isBoolean,suppressEvent:true}};YAHOO.lang.extend(A,YAHOO.widget.Menu,{init:function(F,E){if(!this.ITEM_TYPE){this.ITEM_TYPE=YAHOO.widget.MenuBarItem;}A.superclass.init.call(this,F);this.beforeInitEvent.fire(A);if(E){this.cfg.applyConfig(E,true);}this.initEvent.fire(A);},CSS_CLASS_NAME:"yuimenubar",_onKeyDown:function(G,F,K){var E=F[0],L=F[1],I,J,H;if(L&&!L.cfg.getProperty("disabled")){J=L.cfg;switch(E.keyCode){case 37:case 39:if(L==this.activeItem&&!J.getProperty("selected")){J.setProperty("selected",true);}else{H=(E.keyCode==37)?L.getPreviousEnabledSibling():L.getNextEnabledSibling();if(H){this.clearActiveItem();H.cfg.setProperty("selected",true);if(this.cfg.getProperty("autosubmenudisplay")){I=H.cfg.getProperty("submenu");if(I){I.show();}}H.focus();}}B.preventDefault(E);break;case 40:if(this.activeItem!=L){this.clearActiveItem();J.setProperty("selected",true);L.focus();}I=J.getProperty("submenu");if(I){if(I.cfg.getProperty("visible")){I.setInitialSelection();I.setInitialFocus();}else{I.show();}}B.preventDefault(E);break;}}if(E.keyCode==27&&this.activeItem){I=this.activeItem.cfg.getProperty("submenu");if(I&&I.cfg.getProperty("visible")){I.hide();this.activeItem.focus();}else{this.activeItem.cfg.setProperty("selected",false);this.activeItem.blur();}B.preventDefault(E);}},_onClick:function(L,G,J){A.superclass._onClick.call(this,L,G,J);var K=G[1],M,E,F,H,I;if(K&&!K.cfg.getProperty("disabled")){M=G[0];E=B.getTarget(M);F=this.activeItem;H=this.cfg;if(F&&F!=K){this.clearActiveItem();}K.cfg.setProperty("selected",true);I=K.cfg.getProperty("submenu");if(I){if(I.cfg.getProperty("visible")){I.hide();}else{I.show();}}}},toString:function(){var F="MenuBar",E=this.id;if(E){F+=(" "+E);}return F;},initDefaultConfig:function(){A.superclass.initDefaultConfig.call(this);var E=this.cfg;E.addProperty(C.POSITION.key,{handler:this.configPosition,value:C.POSITION.value,validator:C.POSITION.validator,supercedes:C.POSITION.supercedes});E.addProperty(C.SUBMENU_ALIGNMENT.key,{value:C.SUBMENU_ALIGNMENT.value,suppressEvent:C.SUBMENU_ALIGNMENT.suppressEvent});E.addProperty(C.AUTO_SUBMENU_DISPLAY.key,{value:C.AUTO_SUBMENU_DISPLAY.value,validator:C.AUTO_SUBMENU_DISPLAY.validator,suppressEvent:C.AUTO_SUBMENU_DISPLAY.suppressEvent});}});}());YAHOO.widget.MenuBarItem=function(B,A){YAHOO.widget.MenuBarItem.superclass.constructor.call(this,B,A);};YAHOO.lang.extend(YAHOO.widget.MenuBarItem,YAHOO.widget.MenuItem,{init:function(B,A){if(!this.SUBMENU_TYPE){this.SUBMENU_TYPE=YAHOO.widget.Menu;}YAHOO.widget.MenuBarItem.superclass.init.call(this,B);var C=this.cfg;if(A){C.applyConfig(A,true);}C.fireQueue();},CSS_CLASS_NAME:"yuimenubaritem",CSS_LABEL_CLASS_NAME:"yuimenubaritemlabel",toString:function(){var A="MenuBarItem";if(this.cfg&&this.cfg.getProperty("text")){A+=(": "+this.cfg.getProperty("text"));}return A;}});YAHOO.register("menu",YAHOO.widget.Menu,{version:"2.5.2",build:"1076"});
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../namespaceManager.js

var NamespaceManager=function(){var m_selectionNamespaces={};var m_outputNamespaces={};var m_outputNamespaceURIs={};function clean(){m_selectionNamespaces={};m_outputNamespaces={};}
function addSelectionNamespace(prefix,uri){var retVal;if(m_selectionNamespaces[prefix]){retVal=false;if(m_selectionNamespaces[prefix]!==uri){throw"selection namespace prefix '"+prefix+"' being added to URI '"+uri+"' is already bound to URI '"+m_selectionNamespaces[prefix]+"'";}}
else{m_selectionNamespaces[prefix]=uri;retVal=true;}
return retVal;}
function addOutputNamespace(prefix,uri){if(m_outputNamespaces[uri]===undefined){m_outputNamespaces[uri]=[];}
m_outputNamespaces[uri].push(prefix);m_outputNamespaceURIs[prefix]=uri;return true;}
function readOutputNamespacesFromNamespaceAwareDocument(oDocument){oDocument=oDocument||document;var nsList=oDocument.namespaces;for(var i=0;i<nsList.length;++i){this.addOutputNamespace(nsList[i].name,nsList[i].urn);}}
function readOutputNamespacesFromDocumentElementAtrributeList(oDocument){oDocument=oDocument||document;var attrMap=oDocument.documentElement.attributes;var l=attrMap.length;for(var i=0;i<l;++i){var thisAttr=attrMap[i];if(thisAttr.nodeName.indexOf('xmlns:')===0){var prefix=thisAttr.nodeName.slice(6).toLowerCase();this.addOutputNamespace(prefix,thisAttr.nodeValue);}}}
function getOutputPrefixesFromURI(uri){return m_outputNamespaces[uri];}
function translateCSSSelectorForPrefix(selector,prefix){var selectionURI=m_selectionNamespaces[prefix];if(selectionURI===undefined){throw"Unknown Prefix: '"+prefix+"' in CSS selector '"+selector+"'";}
else{var sMatchThisPrefix=prefix+"\\|";var matchGivenPrefix=new RegExp(sMatchThisPrefix,"g");var outputprefixes=m_outputNamespaces[selectionURI];if(!outputprefixes||outputprefixes.length===0){throw("No output prefixes found for selection namespace prefix '"+prefix+"'");}
else{var alternativesForThisURI=[];for(var i=0;i<outputprefixes.length;++i){var css1NamespacePrefix=outputprefixes[i]+"\\:";alternativesForThisURI.push(selector.replace(matchGivenPrefix,css1NamespacePrefix));}}}
return alternativesForThisURI.join(", ");}
function translateCSSSelector(selector){var newSelector=selector;var matchNamespacePrefix=/(\w+)\|\w+/;var result=matchNamespacePrefix.exec(newSelector);while(result){var l=result.length;if(l>1){newSelector=translateCSSSelectorForPrefix(newSelector,result[1]);}
result=matchNamespacePrefix.exec(newSelector);}
return newSelector;}
function getElementsByTagNameNS(searchNode,namespaceURI,elementName){return searchNode.getElementsByTagNameNS(namespaceURI,elementName);}
function getElementsByTagNameNS_Aware(searchNode,namespaceURI,elementName){var retVal=[];var allTagNameMatches=searchNode.getElementsByTagName(elementName);var i;for(i=0;i<allTagNameMatches.length;++i){if(allTagNameMatches[i].scopeName!=="HTML"){if(""!==allTagNameMatches[i].tagUrn===namespaceURI){retVal.push(allTagNameMatches[i]);}
else if(m_outputNamespaceURIs[allTagNameMatches[i].scopeName]===namespaceURI){retVal.push(allTagNameMatches[i]);}}
else if(namespaceURI===""){retVal.push(allTagNameMatches[i]);}}
return retVal;}
function getElementsByTagNameNS_Unaware(searchNode,namespaceURI,elementName){var retVal=[];var i=0;var j=0;if(namespaceURI===""){var elementsWithNoPrefix=searchNode.getElementsByTagName(elementName);for(i=0;i<elementsWithNoPrefix.length;++i){retVal.push(elementsWithNoPrefix[i]);}}
else{innerGetElementsByTagNameNS_Unaware_YUI(searchNode,namespaceURI,elementName,retVal);}
return retVal;}
function innerGetElementsByTagNameNS_Unaware(searchNode,namespaceURI,elementName,elements){var i;var j;var prefixes=this.getOutputPrefixesFromURI(namespaceURI);if(prefixes){for(i=0;i<prefixes.length;++i){var elementsWithThisPrefix=searchNode.getElementsByTagName(prefixes[i]+":"+elementName);for(j=0;j<elementsWithThisPrefix.length;++j){elements.push(elementsWithThisPrefix[j]);}}}
return;}
function innerGetElementsByTagNameNS_Unaware_YUI(searchNode,namespaceURI,elementName,elements){var fnCheckNamespace=function(el)
{var retVal=false;var sQName=el.tagName.toLowerCase();var ixColon=sQName.indexOf(':');var sTagName=sQName.slice(ixColon+1);if(sTagName===elementName){var sPrefix=sQName.slice(0,ixColon);if(m_outputNamespaceURIs[sPrefix]===namespaceURI){retVal=true;elements.push(el);}}
return retVal;};YAHOO.util.Dom.getElementsBy(fnCheckNamespace,null,searchNode);return;}
function getLowerCaseLocalName(node){var sNodeName=node.nodeName;return sNodeName.slice(sNodeName.indexOf(":")+1,sNodeName.length).toLowerCase();}
function compareFullName(node,localName,nsURI){var retval=false;var sNodeFullName=node.nodeName.toLowerCase();var arrSegments=sNodeFullName.split(":");var nodeLocalName=arrSegments.length===1?arrSegments[0]:arrSegments[1];if(nodeLocalName===localName){var nodePrefix=arrSegments.length===1?node.scopeName:arrSegments[0];if((!nodePrefix||nodePrefix==="HTML")&&!nsURI){retval=true;}
else if(m_outputNamespaceURIs[nodePrefix]===nsURI){retval=true;}}
return retval;}
function getAttributeNS(node,nsURI,attributeName){var retval=null;var prefixes=null;var prefix=null;if(UX.isXHTML){retval=node.getAttributeNS(nsURI,attributeName);}else{prefixes=this.getOutputPrefixesFromURI(nsURI);if(prefixes){prefix=prefixes[0];retval=node.getAttribute(prefix+":"+attributeName);}}
return retval;}
function getNamespaceURI(node){var nsURI=node.namespaceURI,arrSegments,nodePrefix;if(!nsURI||(UX.isWebKit&&!UX.isXHTML)){arrSegments=node.nodeName.toLowerCase().split(":");nodePrefix=arrSegments.length===1?node.scopeName:arrSegments[0];if(nodePrefix){nsURI=m_outputNamespaceURIs[nodePrefix];}}
return nsURI;}
function getNamespaceURIForPrefix(nodePrefix){return(nodePrefix)?m_outputNamespaceURIs[nodePrefix]:"";}
var itself=function(){};itself.translateCSSSelector=translateCSSSelector;itself.getOutputPrefixesFromURI=getOutputPrefixesFromURI;itself.getAttributeNS=getAttributeNS;itself.addSelectionNamespace=addSelectionNamespace;itself.addOutputNamespace=addOutputNamespace;itself.getLowerCaseLocalName=getLowerCaseLocalName;itself.compareFullName=compareFullName;itself.getNamespaceURI=getNamespaceURI;itself.clean=clean;if(document.namespaces){itself.readOutputNamespacesFromDocument=readOutputNamespacesFromNamespaceAwareDocument;}
else{itself.readOutputNamespacesFromDocument=readOutputNamespacesFromDocumentElementAtrributeList;}
itself.readOutputNamespacesFromInstance=readOutputNamespacesFromDocumentElementAtrributeList;if(UX.isXHTML){itself.getElementsByTagNameNS=getElementsByTagNameNS;}else if(document.namespaces){itself.getElementsByTagNameNS=getElementsByTagNameNS_Aware;}else{itself.getElementsByTagNameNS=getElementsByTagNameNS_Unaware;}
itself.getNamespaceURIForPrefix=getNamespaceURIForPrefix;return itself;}();
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../decorate.js

var DECORATOR=function(){var g_DecorationRules={},g_arrHandlersToCallOnLoad=[],innerSetupDecorator=null,getCustomCSSProperty,isIE,itself={},m_elementsInSuspension=[],m_suspended=0;function extendDecorationRules(rules,additions){var key;for(key in additions){if(rules[key]){rules[key]=rules[key].concat(additions[key]);}else{rules[key]=additions[key];}}}
function addDecorationRulesForNamespace(namespaceURI,rules){if(g_DecorationRules[namespaceURI]){extendDecorationRules(g_DecorationRules[namespaceURI],rules);}else{g_DecorationRules[namespaceURI]=rules;}}
function addDecorationRules(decorationRules){if(decorationRules.namespaceURI&&decorationRules.rules){addDecorationRulesForNamespace(decorationRules.namespaceURI,decorationRules.rules);}else if(decorationRules.rules){addDecorationRulesForNamespace("*",decorationRules.rules);}}
function applyDecorationRules(doc){var currentDocument=doc||document,nsURI,nsRules,localName,nsPrefixes,nsPrefix,elements,count;if(UX.hasDecorationSupport){return;}
for(nsURI in g_DecorationRules){if(nsURI==="*"){continue;}
nsRules=g_DecorationRules[nsURI];for(localName in nsRules){if(localName==="*"||localName==="pe-value"){continue;}
if(UX.isXHTML){elements=currentDocument.getElementsByTagNameNS(nsURI,localName);}else{nsPrefixes=NamespaceManager.getOutputPrefixesFromURI(nsURI);nsPrefix=nsPrefixes[nsPrefixes.length-1];elements=currentDocument.getElementsByTagName(nsPrefix+":"+localName);}
for(count=0;count<elements.length;count++){DECORATOR.attachDecoration(elements[count],true,true);if(nsURI==="http://www.w3.org/2002/xforms"&&(localName==="repeat"||localName==="case"||localName==="group"||localName==="header")){DECORATOR.applyDecorationRules(elements[count]);}}}}
elements=currentDocument.getElementsByTagName("pe-value");for(count=0;count<elements.length;count++){DECORATOR.attachDecoration(elements[count],true,true);}
if(!doc){this.callDocumentReadyHandlers();}}
function callHandlers(obj,handlers){if(handlers){obj.oHandler=handlers.pop();while(obj.oHandler){obj.oHandler();obj.oHandler=handlers.pop();}}}
function callDocumentReadyHandlers(){var o=g_arrHandlersToCallOnLoad.pop();while(o){callHandlers(o[0],o[1]);o=g_arrHandlersToCallOnLoad.pop();}
g_bDocumentLoaded=true;}
function registerForOnloadOrCallNow(obj,arr){if(g_bDocumentLoaded){callHandlers(obj,arr);}else{g_arrHandlersToCallOnLoad.push([obj,arr]);}}
function addFunction(dest,name,func){if(!dest[name]){dest[name]=[];}
return dest[name].push(func);}
function generateMozBindingStyle(objs){if(objs!==undefined){return"-moz-binding: url(\""+g_sBehaviourDirectory+"decorator.xml"+(objs.length>0?"?"+objs.join("&"):"")+"#decorator\");";}else{return"";}}
function ieSetupDecorator(defs){var bDocumentAlreadyLoaded,oStyleSheet,sBehaviourRule,sRule,alternateSelectors,i,j;bDocumentAlreadyLoaded=g_bDocumentLoaded;g_bDocumentLoaded=false;oStyleSheet=document.createStyleSheet("",0);sBehaviourRule="\n behavior: expression(DECORATOR.decorate(this)); ";for(i=0;defs.length>i;++i){sRule="";if(defs[i].objects!==undefined){sRule+=generateMozBindingStyle(defs[i].objects)+sBehaviourRule;}
sRule+=(defs[i].cssText||"");defs[i].selector=defs[i].selector.replace(/>/g,'');alternateSelectors=defs[i].selector.split(",");for(j=0;j<alternateSelectors.length;++j){oStyleSheet.addRule(alternateSelectors[j],sRule);}}
g_bDocumentLoaded=bDocumentAlreadyLoaded;if(bDocumentAlreadyLoaded){callDocumentReadyHandlers();}}
function isFirefox3(){return(navigator.oscpu&&document.getElementsByClassName);}
function ffSetupDecorator(defs,ns){var cssNode,oHead,oStyle,s,htmlPrefix,htmlNamespaceURI,xformsPrefix,xformsNamespaceURI,anHTMLPrefix,aXFormsPrefix,i,sRule,styleTextNode;if(ns==="http://www.w3.org/2002/xforms"&&isFirefox3()){try{cssNode=document.createElement('link');cssNode.type='text/css';cssNode.rel='stylesheet';cssNode.href=g_sBehaviourDirectory+"generated-css.css";cssNode.media='screen';cssNode.title='dynamicLoadedSheet';document.getElementsByTagName("head")[0].appendChild(cssNode);}
catch(e){alert(e);}}else if(ns==="http://www.w3.org/2005/SMIL21/BasicAnimation"&&isFirefox3()){}else{oHead=document.getElementsByTagName("head")[0];oStyle=document.createElement('style');s="";oStyle.setAttribute("type","text/css");if(UX.isXHTML){htmlPrefix="h";htmlNamespaceURI="http://www.w3.org/1999/xhtml";xformsPrefix="xf";xformsNamespaceURI="http://www.w3.org/2002/xforms";anHTMLPrefix=NamespaceManager.getOutputPrefixesFromURI(htmlNamespaceURI);if((anHTMLPrefix!==undefined)&&(anHTMLPrefix!==null)){htmlPrefix=anHTMLPrefix[0];}
aXFormsPrefix=NamespaceManager.getOutputPrefixesFromURI(xformsNamespaceURI);if((aXFormsPrefix!==undefined)&&(aXFormsPrefix!==null)){xformsPrefix=aXFormsPrefix[0];}
s+="@namespace smil url(http://www.w3.org/2005/SMIL21/BasicAnimation);";s+="@namespace"+" "+xformsPrefix+" "+"url("+xformsNamespaceURI+");";s+="@namespace"+" "+htmlPrefix+" "+"url("+htmlNamespaceURI+");";}
for(i=0;defs.length>i;++i){if(UX.isXHTML){defs[i].selector=defs[i].selector.replace(/\\:/g,"|");}
sRule=defs[i].selector+"{"+generateMozBindingStyle(defs[i].objects)+(defs[i].cssText||"")+"}";s+=sRule;}
styleTextNode=document.createTextNode(s);oStyle.appendChild(styleTextNode);oHead.insertBefore(oStyle,null);}
return;}
function ffXHTMLSetupDecorator(defs){var oHead,htmlPrefix,htmlNamespaceURI,xformsPrefix,xformsNamespaceURI,anHTMLPrefix,aXFormsPrefix,oStyle,s,i,sRule;oHead=document.getElementsByTagName("head")[0];htmlPrefix="h";htmlNamespaceURI="http://www.w3.org/1999/xhtml";xformsPrefix="xf";xformsNamespaceURI="http://www.w3.org/2002/xforms";if(UX.isXHTML){anHTMLPrefix=NamespaceManager.getOutputPrefixesFromURI(htmlNamespaceURI);if((anHTMLPrefix!==undefined)&&(anHTMLPrefix!==null)){htmlPrefix=anHTMLPrefix[0];}
aXFormsPrefix=NamespaceManager.getOutputPrefixesFromURI(xformsNamespaceURI);if((aXFormsPrefix!==undefined)&&(aXFormsPrefix!==null)){xformsPrefix=aXFormsPrefix[0];}}
oStyle=document.createElement('style');oStyle.setAttribute("type","text/css");s='';s+="@namespace smil url(http://www.w3.org/2005/SMIL21/BasicAnimation);";s+="@namespace"+" "+xformsPrefix+" "+"url("+xformsNamespaceURI+");";s+="@namespace"+" "+htmlPrefix+" "+"url("+htmlNamespaceURI+");";for(i=0;defs.length>i;++i){if(UX.isXHTML){defs[i].selector=defs[i].selector.replace(/\\:/g,"|");}
sRule=defs[i].selector+"{"+generateMozBindingStyle(defs[i].objects)+(defs[i].cssText||"")+"}";s+=sRule;}
oStyle.innerHTML=s;oHead.insertBefore(oStyle,null);}
function extend(destination,source,bExecuteConstructorsImmediately){var property,ix;for(property in source){switch(property){case"ctor":case"onContentReady":if(bExecuteConstructorsImmediately){destination[property]=source[property];}else{addFunction(destination,property,source[property]);}
break;case"onDocumentReady":if(g_bDocumentLoaded&&bExecuteConstructorsImmediately){destination[property]=source[property];}else{addFunction(destination,property,source[property]);}
break;default:destination[property]=source[property];}}
if(bExecuteConstructorsImmediately){if(destination.ctor){destination.ctor();}
if(destination.onContentReady){destination.onContentReady();}
if(destination.onDocumentReady){destination.onDocumentReady();}}
return destination;}
innerSetupDecorator=null;function setupDecorator(defs,ns){var bDocumentAlreadyLoaded,i;bDocumentAlreadyLoaded=g_bDocumentLoaded;g_bDocumentLoaded=false;NamespaceManager.readOutputNamespacesFromDocument();for(i=0;i<defs.length;++i){defs[i].selector=NamespaceManager.translateCSSSelector(defs[i].selector);}
innerSetupDecorator(defs,ns);if(bDocumentAlreadyLoaded){spawn(callDocumentReadyHandlers);}}
if(document.all){innerSetupDecorator=ieSetupDecorator;}else if(UX.isXHTML){innerSetupDecorator=ffXHTMLSetupDecorator;}else{innerSetupDecorator=ffSetupDecorator;}
function getCustomCSSPropertyIE(element,propertyName){var propertyValue=element.currentStyle[propertyName];if(propertyValue===undefined){if(propertyName.charAt(0)==='-'){propertyName=propertyName.slice(1);}else{propertyName="-"+propertyName;}
propertyValue=element.currentStyle[propertyName];}
return propertyValue;}
function getCustomCSSPropertyFF(element,propertyName){var currentStyle=window.getComputedStyle(element,"");return currentStyle.getPropertyValue(propertyName);}
isIE=(navigator.appVersion.indexOf("MSIE")!==-1)?true:false;getCustomCSSProperty=isIE?getCustomCSSPropertyIE:getCustomCSSPropertyFF;function getDecorationObjectNames(element){var sBehaviours=getCustomCSSProperty(element,"-moz-binding"),arrBehaviours=[];if(sBehaviours!==undefined&&sBehaviours!==null&&sBehaviours.indexOf('?')!==-1){sBehaviours=sBehaviours.substring(sBehaviours.indexOf('?')+1,sBehaviours.lastIndexOf('#'));arrBehaviours=sBehaviours.split("&");}
return arrBehaviours;}
function addObjectBehaviour(elmnt,Behaviour,bExecuteConstructorsImmediately){try{var behaviourInstance=new Behaviour(elmnt);DECORATOR.extend(elmnt,behaviourInstance,bExecuteConstructorsImmediately);}catch(e){debugger;}}
function attachSingleBehaviour(sBehaviour){addObjectBehaviour(this,sBehaviour,false);}
function updateDecorationObjectNames(element,arrBehaviours){var arrUpdatedBehaviours=arrBehaviours,elementNSURI=NamespaceManager.getNamespaceURI(element),elementLocalName=NamespaceManager.getLowerCaseLocalName(element),elementRules,wildcardRules,rules,rulecount;if(g_DecorationRules[elementNSURI]){elementRules=g_DecorationRules[elementNSURI][elementLocalName]?g_DecorationRules[elementNSURI][elementLocalName]:[];wildcardRules=g_DecorationRules[elementNSURI]["*"]?g_DecorationRules[elementNSURI]["*"]:[];rules=elementRules.concat(wildcardRules);}
if(g_DecorationRules["*"]){rules=rules?rules.concat(g_DecorationRules["*"]):g_DecorationRules["*"];}
if(elementLocalName==="pe-value"){rules=rules?rules.concat(g_DecorationRules["http://www.w3.org/2002/xforms"][elementLocalName]):g_DecorationRules["http://www.w3.org/2002/xforms"][elementLocalName];rules=rules.concat(g_DecorationRules["http://www.w3.org/2002/xforms"]["*"]);}
for(rulecount=0;rules&&rulecount<rules.length;rulecount++){if(rules[rulecount].match===undefined||rules[rulecount].match(element)){arrUpdatedBehaviours=rules[rulecount].apply(arrUpdatedBehaviours);}}
return arrUpdatedBehaviours;}
function attachDecoration(element,handleContentReady,handleDocumentReady){var bReturn=false,tIndex,arrBehaviours,i;tIndex=element.getAttribute("tabindex");if(!UX.hasDecorationSupport&&element.decorated){return bReturn;}
if(tIndex===0){element.tabIndex=1;}
element.decorated=true;element.constructors=[];element.contentReadyHandlers=[];element.documentReadyHandlers=[];element.attachSingleBehaviour=attachSingleBehaviour;arrBehaviours=getDecorationObjectNames(element);arrBehaviours=updateDecorationObjectNames(element,arrBehaviours);if(arrBehaviours.length>0){for(i=0;i<arrBehaviours.length;++i){addObjectBehaviour(element,arrBehaviours[i],false);}
if(m_suspended){m_elementsInSuspension.push(element);}else{callConstructionFunctions(element,handleContentReady,handleDocumentReady)
bReturn=true;}}
return bReturn;}
function callConstructionFunctions(element,handleContentReady,handleDocumentReady){callHandlers(element,element.ctor);if(handleContentReady){callHandlers(element,element.onContentReady);}
if(handleDocumentReady){registerForOnloadOrCallNow(element,element.onDocumentReady);}}
function decorate(e){if(e.decorated){}else{var s=getCustomCSSProperty(e,"-binding-ignore");if(s===undefined||s==="false"){e.style.behavior=("url()");e.decorated=true;DECORATOR.attachDecoration(e,true,true);}}
return;}
var isInDocument=function(element){var parent=element.parentNode;while(parent){if(parent===document){return true;}
parent=parent.parentNode;}
return false;};itself.extend=extend;itself.setupDecorator=setupDecorator;itself.attachDecoration=attachDecoration;itself.decorate=decorate;itself.callDocumentReadyHandlers=callDocumentReadyHandlers;itself.addDecorationRules=addDecorationRules;itself.applyDecorationRules=applyDecorationRules;itself.onAllBindingsAttached=function(obj){obj.parentNode.removeChild(obj);this.callDocumentReadyHandlers();};itself.suspend=function(){++m_suspended;};itself.resume=function(){var element;if(!--m_suspended){while(m_elementsInSuspension[0]){element=m_elementsInSuspension.pop();if(isInDocument(element)){callConstructionFunctions(element,true,true);}}}};return itself;}();YAHOO.util.Event.onDOMReady(function(){DECORATOR.applyDecorationRules();window.status="ready";});function SomeObject(elmnt){}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../dom/listener.js

function Listener(elmnt){this.element=elmnt;}
Listener.prototype.attachListeners=function(){var oElement,sEvent,sObserverRef,sPhase,bUseCapture,oObserver,thisAsListener,oTarget;oElement=this.element;sEvent=NamespaceManager.getAttributeNS(oElement,"http://www.w3.org/2001/xml-events","event");sObserverRef=NamespaceManager.getAttributeNS(oElement,"http://www.w3.org/2001/xml-events","observer");sPhase=NamespaceManager.getAttributeNS(oElement,"http://www.w3.org/2001/xml-events","phase");bUseCapture=(sPhase==="capture")?true:false;oObserver=null;if(!sEvent){return;}
if(sObserverRef){oObserver=oElement.ownerDocument.getElementById(sObserverRef);}else{oObserver=oElement.parentNode;}
try{if(oObserver&&sEvent){thisAsListener=this;if(UX.isIE){if(!oObserver.addEventListener){oTarget=new EventTarget(oObserver);DECORATOR.extend(oObserver,oTarget,false);}}else{thisAsListener=function(evt){oElement.handleEvent(evt);};}
oObserver.addEventListener(sEvent,thisAsListener,bUseCapture);}}catch(e){debugger;}};Listener.prototype.detach=function(){};Listener.prototype.onDocumentReady=Listener.prototype.attachListeners;
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../dom/dom2events.js

if(!document.createEvent)
{document.createEvent=function(eventType)
{var oRet=null;switch(eventType)
{case"Events":oRet=new Event();break;case"MutationEvents":oRet=new MutationEvent();break;case"UIEvents":oRet=new UIEvent();break;default:throw"NOT_SUPPORTED_ERR";}
return oRet;};var Event=function(){var that={};that.CAPTURING_PHASE=0;that.AT_TARGET=1;that.BUBBLING_PHASE=2;that.DEFAULT_PHASE=3;that.initEvent=function(eventTypeArg,canBubbleArg,cancellableArg){that.type=eventTypeArg;that.target=null;that.currentTarget=null;that.eventPhase=null;that.bubbles=canBubbleArg;that.cancelable=cancellableArg;that.timeStamp=new Date();that._cancelled=false;that._stopPropagation=false;that._stopImmediatePropagation=false;return;};that.stopPropagation=function(){that._stopPropagation=true;return;};that.stopImmediatePropagation=function(){that._stopImmediatePropagation=true;that.stopPropagation();return;};that.preventDefault=function(){if(that.cancelable)
that._cancelled=true;return;};return that;}
var UIEvent=function(){var that=Event();that.initUIEvent=function(eventTypeArg,canBubbleArg,cancellableArg,viewArg,detailArg){that.initEvent(eventTypeArg,canBubbleArg,cancellableArg);that.view=viewArg;that.detail=detailArg;}
return that;}
var MutationEvent=function()
{var that=Event();that.MODIFICATION=1;that.ADDITION=2;that.REMOVAL=3;that.initMutationEvent=function(eventTypeArg,canBubbleArg,cancellableArg,relatedNodeArg,prevValueArg,newValueArg,attrNameArg,attrChangeArg){that.initEvent(eventTypeArg,canBubbleArg,cancellableArg);that.relatedNode=relatedNodeArg;that.prevValue=prevValueArg;that.newValue=newValueArg;that.attrName=attrNameArg;that.attrChange=attrChangeArg;}
return that;};}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../dom/eventTargetProxy.js

var EventTarget=null;function dispatchXformsHint(elmnt,e){var oEvt,savedHintOffCounter;oEvt=elmnt.ownerDocument.createEvent("UIEvents");savedHintOffCounter=FormsProcessor.hintOffCounter;setTimeout(function(){if(savedHintOffCounter===FormsProcessor.hintOffCounter){oEvt.initUIEvent("xforms-hint",true,true,null,1);FormsProcessor.dispatchEvent(elmnt,oEvt);}},200);if(UX.isIE&&window.event){window.event.cancelBubble=true;window.event.returnValue=false;}else if(e){e.stopPropagation();}}
function dispatchXformsHintOff(elmnt,e){var oEvt=document.createEvent("UIEvents");FormsProcessor.hintOffCounter++;oEvt.initUIEvent("xforms-hint-off",true,true,null,1);FormsProcessor.dispatchEvent(elmnt,oEvt);if(UX.isIE&&window.event){window.event.cancelBubble=true;window.event.returnValue=false;}else if(e){e.stopPropagation();}}
function mapclick2domactivate(elmnt,e){var oEvt=document.createEvent("UIEvents");oEvt.initUIEvent("DOMActivate",true,true,null,1);FormsProcessor.dispatchEvent(elmnt,oEvt);if(UX.isIE&&window.event){window.event.cancelBubble=true;window.event.returnValue=false;}else if(e){e.stopPropagation();}}
function mapdblclick2domactivate(elmnt,e){var oEvt=elmnt.ownerDocument.createEvent("UIEvents");oEvt.initUIEvent("DOMActivate",true,true,null,2);FormsProcessor.dispatchEvent(elmnt,oEvt);if(UX.isIE&&window.event){window.event.cancelBubble=true;window.event.returnValue=false;}else if(e){e.stopPropagation();}}
function StyleHoverishly(elmnt){UX.addClassName(elmnt," pc-hover");}
function StyleUnhoverishly(elmnt){UX.removeClassName(elmnt,"pc-hover");}
function StyleFocussedly(elmnt){UX.addClassName(elmnt," pc-focus");}
function StyleUnfocussedly(elmnt){UX.removeClassName(elmnt,"pc-focus");}
function findEventListenerIdx(oArray,oListener){var len=oArray.length;var i;for(i=0;i<len;i++){if(oArray[i]===oListener){break;}}
return((len===i)?-1:i);}
if(UX.isIE){function EventTargetProxy(elmnt){this.element=elmnt;this.arrListener=this.element.arrListener||{};this.element.onclick=function(evt){dispatchXformsHintOff(elmnt,evt);mapclick2domactivate(elmnt);};this.element.ondblclick=function(evt){mapdblclick2domactivate(elmnt);};this.element.onmouseover=function(evt){StyleHoverishly(elmnt);dispatchXformsHint(elmnt,evt);};this.element.onmouseout=function(evt){StyleUnhoverishly(elmnt);dispatchXformsHintOff(elmnt,evt);};this.element.onkeyup=function(evt){dispatchXformsHintOff(elmnt,evt);};this.element.onfocusin=function(evt){StyleFocussedly(elmnt);UX.dispatchEvent(elmnt,"DOMFocusIn",true,false,true);};this.element.onfocusout=function(evt){StyleUnfocussedly(elmnt);UX.dispatchEvent(elmnt,"DOMFocusOut",true,false,true);};this.element.onkeydown=function(){if(typeof this.onKeyDown==="function"){this.onKeyDown(event);}};}
EventTarget=EventTargetProxy;var g_iEventsInProgress=0;var g_pendingEvents=[];var flushEventQueue=function(){var oPendingEvent=g_pendingEvents.pop();while(oPendingEvent){oPendingEvent.target._dispatchEvent(oPendingEvent.evt);oPendingEvent=g_pendingEvents.pop();}};(function(){var PHASE_CAPTURE=0;var PHASE_BUBBLE=1;var PHASE_DEFAULT=2;var _addEventListener=function(sType,oListener,bPhase){var iPhase=PHASE_BUBBLE;if(typeof(sType)!=="string"||typeof(bPhase)!=="boolean"||!oListener){this.element.document.logger.log("addEventListener: invalid arguments");return;}
if(bPhase){iPhase=PHASE_CAPTURE;}
this.arrListener[sType]=this.arrListener[sType]||[];this.arrListener[sType][iPhase]=this.arrListener[sType][iPhase]||[];if(findEventListenerIdx(this.arrListener[sType][iPhase],oListener)<0){this.arrListener[sType][iPhase].push(oListener);}};var _removeEventListener=function(sType,oListener,bPhase){var oList=null;var idx=0;var iPhase=PHASE_BUBBLE;if(typeof(sType)!=="string"||typeof(bPhase)!=="boolean"||!oListener||!this.arrListener[sType]){this.element.document.logger.log("removeEventListener: invalid arguments");return;}
if(bPhase){iPhase=PHASE_CAPTURE;}
oList=this.arrListener[sType][iPhase];if(oList){idx=findEventListenerIdx(oList,oListener);if(idx!==-1){this.element.document.logger.log("Removed listener for "+sType+", phase "+iPhase,"evnt");oList.splice(idx,1);}}};var __notifyListeners=function(thisArg,oEvt){var arr=thisArg.arrListener[oEvt.type];if(arr){var iPhase;switch(oEvt.eventPhase){case oEvt.AT_TARGET:iPhase=PHASE_BUBBLE;break;case oEvt.BUBBLING_PHASE:iPhase=PHASE_BUBBLE;break;case oEvt.CAPTURING_PHASE:iPhase=PHASE_CAPTURE;break;case oEvt.DEFAULT_PHASE:iPhase=PHASE_DEFAULT;break;default:throw"[CEventTarget._notifyListeners] Invalid phase: "+oEvt.eventPhase;}
arr=arr[iPhase];if(arr&&arr.length){thisArg.element.document.logger.log(oEvt.type+": Notifying "+arr.length+" handlers","evnt");for(var i=0;i<arr.length;i++){flushEventQueue();var oListener=arr[i];var bInvoke=true;if(oListener["ev:target"]){if(oEvt.target.id!=oListener["ev:target"]){bInvoke=false;}}
if(typeof(oListener.handleEvent)=="undefined"){bInvoke=false;}
if(bInvoke){oListener.handleEvent(oEvt);}
var sDefaultAction=thisArg.element["ev:defaultAction"];var bPreventDefault;switch(sDefaultAction){case"cancel":bPreventDefault=true;break;case"perform":default:bPreventDefault=false;break;}
if(bPreventDefault){oEvt.preventDefault();}
var sPropagate=thisArg.element["ev:propagate"];var bStopPropagation;switch(sPropagate){case"stop":bPreventDefault=true;break;case"continue":default:bPreventDefault=false;break;}
if(bStopPropagation){oEvt.stopPropagation();}
if(oEvt._stopImmediatePropagation){break;}}
flushEventQueue();}}};var getTargetList=function(oEvt){var bRet=[];var oNode=oEvt.target.parentElement;while(oNode){var sTypeOfAddEventListener=typeof oNode.addEventListener;if(sTypeOfAddEventListener=="function"||sTypeOfAddEventListener=="unknown"){bRet.push(oNode);}
oNode=oNode.parentElement;}
return bRet;};var capture=function(oEvt,arrTargetList){oEvt.eventPhase=oEvt.CAPTURING_PHASE;var i,oNode;for(i=arrTargetList.length-1;i>=0;i--){oNode=arrTargetList[i];oNode.currentTarget=oNode;__notifyListeners(oNode,oEvt);if(oEvt._stopPropagation){break;}}};var bubble=function(thisArg,oEvt,arrTargetList){var i,oNode;if(!oEvt._stopPropagation){oEvt.eventPhase=oEvt.AT_TARGET;oEvt.currentTarget=thisArg.element;__notifyListeners(thisArg,oEvt);}
if(!oEvt._stopPropagation){if(oEvt.bubbles){oEvt.eventPhase=oEvt.BUBBLING_PHASE;for(i=0;i<arrTargetList.length;i++){oNode=arrTargetList[i];oEvt.currentTarget=oNode;__notifyListeners(oNode,oEvt);if(oEvt._stopPropagation){break;}}}}};var notifydefault=function(thisArg,oEvt){if(!oEvt._cancelled){oEvt.eventPhase=oEvt.DEFAULT_PHASE;oEvt.currentTarget=thisArg.element;__notifyListeners(thisArg,oEvt);}};function _dispatchEvent(oEvt){if(g_iEventsInProgress>1){return __dispatchEvent(this,oEvt);}else{return __dispatchEvent(this,oEvt);}}
function __dispatchEvent(thisArg,oEvt){++g_iEventsInProgress;try{var sType=oEvt.type;oEvt.target=thisArg.element;document.logger.log("Dispatching: "+sType+" to "+oEvt.target.tagName+":"+oEvt.target.uniqueID,"evnt");if(oEvt._actionDepth===undefined){oEvt._actionDepth=0;}
if(oEvt._actionDepth!=-1){oEvt._actionDepth++;}
var arrTargetList=getTargetList(oEvt);capture(oEvt,arrTargetList);bubble(thisArg,oEvt,arrTargetList);if(oEvt._stopPropagation){document.logger.log("*** Propagation stopped ***","evnt");}
if(oEvt._cancelled){document.logger.log("*** Cancelled ***","evnt");}
document.logger.log("End of dispatchEvent: "+sType,"evnt");notifydefault(thisArg,oEvt);}catch(e){}finally{--g_iEventsInProgress;}
return!oEvt._cancelled;}
EventTargetProxy.prototype.addEventListener=_addEventListener;EventTargetProxy.prototype.removeEventListener=_removeEventListener;EventTargetProxy.prototype.dispatchEvent=_dispatchEvent;}());}else{EventTarget=function(elmnt){this.element=elmnt;this.element.addEventListener("click",function(evt){mapclick2domactivate(elmnt,evt);},false);this.element.addEventListener("dblclick",function(evt){mapdblclick2domactivate(elmnt,evt);},false);this.element.addEventListener("mouseover",function(evt){StyleHoverishly(elmnt);},false);this.element.addEventListener("mouseout",function(evt){StyleUnhoverishly(elmnt);},false);this.element.addEventListener("mouseover",function(evt){dispatchXformsHint(elmnt,evt);},false);this.element.addEventListener("mouseout",function(evt){dispatchXformsHintOff(elmnt,evt);},false);this.element.addEventListener("click",function(evt){dispatchXformsHintOff(elmnt,evt);},false);this.element.addEventListener("keyup",function(evt){dispatchXformsHintOff(elmnt,evt);},false);this.element.addEventListener("focus",function(evt){StyleFocussedly(elmnt);if(UX.isFF){UX.dispatchEvent(elmnt,"DOMFocusIn",true,false,true);}},true);this.element.addEventListener("blur",function(evt){StyleUnfocussedly(elmnt);if(UX.isFF){UX.dispatchEvent(elmnt,"DOMFocusOut",true,false,true);}},true);this.element.addEventListener("keydown",function(evt){if(typeof this.onKeyDown==="function"){this.onKeyDown(evt);}},false);};}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../ajaxslt/util.js

function xpathLog(msg){};function xsltLog(msg){};function xsltLogXml(msg){};var ajaxsltIsIE6=navigator.appVersion.match(/MSIE 6.0/);function assert(b){if(!b){throw"Assertion failed";}}
function stringSplit(s,c){var a=s.indexOf(c);if(a==-1){return[s];}
var parts=[];parts.push(s.substr(0,a));while(a!=-1){var a1=s.indexOf(c,a+1);if(a1!=-1){parts.push(s.substr(a+1,a1-a-1));}else{parts.push(s.substr(a+1));}
a=a1;}
return parts;}
function xmlImportNode(doc,node){if(node.nodeType==DOM_TEXT_NODE){return domCreateTextNode(doc,node.nodeValue);}else if(node.nodeType==DOM_CDATA_SECTION_NODE){return domCreateCDATASection(doc,node.nodeValue);}else if(node.nodeType==DOM_ELEMENT_NODE){var newNode=domCreateElement(doc,node.nodeName);for(var i=0;i<node.attributes.length;++i){var an=node.attributes[i];var name=an.nodeName;var value=an.nodeValue;domSetAttribute(newNode,name,value);}
for(var c=node.firstChild;c;c=c.nextSibling){var cn=arguments.callee(doc,c);domAppendChild(newNode,cn);}
return newNode;}else{return domCreateComment(doc,node.nodeName);}}
function Set(){this.keys=[];}
Set.prototype.size=function(){return this.keys.length;}
Set.prototype.add=function(key,opt_value){var value=opt_value||1;if(!this.contains(key)){this[':'+key]=value;this.keys.push(key);}}
Set.prototype.set=function(key,opt_value){var value=opt_value||1;if(!this.contains(key)){this[':'+key]=value;this.keys.push(key);}else{this[':'+key]=value;}}
Set.prototype.inc=function(key){if(!this.contains(key)){this[':'+key]=1;this.keys.push(key);}else{this[':'+key]++;}}
Set.prototype.get=function(key){if(this.contains(key)){return this[':'+key];}else{var undefined;return undefined;}}
Set.prototype.remove=function(key){if(this.contains(key)){delete this[':'+key];removeFromArray(this.keys,key,true);}}
Set.prototype.contains=function(entry){return typeof this[':'+entry]!='undefined';}
Set.prototype.items=function(){var list=[];for(var i=0;i<this.keys.length;++i){var k=this.keys[i];var v=this[':'+k];list.push(v);}
return list;}
Set.prototype.map=function(f){for(var i=0;i<this.keys.length;++i){var k=this.keys[i];f.call(this,k,this[':'+k]);}}
Set.prototype.clear=function(){for(var i=0;i<this.keys.length;++i){delete this[':'+this.keys[i]];}
this.keys.length=0;}
function mapExec(array,func){for(var i=0;i<array.length;++i){func.call(this,array[i],i);}}
function mapExpr(array,func){var ret=[];for(var i=0;i<array.length;++i){ret.push(func(array[i]));}
return ret;};function reverseInplace(array){for(var i=0;i<array.length/2;++i){var h=array[i];var ii=array.length-i-1;array[i]=array[ii];array[ii]=h;}}
function removeFromArray(array,value,opt_notype){var shift=0;for(var i=0;i<array.length;++i){if(array[i]===value||(opt_notype&&array[i]==value)){array.splice(i--,1);shift++;}}
return shift;}
function copyArray(dst,src){if(!src)return;var dstLength=dst.length;for(var i=src.length-1;i>=0;--i){dst[i+dstLength]=src[i];}}
function copyArrayIgnoringAttributesWithoutValue(dst,src)
{if(!src)return;for(var i=src.length-1;i>=0;--i){if(src[i].nodeValue){dst.push(src[i]);}}}
function xmlValue(node){if(!node){return'';}
var ret='';if(node.nodeType==DOM_TEXT_NODE||node.nodeType==DOM_CDATA_SECTION_NODE){ret+=node.nodeValue;}else if(node.nodeType==DOM_ATTRIBUTE_NODE){if(ajaxsltIsIE6){ret+=xmlValueIE6Hack(node);}else{ret+=node.nodeValue;}}else if(node.nodeType==DOM_ELEMENT_NODE||node.nodeType==DOM_DOCUMENT_NODE||node.nodeType==DOM_DOCUMENT_FRAGMENT_NODE){for(var i=0;i<node.childNodes.length;++i){ret+=arguments.callee(node.childNodes[i]);}}
return ret;}
function xmlValueIE6Hack(node){var nodeName=node.nodeName;var nodeValue=node.nodeValue;if(nodeName.length!=4)return nodeValue;if(!/^href$/i.test(nodeName))return nodeValue;if(!/^javascript:/.test(nodeValue))return nodeValue;return unescape(nodeValue);}
function xmlText(node,opt_cdata){var buf=[];xmlTextR(node,buf,opt_cdata);return buf.join('');}
function xmlTextR(node,buf,cdata){if(node.nodeType==DOM_TEXT_NODE){buf.push(xmlEscapeText(node.nodeValue));}else if(node.nodeType==DOM_CDATA_SECTION_NODE){if(cdata){buf.push(node.nodeValue);}else{buf.push('<![CDATA['+node.nodeValue+']]>');}}else if(node.nodeType==DOM_COMMENT_NODE){buf.push('<!--'+node.nodeValue+'-->');}else if(node.nodeType==DOM_ELEMENT_NODE){buf.push('<'+xmlFullNodeName(node));for(var i=0;i<node.attributes.length;++i){var a=node.attributes[i];if(a&&a.nodeName&&a.nodeValue){buf.push(' '+xmlFullNodeName(a)+'="'+
xmlEscapeAttr(a.nodeValue)+'"');}}
if(node.childNodes.length==0){buf.push('/>');}else{buf.push('>');for(var i=0;i<node.childNodes.length;++i){arguments.callee(node.childNodes[i],buf,cdata);}
buf.push('</'+xmlFullNodeName(node)+'>');}}else if(node.nodeType==DOM_DOCUMENT_NODE||node.nodeType==DOM_DOCUMENT_FRAGMENT_NODE){for(var i=0;i<node.childNodes.length;++i){arguments.callee(node.childNodes[i],buf,cdata);}}}
function xmlFullNodeName(n){if(n.prefix&&n.nodeName.indexOf(n.prefix+':')!=0){return n.prefix+':'+n.nodeName;}else{return n.nodeName;}}
function xmlEscapeText(s){return(''+s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}
function xmlEscapeAttr(s){return xmlEscapeText(s).replace(/\"/g,'&quot;');}
function xmlEscapeTags(s){return s.replace(/</g,'&lt;').replace(/>/g,'&gt;');}
function xmlOwnerDocument(node){if(node.nodeType==DOM_DOCUMENT_NODE){return node;}else{return node.ownerDocument;}}
function domGetAttribute(node,name){return node.getAttribute(name);}
function domSetAttribute(node,name,value){return node.setAttribute(name,value);}
function domRemoveAttribute(node,name){return node.removeAttribute(name);}
function domAppendChild(node,child){return node.appendChild(child);}
function domRemoveChild(node,child){return node.removeChild(child);}
function domReplaceChild(node,newChild,oldChild){return node.replaceChild(newChild,oldChild);}
function domInsertBefore(node,newChild,oldChild){return node.insertBefore(newChild,oldChild);}
function domRemoveNode(node){return domRemoveChild(node.parentNode,node);}
function domCreateTextNode(doc,text){return doc.createTextNode(text);}
function domCreateElement(doc,name){return doc.createElement(name);}
function domCreateAttribute(doc,name){return doc.createAttribute(name);}
function domCreateCDATASection(doc,data){return doc.createCDATASection(data);}
function domCreateComment(doc,text){return doc.createComment(text);}
function domCreateDocumentFragment(doc){return doc.createDocumentFragment();}
function domGetElementById(doc,id){return doc.getElementById(id);}
function windowSetInterval(win,fun,time){return win.setInterval(fun,time);}
function windowClearInterval(win,id){return win.clearInterval(id);}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../ajaxslt/xmltoken.js

var REGEXP_UNICODE=function(){var tests=[' ','\u0120',-1,'!','\u0120',-1,'\u0120','\u0120',0,'\u0121','\u0120',-1,'\u0121','\u0120|\u0121',0,'\u0122','\u0120|\u0121',-1,'\u0120','[\u0120]',0,'\u0121','[\u0120]',-1,'\u0121','[\u0120\u0121]',0,'\u0122','[\u0120\u0121]',-1,'\u0121','[\u0120-\u0121]',0,'\u0122','[\u0120-\u0121]',-1];for(var i=0;i<tests.length;i+=3){if(tests[i].search(new RegExp(tests[i+1]))!=tests[i+2]){return false;}}
return true;}();var XML_S='[ \t\r\n]+';var XML_EQ='('+XML_S+')?=('+XML_S+')?';var XML_CHAR_REF='&#[0-9]+;|&#x[0-9a-fA-F]+;';var XML10_VERSION_INFO=XML_S+'version'+XML_EQ+'("1\\.0"|'+"'1\\.0')";var XML10_BASE_CHAR=(REGEXP_UNICODE)?'\u0041-\u005a\u0061-\u007a\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff'+'\u0100-\u0131\u0134-\u013e\u0141-\u0148\u014a-\u017e\u0180-\u01c3'+'\u01cd-\u01f0\u01f4-\u01f5\u01fa-\u0217\u0250-\u02a8\u02bb-\u02c1\u0386'+'\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03d6\u03da\u03dc'+'\u03de\u03e0\u03e2-\u03f3\u0401-\u040c\u040e-\u044f\u0451-\u045c'+'\u045e-\u0481\u0490-\u04c4\u04c7-\u04c8\u04cb-\u04cc\u04d0-\u04eb'+'\u04ee-\u04f5\u04f8-\u04f9\u0531-\u0556\u0559\u0561-\u0586\u05d0-\u05ea'+'\u05f0-\u05f2\u0621-\u063a\u0641-\u064a\u0671-\u06b7\u06ba-\u06be'+'\u06c0-\u06ce\u06d0-\u06d3\u06d5\u06e5-\u06e6\u0905-\u0939\u093d'+'\u0958-\u0961\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2'+'\u09b6-\u09b9\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a'+'\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36'+'\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8b\u0a8d'+'\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9'+'\u0abd\u0ae0\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30'+'\u0b32-\u0b33\u0b36-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b85-\u0b8a'+'\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4'+'\u0ba8-\u0baa\u0bae-\u0bb5\u0bb7-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10'+'\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c'+'\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cde\u0ce0-\u0ce1'+'\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61'+'\u0e01-\u0e2e\u0e30\u0e32-\u0e33\u0e40-\u0e45\u0e81-\u0e82\u0e84'+'\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5'+'\u0ea7\u0eaa-\u0eab\u0ead-\u0eae\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4'+'\u0f40-\u0f47\u0f49-\u0f69\u10a0-\u10c5\u10d0-\u10f6\u1100\u1102-\u1103'+'\u1105-\u1107\u1109\u110b-\u110c\u110e-\u1112\u113c\u113e\u1140\u114c'+'\u114e\u1150\u1154-\u1155\u1159\u115f-\u1161\u1163\u1165\u1167\u1169'+'\u116d-\u116e\u1172-\u1173\u1175\u119e\u11a8\u11ab\u11ae-\u11af'+'\u11b7-\u11b8\u11ba\u11bc-\u11c2\u11eb\u11f0\u11f9\u1e00-\u1e9b'+'\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d'+'\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc'+'\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec'+'\u1ff2-\u1ff4\u1ff6-\u1ffc\u2126\u212a-\u212b\u212e\u2180-\u2182'+'\u3041-\u3094\u30a1-\u30fa\u3105-\u312c\uac00-\ud7a3':'A-Za-z';var XML10_IDEOGRAPHIC=(REGEXP_UNICODE)?'\u4e00-\u9fa5\u3007\u3021-\u3029':'';var XML10_COMBINING_CHAR=(REGEXP_UNICODE)?'\u0300-\u0345\u0360-\u0361\u0483-\u0486\u0591-\u05a1\u05a3-\u05b9'+'\u05bb-\u05bd\u05bf\u05c1-\u05c2\u05c4\u064b-\u0652\u0670\u06d6-\u06dc'+'\u06dd-\u06df\u06e0-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0901-\u0903\u093c'+'\u093e-\u094c\u094d\u0951-\u0954\u0962-\u0963\u0981-\u0983\u09bc\u09be'+'\u09bf\u09c0-\u09c4\u09c7-\u09c8\u09cb-\u09cd\u09d7\u09e2-\u09e3\u0a02'+'\u0a3c\u0a3e\u0a3f\u0a40-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a70-\u0a71'+'\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0b01-\u0b03'+'\u0b3c\u0b3e-\u0b43\u0b47-\u0b48\u0b4b-\u0b4d\u0b56-\u0b57\u0b82-\u0b83'+'\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c01-\u0c03\u0c3e-\u0c44'+'\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c82-\u0c83\u0cbe-\u0cc4'+'\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5-\u0cd6\u0d02-\u0d03\u0d3e-\u0d43'+'\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1'+'\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39'+'\u0f3e\u0f3f\u0f71-\u0f84\u0f86-\u0f8b\u0f90-\u0f95\u0f97\u0f99-\u0fad'+'\u0fb1-\u0fb7\u0fb9\u20d0-\u20dc\u20e1\u302a-\u302f\u3099\u309a':'';var XML10_DIGIT=(REGEXP_UNICODE)?'\u0030-\u0039\u0660-\u0669\u06f0-\u06f9\u0966-\u096f\u09e6-\u09ef'+'\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be7-\u0bef\u0c66-\u0c6f'+'\u0ce6-\u0cef\u0d66-\u0d6f\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29':'0-9';var XML10_EXTENDER=(REGEXP_UNICODE)?'\u00b7\u02d0\u02d1\u0387\u0640\u0e46\u0ec6\u3005\u3031-\u3035'+'\u309d-\u309e\u30fc-\u30fe':'';var XML10_LETTER=XML10_BASE_CHAR+XML10_IDEOGRAPHIC;var XML10_NAME_CHAR=XML10_LETTER+XML10_DIGIT+'\\._:'+
XML10_COMBINING_CHAR+XML10_EXTENDER+'-';var XML10_NAME='['+XML10_LETTER+'_:]['+XML10_NAME_CHAR+']*';var XML10_ENTITY_REF='&'+XML10_NAME+';';var XML10_REFERENCE=XML10_ENTITY_REF+'|'+XML_CHAR_REF;var XML10_ATT_VALUE='"(([^<&"]|'+XML10_REFERENCE+')*)"|'+"'(([^<&']|"+XML10_REFERENCE+")*)'";var XML10_ATTRIBUTE='('+XML10_NAME+')'+XML_EQ+'('+XML10_ATT_VALUE+')';var XML11_VERSION_INFO=XML_S+'version'+XML_EQ+'("1\\.1"|'+"'1\\.1')";var XML11_NAME_START_CHAR=(REGEXP_UNICODE)?':A-Z_a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02ff\u0370-\u037d'+'\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff'+'\uf900-\ufdcf\ufdf0-\ufffd':':A-Z_a-z';var XML11_NAME_CHAR=XML11_NAME_START_CHAR+
((REGEXP_UNICODE)?'\\.0-9\u00b7\u0300-\u036f\u203f-\u2040-':'\\.0-9-');var XML11_NAME='['+XML11_NAME_START_CHAR+']['+XML11_NAME_CHAR+']*';var XML11_ENTITY_REF='&'+XML11_NAME+';';var XML11_REFERENCE=XML11_ENTITY_REF+'|'+XML_CHAR_REF;var XML11_ATT_VALUE='"(([^<&"]|'+XML11_REFERENCE+')*)"|'+"'(([^<&']|"+XML11_REFERENCE+")*)'";var XML11_ATTRIBUTE='('+XML11_NAME+')'+XML_EQ+'('+XML11_ATT_VALUE+')';var XML_NC_NAME_CHAR=XML10_LETTER+XML10_DIGIT+'\\._'+
XML10_COMBINING_CHAR+XML10_EXTENDER+'-';var XML_NC_NAME='['+XML10_LETTER+'_]['+XML_NC_NAME_CHAR+']*';
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../ajaxslt/dom.js

function xmlResolveEntities(s){var parts=stringSplit(s,'&');var ret=parts[0];for(var i=1;i<parts.length;++i){var rp=parts[i].indexOf(';');if(rp==-1){ret+=parts[i];continue;}
var entityName=parts[i].substring(0,rp);var remainderText=parts[i].substring(rp+1);var ch;switch(entityName){case'lt':ch='<';break;case'gt':ch='>';break;case'amp':ch='&';break;case'quot':ch='"';break;case'apos':ch='\'';break;case'nbsp':ch=String.fromCharCode(160);break;default:var span=domCreateElement(window.document,'span');span.innerHTML='&'+entityName+'; ';ch=span.childNodes[0].nodeValue.charAt(0);}
ret+=ch+remainderText;}
return ret;}
var XML10_TAGNAME_REGEXP=new RegExp('^('+XML10_NAME+')');var XML10_ATTRIBUTE_REGEXP=new RegExp(XML10_ATTRIBUTE,'g');var XML11_TAGNAME_REGEXP=new RegExp('^('+XML11_NAME+')');var XML11_ATTRIBUTE_REGEXP=new RegExp(XML11_ATTRIBUTE,'g');function xmlParse(xml){var regex_empty=/\/$/;var regex_tagname;var regex_attribute;if(xml.match(/^<\?xml/)){if(xml.search(new RegExp(XML10_VERSION_INFO))==5){regex_tagname=XML10_TAGNAME_REGEXP;regex_attribute=XML10_ATTRIBUTE_REGEXP;}else if(xml.search(new RegExp(XML11_VERSION_INFO))==5){regex_tagname=XML11_TAGNAME_REGEXP;regex_attribute=XML11_ATTRIBUTE_REGEXP;}else{alert('VersionInfo is missing, or unknown version number.');}}else{regex_tagname=XML10_TAGNAME_REGEXP;regex_attribute=XML10_ATTRIBUTE_REGEXP;}
var xmldoc=new XDocument();var root=xmldoc;var stack=[];var parent=root;stack.push(parent);var slurp='';var x=stringSplit(xml,'<');for(var i=1;i<x.length;++i){var xx=stringSplit(x[i],'>');var tag=xx[0];var text=xmlResolveEntities(xx[1]||'');if(slurp){var end=x[i].indexOf(slurp);if(end!=-1){var data=x[i].substring(0,end);parent.nodeValue+='<'+data;stack.pop();parent=stack[stack.length-1];text=x[i].substring(end+slurp.length);slurp='';}else{parent.nodeValue+='<'+x[i];text=null;}}else if(tag.indexOf('![CDATA[')==0){var start='![CDATA['.length;var end=x[i].indexOf(']]>');if(end!=-1){var data=x[i].substring(start,end);var node=domCreateCDATASection(xmldoc,data);domAppendChild(parent,node);}else{var data=x[i].substring(start);text=null;var node=domCreateCDATASection(xmldoc,data);domAppendChild(parent,node);parent=node;stack.push(node);slurp=']]>';}}else if(tag.indexOf('!--')==0){var start='!--'.length;var end=x[i].indexOf('-->');if(end!=-1){var data=x[i].substring(start,end);var node=domCreateComment(xmldoc,data);domAppendChild(parent,node);}else{var data=x[i].substring(start);text=null;var node=domCreateComment(xmldoc,data);domAppendChild(parent,node);parent=node;stack.push(node);slurp='-->';}}else if(tag.charAt(0)=='/'){stack.pop();parent=stack[stack.length-1];}else if(tag.charAt(0)=='?'){}else if(tag.charAt(0)=='!'){}else{var empty=tag.match(regex_empty);var tagname=regex_tagname.exec(tag)[1];var node=domCreateElement(xmldoc,tagname);var att;while(att=regex_attribute.exec(tag)){var val=xmlResolveEntities(att[5]||att[7]||'');domSetAttribute(node,att[1],val);}
domAppendChild(parent,node);if(!empty){parent=node;stack.push(node);}}
if(text&&parent!=root){domAppendChild(parent,domCreateTextNode(xmldoc,text));}}
return root;}
var DOM_ELEMENT_NODE=1;var DOM_ATTRIBUTE_NODE=2;var DOM_TEXT_NODE=3;var DOM_CDATA_SECTION_NODE=4;var DOM_ENTITY_REFERENCE_NODE=5;var DOM_ENTITY_NODE=6;var DOM_PROCESSING_INSTRUCTION_NODE=7;var DOM_COMMENT_NODE=8;var DOM_DOCUMENT_NODE=9;var DOM_DOCUMENT_TYPE_NODE=10;var DOM_DOCUMENT_FRAGMENT_NODE=11;var DOM_NOTATION_NODE=12;function domTraverseElements(node,opt_pre,opt_post){var ret;if(opt_pre){ret=opt_pre.call(null,node);if(typeof ret=='boolean'&&!ret){return false;}}
for(var c=node.firstChild;c;c=c.nextSibling){if(c.nodeType==DOM_ELEMENT_NODE){ret=arguments.callee.call(this,c,opt_pre,opt_post);if(typeof ret=='boolean'&&!ret){return false;}}}
if(opt_post){ret=opt_post.call(null,node);if(typeof ret=='boolean'&&!ret){return false;}}}
function XNode(type,name,opt_value,opt_owner){this.attributes=[];this.childNodes=[];XNode.init.call(this,type,name,opt_value,opt_owner);}
XNode.init=function(type,name,value,owner){this.nodeType=type-0;this.nodeName=''+name;this.nodeValue=''+value;this.ownerDocument=owner;this.firstChild=null;this.lastChild=null;this.nextSibling=null;this.previousSibling=null;this.parentNode=null;}
XNode.unused_=[];XNode.recycle=function(node){if(!node){return;}
if(node.constructor==XDocument){XNode.recycle(node.documentElement);return;}
if(node.constructor!=this){return;}
XNode.unused_.push(node);for(var a=0;a<node.attributes.length;++a){XNode.recycle(node.attributes[a]);}
for(var c=0;c<node.childNodes.length;++c){XNode.recycle(node.childNodes[c]);}
node.attributes.length=0;node.childNodes.length=0;XNode.init.call(node,0,'','',null);}
XNode.create=function(type,name,value,owner){if(XNode.unused_.length>0){var node=XNode.unused_.pop();XNode.init.call(node,type,name,value,owner);return node;}else{return new XNode(type,name,value,owner);}}
XNode.prototype.appendChild=function(node){if(this.childNodes.length==0){this.firstChild=node;}
node.previousSibling=this.lastChild;node.nextSibling=null;if(this.lastChild){this.lastChild.nextSibling=node;}
node.parentNode=this;this.lastChild=node;this.childNodes.push(node);}
XNode.prototype.replaceChild=function(newNode,oldNode){if(oldNode==newNode){return;}
for(var i=0;i<this.childNodes.length;++i){if(this.childNodes[i]==oldNode){this.childNodes[i]=newNode;var p=oldNode.parentNode;oldNode.parentNode=null;newNode.parentNode=p;p=oldNode.previousSibling;oldNode.previousSibling=null;newNode.previousSibling=p;if(newNode.previousSibling){newNode.previousSibling.nextSibling=newNode;}
p=oldNode.nextSibling;oldNode.nextSibling=null;newNode.nextSibling=p;if(newNode.nextSibling){newNode.nextSibling.previousSibling=newNode;}
if(this.firstChild==oldNode){this.firstChild=newNode;}
if(this.lastChild==oldNode){this.lastChild=newNode;}
break;}}}
XNode.prototype.insertBefore=function(newNode,oldNode){if(oldNode==newNode){return;}
if(oldNode.parentNode!=this){return;}
if(newNode.parentNode){newNode.parentNode.removeChild(newNode);}
var newChildren=[];for(var i=0;i<this.childNodes.length;++i){var c=this.childNodes[i];if(c==oldNode){newChildren.push(newNode);newNode.parentNode=this;newNode.previousSibling=oldNode.previousSibling;oldNode.previousSibling=newNode;if(newNode.previousSibling){newNode.previousSibling.nextSibling=newNode;}
newNode.nextSibling=oldNode;if(this.firstChild==oldNode){this.firstChild=newNode;}}
newChildren.push(c);}
this.childNodes=newChildren;}
XNode.prototype.removeChild=function(node){var newChildren=[];for(var i=0;i<this.childNodes.length;++i){var c=this.childNodes[i];if(c!=node){newChildren.push(c);}else{if(c.previousSibling){c.previousSibling.nextSibling=c.nextSibling;}
if(c.nextSibling){c.nextSibling.previousSibling=c.previousSibling;}
if(this.firstChild==c){this.firstChild=c.nextSibling;}
if(this.lastChild==c){this.lastChild=c.previousSibling;}}}
this.childNodes=newChildren;}
XNode.prototype.hasAttributes=function(){return this.attributes.length>0;}
XNode.prototype.setAttribute=function(name,value){for(var i=0;i<this.attributes.length;++i){if(this.attributes[i].nodeName==name){this.attributes[i].nodeValue=''+value;return;}}
this.attributes.push(XNode.create(DOM_ATTRIBUTE_NODE,name,value,this));}
XNode.prototype.getAttribute=function(name){for(var i=0;i<this.attributes.length;++i){if(this.attributes[i].nodeName==name){return this.attributes[i].nodeValue;}}
return null;}
XNode.prototype.removeAttribute=function(name){var a=[];for(var i=0;i<this.attributes.length;++i){if(this.attributes[i].nodeName!=name){a.push(this.attributes[i]);}}
this.attributes=a;}
XNode.prototype.getElementsByTagName=function(name){var ret=[];var self=this;if("*"==name){domTraverseElements(this,function(node){if(self==node)return;ret.push(node);},null);}else{domTraverseElements(this,function(node){if(self==node)return;if(node.nodeName==name){ret.push(node);}},null);}
return ret;}
XNode.prototype.getElementById=function(id){var ret=null;domTraverseElements(this,function(node){if(node.getAttribute('id')==id){ret=node;return false;}},null);return ret;}
function XDocument(){XNode.call(this,DOM_DOCUMENT_NODE,'#document',null,null);this.documentElement=null;}
XDocument.prototype=new XNode(DOM_DOCUMENT_NODE,'#document');XDocument.prototype.clear=function(){XNode.recycle(this.documentElement);this.documentElement=null;}
XDocument.prototype.appendChild=function(node){XNode.prototype.appendChild.call(this,node);this.documentElement=this.childNodes[0];}
XDocument.prototype.createElement=function(name){return XNode.create(DOM_ELEMENT_NODE,name,null,this);}
XDocument.prototype.createDocumentFragment=function(){return XNode.create(DOM_DOCUMENT_FRAGMENT_NODE,'#document-fragment',null,this);}
XDocument.prototype.createTextNode=function(value){return XNode.create(DOM_TEXT_NODE,'#text',value,this);}
XDocument.prototype.createAttribute=function(name){return XNode.create(DOM_ATTRIBUTE_NODE,name,null,this);}
XDocument.prototype.createComment=function(data){return XNode.create(DOM_COMMENT_NODE,'#comment',data,this);}
XDocument.prototype.createCDATASection=function(data){return XNode.create(DOM_CDATA_SECTION_NODE,'#cdata-section',data,this);}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../ajaxslt/xpath.js

function xpathParse(expr){xpathLog('parse '+expr);xpathParseInit();var cached=xpathCacheLookup(expr);if(cached){xpathLog(' ... cached');return cached;}
if(expr.match(/^(\$|@)?\w+$/i)){var ret=makeSimpleExpr(expr);xpathParseCache[expr]=ret;xpathLog(' ... simple');return ret;}
if(expr.match(/^\w+(\/\w+)*$/i)){var ret=makeSimpleExpr2(expr);xpathParseCache[expr]=ret;xpathLog(' ... simple 2');return ret;}
var cachekey=expr;var stack=[];var ahead=null;var previous=null;var done=false;var parse_count=0;var lexer_count=0;var reduce_count=0;while(!done){parse_count++;expr=expr.replace(/^\s*/,'');previous=ahead;ahead=null;var rule=null;var match='';for(var i=0;i<xpathTokenRules.length;++i){var result=xpathTokenRules[i].re.exec(expr);lexer_count++;if(result&&result.length>0&&result[0].length>match.length){rule=xpathTokenRules[i];match=result[0];break;}}
if(rule&&(rule==TOK_DIV||rule==TOK_MOD||rule==TOK_AND||rule==TOK_OR)&&(!previous||previous.tag==TOK_AT||previous.tag==TOK_DSLASH||previous.tag==TOK_SLASH||previous.tag==TOK_AXIS||previous.tag==TOK_DOLLAR)){rule=TOK_QNAME;}
if(rule){expr=expr.substr(match.length);xpathLog('token: '+match+' -- '+rule.label);ahead={tag:rule,match:match,prec:rule.prec?rule.prec:0,expr:makeTokenExpr(match)};}else{xpathLog('DONE');done=true;}
while(xpathReduce(stack,ahead)){reduce_count++;xpathLog('stack: '+stackToString(stack));}}
xpathLog('stack: '+stackToString(stack));if(stack.length!=1){throw'XPath parse error '+cachekey+':\n'+stackToString(stack);}
var result=stack[0].expr;xpathParseCache[cachekey]=result;xpathLog('XPath parse: '+parse_count+' / '+
lexer_count+' / '+reduce_count);return result;}
var xpathParseCache={};function xpathCacheLookup(expr){return xpathParseCache[expr];}
function xpathReduce(stack,ahead){var cand=null;if(stack.length>0){var top=stack[stack.length-1];var ruleset=xpathRules[top.tag.key];if(ruleset){for(var i=0;i<ruleset.length;++i){var rule=ruleset[i];var match=xpathMatchStack(stack,rule[1]);if(match.length){cand={tag:rule[0],rule:rule,match:match};cand.prec=xpathGrammarPrecedence(cand);break;}}}}
var ret;if(cand&&(!ahead||cand.prec>ahead.prec||(ahead.tag.left&&cand.prec>=ahead.prec))){for(var i=0;i<cand.match.matchlength;++i){stack.pop();}
xpathLog('reduce '+cand.tag.label+' '+cand.prec+' ahead '+(ahead?ahead.tag.label+' '+ahead.prec+
(ahead.tag.left?' left':''):' none '));var matchexpr=mapExpr(cand.match,function(m){return m.expr;});xpathLog('going to apply '+cand.rule[3].toString());cand.expr=cand.rule[3].apply(null,matchexpr);stack.push(cand);ret=true;}else{if(ahead){xpathLog('shift '+ahead.tag.label+' '+ahead.prec+
(ahead.tag.left?' left':'')+' over '+(cand?cand.tag.label+' '+
cand.prec:' none'));stack.push(ahead);}
ret=false;}
return ret;}
function xpathMatchStack(stack,pattern){var S=stack.length;var P=pattern.length;var p,s;var match=[];match.matchlength=0;var ds=0;for(p=P-1,s=S-1;p>=0&&s>=0;--p,s-=ds){ds=0;var qmatch=[];if(pattern[p]==Q_MM){p-=1;match.push(qmatch);while(s-ds>=0&&stack[s-ds].tag==pattern[p]){qmatch.push(stack[s-ds]);ds+=1;match.matchlength+=1;}}else if(pattern[p]==Q_01){p-=1;match.push(qmatch);while(s-ds>=0&&ds<2&&stack[s-ds].tag==pattern[p]){qmatch.push(stack[s-ds]);ds+=1;match.matchlength+=1;}}else if(pattern[p]==Q_1M){p-=1;match.push(qmatch);if(stack[s].tag==pattern[p]){while(s-ds>=0&&stack[s-ds].tag==pattern[p]){qmatch.push(stack[s-ds]);ds+=1;match.matchlength+=1;}}else{return[];}}else if(stack[s].tag==pattern[p]){match.push(stack[s]);ds+=1;match.matchlength+=1;}else{return[];}
reverseInplace(qmatch);qmatch.expr=mapExpr(qmatch,function(m){return m.expr;});}
reverseInplace(match);if(p==-1){return match;}else{return[];}}
function xpathTokenPrecedence(tag){return tag.prec||2;}
function xpathGrammarPrecedence(frame){var ret=0;if(frame.rule){if(frame.rule.length>=3&&frame.rule[2]>=0){ret=frame.rule[2];}else{for(var i=0;i<frame.rule[1].length;++i){var p=xpathTokenPrecedence(frame.rule[1][i]);ret=Math.max(ret,p);}}}else if(frame.tag){ret=xpathTokenPrecedence(frame.tag);}else if(frame.length){for(var j=0;j<frame.length;++j){var p=xpathGrammarPrecedence(frame[j]);ret=Math.max(ret,p);}}
return ret;}
function stackToString(stack){var ret='';for(var i=0;i<stack.length;++i){if(ret){ret+='\n';}
ret+=stack[i].tag.label;}
return ret;}
function ExprContext(node,opt_position,opt_nodelist,opt_parent,opt_caseInsensitive,opt_ignoreAttributesWithoutValue){this.node=node;this.position=opt_position||0;this.nodelist=opt_nodelist||[node];this.variables={};this.parent=opt_parent||null;this.caseInsensitive=opt_caseInsensitive||false;this.ignoreAttributesWithoutValue=opt_ignoreAttributesWithoutValue||false;if(opt_parent){this.root=opt_parent.root;}else if(this.node.nodeType==DOM_DOCUMENT_NODE){this.root=node;}else{this.root=node.ownerDocument;}}
ExprContext.prototype.clone=function(opt_node,opt_position,opt_nodelist){return new ExprContext(opt_node||this.node,typeof opt_position!='undefined'?opt_position:this.position,opt_nodelist||this.nodelist,this,this.caseInsensitive,this.ignoreAttributesWithoutValue);};ExprContext.prototype.setVariable=function(name,value){if(value instanceof StringValue||value instanceof BooleanValue||value instanceof NumberValue||value instanceof NodeSetValue){this.variables[name]=value;return;}
if('true'===value){this.variables[name]=new BooleanValue(true);}else if('false'===value){this.variables[name]=new BooleanValue(false);}else if(TOK_NUMBER.re.test(value)){this.variables[name]=new NumberValue(value);}else{this.variables[name]=new StringValue(value);}};ExprContext.prototype.getVariable=function(name){if(typeof this.variables[name]!='undefined'){return this.variables[name];}else if(this.parent){return this.parent.getVariable(name);}else{return null;}};ExprContext.prototype.setNode=function(position){this.node=this.nodelist[position];this.position=position;};ExprContext.prototype.contextSize=function(){return this.nodelist.length;};ExprContext.prototype.isCaseInsensitive=function(){return this.caseInsensitive;};ExprContext.prototype.setCaseInsensitive=function(caseInsensitive){return this.caseInsensitive=caseInsensitive;};ExprContext.prototype.isIgnoreAttributesWithoutValue=function(){return this.ignoreAttributesWithoutValue;};ExprContext.prototype.setIgnoreAttributesWithoutValue=function(ignore){return this.ignoreAttributesWithoutValue=ignore;};function StringValue(value){this.value=value;this.type='string';}
StringValue.prototype.stringValue=function(){return this.value;}
StringValue.prototype.booleanValue=function(){return this.value.length>0;}
StringValue.prototype.numberValue=function(){return this.value-0;}
StringValue.prototype.nodeSetValue=function(){throw this;}
function BooleanValue(value){this.value=value;this.type='boolean';}
BooleanValue.prototype.stringValue=function(){return''+this.value;}
BooleanValue.prototype.booleanValue=function(){return this.value;}
BooleanValue.prototype.numberValue=function(){return this.value?1:0;}
BooleanValue.prototype.nodeSetValue=function(){throw this;}
function NumberValue(value){this.value=value;this.type='number';}
NumberValue.prototype.stringValue=function(){return''+this.value;}
NumberValue.prototype.booleanValue=function(){return!!this.value;}
NumberValue.prototype.numberValue=function(){return this.value-0;}
NumberValue.prototype.nodeSetValue=function(){throw this;}
function NodeSetValue(value){this.value=value;this.type='node-set';}
NodeSetValue.prototype.stringValue=function(){if(this.value.length==0){return'';}else{return xmlValue(this.value[0]);}}
NodeSetValue.prototype.booleanValue=function(){return this.value.length>0;}
NodeSetValue.prototype.numberValue=function(){return this.stringValue()-0;}
NodeSetValue.prototype.nodeSetValue=function(){return this.value;};function TokenExpr(m){this.value=m;}
TokenExpr.prototype.evaluate=function(){return new StringValue(this.value);};function LocationExpr(){this.absolute=false;this.steps=[];}
LocationExpr.prototype.appendStep=function(s){var combinedStep=this._combineSteps(this.steps[this.steps.length-1],s);if(combinedStep){this.steps[this.steps.length-1]=combinedStep;}else{this.steps.push(s);}}
LocationExpr.prototype.prependStep=function(s){var combinedStep=this._combineSteps(s,this.steps[0]);if(combinedStep){this.steps[0]=combinedStep;}else{this.steps.unshift(s);}};LocationExpr.prototype._combineSteps=function(prevStep,nextStep){if(!prevStep)return null;if(!nextStep)return null;var hasPredicates=(prevStep.predicates&&prevStep.predicates.length>0);if(prevStep.nodetest instanceof NodeTestAny&&!hasPredicates){if(prevStep.axis==xpathAxis.DESCENDANT_OR_SELF){if(nextStep.axis==xpathAxis.CHILD){nextStep.axis=xpathAxis.DESCENDANT;return nextStep;}else if(nextStep.axis==xpathAxis.SELF){nextStep.axis=xpathAxis.DESCENDANT_OR_SELF;return nextStep;}}else if(prevStep.axis==xpathAxis.DESCENDANT){if(nextStep.axis==xpathAxis.SELF){nextStep.axis=xpathAxis.DESCENDANT;return nextStep;}}}
return null;}
LocationExpr.prototype.evaluate=function(ctx){var start;if(this.absolute){start=ctx.root;}else{start=ctx.node;}
var nodes=[];xPathStep(nodes,this.steps,0,start,ctx);return new NodeSetValue(nodes);};function xPathStep(nodes,steps,step,input,ctx){var s=steps[step];var ctx2=ctx.clone(input);var nodelist=s.evaluate(ctx2).nodeSetValue();for(var i=0;i<nodelist.length;++i){if(step==steps.length-1){nodes.push(nodelist[i]);}else{xPathStep(nodes,steps,step+1,nodelist[i],ctx);}}}
function StepExpr(axis,nodetest,opt_predicate){this.axis=axis;this.nodetest=nodetest;this.predicate=opt_predicate||[];}
StepExpr.prototype.appendPredicate=function(p){this.predicate.push(p);}
StepExpr.prototype.evaluate=function(ctx){var input=ctx.node;var nodelist=[];var skipNodeTest=false;if(this.nodetest instanceof NodeTestAny){skipNodeTest=true;}
if(this.axis==xpathAxis.ANCESTOR_OR_SELF){nodelist.push(input);for(var n=input.parentNode;n;n=n.parentNode){nodelist.push(n);}}else if(this.axis==xpathAxis.ANCESTOR){for(var n=input.parentNode;n;n=n.parentNode){nodelist.push(n);}}else if(this.axis==xpathAxis.ATTRIBUTE){if(ctx.ignoreAttributesWithoutValue){copyArrayIgnoringAttributesWithoutValue(nodelist,input.attributes);}
else{copyArray(nodelist,input.attributes);}}else if(this.axis==xpathAxis.CHILD){copyArray(nodelist,input.childNodes);}else if(this.axis==xpathAxis.DESCENDANT_OR_SELF){if(this.nodetest.evaluate(ctx).booleanValue()){nodelist.push(input);}
var tagName=xpathExtractTagNameFromNodeTest(this.nodetest);xpathCollectDescendants(nodelist,input,tagName);if(tagName)skipNodeTest=true;}else if(this.axis==xpathAxis.DESCENDANT){var tagName=xpathExtractTagNameFromNodeTest(this.nodetest);xpathCollectDescendants(nodelist,input,tagName);if(tagName)skipNodeTest=true;}else if(this.axis==xpathAxis.FOLLOWING){for(var n=input;n;n=n.parentNode){for(var nn=n.nextSibling;nn;nn=nn.nextSibling){nodelist.push(nn);xpathCollectDescendants(nodelist,nn);}}}else if(this.axis==xpathAxis.FOLLOWING_SIBLING){for(var n=input.nextSibling;n;n=n.nextSibling){nodelist.push(n);}}else if(this.axis==xpathAxis.NAMESPACE){alert('not implemented: axis namespace');}else if(this.axis==xpathAxis.PARENT){if(input.parentNode){nodelist.push(input.parentNode);}}else if(this.axis==xpathAxis.PRECEDING){for(var n=input;n;n=n.parentNode){for(var nn=n.previousSibling;nn;nn=nn.previousSibling){nodelist.push(nn);xpathCollectDescendantsReverse(nodelist,nn);}}}else if(this.axis==xpathAxis.PRECEDING_SIBLING){for(var n=input.previousSibling;n;n=n.previousSibling){nodelist.push(n);}}else if(this.axis==xpathAxis.SELF){nodelist.push(input);}else{throw'ERROR -- NO SUCH AXIS: '+this.axis;}
if(!skipNodeTest){var nodelist0=nodelist;nodelist=[];for(var i=0;i<nodelist0.length;++i){var n=nodelist0[i];if(this.nodetest.evaluate(ctx.clone(n,i,nodelist0)).booleanValue()){nodelist.push(n);}}}
for(var i=0;i<this.predicate.length;++i){var nodelist0=nodelist;nodelist=[];for(var ii=0;ii<nodelist0.length;++ii){var n=nodelist0[ii];if(this.predicate[i].evaluate(ctx.clone(n,ii,nodelist0)).booleanValue()){nodelist.push(n);}}}
return new NodeSetValue(nodelist);};function NodeTestAny(){this.value=new BooleanValue(true);}
NodeTestAny.prototype.evaluate=function(ctx){return this.value;};function NodeTestElementOrAttribute(){}
NodeTestElementOrAttribute.prototype.evaluate=function(ctx){return new BooleanValue(ctx.node.nodeType==DOM_ELEMENT_NODE||ctx.node.nodeType==DOM_ATTRIBUTE_NODE);}
function NodeTestText(){}
NodeTestText.prototype.evaluate=function(ctx){return new BooleanValue(ctx.node.nodeType==DOM_TEXT_NODE);}
function NodeTestComment(){}
NodeTestComment.prototype.evaluate=function(ctx){return new BooleanValue(ctx.node.nodeType==DOM_COMMENT_NODE);}
function NodeTestPI(target){this.target=target;}
NodeTestPI.prototype.evaluate=function(ctx){return new
BooleanValue(ctx.node.nodeType==DOM_PROCESSING_INSTRUCTION_NODE&&(!this.target||ctx.node.nodeName==this.target));}
function NodeTestNC(nsprefix){this.regex=new RegExp("^"+nsprefix+":");this.nsprefix=nsprefix;}
NodeTestNC.prototype.evaluate=function(ctx){var n=ctx.node;return new BooleanValue(this.regex.match(n.nodeName));}
function NodeTestName(name){this.name=name;this.re=new RegExp('^'+name+'$',"i");}
NodeTestName.prototype.evaluate=function(ctx){var n=ctx.node;if(ctx.caseInsensitive){if(n.nodeName.length!=this.name.length)return new BooleanValue(false);return new BooleanValue(this.re.test(n.nodeName));}else{return new BooleanValue(n.nodeName==this.name);}}
function PredicateExpr(expr){this.expr=expr;}
PredicateExpr.prototype.evaluate=function(ctx){var v=this.expr.evaluate(ctx);if(v.type=='number'){return new BooleanValue(ctx.position==v.numberValue()-1);}else{return new BooleanValue(v.booleanValue());}};function FunctionCallExpr(name){this.name=name;this.args=[];}
FunctionCallExpr.prototype.appendArg=function(arg){this.args.push(arg);};FunctionCallExpr.prototype.evaluate=function(ctx){var fn=''+this.name.value;var f=this.xpathfunctions[fn];if(f){return f.call(this,ctx);}else{xpathLog('XPath NO SUCH FUNCTION '+fn);return new BooleanValue(false);}};FunctionCallExpr.prototype.xpathfunctions={'last':function(ctx){assert(this.args.length==0);return new NumberValue(ctx.contextSize());},'position':function(ctx){assert(this.args.length==0);return new NumberValue(ctx.position+1);},'count':function(ctx){assert(this.args.length==1);var v=this.args[0].evaluate(ctx);return new NumberValue(v.nodeSetValue().length);},'id':function(ctx){assert(this.args.length==1);var e=this.args[0].evaluate(ctx);var ret=[];var ids;if(e.type=='node-set'){ids=[];var en=e.nodeSetValue();for(var i=0;i<en.length;++i){var v=xmlValue(en[i]).split(/\s+/);for(var ii=0;ii<v.length;++ii){ids.push(v[ii]);}}}else{ids=e.stringValue().split(/\s+/);}
var d=ctx.root;for(var i=0;i<ids.length;++i){var n=d.getElementById(ids[i]);if(n){ret.push(n);}}
return new NodeSetValue(ret);},'local-name':function(ctx){alert('not implmented yet: XPath function local-name()');},'namespace-uri':function(ctx){alert('not implmented yet: XPath function namespace-uri()');},'name':function(ctx){assert(this.args.length==1||this.args.length==0);var n;if(this.args.length==0){n=[ctx.node];}else{n=this.args[0].evaluate(ctx).nodeSetValue();}
if(n.length==0){return new StringValue('');}else{return new StringValue(n[0].nodeName);}},'string':function(ctx){assert(this.args.length==1||this.args.length==0);if(this.args.length==0){return new StringValue(new NodeSetValue([ctx.node]).stringValue());}else{return new StringValue(this.args[0].evaluate(ctx).stringValue());}},'concat':function(ctx){var ret='';for(var i=0;i<this.args.length;++i){ret+=this.args[i].evaluate(ctx).stringValue();}
return new StringValue(ret);},'starts-with':function(ctx){assert(this.args.length==2);var s0=this.args[0].evaluate(ctx).stringValue();var s1=this.args[1].evaluate(ctx).stringValue();return new BooleanValue(s0.indexOf(s1)==0);},'contains':function(ctx){assert(this.args.length==2);var s0=this.args[0].evaluate(ctx).stringValue();var s1=this.args[1].evaluate(ctx).stringValue();return new BooleanValue(s0.indexOf(s1)!=-1);},'substring-before':function(ctx){assert(this.args.length==2);var s0=this.args[0].evaluate(ctx).stringValue();var s1=this.args[1].evaluate(ctx).stringValue();var i=s0.indexOf(s1);var ret;if(i==-1){ret='';}else{ret=s0.substr(0,i);}
return new StringValue(ret);},'substring-after':function(ctx){assert(this.args.length==2);var s0=this.args[0].evaluate(ctx).stringValue();var s1=this.args[1].evaluate(ctx).stringValue();var i=s0.indexOf(s1);var ret;if(i==-1){ret='';}else{ret=s0.substr(i+s1.length);}
return new StringValue(ret);},'substring':function(ctx){assert(this.args.length==2||this.args.length==3);var s0=this.args[0].evaluate(ctx).stringValue();var s1=this.args[1].evaluate(ctx).numberValue();var ret;if(this.args.length==2){var i1=Math.max(0,Math.round(s1)-1);ret=s0.substr(i1);}else{var s2=this.args[2].evaluate(ctx).numberValue();var i0=Math.round(s1)-1;var i1=Math.max(0,i0);var i2=Math.round(s2)-Math.max(0,-i0);ret=s0.substr(i1,i2);}
return new StringValue(ret);},'string-length':function(ctx){var s;if(this.args.length>0){s=this.args[0].evaluate(ctx).stringValue();}else{s=new NodeSetValue([ctx.node]).stringValue();}
return new NumberValue(s.length);},'normalize-space':function(ctx){var s;if(this.args.length>0){s=this.args[0].evaluate(ctx).stringValue();}else{s=new NodeSetValue([ctx.node]).stringValue();}
s=s.replace(/^\s*/,'').replace(/\s*$/,'').replace(/\s+/g,' ');return new StringValue(s);},'translate':function(ctx){assert(this.args.length==3);var s0=this.args[0].evaluate(ctx).stringValue();var s1=this.args[1].evaluate(ctx).stringValue();var s2=this.args[2].evaluate(ctx).stringValue();for(var i=0;i<s1.length;++i){s0=s0.replace(new RegExp(s1.charAt(i),'g'),s2.charAt(i));}
return new StringValue(s0);},'boolean':function(ctx){assert(this.args.length==1);return new BooleanValue(this.args[0].evaluate(ctx).booleanValue());},'not':function(ctx){assert(this.args.length==1);var ret=!this.args[0].evaluate(ctx).booleanValue();return new BooleanValue(ret);},'true':function(ctx){assert(this.args.length==0);return new BooleanValue(true);},'false':function(ctx){assert(this.args.length==0);return new BooleanValue(false);},'lang':function(ctx){assert(this.args.length==1);var lang=this.args[0].evaluate(ctx).stringValue();var xmllang;var n=ctx.node;while(n&&n!=n.parentNode){xmllang=n.getAttribute('xml:lang');if(xmllang){break;}
n=n.parentNode;}
if(!xmllang){return new BooleanValue(false);}else{var re=new RegExp('^'+lang+'$','i');return new BooleanValue(xmllang.match(re)||xmllang.replace(/_.*$/,'').match(re));}},'number':function(ctx){assert(this.args.length==1||this.args.length==0);if(this.args.length==1){return new NumberValue(this.args[0].evaluate(ctx).numberValue());}else{return new NumberValue(new NodeSetValue([ctx.node]).numberValue());}},'sum':function(ctx){assert(this.args.length==1);var n=this.args[0].evaluate(ctx).nodeSetValue();var sum=0;for(var i=0;i<n.length;++i){sum+=xmlValue(n[i])-0;}
return new NumberValue(sum);},'floor':function(ctx){assert(this.args.length==1);var num=this.args[0].evaluate(ctx).numberValue();return new NumberValue(Math.floor(num));},'ceiling':function(ctx){assert(this.args.length==1);var num=this.args[0].evaluate(ctx).numberValue();return new NumberValue(Math.ceil(num));},'round':function(ctx){assert(this.args.length==1);var num=this.args[0].evaluate(ctx).numberValue();return new NumberValue(Math.round(num));},'ext-join':function(ctx){assert(this.args.length==2);var nodes=this.args[0].evaluate(ctx).nodeSetValue();var delim=this.args[1].evaluate(ctx).stringValue();var ret='';for(var i=0;i<nodes.length;++i){if(ret){ret+=delim;}
ret+=xmlValue(nodes[i]);}
return new StringValue(ret);},'ext-if':function(ctx){assert(this.args.length==3);if(this.args[0].evaluate(ctx).booleanValue()){return this.args[1].evaluate(ctx);}else{return this.args[2].evaluate(ctx);}},'ext-cardinal':function(ctx){assert(this.args.length>=1);var c=this.args[0].evaluate(ctx).numberValue();var ret=[];for(var i=0;i<c;++i){ret.push(ctx.node);}
return new NodeSetValue(ret);}};function UnionExpr(expr1,expr2){this.expr1=expr1;this.expr2=expr2;}
UnionExpr.prototype.evaluate=function(ctx){var nodes1=this.expr1.evaluate(ctx).nodeSetValue();var nodes2=this.expr2.evaluate(ctx).nodeSetValue();var I1=nodes1.length;for(var i2=0;i2<nodes2.length;++i2){var n=nodes2[i2];var inBoth=false;for(var i1=0;i1<I1;++i1){if(nodes1[i1]==n){inBoth=true;i1=I1;}}
if(!inBoth){nodes1.push(n);}}
return new NodeSetValue(nodes1);};function PathExpr(filter,rel){this.filter=filter;this.rel=rel;}
PathExpr.prototype.evaluate=function(ctx){var nodes=this.filter.evaluate(ctx).nodeSetValue();var nodes1=[];for(var i=0;i<nodes.length;++i){var nodes0=this.rel.evaluate(ctx.clone(nodes[i],i,nodes)).nodeSetValue();for(var ii=0;ii<nodes0.length;++ii){nodes1.push(nodes0[ii]);}}
return new NodeSetValue(nodes1);};function FilterExpr(expr,predicate){this.expr=expr;this.predicate=predicate;}
FilterExpr.prototype.evaluate=function(ctx){var nodes=this.expr.evaluate(ctx).nodeSetValue();for(var i=0;i<this.predicate.length;++i){var nodes0=nodes;nodes=[];for(var j=0;j<nodes0.length;++j){var n=nodes0[j];if(this.predicate[i].evaluate(ctx.clone(n,j,nodes0)).booleanValue()){nodes.push(n);}}}
return new NodeSetValue(nodes);}
function UnaryMinusExpr(expr){this.expr=expr;}
UnaryMinusExpr.prototype.evaluate=function(ctx){return new NumberValue(-this.expr.evaluate(ctx).numberValue());};function BinaryExpr(expr1,op,expr2){this.expr1=expr1;this.expr2=expr2;this.op=op;}
BinaryExpr.prototype.evaluate=function(ctx){var ret;switch(this.op.value){case'or':ret=new BooleanValue(this.expr1.evaluate(ctx).booleanValue()||this.expr2.evaluate(ctx).booleanValue());break;case'and':ret=new BooleanValue(this.expr1.evaluate(ctx).booleanValue()&&this.expr2.evaluate(ctx).booleanValue());break;case'+':ret=new NumberValue(this.expr1.evaluate(ctx).numberValue()+
this.expr2.evaluate(ctx).numberValue());break;case'-':ret=new NumberValue(this.expr1.evaluate(ctx).numberValue()-
this.expr2.evaluate(ctx).numberValue());break;case'*':ret=new NumberValue(this.expr1.evaluate(ctx).numberValue()*this.expr2.evaluate(ctx).numberValue());break;case'mod':ret=new NumberValue(this.expr1.evaluate(ctx).numberValue()%this.expr2.evaluate(ctx).numberValue());break;case'div':ret=new NumberValue(this.expr1.evaluate(ctx).numberValue()/this.expr2.evaluate(ctx).numberValue());break;case'=':ret=this.compare(ctx,function(x1,x2){return x1==x2;});break;case'!=':ret=this.compare(ctx,function(x1,x2){return x1!=x2;});break;case'<':ret=this.compare(ctx,function(x1,x2){return x1<x2;});break;case'<=':ret=this.compare(ctx,function(x1,x2){return x1<=x2;});break;case'>':ret=this.compare(ctx,function(x1,x2){return x1>x2;});break;case'>=':ret=this.compare(ctx,function(x1,x2){return x1>=x2;});break;default:alert('BinaryExpr.evaluate: '+this.op.value);}
return ret;};BinaryExpr.prototype.compare=function(ctx,cmp){var v1=this.expr1.evaluate(ctx);var v2=this.expr2.evaluate(ctx);var ret;if(v1.type=='node-set'&&v2.type=='node-set'){var n1=v1.nodeSetValue();var n2=v2.nodeSetValue();ret=false;for(var i1=0;i1<n1.length;++i1){for(var i2=0;i2<n2.length;++i2){if(cmp(xmlValue(n1[i1]),xmlValue(n2[i2]))){ret=true;i2=n2.length;i1=n1.length;}}}}else if(v1.type=='node-set'||v2.type=='node-set'){if(v1.type=='number'){var s=v1.numberValue();var n=v2.nodeSetValue();ret=false;for(var i=0;i<n.length;++i){var nn=xmlValue(n[i])-0;if(cmp(s,nn)){ret=true;break;}}}else if(v2.type=='number'){var n=v1.nodeSetValue();var s=v2.numberValue();ret=false;for(var i=0;i<n.length;++i){var nn=xmlValue(n[i])-0;if(cmp(nn,s)){ret=true;break;}}}else if(v1.type=='string'){var s=v1.stringValue();var n=v2.nodeSetValue();ret=false;for(var i=0;i<n.length;++i){var nn=xmlValue(n[i]);if(cmp(s,nn)){ret=true;break;}}}else if(v2.type=='string'){var n=v1.nodeSetValue();var s=v2.stringValue();ret=false;for(var i=0;i<n.length;++i){var nn=xmlValue(n[i]);if(cmp(nn,s)){ret=true;break;}}}else{ret=cmp(v1.booleanValue(),v2.booleanValue());}}else if(v1.type=='boolean'||v2.type=='boolean'){ret=cmp(v1.booleanValue(),v2.booleanValue());}else if(v1.type=='number'||v2.type=='number'){ret=cmp(v1.numberValue(),v2.numberValue());}else{ret=cmp(v1.stringValue(),v2.stringValue());}
return new BooleanValue(ret);}
function LiteralExpr(value){this.value=value;}
LiteralExpr.prototype.evaluate=function(ctx){return new StringValue(this.value);};function NumberExpr(value){this.value=value;}
NumberExpr.prototype.evaluate=function(ctx){return new NumberValue(this.value);};function VariableExpr(name){this.name=name;}
VariableExpr.prototype.evaluate=function(ctx){return ctx.getVariable(this.name);}
function makeTokenExpr(m){return new TokenExpr(m);}
function passExpr(e){return e;}
function makeLocationExpr1(slash,rel){rel.absolute=true;return rel;}
function makeLocationExpr2(dslash,rel){rel.absolute=true;rel.prependStep(makeAbbrevStep(dslash.value));return rel;}
function makeLocationExpr3(slash){var ret=new LocationExpr();ret.appendStep(makeAbbrevStep('.'));ret.absolute=true;return ret;}
function makeLocationExpr4(dslash){var ret=new LocationExpr();ret.absolute=true;ret.appendStep(makeAbbrevStep(dslash.value));return ret;}
function makeLocationExpr5(step){var ret=new LocationExpr();ret.appendStep(step);return ret;}
function makeLocationExpr6(rel,slash,step){rel.appendStep(step);return rel;}
function makeLocationExpr7(rel,dslash,step){rel.appendStep(makeAbbrevStep(dslash.value));rel.appendStep(step);return rel;}
function makeStepExpr1(dot){return makeAbbrevStep(dot.value);}
function makeStepExpr2(ddot){return makeAbbrevStep(ddot.value);}
function makeStepExpr3(axisname,axis,nodetest){return new StepExpr(axisname.value,nodetest);}
function makeStepExpr4(at,nodetest){return new StepExpr('attribute',nodetest);}
function makeStepExpr5(nodetest){return new StepExpr('child',nodetest);}
function makeStepExpr6(step,predicate){step.appendPredicate(predicate);return step;}
function makeAbbrevStep(abbrev){switch(abbrev){case'//':return new StepExpr('descendant-or-self',new NodeTestAny);case'.':return new StepExpr('self',new NodeTestAny);case'..':return new StepExpr('parent',new NodeTestAny);}}
function makeNodeTestExpr1(asterisk){return new NodeTestElementOrAttribute;}
function makeNodeTestExpr2(ncname,colon,asterisk){return new NodeTestNC(ncname.value);}
function makeNodeTestExpr3(qname){return new NodeTestName(qname.value);}
function makeNodeTestExpr4(typeo,parenc){var type=typeo.value.replace(/\s*\($/,'');switch(type){case'node':return new NodeTestAny;case'text':return new NodeTestText;case'comment':return new NodeTestComment;case'processing-instruction':return new NodeTestPI('');}}
function makeNodeTestExpr5(typeo,target,parenc){var type=typeo.replace(/\s*\($/,'');if(type!='processing-instruction'){throw type;}
return new NodeTestPI(target.value);}
function makePredicateExpr(pareno,expr,parenc){return new PredicateExpr(expr);}
function makePrimaryExpr(pareno,expr,parenc){return expr;}
function makeFunctionCallExpr1(name,pareno,parenc){return new FunctionCallExpr(name);}
function makeFunctionCallExpr2(name,pareno,arg1,args,parenc){var ret=new FunctionCallExpr(name);ret.appendArg(arg1);for(var i=0;i<args.length;++i){ret.appendArg(args[i]);}
return ret;}
function makeArgumentExpr(comma,expr){return expr;}
function makeUnionExpr(expr1,pipe,expr2){return new UnionExpr(expr1,expr2);}
function makePathExpr1(filter,slash,rel){return new PathExpr(filter,rel);}
function makePathExpr2(filter,dslash,rel){rel.prependStep(makeAbbrevStep(dslash.value));return new PathExpr(filter,rel);}
function makeFilterExpr(expr,predicates){if(predicates.length>0){return new FilterExpr(expr,predicates);}else{return expr;}}
function makeUnaryMinusExpr(minus,expr){return new UnaryMinusExpr(expr);}
function makeBinaryExpr(expr1,op,expr2){return new BinaryExpr(expr1,op,expr2);}
function makeLiteralExpr(token){var value=token.value.substring(1,token.value.length-1);return new LiteralExpr(value);}
function makeNumberExpr(token){return new NumberExpr(token.value);}
function makeVariableReference(dollar,name){return new VariableExpr(name.value);}
function makeSimpleExpr(expr){if(expr.charAt(0)=='$'){return new VariableExpr(expr.substr(1));}else if(expr.charAt(0)=='@'){var a=new NodeTestName(expr.substr(1));var b=new StepExpr('attribute',a);var c=new LocationExpr();c.appendStep(b);return c;}else if(expr.match(/^[0-9]+$/)){return new NumberExpr(expr);}else{var a=new NodeTestName(expr);var b=new StepExpr('child',a);var c=new LocationExpr();c.appendStep(b);return c;}}
function makeSimpleExpr2(expr){var steps=stringSplit(expr,'/');var c=new LocationExpr();for(var i=0;i<steps.length;++i){var a=new NodeTestName(steps[i]);var b=new StepExpr('child',a);c.appendStep(b);}
return c;}
var xpathAxis={ANCESTOR_OR_SELF:'ancestor-or-self',ANCESTOR:'ancestor',ATTRIBUTE:'attribute',CHILD:'child',DESCENDANT_OR_SELF:'descendant-or-self',DESCENDANT:'descendant',FOLLOWING_SIBLING:'following-sibling',FOLLOWING:'following',NAMESPACE:'namespace',PARENT:'parent',PRECEDING_SIBLING:'preceding-sibling',PRECEDING:'preceding',SELF:'self'};var xpathAxesRe=[xpathAxis.ANCESTOR_OR_SELF,xpathAxis.ANCESTOR,xpathAxis.ATTRIBUTE,xpathAxis.CHILD,xpathAxis.DESCENDANT_OR_SELF,xpathAxis.DESCENDANT,xpathAxis.FOLLOWING_SIBLING,xpathAxis.FOLLOWING,xpathAxis.NAMESPACE,xpathAxis.PARENT,xpathAxis.PRECEDING_SIBLING,xpathAxis.PRECEDING,xpathAxis.SELF].join('|');var TOK_PIPE={label:"|",prec:17,re:new RegExp("^\\|")};var TOK_DSLASH={label:"//",prec:19,re:new RegExp("^//")};var TOK_SLASH={label:"/",prec:30,re:new RegExp("^/")};var TOK_AXIS={label:"::",prec:20,re:new RegExp("^::")};var TOK_COLON={label:":",prec:1000,re:new RegExp("^:")};var TOK_AXISNAME={label:"[axis]",re:new RegExp('^('+xpathAxesRe+')')};var TOK_PARENO={label:"(",prec:34,re:new RegExp("^\\(")};var TOK_PARENC={label:")",re:new RegExp("^\\)")};var TOK_DDOT={label:"..",prec:34,re:new RegExp("^\\.\\.")};var TOK_DOT={label:".",prec:34,re:new RegExp("^\\.")};var TOK_AT={label:"@",prec:34,re:new RegExp("^@")};var TOK_COMMA={label:",",re:new RegExp("^,")};var TOK_OR={label:"or",prec:10,re:new RegExp("^or\\b")};var TOK_AND={label:"and",prec:11,re:new RegExp("^and\\b")};var TOK_EQ={label:"=",prec:12,re:new RegExp("^=")};var TOK_NEQ={label:"!=",prec:12,re:new RegExp("^!=")};var TOK_GE={label:">=",prec:13,re:new RegExp("^>=")};var TOK_GT={label:">",prec:13,re:new RegExp("^>")};var TOK_LE={label:"<=",prec:13,re:new RegExp("^<=")};var TOK_LT={label:"<",prec:13,re:new RegExp("^<")};var TOK_PLUS={label:"+",prec:14,re:new RegExp("^\\+"),left:true};var TOK_MINUS={label:"-",prec:14,re:new RegExp("^\\-"),left:true};var TOK_DIV={label:"div",prec:15,re:new RegExp("^div\\b"),left:true};var TOK_MOD={label:"mod",prec:15,re:new RegExp("^mod\\b"),left:true};var TOK_BRACKO={label:"[",prec:32,re:new RegExp("^\\[")};var TOK_BRACKC={label:"]",re:new RegExp("^\\]")};var TOK_DOLLAR={label:"$",re:new RegExp("^\\$")};var TOK_NCNAME={label:"[ncname]",re:new RegExp('^'+XML_NC_NAME)};var TOK_ASTERISK={label:"*",prec:15,re:new RegExp("^\\*"),left:true};var TOK_LITERALQ={label:"[litq]",prec:20,re:new RegExp("^'[^\\']*'")};var TOK_LITERALQQ={label:"[litqq]",prec:20,re:new RegExp('^"[^\\"]*"')};var TOK_NUMBER={label:"[number]",prec:35,re:new RegExp('^\\d+(\\.\\d*)?')};var TOK_QNAME={label:"[qname]",re:new RegExp('^('+XML_NC_NAME+':)?'+XML_NC_NAME)};var TOK_NODEO={label:"[nodetest-start]",re:new RegExp('^(processing-instruction|comment|text|node)\\(')};var xpathTokenRules=[TOK_DSLASH,TOK_SLASH,TOK_DDOT,TOK_DOT,TOK_AXIS,TOK_COLON,TOK_AXISNAME,TOK_NODEO,TOK_PARENO,TOK_PARENC,TOK_BRACKO,TOK_BRACKC,TOK_AT,TOK_COMMA,TOK_OR,TOK_AND,TOK_NEQ,TOK_EQ,TOK_GE,TOK_GT,TOK_LE,TOK_LT,TOK_PLUS,TOK_MINUS,TOK_ASTERISK,TOK_PIPE,TOK_MOD,TOK_DIV,TOK_LITERALQ,TOK_LITERALQQ,TOK_NUMBER,TOK_QNAME,TOK_NCNAME,TOK_DOLLAR];var XPathLocationPath={label:"LocationPath"};var XPathRelativeLocationPath={label:"RelativeLocationPath"};var XPathAbsoluteLocationPath={label:"AbsoluteLocationPath"};var XPathStep={label:"Step"};var XPathNodeTest={label:"NodeTest"};var XPathPredicate={label:"Predicate"};var XPathLiteral={label:"Literal"};var XPathExpr={label:"Expr"};var XPathPrimaryExpr={label:"PrimaryExpr"};var XPathVariableReference={label:"Variablereference"};var XPathNumber={label:"Number"};var XPathFunctionCall={label:"FunctionCall"};var XPathArgumentRemainder={label:"ArgumentRemainder"};var XPathPathExpr={label:"PathExpr"};var XPathUnionExpr={label:"UnionExpr"};var XPathFilterExpr={label:"FilterExpr"};var XPathDigits={label:"Digits"};var xpathNonTerminals=[XPathLocationPath,XPathRelativeLocationPath,XPathAbsoluteLocationPath,XPathStep,XPathNodeTest,XPathPredicate,XPathLiteral,XPathExpr,XPathPrimaryExpr,XPathVariableReference,XPathNumber,XPathFunctionCall,XPathArgumentRemainder,XPathPathExpr,XPathUnionExpr,XPathFilterExpr,XPathDigits];var Q_01={label:"?"};var Q_MM={label:"*"};var Q_1M={label:"+"};var ASSOC_LEFT=true;var xpathGrammarRules=[[XPathLocationPath,[XPathRelativeLocationPath],18,passExpr],[XPathLocationPath,[XPathAbsoluteLocationPath],18,passExpr],[XPathAbsoluteLocationPath,[TOK_SLASH,XPathRelativeLocationPath],18,makeLocationExpr1],[XPathAbsoluteLocationPath,[TOK_DSLASH,XPathRelativeLocationPath],18,makeLocationExpr2],[XPathAbsoluteLocationPath,[TOK_SLASH],0,makeLocationExpr3],[XPathAbsoluteLocationPath,[TOK_DSLASH],0,makeLocationExpr4],[XPathRelativeLocationPath,[XPathStep],31,makeLocationExpr5],[XPathRelativeLocationPath,[XPathRelativeLocationPath,TOK_SLASH,XPathStep],31,makeLocationExpr6],[XPathRelativeLocationPath,[XPathRelativeLocationPath,TOK_DSLASH,XPathStep],31,makeLocationExpr7],[XPathStep,[TOK_DOT],33,makeStepExpr1],[XPathStep,[TOK_DDOT],33,makeStepExpr2],[XPathStep,[TOK_AXISNAME,TOK_AXIS,XPathNodeTest],33,makeStepExpr3],[XPathStep,[TOK_AT,XPathNodeTest],33,makeStepExpr4],[XPathStep,[XPathNodeTest],33,makeStepExpr5],[XPathStep,[XPathStep,XPathPredicate],33,makeStepExpr6],[XPathNodeTest,[TOK_ASTERISK],33,makeNodeTestExpr1],[XPathNodeTest,[TOK_NCNAME,TOK_COLON,TOK_ASTERISK],33,makeNodeTestExpr2],[XPathNodeTest,[TOK_QNAME],33,makeNodeTestExpr3],[XPathNodeTest,[TOK_NODEO,TOK_PARENC],33,makeNodeTestExpr4],[XPathNodeTest,[TOK_NODEO,XPathLiteral,TOK_PARENC],33,makeNodeTestExpr5],[XPathPredicate,[TOK_BRACKO,XPathExpr,TOK_BRACKC],33,makePredicateExpr],[XPathPrimaryExpr,[XPathVariableReference],33,passExpr],[XPathPrimaryExpr,[TOK_PARENO,XPathExpr,TOK_PARENC],33,makePrimaryExpr],[XPathPrimaryExpr,[XPathLiteral],30,passExpr],[XPathPrimaryExpr,[XPathNumber],30,passExpr],[XPathPrimaryExpr,[XPathFunctionCall],31,passExpr],[XPathFunctionCall,[TOK_QNAME,TOK_PARENO,TOK_PARENC],-1,makeFunctionCallExpr1],[XPathFunctionCall,[TOK_QNAME,TOK_PARENO,XPathExpr,XPathArgumentRemainder,Q_MM,TOK_PARENC],-1,makeFunctionCallExpr2],[XPathArgumentRemainder,[TOK_COMMA,XPathExpr],-1,makeArgumentExpr],[XPathUnionExpr,[XPathPathExpr],20,passExpr],[XPathUnionExpr,[XPathUnionExpr,TOK_PIPE,XPathPathExpr],20,makeUnionExpr],[XPathPathExpr,[XPathLocationPath],20,passExpr],[XPathPathExpr,[XPathFilterExpr],19,passExpr],[XPathPathExpr,[XPathFilterExpr,TOK_SLASH,XPathRelativeLocationPath],19,makePathExpr1],[XPathPathExpr,[XPathFilterExpr,TOK_DSLASH,XPathRelativeLocationPath],19,makePathExpr2],[XPathFilterExpr,[XPathPrimaryExpr,XPathPredicate,Q_MM],31,makeFilterExpr],[XPathExpr,[XPathPrimaryExpr],16,passExpr],[XPathExpr,[XPathUnionExpr],16,passExpr],[XPathExpr,[TOK_MINUS,XPathExpr],-1,makeUnaryMinusExpr],[XPathExpr,[XPathExpr,TOK_OR,XPathExpr],-1,makeBinaryExpr],[XPathExpr,[XPathExpr,TOK_AND,XPathExpr],-1,makeBinaryExpr],[XPathExpr,[XPathExpr,TOK_EQ,XPathExpr],-1,makeBinaryExpr],[XPathExpr,[XPathExpr,TOK_NEQ,XPathExpr],-1,makeBinaryExpr],[XPathExpr,[XPathExpr,TOK_LT,XPathExpr],-1,makeBinaryExpr],[XPathExpr,[XPathExpr,TOK_LE,XPathExpr],-1,makeBinaryExpr],[XPathExpr,[XPathExpr,TOK_GT,XPathExpr],-1,makeBinaryExpr],[XPathExpr,[XPathExpr,TOK_GE,XPathExpr],-1,makeBinaryExpr],[XPathExpr,[XPathExpr,TOK_PLUS,XPathExpr],-1,makeBinaryExpr,ASSOC_LEFT],[XPathExpr,[XPathExpr,TOK_MINUS,XPathExpr],-1,makeBinaryExpr,ASSOC_LEFT],[XPathExpr,[XPathExpr,TOK_ASTERISK],0,passExpr,ASSOC_LEFT],[XPathExpr,[XPathExpr,TOK_ASTERISK,XPathExpr],-1,makeBinaryExpr,ASSOC_LEFT],[XPathExpr,[XPathExpr,TOK_DIV,XPathExpr],-1,makeBinaryExpr,ASSOC_LEFT],[XPathExpr,[XPathExpr,TOK_MOD,XPathExpr],-1,makeBinaryExpr,ASSOC_LEFT],[XPathLiteral,[TOK_LITERALQ],-1,makeLiteralExpr],[XPathLiteral,[TOK_LITERALQQ],-1,makeLiteralExpr],[XPathNumber,[TOK_NUMBER],-1,makeNumberExpr],[XPathVariableReference,[TOK_DOLLAR,TOK_QNAME],200,makeVariableReference]];var xpathRules=[];function xpathParseInit(){if(xpathRules.length){return;}
xpathGrammarRules.sort(function(a,b){var la=a[1].length;var lb=b[1].length;if(la<lb){return 1;}else if(la>lb){return-1;}else{return 0;}});var k=1;for(var i=0;i<xpathNonTerminals.length;++i){xpathNonTerminals[i].key=k++;}
for(i=0;i<xpathTokenRules.length;++i){xpathTokenRules[i].key=k++;}
xpathLog('XPath parse INIT: '+k+' rules');function push_(array,position,element){if(!array[position]){array[position]=[];}
array[position].push(element);}
for(i=0;i<xpathGrammarRules.length;++i){var rule=xpathGrammarRules[i];var pattern=rule[1];for(var j=pattern.length-1;j>=0;--j){if(pattern[j]==Q_1M){push_(xpathRules,pattern[j-1].key,rule);break;}else if(pattern[j]==Q_MM||pattern[j]==Q_01){push_(xpathRules,pattern[j-1].key,rule);--j;}else{push_(xpathRules,pattern[j].key,rule);break;}}}
xpathLog('XPath parse INIT: '+xpathRules.length+' rule bins');var sum=0;mapExec(xpathRules,function(i){if(i){sum+=i.length;}});xpathLog('XPath parse INIT: '+(sum/xpathRules.length)+' average bin size');}
function xpathCollectDescendants(nodelist,node,opt_tagName){if(opt_tagName&&node.getElementsByTagName){copyArray(nodelist,node.getElementsByTagName(opt_tagName));return;}
for(var n=node.firstChild;n;n=n.nextSibling){nodelist.push(n);xpathCollectDescendants(nodelist,n);}}
function xpathExtractTagNameFromNodeTest(nodetest){if(nodetest instanceof NodeTestName){return nodetest.name;}else if(nodetest instanceof NodeTestAny||nodetest instanceof NodeTestElementOrAttribute){return"*";}}
function xpathCollectDescendantsReverse(nodelist,node){for(var n=node.lastChild;n;n=n.previousSibling){nodelist.push(n);xpathCollectDescendantsReverse(nodelist,n);}}
function xpathDomEval(expr,node){var expr1=xpathParse(expr);var ret=expr1.evaluate(new ExprContext(node));return ret;}
function xpathSort(input,sort){if(sort.length==0){return;}
var sortlist=[];for(var i=0;i<input.contextSize();++i){var node=input.nodelist[i];var sortitem={node:node,key:[]};var context=input.clone(node,0,[node]);for(var j=0;j<sort.length;++j){var s=sort[j];var value=s.expr.evaluate(context);var evalue;if(s.type=='text'){evalue=value.stringValue();}else if(s.type=='number'){evalue=value.numberValue();}
sortitem.key.push({value:evalue,order:s.order});}
sortitem.key.push({value:i,order:'ascending'});sortlist.push(sortitem);}
sortlist.sort(xpathSortByKey);var nodes=[];for(var i=0;i<sortlist.length;++i){nodes.push(sortlist[i].node);}
input.nodelist=nodes;input.setNode(0);}
function xpathSortByKey(v1,v2){for(var i=0;i<v1.key.length;++i){var o=v1.key[i].order=='descending'?-1:1;if(v1.key[i].value>v2.key[i].value){return+1*o;}else if(v1.key[i].value<v2.key[i].value){return-1*o;}}
return 0;}
function xpathEval(select,context){var expr=xpathParse(select);var ret=expr.evaluate(context);return ret;}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/ajaxslt-improvements.js

var g_bSaveDependencies=false;var HIERARCHY_REQUEST_ERR=3;function xpathDomEval(expr,oContext){var expr1=xpathParse(expr);var ctx=new ExprContext(oContext.node?oContext.node:oContext,oContext.position);ctx["size"]=oContext.size?oContext.size:(ctx.node?1:0);ctx["currentModel"]=oContext.model;ctx["outermostContextNode"]=ctx.node;ctx["resolverElement"]=oContext.resolverElement;ctx.setCaseInsensitive(!UX.isXHTML&&(UX.isFF||UX.isChrome||UX.isSafari));var ret=expr1.evaluate(ctx);return ret;}
FunctionCallExpr.prototype.xpathfunctions["last"]=function(ctx){if(ctx.size&&ctx.nodelist&&ctx.nodelist.length===1&&ctx.nodelist[0]===ctx.outermostContextNode){return new NumberValue(ctx.size);}
return new NumberValue(ctx.contextSize());};ExprContext.prototype.clone=function(opt_node,opt_position,opt_nodelist){var oRet=new ExprContext(opt_node||this.node,typeof opt_position!='undefined'?opt_position:this.position,opt_nodelist||this.nodelist,this,this.caseInsensitive,this.ignoreAttributesWithoutValue);oRet.size=this.size;oRet.currentModel=this.currentModel;oRet.outermostContextNode=this.outermostContextNode;oRet.resolverElement=this.resolverElement;return oRet;};XNode.prototype.cloneNode=function(bDeep){var newNode,i;if(bDeep){if(this.nodeType===DOM_DOCUMENT_NODE||this.nodeType===DOM_ELEMENT_NODE||this.nodeType===DOM_DOCUMENT_FRAGMENT_NODE){newNode=this.cloneNode(false);for(i=0;i<this.childNodes.length;i++){newNode.appendChild(this.childNodes[i].cloneNode(true));}}else{bDeep=false;}}
if(!bDeep){if(this.nodeType===DOM_DOCUMENT_NODE){newNode=new XDocument();}else if(this.nodeType===DOM_ELEMENT_NODE){newNode=XNode.create(DOM_ELEMENT_NODE,this.nodeName,null,new XDocument());for(i=0;i<this.attributes.length;i++){newNode.setAttribute(this.attributes[i].nodeName,this.attributes[i].nodeValue);}}else{newNode=XNode.create(this.nodeType,this.nodeName,this.nodeValue,new XDocument());}}
return newNode;};XNode.prototype.removeAttributeList=function(){while(this.attributes.length>0){this.removeAttribute(this.attributes[0].nodeName);}}
FunctionCallExpr.prototype.xpathfunctions["local-name"]=function(ctx)
{assert(this.args.length===1||this.args.length===0);var n,ix;var name="";if(this.args.length===0){n=[ctx.node];}else{n=this.args[0].evaluate(ctx).nodeSetValue();}
if(n.length===0){}else{name=n[0].nodeName;}
ix=name.indexOf(":");if(ix>-1)
{name=name.substr(ix+1);}
return new StringValue(name);};FunctionCallExpr.prototype.xpathfunctions["namespace-uri"]=function(ctx)
{alert('not IMPLEMENTED yet: XPath function namespace-uri()');};FunctionCallExpr.prototype.evaluate=function(ctx){var f=this.getFunction();var i,nodes,retval;if(f){retval=f.call(this,ctx);if(g_bSaveDependencies&&retval.type=='node-set'){nodes=retval.nodeSetValue();for(i=0;i<nodes.length;++i){g_arrSavedDependencies.push(nodes[i]);}}}else{xpathLog('XPath NO SUCH FUNCTION '+this.name.value);retval=new BooleanValue(false);}
return retval;};FunctionCallExpr.prototype.getFunction=function(){var segments,prefix,localName;var prefixes;var i;var allowBridge=false;var retval;segments=this.name.value.split(':');if(segments.length==1){localName=segments[0];}else{prefix=segments[0];localName=segments[1];}
if(!prefix){retval=this.xpathfunctions[localName];}else{prefixes=NamespaceManager.getOutputPrefixesFromURI("http://www.w3.org/2002/xforms#inline");if(prefixes===undefined||prefixes===null)
return null;for(i=0;i<prefixes.length;i++){if(prefix===prefixes[i]&&UX.global[localName]!=null){retval=function(ctx){var f;var marshalledArgs=[];var i,c;var arg;var retval;f=UX.global[localName];if(!f){return null;}
c=this.args.length;for(i=0;i<c;i++){arg=this.args[i];while(arg&&typeof(arg.evaluate)==='function')
arg=arg.evaluate(ctx);if(arg.type==='boolean'){marshalledArgs.push(arg.booleanValue());}else if(arg.type==='string'){marshalledArgs.push(arg.stringValue());}else if(arg.type==='number'){marshalledArgs.push(arg.numberValue());}else if(arg.type==='node-set'&&arg.nodeSetValue().length<=1){marshalledArgs.push(arg.stringValue());}else{xpathLog('Non-primitive passed to bridged function "'+localName+'".');return new BooleanValue(false);}}
retval=f.apply(null,marshalledArgs);if(retval==null)
return new BooleanValue(false);switch(UX.type(retval)){case'boolean':return new BooleanValue(retval);case'string':return new StringValue(retval);case'number':return new NumberValue(retval);default:xpathLog('Bridged function "'+localName+'" returned non-primitive value.');return new BooleanValue(false);}};break;}}}
return retval;};LocationExpr.prototype.evaluate=function(ctx){var start,i,retval;var nodes=[];if(this.absolute){start=ctx.root;}else{start=ctx.node;}
xPathStep(nodes,this.steps,0,start,ctx);retval=new NodeSetValue(nodes);if(g_bSaveDependencies)
{for(i=0;i<nodes.length;++i)
{g_arrSavedDependencies.push(nodes[i]);}}
return retval;};XNode.prototype.setOwnerDocument=function(owner,bDeep){var i;if(this.nodeType===DOM_DOCUMENT_NODE){this.ownerDocument=null;}else{this.ownerDocument=owner;}
if(bDeep){for(i=0;i<this.attributes.length;i++){this.attributes[i].setOwnerDocument(owner);}
for(i=0;i<this.childNodes.length;i++){this.childNodes[i].setOwnerDocument(owner,true);}}};XDocument.prototype.appendChild=function(node){if(node.nodeType===DOM_TEXT_NODE){throw{code:HIERARCHY_REQUEST_ERR,message:"Text Nodes are not allowed at the top level of a document"};}else if(node.nodeType===DOM_ELEMENT_NODE){if(this.documentElement){throw{code:HIERARCHY_REQUEST_ERR,message:"Only one top level element is allowed in an XML document."};}else{this.documentElement=XNode.prototype.appendChild.call(this,node);return this.documentElement;}}else{return XNode.prototype.appendChild.call(this,node);}};XDocument.prototype.removeChild=function(node){if(node===this.documentElement){this.documentElement=null;}
XNode.prototype.removeChild.call(this,node);};XNode.prototype.appendChild=function(node){if(node.ownerDocument!==this.ownerDocument){node.setOwnerDocument(this.nodeType===DOM_DOCUMENT_NODE?this:this.ownerDocument,true);}
if(this.childNodes.length==0){this.firstChild=node;}
node.previousSibling=this.lastChild;node.nextSibling=null;if(this.lastChild){this.lastChild.nextSibling=node;}
node.parentNode=this;this.lastChild=node;this.childNodes.push(node);return node;}
XNode.prototype.replaceChild=function(newNode,oldNode){if(oldNode==newNode){return;}
for(var i=0;i<this.childNodes.length;++i){if(this.childNodes[i]==oldNode){if(newNode.ownerDocument!==oldNode.ownerDocument){newNode.setOwnerDocument(oldNode.ownerDocument,true);}
this.childNodes[i]=newNode;var p=oldNode.parentNode;oldNode.parentNode=null;newNode.parentNode=p;p=oldNode.previousSibling;oldNode.previousSibling=null;newNode.previousSibling=p;if(newNode.previousSibling){newNode.previousSibling.nextSibling=newNode;}
p=oldNode.nextSibling;oldNode.nextSibling=null;newNode.nextSibling=p;if(newNode.nextSibling){newNode.nextSibling.previousSibling=newNode;}
if(this.firstChild==oldNode){this.firstChild=newNode;}
if(this.lastChild==oldNode){this.lastChild=newNode;}
break;}}}
XNode.prototype.insertBefore=function(newNode,oldNode){var i,c,newChildren=[],oRet=newNode;if(!oldNode){if(newNode.parentNode){newNode.parentNode.removeChild(newNode);}
this.appendChild(newNode);}else if((oldNode!==newNode)&&(oldNode.parentNode===this)){if(newNode.parentNode){newNode.parentNode.removeChild(newNode);}
if(newNode.ownerDocument!==oldNode.ownerDocument){newNode.setOwnerDocument(oldNode.ownerDocument,true);}
for(i=0;i<this.childNodes.length;++i){c=this.childNodes[i];if(c===oldNode){newChildren.push(newNode);newNode.parentNode=this;newNode.previousSibling=oldNode.previousSibling;oldNode.previousSibling=newNode;if(newNode.previousSibling){newNode.previousSibling.nextSibling=newNode;}
newNode.nextSibling=oldNode;if(this.firstChild===oldNode){this.firstChild=newNode;}}
newChildren.push(c);}
this.childNodes=newChildren;}
return oRet;}
XNode.prototype.getElementsById=function(id){var ret=[];var oID=null;domTraverseElements(this,function(node){oID=node.getAttribute('id');if(!oID){oID=node.getAttribute('xml:id');if(!oID&&node.getAttribute('xsi:type')==='xsd:ID'){oID=node.firstChild.nodeValue.trim();}}
if(oID===id){ret.push(node);}},null);return ret;};XNode.prototype.setAttribute=function(name,value){if(this.nodeType!==DOM_ELEMENT_NODE){return;}
for(var i=0;i<this.attributes.length;++i){if(this.attributes[i].nodeName==name){this.attributes[i].nodeValue=''+value;return;}}
var newAttr=XNode.create(DOM_ATTRIBUTE_NODE,name,value,this);this.attributes.push(newAttr);newAttr.parentNode=this;};XNode.prototype.setAttributeNode=function(newAttr){if((this.nodeType!==DOM_ELEMENT_NODE)||(newAttr.nodeType!==DOM_ATTRIBUTE_NODE)){return;}
var i;for(i=0;i<this.attributes.length;++i){if(this.attributes[i].nodeName===newAttr.nodeName){break;}}
if(i<this.attributes.length){this.attributes[i]=newAttr;}
else{this.attributes.push(newAttr);}
newAttr.parentNode=this;};XDocument.prototype.createProcessingInstruction=function(target,data){return XNode.create(DOM_PROCESSING_INSTRUCTION_NODE,'#processing-instruction',target+" "+data.replace(/^\s\s*/,'').replace(/\s\s*$/,''),this);};function xmlText(node,opt_cdata,opt_includenamespaceprefixes){var buf=[];xmlTextR(node,buf,opt_cdata,opt_includenamespaceprefixes);return buf.join('');}
function xmlTextR(node,buf,cdata,includeNamespacePrefixes){var i,parentNodeName,elementContainsCDATA,a,prefix,j;if(node.nodeType==DOM_TEXT_NODE){elementContainsCDATA=false;if(cdata&&typeof cdata==='object'&&typeof cdata.length==='number'&&typeof cdata.splice==='function'&&!cdata.propertyIsEnumerable('length')){parentNodeName=xmlFullNodeName(node.parentNode);for(i=0;i<cdata.length;++i){if(parentNodeName===cdata[i]){elementContainsCDATA=true;break;}}}
if(elementContainsCDATA){buf.push('<![CDATA['+xmlEscapeText(node.nodeValue)+']]>');}else{buf.push(xmlEscapeText(node.nodeValue));}}else if(node.nodeType==DOM_CDATA_SECTION_NODE){if(cdata){buf.push(node.nodeValue);}else{buf.push('<![CDATA['+node.nodeValue+']]>');}}else if(node.nodeType==DOM_COMMENT_NODE){buf.push('<!--'+node.nodeValue+'-->');}else if(node.nodeType==DOM_ELEMENT_NODE){buf.push('<'+xmlFullNodeName(node));for(i=0;i<node.attributes.length;++i){a=node.attributes[i];if(a&&a.nodeName&&a.nodeValue){if(a.nodeName.indexOf('xmlns')===0&&includeNamespacePrefixes){prefix=a.nodeName.split(':')[1];for(j=0;j<includeNamespacePrefixes.length;j++){if(prefix===includeNamespacePrefixes[j]||(prefix===''&&includeNamespacePrefixes[j]==='#default')){buf.push(' '+xmlFullNodeName(a)+'="'+
xmlEscapeAttr(a.nodeValue)+'"');break;}}}else{buf.push(' '+xmlFullNodeName(a)+'="'+
xmlEscapeAttr(a.nodeValue)+'"');}}}
if(node.childNodes.length==0){buf.push('/>');}else{buf.push('>');for(i=0;i<node.childNodes.length;++i){arguments.callee(node.childNodes[i],buf,cdata,includeNamespacePrefixes);}
buf.push('</'+xmlFullNodeName(node)+'>');}}else if(node.nodeType==DOM_DOCUMENT_NODE||node.nodeType==DOM_DOCUMENT_FRAGMENT_NODE){for(i=0;i<node.childNodes.length;++i){arguments.callee(node.childNodes[i],buf,cdata,includeNamespacePrefixes);}}else if(node.nodeType==DOM_PROCESSING_INSTRUCTION_NODE){buf.push('<?'+node.nodeValue+'?>');}}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../third-party/md5.js

MD5=new function(){var hexcase=0;var b64pad="=";var chrsz=8;this.hex_md5=function(s){return binl2hex(core_md5(str2binl(s),s.length*chrsz));}
this.b64_md5=function(s){return binl2b64(core_md5(str2binl(s),s.length*chrsz));}
this.str_md5=function(s){return binl2str(core_md5(str2binl(s),s.length*chrsz));}
this.hex_hmac_md5=function(key,data){return binl2hex(core_hmac_md5(key,data));}
this.b64_hmac_md5=function(key,data){return binl2b64(core_hmac_md5(key,data));}
this.str_hmac_md5=function(key,data){return binl2str(core_hmac_md5(key,data));}
function md5_vm_test()
{return hex_md5("abc")=="900150983cd24fb0d6963f7d28e17f72";}
function core_md5(x,len)
{x[len>>5]|=0x80<<((len)%32);x[(((len+64)>>>9)<<4)+14]=len;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i<x.length;i+=16)
{var olda=a;var oldb=b;var oldc=c;var oldd=d;a=md5_ff(a,b,c,d,x[i+0],7,-680876936);d=md5_ff(d,a,b,c,x[i+1],12,-389564586);c=md5_ff(c,d,a,b,x[i+2],17,606105819);b=md5_ff(b,c,d,a,x[i+3],22,-1044525330);a=md5_ff(a,b,c,d,x[i+4],7,-176418897);d=md5_ff(d,a,b,c,x[i+5],12,1200080426);c=md5_ff(c,d,a,b,x[i+6],17,-1473231341);b=md5_ff(b,c,d,a,x[i+7],22,-45705983);a=md5_ff(a,b,c,d,x[i+8],7,1770035416);d=md5_ff(d,a,b,c,x[i+9],12,-1958414417);c=md5_ff(c,d,a,b,x[i+10],17,-42063);b=md5_ff(b,c,d,a,x[i+11],22,-1990404162);a=md5_ff(a,b,c,d,x[i+12],7,1804603682);d=md5_ff(d,a,b,c,x[i+13],12,-40341101);c=md5_ff(c,d,a,b,x[i+14],17,-1502002290);b=md5_ff(b,c,d,a,x[i+15],22,1236535329);a=md5_gg(a,b,c,d,x[i+1],5,-165796510);d=md5_gg(d,a,b,c,x[i+6],9,-1069501632);c=md5_gg(c,d,a,b,x[i+11],14,643717713);b=md5_gg(b,c,d,a,x[i+0],20,-373897302);a=md5_gg(a,b,c,d,x[i+5],5,-701558691);d=md5_gg(d,a,b,c,x[i+10],9,38016083);c=md5_gg(c,d,a,b,x[i+15],14,-660478335);b=md5_gg(b,c,d,a,x[i+4],20,-405537848);a=md5_gg(a,b,c,d,x[i+9],5,568446438);d=md5_gg(d,a,b,c,x[i+14],9,-1019803690);c=md5_gg(c,d,a,b,x[i+3],14,-187363961);b=md5_gg(b,c,d,a,x[i+8],20,1163531501);a=md5_gg(a,b,c,d,x[i+13],5,-1444681467);d=md5_gg(d,a,b,c,x[i+2],9,-51403784);c=md5_gg(c,d,a,b,x[i+7],14,1735328473);b=md5_gg(b,c,d,a,x[i+12],20,-1926607734);a=md5_hh(a,b,c,d,x[i+5],4,-378558);d=md5_hh(d,a,b,c,x[i+8],11,-2022574463);c=md5_hh(c,d,a,b,x[i+11],16,1839030562);b=md5_hh(b,c,d,a,x[i+14],23,-35309556);a=md5_hh(a,b,c,d,x[i+1],4,-1530992060);d=md5_hh(d,a,b,c,x[i+4],11,1272893353);c=md5_hh(c,d,a,b,x[i+7],16,-155497632);b=md5_hh(b,c,d,a,x[i+10],23,-1094730640);a=md5_hh(a,b,c,d,x[i+13],4,681279174);d=md5_hh(d,a,b,c,x[i+0],11,-358537222);c=md5_hh(c,d,a,b,x[i+3],16,-722521979);b=md5_hh(b,c,d,a,x[i+6],23,76029189);a=md5_hh(a,b,c,d,x[i+9],4,-640364487);d=md5_hh(d,a,b,c,x[i+12],11,-421815835);c=md5_hh(c,d,a,b,x[i+15],16,530742520);b=md5_hh(b,c,d,a,x[i+2],23,-995338651);a=md5_ii(a,b,c,d,x[i+0],6,-198630844);d=md5_ii(d,a,b,c,x[i+7],10,1126891415);c=md5_ii(c,d,a,b,x[i+14],15,-1416354905);b=md5_ii(b,c,d,a,x[i+5],21,-57434055);a=md5_ii(a,b,c,d,x[i+12],6,1700485571);d=md5_ii(d,a,b,c,x[i+3],10,-1894986606);c=md5_ii(c,d,a,b,x[i+10],15,-1051523);b=md5_ii(b,c,d,a,x[i+1],21,-2054922799);a=md5_ii(a,b,c,d,x[i+8],6,1873313359);d=md5_ii(d,a,b,c,x[i+15],10,-30611744);c=md5_ii(c,d,a,b,x[i+6],15,-1560198380);b=md5_ii(b,c,d,a,x[i+13],21,1309151649);a=md5_ii(a,b,c,d,x[i+4],6,-145523070);d=md5_ii(d,a,b,c,x[i+11],10,-1120210379);c=md5_ii(c,d,a,b,x[i+2],15,718787259);b=md5_ii(b,c,d,a,x[i+9],21,-343485551);a=safe_add(a,olda);b=safe_add(b,oldb);c=safe_add(c,oldc);d=safe_add(d,oldd);}
return Array(a,b,c,d);}
function md5_cmn(q,a,b,x,s,t)
{return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b);}
function md5_ff(a,b,c,d,x,s,t)
{return md5_cmn((b&c)|((~b)&d),a,b,x,s,t);}
function md5_gg(a,b,c,d,x,s,t)
{return md5_cmn((b&d)|(c&(~d)),a,b,x,s,t);}
function md5_hh(a,b,c,d,x,s,t)
{return md5_cmn(b^c^d,a,b,x,s,t);}
function md5_ii(a,b,c,d,x,s,t)
{return md5_cmn(c^(b|(~d)),a,b,x,s,t);}
function core_hmac_md5(key,data)
{var bkey=str2binl(key);if(bkey.length>16)bkey=core_md5(bkey,key.length*chrsz);var ipad=Array(16),opad=Array(16);for(var i=0;i<16;i++)
{ipad[i]=bkey[i]^0x36363636;opad[i]=bkey[i]^0x5C5C5C5C;}
var hash=core_md5(ipad.concat(str2binl(data)),512+data.length*chrsz);return core_md5(opad.concat(hash),512+128);}
function safe_add(x,y)
{var lsw=(x&0xFFFF)+(y&0xFFFF);var msw=(x>>16)+(y>>16)+(lsw>>16);return(msw<<16)|(lsw&0xFFFF);}
function bit_rol(num,cnt)
{return(num<<cnt)|(num>>>(32-cnt));}
function str2binl(str)
{var bin=Array();var mask=(1<<chrsz)-1;for(var i=0;i<str.length*chrsz;i+=chrsz)
bin[i>>5]|=(str.charCodeAt(i/chrsz)&mask)<<(i%32);return bin;}
function binl2str(bin)
{var str="";var mask=(1<<chrsz)-1;for(var i=0;i<bin.length*32;i+=chrsz)
str+=String.fromCharCode((bin[i>>5]>>>(i%32))&mask);return str;}
function binl2hex(binarray)
{var hex_tab=hexcase?"0123456789ABCDEF":"0123456789abcdef";var str="";for(var i=0;i<binarray.length*4;i++)
{str+=hex_tab.charAt((binarray[i>>2]>>((i%4)*8+4))&0xF)+
hex_tab.charAt((binarray[i>>2]>>((i%4)*8))&0xF);}
return str;}
function binl2b64(binarray)
{var tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var str="";for(var i=0;i<binarray.length*4;i+=3)
{var triplet=(((binarray[i>>2]>>8*(i%4))&0xFF)<<16)|(((binarray[i+1>>2]>>8*((i+1)%4))&0xFF)<<8)|((binarray[i+2>>2]>>8*((i+2)%4))&0xFF);for(var j=0;j<4;j++)
{if(i*8+j*6>binarray.length*32)str+=b64pad;else str+=tab.charAt((triplet>>6*(3-j))&0x3F);}}
return str;}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../third-party/jsSHA/src/sha.js

function Int_64(msint_32,lsint_32){this.highOrder=msint_32;this.lowOrder=lsint_32;}
function jsSHA(srcString){jsSHA.charSize=8;jsSHA.b64pad="=";jsSHA.hexCase=0;var sha1=null;var sha224=null;var sha256=null;var sha384=null;var sha512=null;var str2binb=function(str){var bin=[];var mask=(1<<jsSHA.charSize)-1;var length=str.length*jsSHA.charSize;for(var i=0;i<str.length*jsSHA.charSize;i+=jsSHA.charSize){bin[i>>5]|=(str.charCodeAt(i/jsSHA.charSize)&mask)<<(32-jsSHA.charSize-i%32);}
return bin;};var binb2str=function(bin)
{var str="";var mask=(1<<jsSHA.charSize)-1;var length=bin.length*32;for(var i=0;i<length;i+=jsSHA.charSize){str+=String.fromCharCode((bin[i>>5]>>>(32-jsSHA.charSize-i%32))&mask);}
return str;};var strBinLen=srcString.length*jsSHA.charSize;var strToHash=str2binb(srcString);var binb2hex=function(binarray){var hex_tab=jsSHA.hexCase?"0123456789ABCDEF":"0123456789abcdef";var str="";var length=binarray.length*4;for(var i=0;i<length;i++){str+=hex_tab.charAt((binarray[i>>2]>>((3-i%4)*8+4))&0xF)+hex_tab.charAt((binarray[i>>2]>>((3-i%4)*8))&0xF);}
return str;};var binb2b64=function(binarray){var tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var str="";var length=binarray.length*4;for(var i=0;i<length;i+=3)
{var triplet=(((binarray[i>>2]>>8*(3-i%4))&0xFF)<<16)|(((binarray[i+1>>2]>>8*(3-(i+1)%4))&0xFF)<<8)|((binarray[i+2>>2]>>8*(3-(i+2)%4))&0xFF);for(var j=0;j<4;j++){if(i*8+j*6>binarray.length*32){str+=jsSHA.b64pad;}else{str+=tab.charAt((triplet>>6*(3-j))&0x3F);}}}
return str;};var binb2binb=function(binarray){return binarray;};var rotl_32=function(x,n){if(n<32){return(x<<n)|(x>>>(32-n));}else{return x;}};var rotr_32=function(x,n){if(n<32){return(x>>>n)|(x<<(32-n));}else{return x;}};var rotr_64=function(x,n){if(n<32){return new Int_64((x.highOrder>>>n)|(x.lowOrder<<(32-n)),(x.lowOrder>>>n)|(x.highOrder<<(32-n)));}else if(n===32){return new Int_64(x.lowOrder,x.highOrder);}else{return rotr_64(rotr_64(x,32),n-32);}};var shr_32=function(x,n){if(n<32){return x>>>n;}else{return 0;}};var shr_64=function(x,n){if(n<32){return new Int_64(x.highOrder>>>n,x.lowOrder>>>n|(x.highOrder<<(32-n)));}else if(n===32){return new Int_64(0,x.highOrder);}else{return shr_64(shr_64(x,32),n-32);}};var parity_32=function(x,y,z){return x^y^z;};var ch_32=function(x,y,z){return(x&y)^(~x&z);};var ch_64=function(x,y,z){return new Int_64((x.highOrder&y.highOrder)^(~x.highOrder&z.highOrder),(x.lowOrder&y.lowOrder)^(~x.lowOrder&z.lowOrder));};var maj_32=function(x,y,z){return(x&y)^(x&z)^(y&z);};var maj_64=function(x,y,z){return new Int_64((x.highOrder&y.highOrder)^(x.highOrder&z.highOrder)^(y.highOrder&z.highOrder),(x.lowOrder&y.lowOrder)^(x.lowOrder&z.lowOrder)^(y.lowOrder&z.lowOrder));};var sigma0_32=function(x){return rotr_32(x,2)^rotr_32(x,13)^rotr_32(x,22);};var sigma0_64=function(x){var rotr28=rotr_64(x,28);var rotr34=rotr_64(x,34);var rotr39=rotr_64(x,39);return new Int_64(rotr28.highOrder^rotr34.highOrder^rotr39.highOrder,rotr28.lowOrder^rotr34.lowOrder^rotr39.lowOrder);};var sigma1_32=function(x){return rotr_32(x,6)^rotr_32(x,11)^rotr_32(x,25);};var sigma1_64=function(x){var rotr14=rotr_64(x,14);var rotr18=rotr_64(x,18);var rotr41=rotr_64(x,41);return new Int_64(rotr14.highOrder^rotr18.highOrder^rotr41.highOrder,rotr14.lowOrder^rotr18.lowOrder^rotr41.lowOrder);};var gamma0_32=function(x){return rotr_32(x,7)^rotr_32(x,18)^shr_32(x,3);};var gamma0_64=function(x){var rotr1=rotr_64(x,1);var rotr8=rotr_64(x,8);var shr7=shr_64(x,7);return new Int_64(rotr1.highOrder^rotr8.highOrder^shr7.highOrder,rotr1.lowOrder^rotr8.lowOrder^shr7.lowOrder);};var gamma1_32=function(x){return rotr_32(x,17)^rotr_32(x,19)^shr_32(x,10);};var gamma1_64=function(x){var rotr19=rotr_64(x,19);var rotr61=rotr_64(x,61);var shr6=shr_64(x,6);return new Int_64(rotr19.highOrder^rotr61.highOrder^shr6.highOrder,rotr19.lowOrder^rotr61.lowOrder^shr6.lowOrder);};var safeAdd_32=function(x,y){var lsw=(x&0xFFFF)+(y&0xFFFF);var msw=(x>>>16)+(y>>>16)+(lsw>>>16);return((msw&0xFFFF)<<16)|(lsw&0xFFFF);};var safeAdd_64=function(x,y){var lsw=(x.lowOrder&0xFFFF)+(y.lowOrder&0xFFFF);var msw=(x.lowOrder>>>16)+(y.lowOrder>>>16)+(lsw>>>16);var lowOrder=((msw&0xFFFF)<<16)|(lsw&0xFFFF);lsw=(x.highOrder&0xFFFF)+(y.highOrder&0xFFFF)+(msw>>>16);msw=(x.highOrder>>>16)+(y.highOrder>>>16)+(lsw>>>16);var highOrder=((msw&0xFFFF)<<16)|(lsw&0xFFFF);return new Int_64(highOrder,lowOrder);};var coreSHA1=function(){var W=[];var a,b,c,d,e;var T;var ch=ch_32,parity=parity_32,maj=maj_32,rotl=rotl_32,safeAdd=safeAdd_32;var H=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0];var K=[0x5a827999,0x5a827999,0x5a827999,0x5a827999,0x5a827999,0x5a827999,0x5a827999,0x5a827999,0x5a827999,0x5a827999,0x5a827999,0x5a827999,0x5a827999,0x5a827999,0x5a827999,0x5a827999,0x5a827999,0x5a827999,0x5a827999,0x5a827999,0x6ed9eba1,0x6ed9eba1,0x6ed9eba1,0x6ed9eba1,0x6ed9eba1,0x6ed9eba1,0x6ed9eba1,0x6ed9eba1,0x6ed9eba1,0x6ed9eba1,0x6ed9eba1,0x6ed9eba1,0x6ed9eba1,0x6ed9eba1,0x6ed9eba1,0x6ed9eba1,0x6ed9eba1,0x6ed9eba1,0x6ed9eba1,0x6ed9eba1,0x8f1bbcdc,0x8f1bbcdc,0x8f1bbcdc,0x8f1bbcdc,0x8f1bbcdc,0x8f1bbcdc,0x8f1bbcdc,0x8f1bbcdc,0x8f1bbcdc,0x8f1bbcdc,0x8f1bbcdc,0x8f1bbcdc,0x8f1bbcdc,0x8f1bbcdc,0x8f1bbcdc,0x8f1bbcdc,0x8f1bbcdc,0x8f1bbcdc,0x8f1bbcdc,0x8f1bbcdc,0xca62c1d6,0xca62c1d6,0xca62c1d6,0xca62c1d6,0xca62c1d6,0xca62c1d6,0xca62c1d6,0xca62c1d6,0xca62c1d6,0xca62c1d6,0xca62c1d6,0xca62c1d6,0xca62c1d6,0xca62c1d6,0xca62c1d6,0xca62c1d6,0xca62c1d6,0xca62c1d6,0xca62c1d6,0xca62c1d6];var message=strToHash.slice();message[strBinLen>>5]|=0x80<<(24-strBinLen%32);message[((strBinLen+1+64>>9)<<4)+15]=strBinLen;var appendedMessageLength=message.length;for(var i=0;i<appendedMessageLength;i+=16){a=H[0];b=H[1];c=H[2];d=H[3];e=H[4];for(var t=0;t<80;t++){if(t<16){W[t]=message[t+i];}else{W[t]=rotl(W[t-3]^W[t-8]^W[t-14]^W[t-16],1);}
if(t<20){T=safeAdd(safeAdd(safeAdd(safeAdd(rotl(a,5),ch(b,c,d)),e),K[t]),W[t]);}else if(t<40){T=safeAdd(safeAdd(safeAdd(safeAdd(rotl(a,5),parity(b,c,d)),e),K[t]),W[t]);}else if(t<60){T=safeAdd(safeAdd(safeAdd(safeAdd(rotl(a,5),maj(b,c,d)),e),K[t]),W[t]);}else{T=safeAdd(safeAdd(safeAdd(safeAdd(rotl(a,5),parity(b,c,d)),e),K[t]),W[t]);}
e=d;d=c;c=rotl(b,30);b=a;a=T;}
H[0]=safeAdd(a,H[0]);H[1]=safeAdd(b,H[1]);H[2]=safeAdd(c,H[2]);H[3]=safeAdd(d,H[3]);H[4]=safeAdd(e,H[4]);}
return H;};var coreSHA2=function(variant){var W=[];var a,b,c,d,e,f,g,h;var T1,T2;var H;var numRounds,lengthPosition,binaryStringInc,binaryStringMult;var safeAdd,gamma0,gamma1,sigma0,sigma1,ch,maj,Int;var K;var message=strToHash.slice();if(variant==="SHA-224"||variant==="SHA-256")
{numRounds=64;lengthPosition=((strBinLen+1+64>>9)<<4)+15;binaryStringInc=16;binaryStringMult=1;Int=Number;safeAdd=safeAdd_32;gamma0=gamma0_32;gamma1=gamma1_32;sigma0=sigma0_32;sigma1=sigma1_32;maj=maj_32;ch=ch_32;K=[0x428A2F98,0x71374491,0xB5C0FBCF,0xE9B5DBA5,0x3956C25B,0x59F111F1,0x923F82A4,0xAB1C5ED5,0xD807AA98,0x12835B01,0x243185BE,0x550C7DC3,0x72BE5D74,0x80DEB1FE,0x9BDC06A7,0xC19BF174,0xE49B69C1,0xEFBE4786,0x0FC19DC6,0x240CA1CC,0x2DE92C6F,0x4A7484AA,0x5CB0A9DC,0x76F988DA,0x983E5152,0xA831C66D,0xB00327C8,0xBF597FC7,0xC6E00BF3,0xD5A79147,0x06CA6351,0x14292967,0x27B70A85,0x2E1B2138,0x4D2C6DFC,0x53380D13,0x650A7354,0x766A0ABB,0x81C2C92E,0x92722C85,0xA2BFE8A1,0xA81A664B,0xC24B8B70,0xC76C51A3,0xD192E819,0xD6990624,0xF40E3585,0x106AA070,0x19A4C116,0x1E376C08,0x2748774C,0x34B0BCB5,0x391C0CB3,0x4ED8AA4A,0x5B9CCA4F,0x682E6FF3,0x748F82EE,0x78A5636F,0x84C87814,0x8CC70208,0x90BEFFFA,0xA4506CEB,0xBEF9A3F7,0xC67178F2];if(variant==="SHA-224"){H=[0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4];}else{H=[0x6A09E667,0xBB67AE85,0x3C6EF372,0xA54FF53A,0x510E527F,0x9B05688C,0x1F83D9AB,0x5BE0CD19];}}else if(variant==="SHA-384"||variant==="SHA-512"){numRounds=80;lengthPosition=((strBinLen+1+128>>10)<<5)+31;binaryStringInc=32;binaryStringMult=2;Int=Int_64;safeAdd=safeAdd_64;gamma0=gamma0_64;gamma1=gamma1_64;sigma0=sigma0_64;sigma1=sigma1_64;maj=maj_64;ch=ch_64;K=[new Int_64(0x428a2f98,0xd728ae22),new Int_64(0x71374491,0x23ef65cd),new Int_64(0xb5c0fbcf,0xec4d3b2f),new Int_64(0xe9b5dba5,0x8189dbbc),new Int_64(0x3956c25b,0xf348b538),new Int_64(0x59f111f1,0xb605d019),new Int_64(0x923f82a4,0xaf194f9b),new Int_64(0xab1c5ed5,0xda6d8118),new Int_64(0xd807aa98,0xa3030242),new Int_64(0x12835b01,0x45706fbe),new Int_64(0x243185be,0x4ee4b28c),new Int_64(0x550c7dc3,0xd5ffb4e2),new Int_64(0x72be5d74,0xf27b896f),new Int_64(0x80deb1fe,0x3b1696b1),new Int_64(0x9bdc06a7,0x25c71235),new Int_64(0xc19bf174,0xcf692694),new Int_64(0xe49b69c1,0x9ef14ad2),new Int_64(0xefbe4786,0x384f25e3),new Int_64(0x0fc19dc6,0x8b8cd5b5),new Int_64(0x240ca1cc,0x77ac9c65),new Int_64(0x2de92c6f,0x592b0275),new Int_64(0x4a7484aa,0x6ea6e483),new Int_64(0x5cb0a9dc,0xbd41fbd4),new Int_64(0x76f988da,0x831153b5),new Int_64(0x983e5152,0xee66dfab),new Int_64(0xa831c66d,0x2db43210),new Int_64(0xb00327c8,0x98fb213f),new Int_64(0xbf597fc7,0xbeef0ee4),new Int_64(0xc6e00bf3,0x3da88fc2),new Int_64(0xd5a79147,0x930aa725),new Int_64(0x06ca6351,0xe003826f),new Int_64(0x14292967,0x0a0e6e70),new Int_64(0x27b70a85,0x46d22ffc),new Int_64(0x2e1b2138,0x5c26c926),new Int_64(0x4d2c6dfc,0x5ac42aed),new Int_64(0x53380d13,0x9d95b3df),new Int_64(0x650a7354,0x8baf63de),new Int_64(0x766a0abb,0x3c77b2a8),new Int_64(0x81c2c92e,0x47edaee6),new Int_64(0x92722c85,0x1482353b),new Int_64(0xa2bfe8a1,0x4cf10364),new Int_64(0xa81a664b,0xbc423001),new Int_64(0xc24b8b70,0xd0f89791),new Int_64(0xc76c51a3,0x0654be30),new Int_64(0xd192e819,0xd6ef5218),new Int_64(0xd6990624,0x5565a910),new Int_64(0xf40e3585,0x5771202a),new Int_64(0x106aa070,0x32bbd1b8),new Int_64(0x19a4c116,0xb8d2d0c8),new Int_64(0x1e376c08,0x5141ab53),new Int_64(0x2748774c,0xdf8eeb99),new Int_64(0x34b0bcb5,0xe19b48a8),new Int_64(0x391c0cb3,0xc5c95a63),new Int_64(0x4ed8aa4a,0xe3418acb),new Int_64(0x5b9cca4f,0x7763e373),new Int_64(0x682e6ff3,0xd6b2b8a3),new Int_64(0x748f82ee,0x5defb2fc),new Int_64(0x78a5636f,0x43172f60),new Int_64(0x84c87814,0xa1f0ab72),new Int_64(0x8cc70208,0x1a6439ec),new Int_64(0x90befffa,0x23631e28),new Int_64(0xa4506ceb,0xde82bde9),new Int_64(0xbef9a3f7,0xb2c67915),new Int_64(0xc67178f2,0xe372532b),new Int_64(0xca273ece,0xea26619c),new Int_64(0xd186b8c7,0x21c0c207),new Int_64(0xeada7dd6,0xcde0eb1e),new Int_64(0xf57d4f7f,0xee6ed178),new Int_64(0x06f067aa,0x72176fba),new Int_64(0x0a637dc5,0xa2c898a6),new Int_64(0x113f9804,0xbef90dae),new Int_64(0x1b710b35,0x131c471b),new Int_64(0x28db77f5,0x23047d84),new Int_64(0x32caab7b,0x40c72493),new Int_64(0x3c9ebe0a,0x15c9bebc),new Int_64(0x431d67c4,0x9c100d4c),new Int_64(0x4cc5d4be,0xcb3e42b6),new Int_64(0x597f299c,0xfc657e2a),new Int_64(0x5fcb6fab,0x3ad6faec),new Int_64(0x6c44198c,0x4a475817)];if(variant==="SHA-384"){H=[new Int_64(0xcbbb9d5d,0xc1059ed8),new Int_64(0x0629a292a,0x367cd507),new Int_64(0x9159015a,0x3070dd17),new Int_64(0x152fecd8,0xf70e5939),new Int_64(0x67332667,0xffc00b31),new Int_64(0x98eb44a87,0x68581511),new Int_64(0xdb0c2e0d,0x64f98fa7),new Int_64(0x47b5481d,0xbefa4fa4)];}else{H=[new Int_64(0x6a09e667,0xf3bcc908),new Int_64(0xbb67ae85,0x84caa73b),new Int_64(0x3c6ef372,0xfe94f82b),new Int_64(0xa54ff53a,0x5f1d36f1),new Int_64(0x510e527f,0xade682d1),new Int_64(0x9b05688c,0x2b3e6c1f),new Int_64(0x1f83d9ab,0xfb41bd6b),new Int_64(0x5be0cd19,0x137e2179)];}}
message[strBinLen>>5]|=0x80<<(24-strBinLen%32);message[lengthPosition]=strBinLen;var appendedMessageLength=message.length;for(var i=0;i<appendedMessageLength;i+=binaryStringInc){a=H[0];b=H[1];c=H[2];d=H[3];e=H[4];f=H[5];g=H[6];h=H[7];for(var t=0;t<numRounds;t++){if(t<16){W[t]=new Int(message[t*binaryStringMult+i],message[t*binaryStringMult+i+1]);}else{W[t]=safeAdd(safeAdd(safeAdd(gamma1(W[t-2]),W[t-7]),gamma0(W[t-15])),W[t-16]);}
T1=safeAdd(safeAdd(safeAdd(safeAdd(h,sigma1(e)),ch(e,f,g)),K[t]),W[t]);T2=safeAdd(sigma0(a),maj(a,b,c));h=g;g=f;f=e;e=safeAdd(d,T1);d=c;c=b;b=a;a=safeAdd(T1,T2);}
H[0]=safeAdd(a,H[0]);H[1]=safeAdd(b,H[1]);H[2]=safeAdd(c,H[2]);H[3]=safeAdd(d,H[3]);H[4]=safeAdd(e,H[4]);H[5]=safeAdd(f,H[5]);H[6]=safeAdd(g,H[6]);H[7]=safeAdd(h,H[7]);}
switch(variant){case"SHA-224":return[H[0],H[1],H[2],H[3],H[4],H[5],H[6]];case"SHA-256":return H;case"SHA-384":return[H[0].highOrder,H[0].lowOrder,H[1].highOrder,H[1].lowOrder,H[2].highOrder,H[2].lowOrder,H[3].highOrder,H[3].lowOrder,H[4].highOrder,H[4].lowOrder,H[5].highOrder,H[5].lowOrder];case"SHA-512":return[H[0].highOrder,H[0].lowOrder,H[1].highOrder,H[1].lowOrder,H[2].highOrder,H[2].lowOrder,H[3].highOrder,H[3].lowOrder,H[4].highOrder,H[4].lowOrder,H[5].highOrder,H[5].lowOrder,H[6].highOrder,H[6].lowOrder,H[7].highOrder,H[7].lowOrder];default:return[];}};var getFormatFunc=function(format){switch(format){case"HEX":return binb2hex;case"B64":return binb2b64;case"RAW":return binb2binb;default:return null;}};var getSHAFunc=function(variant){switch(variant){case"SHA-1":return coreSHA1;case"SHA-224":case"SHA-256":case"SHA-384":case"SHA-512":return coreSHA2;default:return null;}};this.getHMAC=function(key,variant,format){var binaryKey=str2binb(key),numWordsPerBlock=(variant==="SHA-384"||variant==="SHA-512"?32:16),localSHA,i,innerPad=new Array(numWordsPerBlock),outerPad=new Array(numWordsPerBlock),hmac;if(binaryKey.length>numWordsPerBlock){localSHA=new jsSHA(key);binaryKey=localSHA.getHash(variant,"RAW");}
for(i=0;i<numWordsPerBlock;++i){innerPad[i]=binaryKey[i]^0x36363636;outerPad[i]=binaryKey[i]^0x5c5c5c5c;}
localSHA=new jsSHA(binb2str(innerPad)+srcString);hmac=localSHA.getHash(variant,"RAW");localSHA=new jsSHA(binb2str(outerPad.concat(hmac)));hmac=localSHA.getHash(variant,"RAW");return getFormatFunc(format)(hmac);};this.getHash=function(variant,format){switch(variant){case"SHA-1":return getFormatFunc(format)(coreSHA1());case"SHA-224":case"SHA-256":case"SHA-384":case"SHA-512":return getFormatFunc(format)(coreSHA2(variant));default:return"HASH NOT RECOGNIZED";}};}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/xforms-core-function-library.js

String.prototype.trim=function(){return this.replace(/^\s*|\s*$/g,'');};Date.prototype.setTimeInSeconds=function(seconds){this.setTime(seconds*1000);}
Date.prototype.setTimeInMinutes=function(minutes){this.setTimeInSeconds(minutes*60);}
Date.prototype.setTimeInHours=function(hours){this.setTimeInMinutes(hours*60);}
Date.prototype.setTimeInDays=function(days){this.setTimeInHours(days*24);}
function ThrowNotImpl(ctx){throw"Not Implemented";}
function getDateTime(oDate,bUTC){var s="";var year,month,day,hours,minutes,seconds;if(bUTC){year=oDate.getUTCFullYear();month=oDate.getUTCMonth()+1;day=oDate.getUTCDate();hours=oDate.getUTCHours();minutes=oDate.getUTCMinutes();seconds=oDate.getUTCSeconds();}else{year=oDate.getFullYear();month=oDate.getMonth()+1;day=oDate.getDate();hours=oDate.getHours();minutes=oDate.getMinutes();seconds=oDate.getSeconds();}
s+=year+"-";if(month<10)
month="0"+month;s+=month+"-";if(day<10)
day="0"+day;s+=day;s+="T"
if(hours<10){hours="0"+hours;}
s+=hours+":";if(minutes<10){minutes="0"+minutes;}
s+=minutes+":";if(seconds<10){seconds="0"+seconds;}
s+=seconds;if(bUTC){s+="Z";}
return s;}
function getTZOffset(oDate){var s="";var tz=oDate.getTimezoneOffset();if(tz<0){s+="+";tz*=-1;}else{s+="-";}
var hours=tz/60;if(hours<10){hours="0"+hours;}
s+=hours+":";var minutes=tz%60;if(minutes<10){minutes="0"+minutes;}
s+=minutes;return s;}
FunctionCallExpr.prototype.xpathfunctions["boolean-from-string"]=function(ctx){var s=this.args[0].evaluate(ctx).stringValue();s=s.trim();return new BooleanValue((s.toLowerCase()==="true")||(s==="1"));};FunctionCallExpr.prototype.xpathfunctions["is-card-number"]=function(ctx){var sCardNum="";if(!this.args||this.args.length==0){sCardNum=xmlValue(ctx.node);}else{sCardNum=this.args[0].evaluate(ctx).stringValue();}
sCardNum=sCardNum.trim();var sum=0;var alt=false;for(var i=sCardNum.length-1;i>=0;--i){var currentChar=sCardNum.charAt(i);if(currentChar<'0'||currentChar>'9'){return new BooleanValue(false);}
var digit=currentChar-'0';if(alt){digit*=2;if(digit>9){digit-=9;}}
sum+=digit;alt=!alt;}
return new BooleanValue(sum%10==0);};FunctionCallExpr.prototype.xpathfunctions["avg"]=function(ctx){if(!this.args||this.args.length==0){return new NumberValue(NaN);}
var n=this.args[0].evaluate(ctx).nodeSetValue();if(n.length==0){return new NumberValue(NaN);}
var sum=0;for(var i=0;i<n.length;++i){var num=xmlValue(n[i])-0;if(isNaN(num)){return new NumberValue(NaN);}
sum+=num;}
return new NumberValue(sum/n.length);};FunctionCallExpr.prototype.xpathfunctions["min"]=function(ctx){if(!this.args||this.args.length==0){return new NumberValue(NaN);}
var n=this.args[0].evaluate(ctx).nodeSetValue();if(n.length==0){return new NumberValue(NaN);}
var min=xmlValue(n[0])-0;for(var i=0;i<n.length;++i){var num=xmlValue(n[i])-0;if(isNaN(num)){return new NumberValue(NaN);}
if(num<min){min=num;}}
return new NumberValue(min);};FunctionCallExpr.prototype.xpathfunctions["max"]=function(ctx){if(!this.args||this.args.length==0){return new NumberValue(NaN);}
var n=this.args[0].evaluate(ctx).nodeSetValue();if(n.length==0){return new NumberValue(NaN);}
var max=xmlValue(n[0])-0;for(var i=0;i<n.length;++i){var num=xmlValue(n[i])-0;if(isNaN(num)){return new NumberValue(NaN);}
if(max<num){max=num;}}
return new NumberValue(max);};FunctionCallExpr.prototype.xpathfunctions["count-non-empty"]=function(ctx){if(!this.args||this.args.length==0){return new NumberValue(0);}
var n=this.args[0].evaluate(ctx).nodeSetValue();if(n.length==0){return new NumberValue(0);}
var count=0;for(var i=0;i<n.length;++i){var value=xmlValue(n[i]);if(value.length>0){count++;}}
return new NumberValue(count);};FunctionCallExpr.prototype.xpathfunctions["index"]=function(ctx){var s=this.args[0].evaluate(ctx).stringValue();var oRpt=FormsProcessor.getElementById(s,ctx.resolverElement);if(oRpt&&oRpt.getIndex){return new NumberValue(oRpt.getIndex());}
return new NumberValue(NaN);};FunctionCallExpr.prototype.xpathfunctions["power"]=function(ctx){if(!this.args||(this.args.length!=2)){return new NumberValue(NaN);}
return new NumberValue(Math.pow(this.args[0].evaluate(ctx).numberValue(),this.args[1].evaluate(ctx).numberValue()));};FunctionCallExpr.prototype.xpathfunctions["random"]=function(ctx){return new NumberValue(Math.random());};FunctionCallExpr.prototype.xpathfunctions["compare"]=function(ctx){var result=NaN;if(this.args.length==2){var s1=this.args[0].evaluate(ctx).stringValue();var s2=this.args[1].evaluate(ctx).stringValue();if(s1==s2){result=0;}else if(s1>s2){result=1;}else{result=-1;}}
return new NumberValue(result);};FunctionCallExpr.prototype.xpathfunctions["if"]=function(ctx){var bIf=this.args[0].evaluate(ctx).booleanValue();if(bIf){return new StringValue(this.args[1].evaluate(ctx).stringValue());}else{return new StringValue(this.args[2].evaluate(ctx).stringValue());}};FunctionCallExpr.prototype.xpathfunctions["property"]=function(ctx){if(!this.args||(this.args.length!=1)){return new StringValue("");}
var property=this.args[0].evaluate(ctx).stringValue();var ret="";if(property=="version"){ret="1.1";}else if(property=="conformance-level"){ret="basic";}else{var match=property.match(/^[_a-z][\w\.\-]*/i);if(match&&match[0]==property&&document.defaultModel){this.dispatchExceptionEvent(ctx);}}
return new StringValue(ret);};FunctionCallExpr.prototype.xpathfunctions["digest"]=function(ctx){if(!this.args||this.args.length<2||this.args.length>3){return new StringValue("");}
var digest="",shaCrypt;var data=this.args[0].evaluate(ctx).stringValue();var algorithm=this.args[1].evaluate(ctx).stringValue();var encoding=(this.args.length===3)?this.args[2].evaluate(ctx).stringValue():"base64";if(encoding==="hex"||encoding==="base64"){switch(algorithm){case"MD5":if(encoding==="base64"){digest=MD5.b64_md5(data);}else if(encoding==="hex"){digest=MD5.hex_md5(data);}
break;case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":shaCrypt=new jsSHA(data);digest=shaCrypt.getHash(algorithm,encoding==="hex"?"HEX":"B64");break;default:this.dispatchExceptionEvent(ctx);break;}}else{this.dispatchExceptionEvent(ctx);}
return new StringValue(digest);};FunctionCallExpr.prototype.xpathfunctions["hmac"]=function(ctx){if(!this.args||this.args.length<3||this.args.length>4){return new StringValue("");}
var hmac="",shaCrypt;var key=this.args[0].evaluate(ctx).stringValue();var data=this.args[1].evaluate(ctx).stringValue();var algorithm=this.args[2].evaluate(ctx).stringValue();var encoding=(this.args.length===4)?this.args[3].evaluate(ctx).stringValue():"base64";if(encoding==="hex"||encoding==="base64"){switch(algorithm){case"MD5":if(encoding==="base64"){hmac=MD5.b64_hmac_md5(key,data);}else if(encoding==="hex"){hmac=MD5.hex_hmac_md5(key,data);}
break;case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":shaCrypt=new jsSHA(data);hmac=shaCrypt.getHMAC(key,algorithm,encoding==="hex"?"HEX":"B64");break;default:this.dispatchExceptionEvent(ctx);break;}}else{this.dispatchExceptionEvent(ctx);}
return new StringValue(hmac);};FunctionCallExpr.prototype.xpathfunctions["local-date"]=function(ctx){var d=new Date();var s=getDateTime(d,false);s=s.substring(0,10);s+=getTZOffset(d);return new StringValue(s);};FunctionCallExpr.prototype.xpathfunctions["local-dateTime"]=function(ctx){var d=new Date();var s=getDateTime(d,false);s+=getTZOffset(d);return new StringValue(s);};FunctionCallExpr.prototype.xpathfunctions["now"]=function(ctx){var d=new Date();var s=getDateTime(d,true);return new StringValue(s);};FunctionCallExpr.prototype.xpathfunctions["days-from-date"]=function(ctx){var dDate,dBase;var dOrigin;if(!this.args||(this.args.length!=1)){return new NumberValue(NaN);}
var res=FunctionCallExpr.prototype.xpathfunctions.expr.xsdDateTime.exec(this.args[0].evaluate(ctx).stringValue());if(!res){res=FunctionCallExpr.prototype.xpathfunctions.expr.xsdDate.exec(this.args[0].evaluate(ctx).stringValue());if(!res){return new NumberValue(NaN);}}
dDate=new Date(res[1],res[2]-1,res[3]);dDate.setMinutes(dDate.getMinutes()+dDate.getTimezoneOffset());dBase=new Date(1970,0,1);dBase.setMinutes(dBase.getMinutes()+dBase.getTimezoneOffset());return new NumberValue(Math.round((dDate.getTime()-dBase.getTime())/(1000*60*60*24)));};FunctionCallExpr.prototype.xpathfunctions["days-to-date"]=function(ctx){var month;var date;var days;var d;if(!this.args||(this.args.length!=1)){return new StringValue("");}
var number=this.args[0].evaluate(ctx).numberValue();if(isNaN(number))
return new StringValue("");d=new Date();d.setTimeInDays(Math.round(number));month=d.getUTCMonth()+1;if(month<10)
month="0"+month;date=d.getUTCDate();if(date<10)
date="0"+date;return new StringValue(d.getUTCFullYear()+"-"+month+"-"+date);};FunctionCallExpr.prototype.xpathfunctions["seconds-from-dateTime"]=function(ctx){var dDate;var dBase;var tzOffset;var seconds;if(!this.args||(this.args.length!=1)){return new NumberValue(NaN);}
var res=FunctionCallExpr.prototype.xpathfunctions.expr.xsdDateTime.exec(this.args[0].evaluate(ctx).stringValue());if(!res){return new NumberValue(NaN);}
dDate=new Date(Date.UTC(res[1],res[2]-1,res[3],res[4],res[5],res[6]));if(!res[8]||(res[8]==="Z")){tzOffset=0;}else{tzOffset=((Number(res[11])*60)+Number(res[12]))*((res[10]==="-")?-1:1);}
dDate.setUTCMinutes(dDate.getUTCMinutes()+tzOffset);dBase=new Date(Date.UTC(1970,0,1));seconds=Math.round((dDate.getTime()-dBase.getTime())/(1000));if(res[7]){seconds+=res[7]-0;}
return new NumberValue(seconds);};FunctionCallExpr.prototype.xpathfunctions["seconds-to-dateTime"]=function(ctx){var d,number;if(!this.args||(this.args.length!=1)){return new StringValue("");}
number=this.args[0].evaluate(ctx).numberValue();if(isNaN(number))
return new StringValue("");d=new Date();d.setTimeInSeconds(number);return new StringValue(getDateTime(d,true));};FunctionCallExpr.prototype.xpathfunctions["expr"]={xsdDate:/^([0-9]{4})\-([0-9]{2})\-([0-9]{2})(((([+-])([0-9]{2})\:([0-9]{2}))|(\Z))?)$/,xsdDateTime:/^([0-9]{4})\-([0-9]{2})\-([0-9]{2})\T([0-9]{2})\:([0-9]{2})\:([0-9]{2}(\.[0-9]*)?)((([+-])([0-9]{2})\:([0-9]{2}))|(\Z)?)$/};FunctionCallExpr.prototype.xpathfunctions["adjust-dateTime-to-timezone"]=function(ctx){if(!this.args||(this.args.length!=1)){return new StringValue("");}
var res=FunctionCallExpr.prototype.xpathfunctions.expr.xsdDateTime.exec(this.args[0].evaluate(ctx).stringValue());if(!res){return new StringValue("");}
var dDate=new Date(res[1],res[2]-1,res[3],res[4],res[5],res[6]);var localDate=new Date(res[1],res[2]-1,res[3],res[4],res[5],res[6]);var tzOffset;if(!res[8]){tzOffset=0;}else{tzOffset=-localDate.getTimezoneOffset();if(res[8]==="Z"){tzOffset+=0;}else{tzOffset+=((Number(res[11])*60)+Number(res[12]))*((res[10]==="-")?1:-1);}}
dDate.setMinutes(dDate.getMinutes()+tzOffset);var s=getDateTime(dDate,false);s+=getTZOffset(localDate);return new StringValue(s);};FunctionCallExpr.prototype.xpathfunctions["seconds"]=function(ctx){if(!this.args||(this.args.length!=1)){return new NumberValue(NaN);}
var duration=this.args[0].evaluate(ctx).stringValue();var totalSeconds=0;var index=0;var endingIndex=0;var length=0;var durationIsNegative=false;if(!duration.match(/^P|\-P/)){return new NumberValue(NaN);}
if(duration.match(/^\-/)){durationIsNegative=true;index++;}
if(duration.match(/D/)){if(duration.indexOf("Y")>0&&duration.indexOf("Y")<duration.indexOf("D"))
index=duration.indexOf("Y");if(duration.indexOf("M")>0&&duration.indexOf("M")<duration.indexOf("D"))
index=duration.indexOf("M");endingIndex=duration.indexOf("D");length=endingIndex-index-1;var days=duration.substr(index+1,length);totalSeconds=totalSeconds+60*60*24*parseFloat(days);index=endingIndex;}
if(duration.indexOf("T")!=-1){index=0;duration=duration.substr(duration.indexOf("T"));}
if(duration.match(/H/)){endingIndex=duration.indexOf("H");length=endingIndex-index-1;var hours=duration.substr(index+1,length);totalSeconds=totalSeconds+60*60*parseFloat(hours);index=endingIndex;}
if(duration.match(/M/)&&duration.indexOf("T")==0){endingIndex=duration.indexOf("M");length=endingIndex-index-1;var minutes=duration.substr(index+1,length);totalSeconds=totalSeconds+60*parseFloat(minutes);index=endingIndex;}
if(duration.match(/S/)){endingIndex=duration.indexOf("S");length=endingIndex-index-1;var seconds=duration.substr(index+1,length);totalSeconds=totalSeconds+parseFloat(seconds);index=endingIndex;}
if(durationIsNegative){totalSeconds=totalSeconds*-1;}
return new NumberValue(totalSeconds);};FunctionCallExpr.prototype.xpathfunctions["months"]=function(ctx){if(!this.args||(this.args.length!=1)){return new NumberValue(NaN);}
var duration=this.args[0].evaluate(ctx).stringValue();var totalMonths=0;var index=0;var endingIndex=0;var length=0;var durationIsNegative=false;if(!duration.match(/^P|\-P/)){return new NumberValue(NaN);}
if(duration.match(/^\-/)){durationIsNegative=true;index++;}
if(duration.match(/Y/)){endingIndex=duration.indexOf("Y");length=endingIndex-index-1;var years=duration.substr(index+1,length);totalMonths=totalMonths+12*parseFloat(years);index=endingIndex;}
if(duration.match(/M/)){endingIndex=duration.indexOf("M");length=endingIndex-index-1;var months=duration.substr(index+1,length);if(duration.indexOf("T")<0||duration.indexOf("T")>endingIndex)
totalMonths=totalMonths+parseFloat(months);index=endingIndex;}
if(durationIsNegative){totalMonths=totalMonths*-1;}
return new NumberValue(totalMonths);};FunctionCallExpr.prototype.xpathfunctions["instance"]=function(ctx){var ret=null;if(ctx.currentModel){try{var sInstance="";if(this.args[0]){sInstance=this.args[0].evaluate(ctx).stringValue();}
var oDom=ctx.currentModel.getInstanceDocument(sInstance);var oDE=oDom.documentElement;ret=new Array(oDE);}catch(e){throw("XPath function: instance("+sInstance+") is not a member of  model "+ctx.currentModel.id);}}else{throw("instance() executed without a current model");}
if(this.args[1]){alert(this.args.join('\n'));}
return new NodeSetValue(ret);};FunctionCallExpr.prototype.xpathfunctions["current"]=function(ctx){return new NodeSetValue([ctx.outermostContextNode]);};FunctionCallExpr.prototype.xpathfunctions["id"]=function(ctx){var evalCtx;var ret=[];var ids;var nodeSet;var nodeValue;var oNodes;var ctxNodes=[];var i,j,k;if(!this.args||(this.args.length===0)||(this.args.length>2)){return new NodeSetValue([]);}
evalCtx=this.args[0].evaluate(ctx);if(evalCtx.type==='node-set'){ids=[];nodeSet=evalCtx.nodeSetValue();for(i=0;i<nodeSet.length;++i){nodeValue=xmlValue(nodeSet[i]).split(/\s+/);for(j=0;j<nodeValue.length;++j){ids.push(nodeValue[j]);}}}else{ids=evalCtx.stringValue().split(/\s+/);}
ctxNodes.push(ctx.resolverElement?ctx.resolverElement.getEvaluationContext().node:ctx.node);if(this.args.length===2){evalCtx=this.args[1].evaluate(ctx);if((evalCtx.type==='node-set')&&(evalCtx.nodeSetValue().length>0)){ctxNodes=evalCtx.nodeSetValue();}}
for(j=0;j<ctxNodes.length;++j){for(k=0;k<ids.length;++k){oNodes=ctxNodes[j].getElementsById(ids[k]);if(oNodes){for(i=0;i<oNodes.length;++i){ret.push(oNodes[i]);}}}}
return new NodeSetValue(ret);};FunctionCallExpr.prototype.xpathfunctions["context"]=function(ctx){var ctxNode=ctx.resolverElement?ctx.resolverElement.getEvaluationContext().node:ctx.node;return new NodeSetValue([ctxNode]);};FunctionCallExpr.prototype.xpathfunctions["choose"]=function(ctx){if(!this.args||this.args.length!=3){return null;}
var p1=this.args[1].evaluate(ctx);var p2=this.args[2].evaluate(ctx);var result=(this.args[0].evaluate(ctx).booleanValue())?p1:p2;var ret;switch(result.type){case"string":ret=new StringValue(result.stringValue());break;case"number":ret=new NumberValue(result.numberValue());break;case"boolean":ret=new BooleanValue(result.booleanValue());break;case"node-set":ret=new NodeSetValue(result.nodeSetValue());break;default:throw"Unrecognised type in choose()";break;}
return ret;};FunctionCallExpr.prototype.xpathfunctions["event"]=function(ctx){var sProperty=this.args[0].evaluate(ctx).stringValue();var oEvent=FormsProcessor.getCurrentEvent();var contextInfo,ret;if(oEvent&&oEvent.context){contextInfo=oEvent.context[sProperty];switch(typeof contextInfo){case"string":ret=new StringValue(contextInfo);break;case"number":ret=new NumberValue(contextInfo);break;case"boolean":ret=new BooleanValue(contextInfo);break;case"object":ret=new NodeSetValue(contextInfo);break;case"undefined":ret=new NodeSetValue([]);break;default:throw"Unrecognised type in event()";break;}}else{ret=new StringValue("");}
return ret;}
FunctionCallExpr.prototype.xpathfunctions["globalInstance"]=function(ctx){var sInstance=this.args[0].evaluate(ctx).stringValue();var oInst=FormsProcessor.getElementById(sInstance,ctx.resolverElement);var ret=null;if(oInst){ret=new Array(oInst.getDocument().documentElement);}
return new NodeSetValue(ret);};FunctionCallExpr.prototype.dispatchExceptionEvent=function(context){if(NamespaceManager.compareFullName(context.resolverElement,"bind","http://www.w3.org/2002/xforms")){UX.dispatchEvent(context.currentModel||document.defaultModel,"xforms-compute-exception",true,false,false);}else{UX.dispatchEvent(context.resolverElement,"xforms-binding-exception",true,false,false);}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../backplane/array.js

function ubArray(){this._list=[];}
ubArray.prototype.add=function(key,obj,bLock){var found=false,i;for(i=0;i<this._list.length;i++){if(this._list[i].name===key){found=true;break;}}
if(found&&!this._list[i].locked){this._list[i].item=obj;}else{this._list.push({name:key,item:obj,locked:bLock});i=this._list.length-1;}
return this._list[i].item;}
ubArray.prototype.get=function(key){var oRet=null,i;if(typeof(key)==="number"&&(key>=0&&key<this._list.length)){oRet=this._list[key].item;}else{for(i=0;i<this._list.length;i++){if(this._list[i].name===key){oRet=this._list[i].item;break;}}}
return oRet;}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../backplane/tokmap.js

function mappings(){this._list=new ubArray();}
mappings.prototype.add=function(prefix,uri){return this._list.add(prefix,uri);}
mappings.prototype.get=function(prefix){return this._list.get(prefix);}
mappings.prototype.addFromElement=function(element){if(element.nodeType===9){var oNamespaces=null;try
{oNamespaces=element.namespaces;}
catch(e)
{}
if(oNamespaces)
{var oNamespace;for(var i=0;i<oNamespaces.length;i++)
{oNamespace=oNamespaces[i];this._list.add(oNamespace.name,oNamespace.urn);}}}
else
{var attributes=element.attributes;if(attributes)
{var sName;for(var i=0;i<attributes.length;i++)
{if(attributes[i].name.substring(0,5)=="xmlns")
{if(attributes[i].name.length==5)
this._list.add("",attributes[i].value);if(attributes[i].name.substring(5,6)!=':')
continue;var prefix=attributes[i].name.substring(6);var uri=attributes[i].value;this._list.add(prefix,uri);}}}}
return;}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../backplane/uri.js

function getBaseUrl(doc){return makeAbsoluteURI("",getCurrentUrl(doc))}
function getCurrentUrl(doc){if(!doc){doc=document;}
var baseColl=doc.getElementsByTagName("base");return(baseColl&&baseColl.length)?baseColl[0].href:doc.URL;}
function spliturl(s)
{s.replace(/\\/g,"/").match(/^(([^\:\/\?#]+):)?(\/\/([^\/\?#]*))?([^\?#]*)(\?([^#]*))?(#([^\:#\[\]\@\!\$\&\\'\(\)\*\+\,\;\=]*))?/);return{scheme:(RegExp.$1)?RegExp.$2:null,authority:(RegExp.$3)?RegExp.$4:null,path:RegExp.$5,query:(RegExp.$6)?RegExp.$7:null,fragment:(RegExp.$8)?RegExp.$9:null};}
function makeAbsoluteURI(sBase,sURI,strict)
{return recomposeURI(makeAbsolutePath(spliturl(sBase),spliturl(sURI),strict),true);}
function makeAbsolutePath(Base,R,strict)
{var T={};if(!strict&&(R.scheme===Base.scheme)){R.scheme=null;}
if(R.scheme)
{T.scheme=R.scheme;T.authority=R.authority;T.path=remove_dot_segments(R.path);T.query=R.query;}
else
{if(R.authority)
{T.authority=R.authority;T.path=remove_dot_segments(R.path);T.query=R.query;}
else
{if(R.path=="")
{T.path=Base.path;if(R.query)
T.query=R.query;else
T.query=Base.query;}
else
{if(R.path.substring(0,1)=='/')
T.path=remove_dot_segments(R.path);else
{if(Base.authority&&!Base.path)
T.path="/"+R.path;else
T.path=Base.path.substring(0,Base.path.lastIndexOf("/")+1)+R.path;T.path=remove_dot_segments(T.path);}
T.query=R.query;}
T.authority=Base.authority;}
T.scheme=Base.scheme;}
T.fragment=R.fragment;return T;}
function remove_dot_segments(sURI){var inputBuffer=sURI,outputBuffer="",pos;while(inputBuffer!==""){if(!inputBuffer.indexOf("../")){inputBuffer=inputBuffer.substring(3);}else if(!inputBuffer.indexOf("./")){inputBuffer=inputBuffer.substring(2);}
else if(!inputBuffer.indexOf("/./")){inputBuffer="/"+inputBuffer.substring(3);}else if(inputBuffer==="/."){inputBuffer="/";}
else if(!inputBuffer.indexOf("/../")){inputBuffer="/"+inputBuffer.substring(4);outputBuffer=outputBuffer.substring(0,outputBuffer.lastIndexOf("/"));}else if(inputBuffer==="/.."){inputBuffer="/";outputBuffer=outputBuffer.substring(0,outputBuffer.lastIndexOf("/"));}
else if((inputBuffer===".")||(inputBuffer==="..")){inputBuffer="";}
else{pos=inputBuffer.indexOf("/",1);if(pos>-1){outputBuffer+=inputBuffer.substring(0,pos);inputBuffer=inputBuffer.substring(pos);}else{outputBuffer+=inputBuffer;inputBuffer="";}}}
return outputBuffer;}
function recomposeURI(o,bFragment){var sRet=""
if(o.scheme!==null)
sRet+=o.scheme+":";if(o.authority!==null)
sRet+="//"+o.authority;sRet+=o.path;if(o.query!==null)
sRet+="?"+o.query;if((o.fragment!==null)&&bFragment)
sRet+="#"+o.fragment;return sRet;}
function safeCurieOrUri(base,curieOrUri,namespaces){if((curieOrUri.indexOf('[')===0)&&(curieOrUri.lastIndexOf(']')===curieOrUri.length-1)){return curieToUri(curieOrUri,namespaces);}else{return makeAbsoluteURI(base,curieOrUri);}}
function curieToUri(curie,namespaces){var s,position;s=curie.substring(curie.indexOf('[')===0?1:0);s=s.substring(0,s.length-((s.length===s.indexOf(']')+1)?1:0));position=s.indexOf(':');if(position===-1){return namespaces.get(s)||s;}
var prefix=s.substring(0,position);var suffix=s.substring(position+1);return(namespaces.get(prefix)?namespaces.get(prefix):"unmapped:"+prefix)+suffix;}
function buildGetUrl(action,params,separator){var key,pairs=[];separator=separator||"&";if(params){for(key in params){if(params.hasOwnProperty(key)&&typeof(params[key])!=="function"){pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(params[key]));}}}
return action
+((pairs.length)?"?"+pairs.join(separator):"");};function getLocalPath(origPath){var originalPath=origPath;var argPos=originalPath.indexOf("?");if(argPos!=-1)
originalPath=originalPath.substr(0,argPos);var hashPos=originalPath.indexOf("#");if(hashPos!=-1)
originalPath=originalPath.substr(0,hashPos);if(originalPath.indexOf("file://localhost/")==0)
originalPath="file://"+originalPath.substr(16);var localPath;if(originalPath.charAt(9)==":")
localPath=unescape(originalPath.substr(8)).replace(new RegExp("/","g"),"\\");else if(originalPath.charAt(8)==":")
localPath=unescape(originalPath.substr(7)).replace(new RegExp("/","g"),"\\");else if(originalPath.indexOf("file://///")==0)
localPath="\\\\"+unescape(originalPath.substr(10)).replace(new RegExp("/","g"),"\\");else if(originalPath.indexOf("file:///")==0)
localPath=unescape(originalPath.substr(7));else if(originalPath.indexOf("file:/")==0)
localPath=unescape(originalPath.substr(5));else
localPath="\\\\"+unescape(originalPath.substr(7)).replace(new RegExp("/","g"),"\\");return localPath;};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../backplane/submission-json.js

if(!document.submissionJSON)
{document.submissionJSON={_timeoutlength:120000,_running:[],_timeout:function(id,url)
{var cbo=this._running[id];this._running[id]=null;if(!cbo.callbackErr)
return;cbo.callbackErr("Timeout",-1,cbo.self);},_callbackhandler:function(o)
{var cbo=this._running[callbackIndex];if(!cbo)
return;this._running[callbackIndex]=null;window.clearTimeout(cbo.timeout);if(!o)
{if(!cbo.callbackErr)
return;cbo.callbackErr("Bad response",-2,cbo.self);return;}
if(!cbo.callbackOk)
return;cbo.callbackOk(o,cbo.userData,cbo.self);},_execute:function(url,id,userData,fnName,callbackOk,callbackErr,timeoutlength)
{var s=document.createElement("script");s.setAttribute("src",url);var fn=""+this._callbackhandler;var pThis=this;fn=fn.replace(/callbackIndex/g,id);eval("document.submissionJSON._callbackhandler_"+id+"="+fn);if(fnName)
eval(fnName+"= function(o) { document.submissionJSON._callbackhandler_"+id+"(o) }");this._running.push({self:this,userData:userData,callbackOk:callbackOk,callbackErr:callbackErr,timeout:window.setTimeout(function()
{pThis._timeout(id,url);},timeoutlength)});document.getElementsByTagName("head")[0].appendChild(s);return id;},cancelrequest:function(id)
{var cbo=this._running[i];window.clearTimeout(cbo.timeout);this._running[i]=null;},cancelallrequests:function()
{for(var i=0;i<this._running.length;i++)
this.cancelrequest(i);},run:function(action,params,userData,callbackOk,callbackErr,timeoutLength)
{if(!timeoutLength)
timeoutLength=this._timeoutlength;var id=this._running.length;var sCallBackParamName="callback";var fnName=null;if(params["callbackName"])
{fnName=params["callbackName"];params["callbackName"]=null;}
else
{if(params["callbackParamName"])
{sCallBackParamName=params["callbackParamName"];params["callbackParamName"]=null;}
params[sCallBackParamName]="document.submissionJSON._callbackhandler_"+id;}
return this._execute(buildGetUrl(action,params),id,userData,fnName,callbackOk,callbackErr,timeoutLength);}};}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../backplane/security/security.js

window.netscape=window.netscape||{security:{PrivilegeManager:{enablePrivilege:function(val){return;}}}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../backplane/io/file.js

document.fileIOFactory=document.fileIOFactory||{createFile:function(pathName){return{pathSeparator:"/",pathSeparatorChar:"/",separator:":",separatorChar:":",_pathName:pathName,createNewFile:function(){netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");var file=Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);file.initWithPath(this.getPath());if(!file.exists()){file.create(Components.interfaces.nsIFile.NORMAL_FILE_TYPE,420);if(file.exists()){return true;}}
return false;},"delete":function(){netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");var file=Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);file.initWithPath(this.getPath());file.remove(false);return!file.exists();},getAbsolutePath:function(){return makeAbsoluteURI(getBaseUrl(),this._pathName);},getPath:function(){return getLocalPath(this.getAbsolutePath());},toString:function(){return this.getAbsolutePath();}};},createFileReader:function(fileName){var file,fileReader,objFSO;fileName=getLocalPath(makeAbsoluteURI(getBaseUrl(),fileName));if(navigator.userAgent.toLowerCase().indexOf("gecko")!==-1){netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");file=Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);file.initWithPath(fileName);if(!file.exists()){}
fileReader={_file:file,__stream:Components.classes["@mozilla.org/network/file-input-stream;1"].createInstance(Components.interfaces.nsIFileInputStream),_stream:Components.classes["@mozilla.org/scriptableinputstream;1"].createInstance(Components.interfaces.nsIScriptableInputStream),read:function(){netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");if(!arguments.length){return this._stream.read(1);}else{buf=arguments[0];offset=arguments[1];return this._stream.read(arguments[2]);}},close:function(){netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");this.__stream.close();return this._stream.close();}};fileReader.__stream.init(file,1,0,false);fileReader._stream.init(fileReader.__stream);}else{objFSO=new ActiveXObject("Scripting.FileSystemObject");fileReader={_stream:objFSO.CreateTextFile(fileName),write:function(s){return this._stream.WriteLine(s);},close:function(){return this._stream.Close();}};}
return fileReader;},createFileWriter:function(fileName){var file,fileWriter,objFSO;fileName=getLocalPath(makeAbsoluteURI(getBaseUrl(),fileName));if(navigator.userAgent.toLowerCase().indexOf("gecko")!==-1){netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");file=Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);file.initWithPath(fileName);if(!file.exists()){file.create(Components.interfaces.nsIFile.NORMAL_FILE_TYPE,420);}
fileWriter={_file:file,_stream:Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream),write:function(s){netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");this._stream.write(s,s.length);return;},close:function(){netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");return this._stream.close();}};fileWriter._stream.init(file,0x02|0x08|0x20,0666,0);}else{objFSO=new ActiveXObject("Scripting.FileSystemObject");fileWriter={_stream:objFSO.CreateTextFile(fileName),write:function(s){return this._stream.WriteLine(s);},close:function(){return this._stream.Close();}};}
return fileWriter;}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../backplane/io/file.js

document.fileIOFactory=document.fileIOFactory||{createFile:function(pathName){return{pathSeparator:"/",pathSeparatorChar:"/",separator:":",separatorChar:":",_pathName:pathName,createNewFile:function(){netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");var file=Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);file.initWithPath(this.getPath());if(!file.exists()){file.create(Components.interfaces.nsIFile.NORMAL_FILE_TYPE,420);if(file.exists()){return true;}}
return false;},"delete":function(){netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");var file=Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);file.initWithPath(this.getPath());file.remove(false);return!file.exists();},getAbsolutePath:function(){return makeAbsoluteURI(getBaseUrl(),this._pathName);},getPath:function(){return getLocalPath(this.getAbsolutePath());},toString:function(){return this.getAbsolutePath();}};},createFileReader:function(fileName){var file,fileReader,objFSO;fileName=getLocalPath(makeAbsoluteURI(getBaseUrl(),fileName));if(navigator.userAgent.toLowerCase().indexOf("gecko")!==-1){netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");file=Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);file.initWithPath(fileName);if(!file.exists()){}
fileReader={_file:file,__stream:Components.classes["@mozilla.org/network/file-input-stream;1"].createInstance(Components.interfaces.nsIFileInputStream),_stream:Components.classes["@mozilla.org/scriptableinputstream;1"].createInstance(Components.interfaces.nsIScriptableInputStream),read:function(){netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");if(!arguments.length){return this._stream.read(1);}else{buf=arguments[0];offset=arguments[1];return this._stream.read(arguments[2]);}},close:function(){netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");this.__stream.close();return this._stream.close();}};fileReader.__stream.init(file,1,0,false);fileReader._stream.init(fileReader.__stream);}else{objFSO=new ActiveXObject("Scripting.FileSystemObject");fileReader={_stream:objFSO.CreateTextFile(fileName),write:function(s){return this._stream.WriteLine(s);},close:function(){return this._stream.Close();}};}
return fileReader;},createFileWriter:function(fileName){var file,fileWriter,objFSO;fileName=getLocalPath(makeAbsoluteURI(getBaseUrl(),fileName));if(navigator.userAgent.toLowerCase().indexOf("gecko")!==-1){netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");file=Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);file.initWithPath(fileName);if(!file.exists()){file.create(Components.interfaces.nsIFile.NORMAL_FILE_TYPE,420);}
fileWriter={_file:file,_stream:Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream),write:function(s){netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");this._stream.write(s,s.length);return;},close:function(){netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");return this._stream.close();}};fileWriter._stream.init(file,0x02|0x08|0x20,0666,0);}else{objFSO=new ActiveXObject("Scripting.FileSystemObject");fileWriter={_stream:objFSO.CreateTextFile(fileName),write:function(s){return this._stream.WriteLine(s);},close:function(){return this._stream.Close();}};}
return fileWriter;}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../backplane/dom/dom3ls.js

document.DOMImplementationLS=document.DOMImplementationLS||{MODE_SYNCHRONOUS:1,MODE_ASYNCHRONOUS:2,createLSOutput:function(){return{characterStream:null,byteStream:null,systemId:null,encoding:null};},createLSInput:function(){return{characterStream:null,byteStream:null,stringData:null,systemId:null,publicId:null,baseURI:null,encoding:null,certifiedText:false};},createLSParser:function(){return{};},createLSSerializer:function(){return{writeToURI:function(nodeArg,uri){var output=document.DOMImplementationLS.createLSOutput();output.systemID=uri;return this.write(nodeArg,output);},write:function(nodeArg,destination){var characterStream;if(!destination.characterStream){destination.characterStream=document.fileIOFactory.createFileWriter(destination.systemID);}
characterStream=destination.characterStream;try{characterStream.write(nodeArg);characterStream.close();return true;}catch(e){return false;}}};}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../backplane/io/scheme-file.js

var schemeHandlers=[];schemeHandlers["file"]=[];schemeHandlers["file"]["PUT"]=function(fileName,data,timeout,callback){var fileWriter,isSuccess;try{fileWriter=document.fileIOFactory.createFileWriter(fileName);fileWriter.write(data);fileWriter.close();isSuccess=true;}catch(e){isSuccess=false;}
if(callback){callback.processResult({method:"PUT",status:200,statusText:"",responseText:data,responseHeaders:"",resourceURI:fileName},!isSuccess);}
return isSuccess;};schemeHandlers["file"]["GET"]=function(fileName,data,timeout,callback){var fileReader,data,isSuccess;try{fileReader=document.fileIOFactory.createFileReader(fileName);data=fileReader.read(null,null,-1);fileReader.close();isSuccess=true;}catch(e){isSuccess=false;}
if(callback){callback.processResult({method:"GET",status:200,statusText:"",responseText:data,responseHeaders:"",resourceURI:fileName},!isSuccess);}
return isSuccess;};schemeHandlers["file"]["DELETE"]=function(fileName,data,timeout,callback){var file,isSuccess;try{file=document.fileIOFactory.createFile(fileName);isSuccess=file["delete"]();}catch(e){isSuccess=false;}
if(callback){callback.processResult({method:"DELETE",status:200,statusText:"",responseText:data,responseHeaders:"",resourceURI:fileName},!isSuccess);}
return isSuccess;};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../backplane/backplane-loader.js

//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../_backplane/xlink.js

YAHOO.util.Connect.handleTransactionResponse=function(o,callback,isAbort)
{if(!callback){this.releaseObject(o);YAHOO.log('No callback object to process. Transaction complete.','info','Connection');return;}
var httpStatus,responseObject;try
{if(o.conn.status!==undefined){httpStatus=o.conn.status;}
else{httpStatus=13030;}}
catch(e){httpStatus=13030;}
if(httpStatus>=200&&httpStatus<300||httpStatus===1223){responseObject=this.createResponseObject(o,callback.argument);if(callback.success){if(!callback.scope){callback.success(responseObject);YAHOO.log('Success callback. HTTP code is '+httpStatus,'info','Connection');}
else{callback.success.apply(callback.scope,[responseObject]);YAHOO.log('Success callback with scope. HTTP code is '+httpStatus,'info','Connection');}}
this.successEvent.fire(responseObject);if(o.successEvent){o.successEvent.fire(responseObject);}}
else{switch(httpStatus){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:responseObject=this.createExceptionObject(o.tId,callback.argument,(isAbort?isAbort:false));if(callback.failure){if(!callback.scope){callback.failure(responseObject);YAHOO.log('Failure callback. Exception detected. Status code is '+httpStatus,'warn','Connection');}
else{callback.failure.apply(callback.scope,[responseObject]);YAHOO.log('Failure callback with scope. Exception detected. Status code is '+httpStatus,'warn','Connection');}}
break;default:responseObject=this.createResponseObject(o,callback.argument);if(callback.failure){if(!callback.scope){callback.failure(responseObject);YAHOO.log('Failure callback. HTTP status code is '+httpStatus,'warn','Connection');}
else{callback.failure.apply(callback.scope,[responseObject]);YAHOO.log('Failure callback with scope. HTTP status code is '+httpStatus,'warn','Connection');}}}
this.failureEvent.fire(responseObject);if(o.failureEvent){o.failureEvent.fire(responseObject);}}
this.releaseObject(o);responseObject=null;};function XLinkElement(element)
{var m_bTraversed=false;var m_sActuate="";this.onDocumentReady=function()
{m_sActuate=element.getAttribute("xlink:actuate");if(m_sActuate=="onRequest"){if(element.XLinkRequestEvent){element.addEventListener(element.XLinkRequestEvent,this,false);}}
else if(m_sActuate=="onLoad"){this.Actuate();}};this.handleEvent=function(evt)
{if(evt.type==element.XLinkRequestEvent)
{this.Actuate();}};this.Actuate=function()
{if(m_bTraversed){return;}
var sHref=element.getAttribute("xlink:href");var sShow=element.getAttribute("xlink:show");var sResolvedHref=resolveURL(this.element,sHref);var oCallback;switch(sShow)
{case"replace":document.location.href=sResolvedHref;break;case"new":window.open(sResolvedHref,"_blank");break;case"embed":oCallback={processResult:function(data,isFailure){isFailure?embed_handleFailure(data):embed_handleResponse(data);},success:embed_handleResponse,failure:embed_handleFailure,scope:this};var oTargetElement=getTargetElement();oTargetElement.innerHTML="<img src='theme/bartek/images/spinner.gif' />";fetchData(sResolvedHref,oCallback);oTargetElement.setAttribute("xml:base",sHref);break;case"none":oCallback={processResult:doNothing,success:doNothing,failure:doNothing,scope:this};fetchData(sResolvedHref,oCallback);break;case"other":var sAction=element.getAttribute("xlinkShowAction");if(sAction)
{oCallback={processResult:doAction,success:doAction,failure:doAction,action:sAction,element:element};fetchData(sResolvedHref,oCallback);}}};function doAction(o)
{if(o.status===0)
{o.responseXML.async=false;if(o.responseText.indexOf("<?xml")===0){o.responseXML.loadXML(o.responseText.substr(o.responseText.indexOf("?>")+2));}
else{o.responseXML.loadXML(o.responseText);}}
var sAction=this.action;spawn(function(){eval(sAction);onXLinkTraversed();});}
function doNothing(o)
{}
function fetchData(sHref,oCallback)
{var schemeHandler,m_transaction;try
{schemeHandler=schemeHandlers[spliturl(sHref).scheme];if(UX.isFF&&schemeHandler&&schemeHandler["GET"]){spawn(function(){schemeHandler["GET"](sHref,null,null,oCallback);});}else{m_transaction=YAHOO.util.Connect.asyncRequest("GET",sHref,oCallback,null);}}
catch(e)
{if(element.getAttribute("xlink:show")==="embed"){oCallback.failure();}
else{debugger;}}}
function getTargetElement()
{var oTargetElement=null;var sId=element.getAttribute("targetref")||element.getAttribute("target");if(sId)
{oTargetElement=this.element.ownerDocument.getElementById(sId);}
if(oTargetElement===null)
{oTargetElement=element;}
return oTargetElement;}
function embed_handleResponse(o)
{var oTargetElement=getTargetElement();if(!oTargetElement.xlinkEmbed)
{oTargetElement.xlinkEmbed=function(s)
{this.innerHTML=s;};}
spawn(function(){oTargetElement.xlinkEmbed(o.responseText,element.getAttribute("xlink:href"));window.status="";onXLinkTraversed();});}
function embed_handleFailure(o){var evt;try{evt=element.ownerDocument.createEvent("Events");evt.initEvent("xlink-traversal-failure",false,false);evt.context={"resource-uri":element.getAttribute("xlink:href")};element.dispatchEvent(evt);}catch(e){}
if(m_sActuate==="onRequest"&&element.XLinkRequestEvent){element.removeEventListener(element.XLinkRequestEvent,this,false);}}
function onXLinkTraversed()
{try
{var evt=element.ownerDocument.createEvent("Events");evt.initEvent("xlink-traversed",false,false);element.dispatchEvent(evt);}
catch(e)
{}
if(m_sActuate=="onRequest"&&element.XLinkRequestEvent){element.removeEventListener(element.XLinkRequestEvent,this,false);}
m_bTraversed=true;}
function getBase(oEl)
{var sBase=oEl.getAttribute("xml:base");if(!sBase){sBase="";}
var n=oEl.parentNode;while(n&&n.nodeType===1)
{if(n.getAttribute("base"))
{sBase=n.getAttribute("base")+sBase;n=null;break;}
var s=n.getAttribute("xml:base");if(!!s)
{sBase=s.substr(0,s.lastIndexOf("/")+1)+sBase;}
if(!isRelativePath(sBase))
{break;}
n=n.parentNode;}
if(!n||n.nodeType===9){var sDocumentHref=oEl.ownerDocument.location.href;sBase=sDocumentHref.substr(0,sDocumentHref.lastIndexOf("/")+1)+sBase;}
return sBase;}
function isRelativePath(sURL)
{var bRet=true;if(sURL.charAt(0)=="/")
{bRet=false;}
else
{var sScheme=sURL.substr(0,7);if(sScheme=="http://"||sScheme=="file://")
{bRet=false;}}
return bRet;}
function resolveURL(oEl,sURL)
{var sRet;if(isRelativePath(sURL))
{if(!oEl.getAttribute("base")){oEl.setAttribute("base",getBase(oEl));}
sRet=oEl.getAttribute("base")+sURL;}
else{sRet=sURL;}
return sRet;}}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/Instance.js

function Instance(elmnt){this.element=elmnt;this.m_oDOM=null;this.element["elementState"]=1;this.model=elmnt.parentNode;UX.addStyle(this.element,"display","none");}
Instance.prototype.initialisedom=function(){if(!this.m_oDOM){if(this.getAttribute("src")){this.load(this.getAttribute("src"));}else{this.parseInstance();if(!this.finishLoad()){if(this.getAttribute("resource")){this.load(this.getAttribute("resource"));}else{this.dispatchException("xforms-link-exception",{"resource-uri":this.getAttribute("id")||""});}}}}};Instance.prototype.load=function(domURL){if(domURL){this.element.setAttribute("xlink:actuate","onRequest");this.element.setAttribute("xlink:show","embed");this.element.setAttribute("xlink:href",domURL);this.element.setAttribute("base"," ");this.element.attachSingleBehaviour(XLinkElement);this.element.addEventListener("xlink-traversed",{context:this,handleEvent:function(evtParam){var evt=this.context.element.ownerDocument.createEvent("Events");evt.initEvent("instance-load",true,false);var oTarget=this.context.element;spawn(function(){FormsProcessor.dispatchEvent(oTarget,evt);});}},false);this.element.addEventListener("xlink-traversal-failure",{context:this,handleEvent:function(evtParam){var dispatcher=this.context;spawn(function(){dispatcher.dispatchException("xforms-link-exception",evtParam.context);});}},false);this.element.Actuate();}}
Instance.prototype.xlinkEmbed=function(s,domURL){this.m_oDOM=xmlParse(s);this.element["elementState"]=0;this.finishLoad(domURL);return true;}
Instance.prototype.parseInstance=function(){var sXML="";if(UX.isXHTML){var o=new XMLSerializer();var n=this.element.firstChild;while(n){sXML+=o.serializeToString(n);n=n.nextSibling;}}
else{sXML=this.element.innerHTML;}
if(sXML!==""){try{this.m_oDOM=xmlParse(sXML);}catch(e){}
this.element["elementState"]=0;}
return;};Instance.prototype.finishLoad=function(domURL){var ret=false;if(this.m_oDOM&&this.m_oDOM.documentElement){ret=true;if(typeof this.model.flagRebuild==="function")
this.model.flagRebuild();this.m_oDOM.XFormsInstance=this;this.m_oOriginalDOM=this.m_oDOM.cloneNode(true);NamespaceManager.readOutputNamespacesFromInstance(this.m_oDOM);}else if(!this.element["elementState"]){ret=true;this.dispatchException("xforms-link-exception",{"resource-uri":domURL||("#"+this.getAttribute("id"))});}
return ret;}
Instance.prototype.dispatchException=function(exceptionName,exceptionContext){var evt=document.createEvent("Events");evt.initEvent(exceptionName,true,false);evt.context=exceptionContext;this.element["elementState"]=-1;FormsProcessor.dispatchEvent((typeof this.element.parentNode.modelConstruct==="function")?this.element.parentNode:this.element,evt);}
Instance.prototype.getDocument=function(){if(this.m_oDOM){this.m_oDOM.XFormsInstance=this;}
return this.m_oDOM;};Instance.prototype.replaceDocument=function(oDom){this.m_oDOM=null;this.m_oDOM=oDom;if(!this.m_oOriginalDOM){this.m_oOriginalDOM=this.m_oDOM.cloneNode(true);}
return;};Instance.prototype.reset=function(){this.replaceDocument(this.m_oOriginalDOM.cloneNode(true));};Instance.prototype.onDocumentReady=Instance.prototype.initialisedom;Instance.prototype.deleteNodes=function(oContext,nodesetExpr,atExpr){return this.deleteFromNodeset(oContext,this.evalXPath(nodesetExpr,oContext).nodeSetValue(),atExpr);};Instance.prototype.deleteFromNodeset=function(oContext,nodeset,atExpr){var at,atContext,i,node,nsDeleted=[],evt;var deleteNode=function(node,deleteLocation){var parentNode=node.parentNode;if(!parentNode||((parentNode.nodeType===DOM_DOCUMENT_NODE)&&(node.nodeType===DOM_ELEMENT_NODE))){return false;}
if(UX.isNodeReadonly((deleteLocation)?parentNode:node)){return false;}
if(node.nodeType===DOM_ATTRIBUTE_NODE){parentNode.removeAttribute(node.nodeName);}
else{parentNode.removeChild(node);}
if(node.m_proxy){node.m_proxy.m_oNode=null;}
return true;};if(nodeset.length){if(atExpr){atContext=UX.beget(oContext);atContext.size=nodeset.length;atContext.position=1;atContext.node=nodeset[0];at=Math.round(this.evalXPath(atExpr,atContext).numberValue());}
if(at!==undefined){at=at<1?1:(at<=nodeset.length?at:nodeset.length);node=nodeset[at-1];if(deleteNode(node,at)){nsDeleted.push(node);}}else{for(i=0;i<nodeset.length;i++){node=nodeset[i];if(deleteNode(node)){nsDeleted.push(node);}}}}
if(nsDeleted.length){evt=document.createEvent("Events");evt.initEvent("xforms-delete",true,false);evt.context={"deleted-nodes":nsDeleted,"delete-location":at};FormsProcessor.dispatchEvent(this,evt);return true;}else{return false;}};Instance.prototype.insertNodes=function(oContext,nodesetExpr,atExpr,position,originExpr){return this.insertNodeset(oContext,((nodesetExpr)?this.evalXPath(nodesetExpr,oContext).nodeSetValue():null),atExpr,position,originExpr);};Instance.prototype.insertNodeset=function(oContext,ns,atExpr,position,originExpr){var nsOrigin=(originExpr)?(typeof originExpr==='string'?this.evalXPath(originExpr,oContext).nodeSetValue():originExpr):((ns)?new Array(ns[ns.length-1]):null);var at,after,i,insertLocationNode,insertTarget,insertBeforeNode,cloneNode,nsLocationNode=[],nsInserted=[],evt,atRoot,insertNode;if(oContext){if(ns&&ns.length>0){at=(atExpr)?Math.round(this.evalXPath(atExpr,oContext).numberValue()):ns.length;at=at<1?1:(at<=ns.length?at:ns.length);insertLocationNode=ns[at-1];nsLocationNode.push(insertLocationNode);after=(position)?(position!=='before'):true;if(after){insertBeforeNode=insertLocationNode.nextSibling?insertLocationNode.nextSibling:null;}else{insertBeforeNode=insertLocationNode;}
insertTarget=insertLocationNode.parentNode;}
else if(oContext.initialContext&&nsOrigin&&nsOrigin.length>0){insertTarget=oContext.node?oContext.node:oContext;nsLocationNode.push(insertTarget);insertBeforeNode=(insertTarget.firstChild)?insertTarget.firstChild:null;}
if(insertTarget){atRoot=false;for(i=0;i<nsOrigin.length;i++){insertNode=true;if((insertTarget.nodeType===DOM_DOCUMENT_NODE)&&(nsOrigin[i].nodeType===DOM_ELEMENT_NODE)){if(atRoot){insertNode=false;}
else{atRoot=true;}}
if(nsOrigin[i].nodeType===DOM_ATTRIBUTE_NODE){if((insertTarget.nodeType!==DOM_ELEMENT_NODE)||(ns&&ns.length>0)){insertNode=false;}}
if(insertNode){cloneNode=nsOrigin[i].cloneNode(true);nsInserted.push(cloneNode);}}
if(atRoot){insertLocationNode=insertTarget.firstChild;while(insertLocationNode&&(insertLocationNode.nodeType!==DOM_ELEMENT_NODE)){insertLocationNode=insertLocationNode.nextSibling;}
if(insertLocationNode){if(insertBeforeNode&&insertBeforeNode===insertLocationNode){insertBeforeNode=insertBeforeNode.nextSibling;}
insertTarget.removeChild(insertLocationNode);}}
for(i=0;i<nsInserted.length;i++){if(nsInserted[i].nodeType!==DOM_ATTRIBUTE_NODE){insertTarget.insertBefore(nsInserted[i],insertBeforeNode);}
else{insertTarget.setAttributeNode(nsInserted[i]);}}}}
if(nsInserted.length){evt=document.createEvent("Events");evt.initEvent("xforms-insert",true,false);evt.context={"inserted-nodes":nsInserted,"origin-nodes":nsOrigin,"insert-location-node":nsLocationNode,"position":(after?"after":"before")};FormsProcessor.dispatchEvent(this,evt);return true;}else{return false;}
return false;};Instance.prototype.evalXPath=function(expr,oContext){return xpathDomEval(expr,oContext||{node:this.m_oDOM.documentElement});};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/pds.js

function Vertex(oVT)
{this.vertexTarget=oVT;this.depList=[];this.inDegree=0;this.visited=false;this.index=0;}
Vertex.prototype.setDependencyList=function(ar)
{this.depList=ar;};Vertex.prototype.addDependent=function(oVertex)
{this.depList.push(oVertex);};function Pair(first,second)
{this.first=first;this.second=second;}
function ChangeList()
{this.m_Lc=[];}
ChangeList.prototype.addChange=function(oVertex)
{this.m_Lc.push(oVertex);};ChangeList.prototype.clear=function()
{this.m_Lc.length=0;};function dependencyEngine()
{this.m_M=[];}
dependencyEngine.prototype.clear=function()
{var M=this.m_M;for(var i=0;i<M.length;i++)
{var v=M[i];var oVT=v.vertexTarget;if(oVT&&oVT.m_oProxy){oVT.m_oProxy.m_vertex=null;}}
M.length=0;};dependencyEngine.prototype.createVertex=function(oVT)
{var v=new Vertex(oVT);this.m_M.push(v);return v;};dependencyEngine.prototype.recalculate=function(oChangeList)
{this.ProcessPertinentDependencySubgraph(this.CreatePertinentDependencySubgraph(oChangeList.m_Lc));};dependencyEngine.prototype.CreatePertinentDependencySubgraph=function(Lc)
{var M=this.m_M;var S=[];var stack=[];for(var i=0;i<Lc.length;++i){var r=Lc[i];if(r.visited===false){stack.push(new Pair(null,r));while(stack.length>0){var p=stack.pop();var v=p.first;var w=p.second;var wS=null;if(w.visited===false){w.visited=true;w.index=S.length;wS=new Vertex(w.vertexTarget);for(var j=0;j<M.length;++j){var x=M[j];if(x==w){wS.index=j;break;}}
S.push(wS);if(typeof w.depList=="object"&&w.depList!==null){for(var j=0;j<w.depList.length;++j){var x=w.depList[j];stack.push(new Pair(w,x));}}}
else
wS=S[w.index];if(v!==null&&wS){var vS=S[v.index];if(typeof(vS.depList)!="object"||vS.depList==null)
vS.depList=new Array;vS.depList.push(wS);++wS.inDegree;}}}}
for(var i=0;i<S.length;++i){var vS=S[i];var v=M[vS.index];v.visited=false;}
return S;};dependencyEngine.prototype.ProcessPertinentDependencySubgraph=function(S)
{for(var i=0;i<S.length;i++){var vS=S[i];if(vS.inDegree==0){S.splice(i,1);this.doUpdate(vS);if(typeof(vS.depList)=="object"&&vS.depList!=null){for(var j=0;j<vS.depList.length;++j){var wS=vS.depList[j];--wS.inDegree;}}
this.ProcessPertinentDependencySubgraph(S);break;}}
if(S.length>0)
throw"xforms-compute-exception: Recursive calculation structure detected.";};dependencyEngine.prototype.doUpdate=function(vS)
{if(typeof(vS)=="object"&&vS!=null&&typeof(vS.vertexTarget)=="object"&&vS.vertexTarget!=null)
{vS.vertexTarget.update();}
else
throw"doUpdate(): Invalid argument.";};var bEnableDumpState=false;if(bEnableDumpState)
{Vertex.prototype.dumpState=function(sIndent)
{var s="[vertex] target="+this.vertexTarget.identifier();var sChildIndent=sIndent+"\t";for(var i=0;i<this.depList.length;++i)
{s+=("\n"+sIndent+this.depList[i].dumpState(sChildIndent));}
return s;}
dependencyEngine.prototype.dumpState=function()
{var s="Dependency Engine";for(var i=0;i<this.m_M.length;++i)
{s+=("\n"+this.m_M[i].dumpState("\t"));}
return s;}}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/model.js

function processBinds(oModel,oElement,oContext){var nsBinds=oElement.childNodes,len=nsBinds.length,i,oBind;for(i=0;i<len;i++){oBind=nsBinds[i];if(NamespaceManager.compareFullName(oBind,"bind","http://www.w3.org/2002/xforms")){oBind["ownerModel"]=oModel;sExpr=oBind.getAttribute("nodeset")||".";if(sExpr){processBind(oBind,sExpr,oModel,oContext);}}}}
function processBind(oBind,sExpr,oModel,oContext){var oNodeset,oNode,oPN,i,j,sMIPName,sMIPVal,modelItemProps=["readonly","required","relevant","calculate","constraint","type"],oRes=oModel.EvaluateXPath(sExpr,oContext),oBinder=null,oParentBind=null,loopContext;if(oRes){if(oBind.getAttribute("context")){oBinder=oBind.parentNode;while(oBinder){if(oBinder.getAttribute("nodeset")){oParentBind=oBinder;break;}
oBinder=oBinder.parentNode;}}
switch(oRes.type){case"node-set":oNodeset=oRes.nodeSetValue();if(oNodeset){for(i=0;i<oNodeset.length;i++){oNode=oNodeset[i];loopContext={node:oNode,model:oModel,position:i,size:oNodeset.length,resolverElement:oBind};if(oNode){if(!oNode.m_proxy){oNode.m_proxy=new ProxyNode(oNode);}
oPN=oNode.m_proxy;if(i===0){oBind.boundNode=oPN;oBind.boundNodeSet=oNodeset;}
if(!oPN.m_vertex){var oSE=new SubExpression(oPN);oPN.m_vertex=oModel.m_oDE.createVertex(oSE);oModel.changeList.addChange(oPN.m_vertex);}
for(j=0;j<modelItemProps.length;j++){var oMIPVertex=null;sMIPName=modelItemProps[j];sMIPVal=oBind.getAttribute(sMIPName);if(sMIPVal){if(sMIPName==="calculate"){oMIPVertex=oPN.m_vertex;}else if(sMIPName==="relevant"){sMIPName="enabled";}else if(sMIPName==="type"){oPN.datatype=sMIPVal;}
if(oParentBind){oPN=oParentBind["boundNode"];}
oModel.createMIP(oMIPVertex,sMIPName,sMIPVal,oPN,loopContext);}}
processBinds(oModel,oBind,loopContext);}}}
break;case"boolean":break;case"number":break;case"string":break;default:throw"Binding exception.";break;}}}
function testForReady(pThis){if(pThis["elementLoaded"]===true){if(!FormsProcessor.testModelVersion(pThis)){return;}
pThis["elementState"]=0;var ns=pThis.element.childNodes;for(var i=0;i<ns.length;i++){var oNode=ns[i];if(!oNode){pThis["elementState"]=-1;break;}else if(oNode["elementState"]){if(oNode["elementState"]===1){pThis["elementState"]=1;break;}else if(oNode["elementState"]===-1){pThis["elementState"]=-1;break;}}}
if(pThis["elementState"]===0){var evt=document.createEvent("Events");evt.initEvent("xforms-model-construct",true,false);evt._actionDepth=-1;spawn(function(){FormsProcessor.dispatchEvent(pThis.element,evt);});}}
return;}
function __replaceInstanceDocument(pThis,oInstance,oDom){var bRet=false;if(!oInstance){throw"No instance found with an ID of '"+sID+"'";}else if(oInstance.length){throw"Multiple instances found with an ID of '"+sID+"'";}else{oInstance.replaceDocument(oDom);pThis.flagRebuild();bRet=true;}
return bRet;}
function _replaceInstanceDocument(pThis,sID,oDom){var bRet=false;var oInstance=null;if(sID){oInstance=pThis.element.ownerDocument.getElementById(sID);bRet=__replaceInstanceDocument(pThis,oInstance,oDom);}
return bRet;}
function _addBindingTemp(pThis,oContext,sXPath){var oRet=null;var oPN;var oNode=getFirstNode(pThis.EvaluateXPath(sXPath,oContext));if(oNode){oPN=oNode.m_proxy;if(!oPN){oPN=new ProxyNode(oNode);oNode.m_proxy=oPN;}}else{oPN=new ProxyNode(null);}
oRet=oPN;return oRet;}
function _addControlExpression(pThis,oTarget,oContext,sXPath){var oRet=null;pThis.element.ownerDocument.logger.log("Adding expression for '"
+oTarget.tagName+"' to '"+sXPath+"'","mdl");if(!oContext){oContext=pThis;}
var oPE=new ProxyExpression(oContext,sXPath,pThis);oTarget.m_proxy=oPE;oRet=oPE;return oRet;}
function _createMIP(pThis,oVertex,sMIPName,sExpr,oPN,oContext){var oCPE=(oVertex)?new ComputedXPathExpression(oPN,sExpr,oContext,pThis):new MIPExpression(oPN,sExpr,oContext,pThis);if(sMIPName==="readonly"){oCPE.getValue=function(){return FormsProcessor.inheritTrue("readonly",oContext.node);}}else if(sMIPName==="enabled"){oCPE.getValue=function(){return FormsProcessor.inheritFalse("enabled",oContext.node);}}
oPN[sMIPName]=oCPE;var oCalcVertex=pThis.m_oDE.createVertex(oCPE);pThis.changeList.addChange(oCalcVertex);if(oVertex){oCalcVertex.addDependent(oVertex);}
oCPE.addDependentExpressions(oCalcVertex,pThis.m_oDE,pThis.changeList);return;}
function _EvaluateXPath(pThis,sXPath,oContext){var oRet=null
if(!oContext){oContext=pThis.getEvaluationContext();}else if(!oContext.node){oContext={node:oContext};}
if(!oContext.model){oContext.model=pThis;}
if(!oContext.resolverElement){oContext.resolverElement=pThis.element;}
if(oContext){try{oRet=xpathDomEval(sXPath,oContext);}catch(e){if(oContext.resolverElement){if(!FormsProcessor.halted){FormsProcessor.halted=true;UX.dispatchEvent(oContext.resolverElement,"xforms-binding-exception",true,false);}}}}
return oRet;}
function _deferredUpdate(pThis){if(!pThis.deferredUpdateInProgress){pThis.deferredUpdateInProgress=true;if(pThis.m_bNeedRebuild){pThis.rebuild();}
if(pThis.m_bNeedRecalculate){pThis.recalculate();}
if(pThis.m_bNeedRevalidate){pThis.revalidate();}
if(pThis.m_bNeedRewire){pThis.rewire();}
if(pThis.m_bNeedRefresh){pThis.refresh();}
pThis.deferredUpdateInProgress=false;}
return;}
function _model_contentReady(pThis){pThis.changeList=new ChangeList();pThis.m_oDE=new dependencyEngine();pThis.element.addEventListener("instance-load",{handleEvent:function(evt){testForReady(pThis);}},false);FormsProcessor.addDefaultEventListener(pThis.element,"xforms-model-construct",{handleEvent:function(evt){pThis.modelConstruct();}},false);FormsProcessor.addDefaultEventListener(pThis,"xforms-model-construct-done",{handleEvent:function(evt){pThis.modelConstructDone();}},false);FormsProcessor.addDefaultEventListener(pThis,"xforms-link-exception",{handleEvent:function(evt){FormsProcessor.halted=true;document.logger.log("xforms-link-exception, resource-uri: ["+evt.context["resource-uri"]+"]");}},false);FormsProcessor.addDefaultEventListener(pThis,"xforms-version-exception",{handleEvent:function(evt){FormsProcessor.halted=true;document.logger.log("xforms-version-exception, error-information: ["+evt.context["error-information"]+"]");}},false);pThis.addEventListener("xforms-insert",{scope:pThis,handleEvent:function(evt){pThis.storeInsertedNodes(evt.context["inserted-nodes"]);}},false);return;}
function _modelConstruct(pThis){pThis._rebuild();pThis._recalculate();pThis._revalidate();pThis.m_bNeedRefresh=false;var evt=pThis.element.ownerDocument.createEvent("Events");evt._actionDepth=-1;evt.initEvent("xforms-model-construct-done",true,false);spawn(function(){FormsProcessor.dispatchEvent(pThis.element,evt);});return;}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../threads.js

function spawn(pFunc,pOnEnd)
{if(pOnEnd){setTimeout(function(){pFunc();spawn(pOnEnd);},1);}
else{setTimeout(pFunc,1);}}
function SpawnLooper(pFuncs,pOnEnd)
{var m_pFuncs=pFuncs?pFuncs:[];var m_pOnEnd=pOnEnd;var m_activeSpawns=0;this.addSpawn=function(pFunc)
{m_pFuncs.push(pFunc);};this.decrementActiveSpawns=function()
{if(--m_activeSpawns===0){if(m_pOnEnd){spawn(m_pOnEnd);}}};this.go=function()
{var len=m_pFuncs.length;var callback=this.decrementActiveSpawns;m_activeSpawns=m_pFuncs.length;for(var i=0;i<len;++i)
{spawn(m_pFuncs[i],callback);}};}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/VertexTargets.js

function getProxyNode(oNode)
{if(oNode===null||oNode===undefined){throw"getProxyNode, E_INVALIDARG";}
var pnRet=null;if(oNode){if(oNode.m_oNode){pnRet=oNode;}
else{if(oNode.m_proxy){pnRet=oNode.m_proxy;}
else{pnRet=new ProxyNode(oNode);oNode.m_proxy=pnRet;}}}
return pnRet;}
function getElementValueOrContent(oContext,oElement){var sExprValue=oElement.getAttribute("value");var sRet="";if(sExprValue===undefined||sExprValue===null||sExprValue===""){sRet=UX.isXHTML?oElement.textContent:oElement.innerHTML;}else{sRet=getStringValue(oContext.model.EvaluateXPath(sExprValue,oContext));}
return sRet;}
function getFirstNode(oRes){var oRet=null;var nodeSet=null;if(oRes&&oRes.type==="node-set"){nodeSet=oRes.nodeSetValue();if(nodeSet.length){oRet=nodeSet[0];}}
return oRet;}
function getFirstTextNode(oNode){var oRet=null;if(oNode){if((oNode.nodeType==DOM_TEXT_NODE)||(oNode.nodeType==DOM_ATTRIBUTE_NODE)){oRet=oNode;}
else if(oNode.nodeType==DOM_ELEMENT_NODE){oRet=oNode.firstChild;if(!oRet||((oRet.nodeType!=DOM_TEXT_NODE)&&(oRet.nodeType!=DOM_CDATA_SECTION_NODE))){var newNode=oNode.ownerDocument.createTextNode("");if(!oRet){oNode.appendChild(newNode);}
else{oNode.insertBefore(newNode,oRet);}
oRet=newNode;}}}
return oRet;}
function getStringValue(oRes)
{var sRet="";var oNode=null;if(oRes)
{switch(oRes.type)
{case"node-set":oNode=getFirstNode(oRes);if(oNode)
{if((oNode.nodeType==DOM_TEXT_NODE)||(oNode.nodeType==DOM_ATTRIBUTE_NODE)){sRet=oNode.nodeValue;}
else if(oNode.nodeType==DOM_ELEMENT_NODE){oNode=oNode.firstChild;if(oNode&&oNode.nodeType==DOM_TEXT_NODE)
sRet=oNode.nodeValue;}}
break;case"string":sRet=oRes.stringValue();oNode=null;break;case"boolean":sRet=oRes.booleanValue();break;case"number":sRet=oRes.numberValue();break;default:debugger;break;}}
return sRet;}
function ProxyExpression(oContext,sXPath,oModel)
{this.m_context=oContext;this.m_xpath=sXPath;this.m_model=oModel;this.datatype="";return;}
ProxyExpression.prototype.getType=function()
{return this.datatype;};ProxyExpression.prototype.getNodeset=function()
{var sRet=null;var oModel=this.m_model;if(oModel)
{oRet=oModel.EvaluateXPath(this.m_xpath,this.m_context);}
return oRet;};ProxyExpression.prototype.getValue=function()
{var sRet="";var oRes=this.getNodeset();if(oRes)
{switch(oRes.type)
{case"number":sRet=oRes.numberValue();break;case"string":sRet=oRes.stringValue();break;case"node-set":var oNode=getFirstTextNode(oRes.nodeSetValue()[0]);if(oNode)
sRet=oNode.nodeValue;break;case"boolean":sRet=oRet.booleanValue();break;default:debugger;break;}}
return sRet;};function ProxyNode(oNode)
{this.m_oNode=oNode;this.m_refcount=0;this.calculate=null;this.readonly={value:undefined,getValue:function(){return FormsProcessor.inheritTrue("readonly",oNode);}};this.required={getValue:function(){return false;}};this.enabled={value:true,getValue:function(){return FormsProcessor.inheritFalse("enabled",oNode);}};this.outOfRange={getValue:function(){return false;}};this.valid={oPN:this,getValue:function(){if(this.oPN&&this.oPN.constraint){if(!this.oPN.constraint.getValue()){return false;}}
if(this.oPN&&this.oPN.required){if(this.oPN.required.getValue()&&!this.oPN.getValue()){return false;}}
if(this.oPN&&this.oPN.validate){if(!this.oPN.validate()){return false;}}
return true;}};this.datatype=(oNode.nodeType===DOM_ELEMENT_NODE)?oNode.getAttribute("xsi:type")||"":"";}
ProxyNode.prototype.getMIP=function(sMIPName)
{var mipRet=this[sMIPName];if(!mipRet)
{mipRet=null;debugger;}
return mipRet;};ProxyNode.prototype.getMIPState=function(sMIPName)
{var oMIP=this.getMIP(sMIPName);var bRet=false;if(oMIP)
bRet=oMIP.getValue();return bRet;};ProxyNode.prototype.getNode=function()
{return this.m_oNode;};ProxyNode.prototype.getType=function()
{return this.datatype;};ProxyNode.prototype.getValue=function()
{var sRet="";var oNode=this.getNode();if(oNode)
{oNode=getFirstTextNode(oNode);if(oNode)
sRet=oNode.nodeValue;}
return sRet;};ProxyNode.prototype.removeChild=function(node,caller){if(this.m_oNode.nodeType===DOM_ELEMENT_NODE){if(!this.readonly.getValue()){this.m_oNode.removeChild(node);return true;}}else{UX.dispatchEvent(caller,"xforms-binding-exception",true,false);}
return false;}
ProxyNode.prototype.appendChild=function(node,caller){if(this.m_oNode.nodeType===DOM_ELEMENT_NODE){if(!this.readonly.getValue()){return this.m_oNode.appendChild(node);}}else{UX.dispatchEvent(caller,"xforms-binding-exception",true,false);}
return null;}
ProxyNode.prototype.setValue=function(sVal,oModel)
{var oRet=null;if(!this.readonly.getValue())
{var oNode=this.getNode();if(oNode)
{oNode=getFirstTextNode(oNode);if(oNode)
{oNode.nodeValue=(typeof(sVal)=="object")?sVal.stringValue():""+sVal;}}
if(oModel)
{if(this.m_vertex)
{var oVertex=this.m_vertex;oModel.changeList.addChange(oVertex);}
oModel.flagRecalculate();oModel.flagRefresh();}}
return oRet;};ProxyNode.prototype.validate=function(){var arrSegments,prefix,dataType,dataTypeNS;if(!this.datatype){return true;}
arrSegments=this.datatype.split(":");prefix=arrSegments.length===1?"":arrSegments[0];dataType=arrSegments.length===1?arrSegments[0]:arrSegments[1];dataTypeNS=prefix?NamespaceManager.getNamespaceURIForPrefix(prefix):"";return Validator.validateValue(dataTypeNS,dataType,this.getValue());};function SingleNodeExpression(oTarget,sXPath,oContext,oModel)
{this.m_sXPathExpr=sXPath;this.m_oContext=oContext;this.m_oModel=oModel;this.node=null;this.identifier=function()
{return"snb["+sXPath+"]";}}
SingleNodeExpression.prototype.update=function()
{var r=this.m_oModel.EvaluateXPath(this.m_sXPathExpr,this.m_oContext);if(r!=null)
{this.node=new ProxyNode(r.value[0]);return r.value[0];}
return null;};SingleNodeExpression.prototype.determineDependentExpressions=function()
{g_bSaveDependencies=true;this.m_oModel.EvaluateXPath(this.m_sXPathExpr,this.m_oContext);g_bSaveDependencies=false;return;};function NodesetExpression(oTarget,sXPath,oContext,oModel)
{this.m_sXPathExpr=sXPath;this.m_oContext=oContext;this.m_oModel=oModel;var m_nodeset=null;this.dependentExpressions=new Array();this.getNode=function(i)
{return ProxyNode(m_nodeset[i]);}
this.AddExpressionWhichTakesThisAsContext=function(sXPath)
{this.dependentExpressions.push(new ComputedXPathExpression(sXPath,this,this.m_oModel));}
this.identifier=function()
{return"nsetb["+sXPath+"]";}}
NodesetExpression.prototype.update=function()
{var r=this.m_oModel.EvaluateXPath(this.m_sXPathExpr,this.m_oContext);if(r!=null)
{this.node=new ProxyNode(r.value);return r.value;}
return null;};NodesetExpression.prototype.determineDependentExpressions=function()
{g_bSaveDependencies=true;this.m_oModel.EvaluateXPath(this.m_sXPathExpr,this.m_oContext);g_bSaveDependencies=false;return;};function ComputedXPathExpression(oProxy,sXPath,oContext,oModel)
{this.m_oProxy=oProxy;this.m_sXPathExpr=sXPath;this.m_oContext=oContext;this.m_oModel=oModel;this.value=null;this.dependentExpressions=new Array();this.identifier=function()
{return"comp["+sXPath+"]";}}
ComputedXPathExpression.prototype.update=function()
{var oRet="";var oRes=this.m_oModel.EvaluateXPath(this.m_sXPathExpr,this.m_oContext);if(oRes)
{oRet=oRes.stringValue();this.m_oProxy.setValue(oRet,null);}
this.value=oRet;return oRet;};ComputedXPathExpression.prototype.addDependentExpressions=function(oVertex,oDepEngine,oChangeList)
{var oRes=this.determineDependentExpressions();var oNode=null;var oPN=null;if(this.dependentExpressions.length)
{for(var i=0;i<this.dependentExpressions.length;i++)
{var oDependentNode=this.dependentExpressions[i];oPN=oDependentNode.m_proxy;if(!oPN)
{oPN=new ProxyNode(oDependentNode);oDependentNode.m_proxy=oPN;}
var oSubVertex;if(oPN.m_vertex)
oSubVertex=oPN.m_vertex;else
{var oSubExpr=new SubExpression(oDependentNode);oSubVertex=oDepEngine.createVertex(oSubExpr);oPN.m_vertex=oSubVertex;oChangeList.addChange(oSubVertex);}
oSubVertex.addDependent(oVertex);}}};ComputedXPathExpression.prototype.determineDependentExpressions=function()
{var oRet=null;g_bSaveDependencies=true;g_arrSavedDependencies=this.dependentExpressions;oRet=this.m_oModel.EvaluateXPath(this.m_sXPathExpr,this.m_oContext);g_bSaveDependencies=false;return oRet;};function MIPExpression(oProxy,sXPath,oContext,oModel)
{MIPExpression.superclass.constructor.call(this,oProxy,sXPath,oContext,oModel);}
YAHOO.extend(MIPExpression,ComputedXPathExpression);MIPExpression.prototype.getValue=function(){return this.value;}
MIPExpression.prototype.update=function()
{var bRet=false;var oRes=this.m_oModel.EvaluateXPath(this.m_sXPathExpr,this.m_oContext);if(oRes)
bRet=oRes.booleanValue();this.value=bRet;return bRet;};function SubExpression(oProxy)
{this.m_oProxy=oProxy;this.value=null;this.identifier=function()
{return"sub";}}
SubExpression.prototype.update=function()
{var oRet=null;this.value=oRet;return oRet;};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/modelObj.js

function Model(elmnt){this.element=elmnt;this.m_bNeedRebuild=false;this.m_bNeedRecalculate=false;this.m_bNeedRevalidate=false;this.m_bNeedRewire=false;this.m_bNeedRefresh=false;this.m_bReady=false;this.elementState=1;this.elementLoaded=false;this.m_arrProxyNodes={};this.m_arControls=[];this.xformselement="model";this.externalInstances=[];this.m_NodesInsertedSinceLastRewire=[];}
Model.prototype.onDocumentReady=function(){var self=this;this.setElementLoaded();this._testForReady();FormsProcessor.addDefaultEventListenerFor(this.element,"xforms-reset",this,"reset");FormsProcessor.addDefaultEventListenerFor(this.element,"xforms-rebuild",this,"_rebuild");FormsProcessor.addDefaultEventListenerFor(this.element,"xforms-recalculate",this,"_recalculate");FormsProcessor.addDefaultEventListenerFor(this.element,"xforms-revalidate",this,"_revalidate");FormsProcessor.addDefaultEventListenerFor(this.element,"xforms-refresh",this,"_refresh");if(window.addEventListener){window.addEventListener("beforeunload",{handleEvent:function(evt){self.modelDestruct();}},false);}else{window.attachEvent("onbeforeunload",function(){self.modelDestruct();});}
this.checkFunctionsAttribute();};Model.prototype.checkFunctionsAttribute=function(){var i,evt,functionString=this.element.getAttribute("functions"),requiredFunctions=functionString?functionString.split(" "):[];for(i=0;i<requiredFunctions.length;++i){if(typeof window[requiredFunctions[i]]!=="function"){evt=document.createEvent("Events");evt.initEvent("xforms-compute-exception",true,false);evt.context={"error-message":"function '"+requiredFunctions[i]+"' specified in model/@functions is not a function."}
this.dispatchEvent(evt);}}}
Model.prototype.onContentReady=function(){return _model_contentReady(this);};Model.prototype.modelConstruct=function(){return _modelConstruct(this);};Model.prototype.modelConstructDone=function(){this.constructingUI=true;this.initialisationLock=1;this.rewire();this.constructingUI=false;window.status="refreshing";this._refresh();this.resumeXFormsReady();this.m_bReady=true;};Model.prototype.stopXFormsReady=function(){++this.initialisationLock;}
Model.prototype.resumeXFormsReady=function(){if(!--this.initialisationLock&&!this.m_bXFormsReadyFired){this.fireXFormsReady();}}
Model.prototype.modelDestruct=function(){UX.dispatchEvent(this.element,"xforms-model-destruct",false,false,false);};Model.prototype.fireXFormsReady=function(){this.m_bXFormsReadyFired=true;UX.dispatchEvent(this.element,"xforms-ready",false,false,true);};Model.prototype.replaceInstanceDocument=function(sID,oDom){return _replaceInstanceDocument(this,sID,oDom);};Model.prototype.getInstanceDocument=function(sID){var oRet=null;var oInstance=null;var i,l;if(sID&&sID!==""){oInstance=document.getElementById(sID);if(oInstance&&oInstance.parentNode!==this.element){throw"instance '"+sID+"' is not part of model '"
+this.element.getAttribute('id')+"'";}else{l=this.externalInstances.length;for(i=0;i<l;++i){if(this.externalInstances[i].element.getAttribute('id')===sID){oInstance=this.externalInstances[i];isExternal=true;break;}}}}else{oInstance=NamespaceManager.getElementsByTagNameNS(this.element,"http://www.w3.org/2002/xforms","instance")[0];if(!oInstance){oInstance=this.externalInstances[0];isExternal=true;}}
if(!oInstance){throw"No instance found with an ID of '"+sID+"'";}else{oRet=oInstance.m_oDOM;}
return oRet;};Model.prototype.getEvaluationContext=function(){var oRet={model:this.element,node:null,resolverElement:this.element};var oFirstInstance=null;var oDom=null;var instances=this.instances();var sType=null;if(instances&&instances.length>0){oFirstInstance=instances[0];sType=typeof(oFirstInstance.getDocument);if(sType==="function"){oDom=oFirstInstance.getDocument();if(oDom){oRet.node=oDom;oRet.node=getFirstNode(this.EvaluateXPath("/*",oRet));}}}
return oRet;};Model.prototype.getBoundNode=function(){return this.getEvaluationContext();};Model.prototype.setValue=function(oContext,sXPath,sExprValue){var oNode=getFirstNode(this.EvaluateXPath(sXPath,oContext));if(oNode){var sValue=getStringValue(this.EvaluateXPath(sExprValue,{node:oNode,model:oContext.model,resolverElement:oContext.resolverElement}));var oPN=oNode.m_proxy;if(!oPN){oPN=new ProxyNode(oNode);oNode.m_proxy=oPN;}
oPN.setValue(sValue,this);this.flagRefresh();}
return;};Model.prototype.getValue=function(sXPath){var oRet=this.EvaluateXPath(sXPath,this.getEvaluationContext());return oRet;};Model.prototype.EvaluateXPath=function(sXPath,oContext){return _EvaluateXPath(this,sXPath,oContext);};Model.prototype.addControl=function(oTarget){this.m_arControls.push(oTarget);var oTargetSaved=oTarget;if(this.m_bReady){spawn(function(){try{if(oTargetSaved&&typeof oTargetSaved.element=="object"){oTargetSaved.rewire();if(oTargetSaved.isWired!==undefined){oTargetSaved.isWired=true;}
oTargetSaved.refresh();}}catch(e){}});}
return;};Model.prototype.addBindingTemp=function(oContext,sXPath){return _addBindingTemp(this,oContext,sXPath);};Model.prototype.addControlBinding=function(oTarget){oTarget.addEventListener("target-value-changed",{model:this,handleEvent:function(evt){var oPN=evt.target.m_proxy;if(oPN){oPN.setValue(evt.newValue,this.model);}}},false);return;};Model.prototype.addControlExpression=function(oTarget,oContext,sXPath){return _addControlExpression(this,oTarget,oContext,sXPath);};Model.prototype.AddSingleNodeBinding=function(oTarget,oContext,sXPath){if(!oContext){oContext=this.getEvaluationContext();}
var oSNE=new SingleNodeExpression(oTarget,sXPath,oContext,this,true);return oSNE;};Model.prototype.AddNodesetBinding=function(oTarget,oContext,sXPath){if(!oContext){oContext=this.getEvaluationContext();}
var oNE=new NodesetExpression(oTarget,sXPath,oContext,this,false);return oNE;};Model.prototype.flagRebuild=function(){this.m_bNeedRebuild=true;};Model.prototype.flagRecalculate=function(){this.m_bNeedRecalculate=true;};Model.prototype.flagRevalidate=function(){this.m_bNeedRevalidate=true;};Model.prototype.flagRefresh=function(){this.m_bNeedRefresh=true;};Model.prototype.rebuildPending=function(){return this.m_bNeedRebuild;};Model.prototype.recalculatePending=function(){return this.m_bNeedRecalculate;};Model.prototype.revalidatePending=function(){return this.m_bNeedRevalidate;};Model.prototype.refreshPending=function(){return this.m_bNeedRefresh;};Model.prototype.rebuild=function(){if(this.m_bNeedRebuild){this.m_bNeedRebuild=false;UX.dispatchEvent(this.element,"xforms-rebuild",true,true);}};Model.prototype._rebuild=function(){this.m_oDE.clear();this.changeList.clear();if(!FormsProcessor.halted){this.m_oDE.clear();this.changeList.clear();var oContext=this.getEvaluationContext();processBinds(this,this.element,oContext);this.m_bNeedRecalculate=true;this.m_bNeedRebuild=false;}};Model.prototype.recalculate=function(){if(this.m_bNeedRecalculate){this.m_bNeedRecalculate=false;UX.dispatchEvent(this.element,"xforms-recalculate",true,true);}}
Model.prototype._recalculate=function(){if(!FormsProcessor.halted){this.m_oDE.recalculate(this.changeList);this.changeList.clear();this.m_bNeedRecalculate=false;this.m_bNeedRevalidate=true;}};Model.prototype.revalidate=function(){if(this.m_bNeedRevalidate){this.m_bNeedRevalidate=false;UX.dispatchEvent(this.element,"xforms-revalidate",true,true);}}
Model.prototype._revalidate=function(){if(!FormsProcessor.halted){this.applyChildBindConstraints(this);this.m_bNeedRevalidate=false;this.m_bNeedRewire=true;}};Model.prototype.rewire=function(){var i,fc;for(i=0;i<this.m_arControls.length;++i){fc=this.m_arControls[i];if(fc&&typeof fc.element=="object"){fc.unwire();}else{this.m_arControls.splice(i);}}
for(i=0;i<this.m_arControls.length;++i){fc=this.m_arControls[i];if(fc&&typeof fc.element=="object"){fc.rewire();}else{this.m_arControls.splice(i);}}
this.m_bNeedRewire=false;this.m_bNeedRefresh=true;this.flagRefresh();this.m_NodesInsertedSinceLastRewire=[];return;};Model.prototype.refresh=function(){if(!FormsProcessor.halted&&this.m_bNeedRefresh){this.m_bNeedRefresh=false;UX.dispatchEvent(this.element,"xforms-refresh",true,true);}};Model.prototype._refresh=function(){for(var i=0;i<this.m_arControls.length;++i){var fc=this.m_arControls[i];if(fc&&typeof fc.element=="object"){fc.refresh();}else{this.m_arControls.splice(i);}}
this.m_bNeedRefresh=false;window.status="";return;};Model.prototype.deferredUpdate=function(){return _deferredUpdate(this);};Model.prototype.addInstance=function(theInstance){this.externalInstances.push(theInstance);return this;};Model.prototype.storeInsertedNodes=function(nodes){var i;for(i=0;i<nodes.length;++i){this.m_NodesInsertedSinceLastRewire.unshift(nodes[i]);}}
Model.prototype.indexOfNewNode=function(nodes){var i,j;for(i=0;i<nodes.length;++i){for(j=0;j<this.m_NodesInsertedSinceLastRewire.length;++j){if(nodes[i]===this.m_NodesInsertedSinceLastRewire[j]){return i;}}}
return-1;};Model.prototype.removeInstance=function(theInstance){var i;var l=this.externalInstances.length;for(i=l;i>=0;--i){if(this.externalInstances[i]==theInstance){this.externalInstances.splice(i,1);}}
return this;};Model.prototype.instances=function(){var internalInstances=NamespaceManager.getElementsByTagNameNS(this.element,"http://www.w3.org/2002/xforms","instance");var i;var l=internalInstances.length;var retVal=[];for(i=0;i<l;++i){retVal.push(internalInstances[i]);}
return retVal.concat(this.externalInstances);};Model.prototype.reset=function(){if(!FormsProcessor.halted){var instances=this.instances();var l=instances.length;var i;for(i=0;i<l;++i){instances[i].reset();}
this.flagRebuild();_deferredUpdate(this);}};Model.prototype.createMIP=function(oVertex,sMIPName,sExpr,oPN,oContext){return _createMIP(this,oVertex,sMIPName,sExpr,oPN,oContext);};Model.prototype._testForReady=function(){testForReady(this);};Model.prototype.setElementLoaded=function(){this.elementLoaded=true;return;};Model.prototype.applyChildBindConstraints=function(parent){var i;for(i=0;i<parent.childNodes.length;++i){if(NamespaceManager.compareFullName(parent.childNodes[i],"bind","http://www.w3.org/2002/xforms")){this.applyBindConstraint(parent.childNodes[i]);this.applyChildBindConstraints(parent.childNodes[i]);}}};Model.prototype.applyBindConstraint=function(bind){if(bind.m_proxy){if(bind.m_proxy.constraint){bind.m_proxy.constraint.update();}
if(bind.m_proxy.required&&typeof bind.m_proxy.required.update==="function"){bind.m_proxy.required.update();}}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../UXUtils.js

if(UX.isXHTML){document.nativeGetElementById=document.getElementById;document.getElementById=function(sID){var oElement=document.nativeGetElementById(sID);if(oElement===null){var oRes=xpathDomEval('//*[@id="'+sID+'"]',document.documentElement);oElement=(oRes&&oRes.nodeSetValue()&&oRes.nodeSetValue()[0])?oRes.nodeSetValue()[0]:null;}
return oElement;};}
(function(){function insertAdjacentElement(where,parsedNode)
{switch(where)
{case'beforeBegin':this.parentNode.insertBefore(parsedNode,this);break;case'afterBegin':this.insertBefore(parsedNode,this.firstChild);break;case'beforeEnd':this.appendChild(parsedNode);break;case'afterEnd':if(this.nextSibling)
{this.parentNode.insertBefore(parsedNode,this.nextSibling);}
else
{this.parentNode.appendChild(parsedNode);}
break;}}
function insertAdjacentHTML(where,htmlStr)
{var r=this.ownerDocument.createRange();r.setStartBefore(this);var parsedHTML=r.createContextualFragment(htmlStr);this.insertAdjacentElement(where,parsedHTML);}
function insertAdjacentText(where,txtStr)
{var parsedText=document.createTextNode(txtStr);this.insertAdjacentElement(where,parsedText);}
function contains(o){var parent=o;var retval=false;while(parent){if(parent===this){retval=true;break;}
else{parent=parent.parentNode;}}
return retval;}
if(typeof HTMLElement!="undefined"){HTMLElement.prototype.insertAdjacentElement=HTMLElement.prototype.insertAdjacentElement||insertAdjacentElement;HTMLElement.prototype.insertAdjacentText=HTMLElement.prototype.insertAdjacentText||insertAdjacentText;HTMLElement.prototype.insertAdjacentHTML=HTMLElement.prototype.insertAdjacentHTML||insertAdjacentHTML;HTMLElement.prototype.contains=HTMLElement.prototype.contains||contains;}
if(typeof Element!="undefined"&&!Element.prototype.insertAdjacentElement)
{Element.prototype.insertAdjacentElement=Element.prototype.insertAdjacentElement||insertAdjacentElement;Element.prototype.insertAdjacentText=Element.prototype.insertAdjacentText||insertAdjacentText;Element.prototype.insertAdjacentHTML=Element.prototype.insertAdjacentHTML||insertAdjacentHTML;Element.prototype.contains=Element.prototype.contains||contains;}})();UX.addClassName=function(oElement,classString){if(UX.isXHTML&&oElement.className===""){oElement.className=oElement.getAttribute("class");}
YAHOO.util.Dom.addClass(oElement,classString);if(UX.isXHTML&&oElement.setAttribute){oElement.setAttribute("class",oElement.className);}};UX.removeClassName=function(oElement,classString){YAHOO.util.Dom.removeClass(oElement,classString);if(UX.isXHTML&&oElement.setAttribute){oElement.setAttribute("class",oElement.className);}};UX.replaceClassName=function(oElement,oldClassString,newClassString){YAHOO.util.Dom.replaceClass(oElement,oldClassString,newClassString);if(UX.isXHTML&&oElement.setAttribute){oElement.setAttribute("class",oElement.className);}};if(typeof Element!="undefined"&&!Element.prototype.className){Element.prototype.className="";}
UX.addStyle=function(oElement,styleName,value){var stylesheet,selector;if(oElement.style){oElement.style[styleName]=value;}else{if(UX.isXHTML){if(document.defaultView.getComputedStyle(oElement,null)[styleName]!==value){stylesheet=oElement.ownerDocument.styleSheets[0];try{stylesheet.insertRule("@namespace "+oElement.prefix+" url(http://www.w3.org/2002/xforms);",0);selector=UX.id(oElement)?('[id="'+UX.id(oElement)+'"]'):"";stylesheet.insertRule(oElement.prefix+"|"+oElement.localName+selector+" {"+styleName+":"+value+";}",(stylesheet.cssRules.length===0)?1:stylesheet.cssRules.length);}catch(e){document.logger.log("INFO: Couldn't set style "+styleName+" to "+value);}}}}};UX.getStyle=function(oElement,styleName){var style=null;var match=null;var result=null;if(oElement.style){return oElement.style[styleName];}else if(UX.isXHTML){style=oElement.getAttribute("style");if(style){match=new RegExp("(?:(?:^|;)\\s*"+styleName+"\\s*:\\s*)(\\w+)(?:\\s*;|$)");result=match.exec(style);if(result&&result[1]){return result[1];}}
return document.defaultView.getComputedStyle(oElement,null)[styleName];}};UX.getPropertyValue=function(pThis,type){var aChildNode=NamespaceManager.getElementsByTagNameNS(pThis.element,"http://www.w3.org/2002/xforms",type)[0];return(aChildNode)?getElementValueOrContent(_getEvaluationContext(pThis),aChildNode):pThis.element.getAttribute(type);};UX.dispatchEvent=function(oTarget,sEventName,bBubble,bCancel,bSpawn){var oEvent=document.createEvent("Events");oEvent.initEvent(sEventName,bBubble,bCancel);if(bSpawn){spawn(function(){FormsProcessor.dispatchEvent(oTarget,oEvent);});}else{FormsProcessor.dispatchEvent(oTarget,oEvent);}};UX.createElementNS=function(oNode,sNamespaceURI,sQualifiedName){var oElement=null;var sPrefix=null;var oDocument=oNode?oNode.ownerDocument:document;var oPrefixes=null;if(UX.isXHTML){oElement=oDocument.createElementNS(sNamespaceURI,sQualifiedName);}else{oPrefixes=NamespaceManager.getOutputPrefixesFromURI(sNamespaceURI);if(oPrefixes&&oPrefixes.length>0){sPrefix=oPrefixes[0];}else if(sNamespaceURI==="http://www.w3.org/2002/xforms"){sPrefix="xf";}
oElement=oDocument.createElement(sPrefix+":"+sQualifiedName);}
return oElement;};UX.focusFirstEligibleChild=function(childNodes){var i;for(i=0;i<childNodes.length;++i){if(this.focusTree(childNodes.item(i))){return true;}}
return false;};UX.focusTree=function(node){if(typeof node.giveFocus==="function"){return node.giveFocus();}
return this.focusFirstEligibleChild(node.childNodes);};UX.global=this;UX.isArrayLike=function(o){return(typeof(o.push)==='function'&&typeof(o.shift)==='function'&&typeof(o.length)==='number');};UX.type=function(o){return(o&&UX.isArrayLike(o))?'array':typeof(o);};(function(){var forwards=function(o){return o.nextSibling;},backwards=function(o){return o.previousSibling;},getEndNodeByName=function(searchWithin,name,namespace,direction){var newCandidateNode=null,candidateNode;if(direction===forwards){candidateNode=searchWithin.firstChild;}else{candidateNode=searchWithin.lastChild;}
while(candidateNode&&!NamespaceManager.compareFullName(candidateNode,name,namespace)){if(candidateNode.hasChildNodes){newCandidateNode=getEndNodeByName(candidateNode,name,namespace,direction);if(newCandidateNode){candidateNode=newCandidateNode;break;}}
candidateNode=direction(candidateNode);}
return candidateNode;},getNearestAncestralSibling=function(referenceNode,directionFunction,commonAncestor){var candidateAncestralSibling=null,candidateAncestor=referenceNode.parentNode;while(!candidateAncestralSibling&&candidateAncestor&&candidateAncestor!==commonAncestor){candidateAncestralSibling=directionFunction(candidateAncestor);candidateAncestor=candidateAncestor.parentNode;}
return candidateAncestralSibling;},getNearestNodeByName=function(referenceNode,name,namespace,searchWithin,directionFunction){var newCandidateNode=null,candidateNode=directionFunction(referenceNode);if(!candidateNode){candidateNode=getNearestAncestralSibling(referenceNode,directionFunction,searchWithin);}
while(candidateNode&&!NamespaceManager.compareFullName(candidateNode,name,namespace)){if(candidateNode.hasChildNodes){newCandidateNode=getEndNodeByName(candidateNode,name,namespace,directionFunction);if(newCandidateNode){candidateNode=newCandidateNode;break;}}
newCandidateNode=directionFunction(candidateNode);if(newCandidateNode){candidateNode=newCandidateNode;}else{candidateNode=getNearestAncestralSibling(candidateNode,directionFunction,searchWithin);}}
return candidateNode;};UX.getNextNodeByName=function(referenceNode,name,namespace,constrainingAncestor){return getNearestNodeByName(referenceNode,name,namespace,constrainingAncestor,forwards);};UX.getPreviousNodeByName=function(referenceNode,name,namespace,constrainingAncestor){return getNearestNodeByName(referenceNode,name,namespace,constrainingAncestor,backwards);};UX.getFirstNodeByName=function(searchWithin,name,namespace){return getEndNodeByName(searchWithin,name,namespace,forwards);};}());UX.isNodeReadonly=function(oNode){return(oNode&&oNode.m_proxy&&oNode.m_proxy.readonly&&oNode.m_proxy.readonly.getValue());};UX.isEquivalentNode=function(lhs,rhs){return xmlText(lhs)===xmlText(rhs);};UX.isArray=function(v){return(v&&typeof v==="object"&&typeof v.length==="number"&&typeof v.splice==="function"&&!v.propertyIsEnumerable("length"));};UX.beget=function(o){function Constructor(){};Constructor.prototype=o;return new Constructor();}
UX.id=function(oElement){return(UX.isXHTML?(oElement&&typeof oElement.getAttribute==='function'?oElement.getAttribute("id"):undefined):(oElement?oElement.id:undefined));}
UX.JsBooleanFromXsdBoolean=function(fromValue,defaultValue){var toValue={"true":true,"1":true,"false":false,"0":false}[fromValue];return(toValue!==undefined)?toValue:((defaultValue!==undefined)?UX.JsBooleanFromXsdBoolean(defaultValue):undefined);};UX.cancelHTMLEvent=function(evt){evt.cancelBubble=true;evt.returnValue=false;if(typeof evt.preventDefault==='function'){evt.preventDefault();}
if(typeof evt.stopPropagation==='function'){evt.stopPropagation();}
return false;};UX.isHTMLTabKeyEvent=function(keyEvent){return UX.isTabKeyCode(UX.getHTMLKeyEventCode(keyEvent));};UX.isShiftKeyPressed=function(keyEvent){return keyEvent.shiftKey||keyEvent.shiftLeft;};UX.isControlKeyPressed=function(keyEvent){return keyEvent.ctrlKey||keyEvent.ctrlLeft;};UX.isAltKeyPressed=function(keyEvent){return keyEvent.altKey||keyEvent.altLeft;};UX.isMetaKeyPressed=function(keyEvent){return keyEvent.metaKey;};UX.getHTMLEvent=function(eventArgument){return eventArgument||window.event;};UX.getHTMLKeyEventCode=function(keyEvent){return keyEvent.keyCode||keyEvent.which||keyEvent.charCode;};UX.isTabKeyCode=function(keyCode){return UX.getTabKeyCode()===keyCode;};UX.getTabKeyCode=function(){return 9;};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/navigable-control-list.js

function NavigableControlList(){this.orderedList=[];this.keyedMap=[];}
NavigableControlList.prototype.addControl=function(control){if(this.isNavigableControl(control)){this.addControlToOrderedList(control);this.addControlToKeyedMap(control);}};NavigableControlList.prototype.addControlToOrderedList=function(control){this.prepareListItem(control);this.orderedList[control.navIndex].push(control);};NavigableControlList.prototype.addControlToKeyedMap=function(control){if(typeof control.accessKey==='string'&&control.accessKey!==''){this.keyedMap[control.accessKey.toUpperCase()]=control;}};NavigableControlList.prototype.getFirstControl=function(){return this.getFirstControlAtIndex(1)||this.getFirstControlAfterIndex(1);};NavigableControlList.prototype.getLastControl=function(){return this.getLastControlAtIndex(0)||this.getLastControlBeforeIndex(this.orderedList.length);};NavigableControlList.prototype.getNextControl=function(control){if(this.isNavigableControl(control)&&this.hasListItem(control.navIndex)){return this.getNextControlAtSameIndex(control)||this.getFirstControlAfterIndex(control.navIndex);}
return null;};NavigableControlList.prototype.getPreviousControl=function(control){if(this.isNavigableControl(control)&&this.hasListItem(control.navIndex)){return this.getPreviousControlAtSameIndex(control)||this.getLastControlBeforeIndex(control.navIndex);}
return null;};NavigableControlList.prototype.getControlByAccessKey=function(accessKey){return this.keyedMap[String.fromCharCode(accessKey)]||null;};NavigableControlList.prototype.isNavigableControl=function(control){return typeof control==='object'&&control&&control.isNavigableControl&&typeof control.navIndex==='number';};NavigableControlList.prototype.prepareListItem=function(control){if(!this.hasListItem(control.navIndex)){this.orderedList[control.navIndex]=[];}};NavigableControlList.prototype.hasListItem=function(index){return this.orderedList[index]?true:false;};NavigableControlList.prototype.getNextControlAtSameIndex=function(control){var foundControl=false,nextControl;for(var i=0;i<this.orderedList[control.navIndex].length;++i){if(foundControl){nextControl=this.orderedList[control.navIndex][i];if(nextControl.isEnabled()){return nextControl;}}
foundControl=control===this.orderedList[control.navIndex][i];}
return null;};NavigableControlList.prototype.getPreviousControlAtSameIndex=function(control){var foundControl=false,previousControl;for(var i=this.orderedList[control.navIndex].length;i>=0;--i){if(foundControl){previousControl=this.orderedList[control.navIndex][i];if(previousControl.isEnabled()){return previousControl;}}
foundControl=control===this.orderedList[control.navIndex][i];}
return null;};NavigableControlList.prototype.getFirstControlAfterIndex=function(index){var i,control;for(i=this.incrementIndex(index);i<this.orderedList.length;i=this.incrementIndex(i)){control=this.getFirstControlAtIndex(i);if(control){if(control.isEnabled()){return control;}
control=this.getNextControlAtSameIndex(control);if(control){return control;}}}
return null;};NavigableControlList.prototype.getLastControlBeforeIndex=function(index){var i,control;for(i=this.decrementIndex(index);i>=0;i=this.decrementIndex(i)){control=this.getLastControlAtIndex(i);if(control){if(control.isEnabled()){return control;}
control=this.getPreviousControlAtSameIndex(control);if(control){return control;}}}
return null;};NavigableControlList.prototype.incrementIndex=function(index){return index===0?this.orderedList.length:(index>=this.orderedList.length-1?0:index+1);};NavigableControlList.prototype.decrementIndex=function(index){return index===0?this.orderedList.length-1:(index===1?-1:index-1);};NavigableControlList.prototype.getFirstControlAtIndex=function(index){var i;if(this.hasListItem(index)){for(i=0;i<this.orderedList[index].length;++i){if(this.orderedList[index][i].isEnabled()){return this.orderedList[index][i];}}}
return null;};NavigableControlList.prototype.getLastControlAtIndex=function(index){var i;if(this.hasListItem(index)){for(i=this.orderedList[index].length-1;i>=0;--i){if(this.orderedList[index][i].isEnabled()){return this.orderedList[index][i];}}}
return null;};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/xforms.js

function getModelFor(oNode){var models,oBind,sBindId,sModelId,oMightBeAModel;if(!oNode||oNode.nodeType===9){if(!document.defaultModel){models=NamespaceManager.getElementsByTagNameNS(document,"http://www.w3.org/2002/xforms","model");if(models&&models.length>0){document.defaultModel=models[0];}}
return document.defaultModel;}
if(oNode.nodeType===11){return null;}
if(oNode.ownerModel){return oNode.ownerModel;}
sBindId=oNode.getAttribute("bind");if(sBindId){oBind=FormsProcessor.getBindObject(sBindId,oNode);if(oBind){oNode.ownerModel=getModelFor(oBind);}
return oNode.ownerModel;}
sModelId=oNode.getAttribute("model");if(sModelId){oMightBeAModel=document.getElementById(sModelId);if(oMightBeAModel&&(oMightBeAModel.xformselement==="model")){oNode.ownerModel=oMightBeAModel;}else{UX.dispatchEvent(oNode,"xforms-binding-exception",false,true,true);}
return oNode.ownerModel;}
if(oNode.tagName==="bind"&&oNode.parentNode.xformselement==="model"){oNode.ownerModel=oNode.parentNode;}else{oNode.ownerModel=getModelFor(oNode.parentNode);}
return oNode.ownerModel;}
var g_DeferredUpdateDepth=0;function doUpdate(){var ns,len,m,i;ns=NamespaceManager.getElementsByTagNameNS(document,"http://www.w3.org/2002/xforms","model");len=ns.length;var storedUpdateDepth=g_DeferredUpdateDepth;g_DeferredUpdateDepth=0;for(i=0;i<len;++i){m=ns[i];try{if(m.m_bReady){_deferredUpdate(m);}}catch(e){debugger;}}
g_DeferredUpdateDepth=storedUpdateDepth;}
function IncrementDeferredUpdate(){++g_DeferredUpdateDepth;}
function DecrementDeferredUpdate(){if(!--g_DeferredUpdateDepth){doUpdate();}}
function XFormsProcessor(){this.defaultHandlers={};this.eventStack=[];this.hintOffCounter=0;this.supportedVersions=["1.1"];this.halted=false;this.navigationList=new NavigableControlList();this.listenForKeyDownEvent();}
XFormsProcessor.prototype.find=function(array,value){var i;if(!array||!value){return false;}
for(i=0;i<array.length;i++){if(array[i]===value){return true;}}
return false;};XFormsProcessor.prototype.getBindObject=function(bindid,notifyOnException){var bindObject=null,notifyOnException=notifyOnException||document.defaultModel;if(bindid){bindObject=document.getElementById(bindid);if(!bindObject||!NamespaceManager.compareFullName(bindObject,"bind","http://www.w3.org/2002/xforms")){bindObject=null;if(notifyOnException){UX.dispatchEvent(notifyOnException,"xforms-binding-exception",true,false,false);}
this.halted=true;}}
return bindObject;};XFormsProcessor.prototype.setVersion=function(){var defaultModelVersions,i,maxPos;if(!this.version){if(!document.defaultModel){if(!getModelFor(null)){return;}}
defaultModelVersions=(document.defaultModel.getAttribute("version")||"").split(" ");maxPos=-1;for(i=0;i<this.supportedVersions.length;i++){if(defaultModelVersions.length===1&&defaultModelVersions[0].length===0||this.find(defaultModelVersions,this.supportedVersions[i])){if(maxPos===-1||Number(this.supportedVersions[i])>Number(this.supportedVersions[maxPos])){maxPos=i;}}}
if(maxPos>=0){this.version=this.supportedVersions[maxPos];}}};XFormsProcessor.prototype.testModelVersion=function(pModel){var evt,desiredVersion,exceptionMsg;if(this.halted){return false;}
if(!this.version){this.setVersion();if(!this.version){exceptionMsg="Error in default model version";pModel=document.defaultModel||pModel;}}
desiredVersion=pModel.getAttribute("version")||"";if(desiredVersion.length===0&&this.version){return true;}
if(this.find(desiredVersion.split(" "),this.version)){return true;}else if(this.version){exceptionMsg="Unsupported version for model "+(pModel.getAttribute("id")||"");}
evt=document.createEvent("Events");evt.initEvent("xforms-version-exception",true,false);evt.context={"error-information":exceptionMsg||""};FormsProcessor.dispatchEvent(document.defaultModel||pModel,evt);return false;};XFormsProcessor.prototype.inheritTrue=function(sMIP,oNode){var retval,nodeProxy,parentProxy;nodeProxy=getProxyNode(oNode);retval=nodeProxy.getMIP(sMIP).value;if(retval===undefined&&oNode.parentNode){parentProxy=getProxyNode(oNode.parentNode);if(parentProxy[sMIP].getValue()){retval=true;}}
return retval;};XFormsProcessor.prototype.inheritFalse=function(sMIP,oNode){var retval,nodeProxy,parentProxy;nodeProxy=getProxyNode(oNode);retval=nodeProxy.getMIP(sMIP).value;if(retval&&oNode.parentNode){parentProxy=getProxyNode(oNode.parentNode);if(!parentProxy[sMIP].getValue()){retval=false;}}
return retval;};XFormsProcessor.prototype.addDefaultEventListener=function(oTarget,sType,oListener){if(!oTarget.uniqueID){oTarget.uniqueID="uuid:"+Math.random()+Math.random();}
if(!this.defaultHandlers[oTarget.uniqueID]){this.defaultHandlers[oTarget.uniqueID]={};}
if(!this.defaultHandlers[oTarget.uniqueID][sType]){this.defaultHandlers[oTarget.uniqueID][sType]=[];}
this.defaultHandlers[oTarget.uniqueID][sType].push(oListener);};XFormsProcessor.prototype.removeDefaultEventListener=function(oTarget,sType,oListener){var arrHandlers,i;if(this.defaultHandlers[oTarget.uniqueID]){arrHandlers=this.defaultHandlers[oTarget.uniqueID][sType];if(arrHandlers){for(i=0;i<arrHandlers.length;i++){if(arrHandlers[i]===oListener){arrHandlers[i]=null;}}}}};XFormsProcessor.prototype.addDefaultEventListenerFor=function(target,event,scopeParam,methodName){this.addDefaultEventListener(target,event,{scope:scopeParam,handleEvent:function(){this.scope[methodName]();}});};XFormsProcessor.prototype.dispatchEvent=function(oTarget,oEvent,bForceInlineExecution){var eventExecuted=false;try{IncrementDeferredUpdate();this.eventStack.push(oEvent);eventExecuted=oTarget.dispatchEvent(oEvent);if(eventExecuted){this.invokeDefault(oTarget,oEvent);this.eventStack.pop();}}catch(e){}finally{DecrementDeferredUpdate();}};XFormsProcessor.prototype.invokeDefault=function(oTarget,e){var arrListeners,i;if(this.defaultHandlers[oTarget.uniqueID]){arrListeners=this.defaultHandlers[oTarget.uniqueID][e.type];if(arrListeners){for(i=0;i<arrListeners.length;++i){if(arrListeners[i]){arrListeners[i].handleEvent(e);}}}}};XFormsProcessor.prototype.getCurrentEvent=function(){var ret=null;if(this.eventStack){ret=this.eventStack[this.eventStack.length-1];}
return ret;};XFormsProcessor.prototype.listenForXFormsFocus=function(target,listener){target.addEventListener("xforms-focus",{handleEvent:function(evt){listener.giveFocus();}},false);};(function(){var ELEMENT_TYPE=1,chooseDescendentFromList,walkGetElementById,getContainingInnerScope;chooseDescendentFromList=function(list,ancestor){var i;for(i=0;i<list.length;++i){if(ancestor.contains(list[i])){return list[i];}}
return null;};walkGetElementById=function(id,scope){var scopeChild=scope.firstChild,returnCandidate=null;while(scopeChild&&!returnCandidate){if(scopeChild.nodeType===ELEMENT_TYPE&&!scopeChild.ignoreOnWalk){if(UX.id(scopeChild)===id){returnCandidate=scopeChild;}else{returnCandidate=walkGetElementById(id,scopeChild);}}
scopeChild=scopeChild.nextSibling;}
return returnCandidate;};getContainingInnerScope=function(element,outerScope){var candidateScopeContainer=element.parentNode;while(candidateScopeContainer.parentNode){if(candidateScopeContainer.outerScope&&(!outerScope||outerScope===candidateScopeContainer.outerScope)){return candidateScopeContainer;}
candidateScopeContainer=candidateScopeContainer.parentNode;}
return null;};XFormsProcessor.prototype.getElementById=function(id,topic){var returnCandidate,candidateScope;returnCandidate=document.getElementById(id);if(returnCandidate){candidateScope=getContainingInnerScope(returnCandidate);if(candidateScope){if(topic&&candidateScope.outerScope.contains(topic)){returnCandidate=this.getElementByIdWithAncestor(id,getContainingInnerScope(topic,candidateScope.outerScope));}else if(!candidateScope.outerScope.exposes(returnCandidate)){returnCandidate=candidateScope.outerScope.getPublicElementById(id);}}}
return returnCandidate;};XFormsProcessor.prototype.getElementByIdWithAncestor=function(id,ancestorOrSelf){var returnCandidate,candidateScope;if(ancestorOrSelf&&UX.id(ancestorOrSelf)===id){returnCandidate=ancestorOrSelf;}else{returnCandidate=document.getElementById(id);if(returnCandidate){if(ancestorOrSelf&&!ancestorOrSelf.contains(returnCandidate)){if(UX.isIE){returnCandidate=chooseDescendentFromList(document.getElementsByName(id),ancestorOrSelf);}else{returnCandidate=walkGetElementById(id,ancestorOrSelf);}}}}
return returnCandidate;};}());XFormsProcessor.prototype.hasProxyNode=function(element){return element&&element.m_proxy&&element.m_proxy.m_oNode;};XFormsProcessor.prototype.getProxyNode=function(element){if(this.hasProxyNode(element)){return element.m_proxy;}
return null;};XFormsProcessor.prototype.visitDescendents=function(nodes,visit){var i;for(i=0;i<nodes.length;++i){this.visitDescendents(nodes[i].childNodes,visit);visit(nodes[i]);}};XFormsProcessor.prototype.refreshDescendents=function(nodes){this.visitDescendents(nodes,function(n){if(typeof n.refresh==="function"){n.refresh();}});};XFormsProcessor.prototype.refreshDescendentsForRelevance=function(nodes){this.visitDescendents(nodes,function(n){if(n.dirtyState&&typeof n.refresh==="function"){n.dirtyState.setDirty("enabled");n.refresh();}});};XFormsProcessor.prototype.addToNavigationList=function(control){this.navigationList.addControl(control);};XFormsProcessor.prototype.listenForKeyDownEvent=function(){var self=this;document.onkeydown=function(evt){self.onKeyDown(UX.getHTMLEvent(evt));};};XFormsProcessor.prototype.onKeyDown=function(evt){if(UX.isHTMLTabKeyEvent(evt)){if(UX.isShiftKeyPressed(evt)){this.navigateToLastControl();}else{this.navigateToFirstControl();}
return UX.cancelHTMLEvent(evt);}else if(this.isAccessKeyEvent(evt)&&this.navigateToKeyedControl(UX.getHTMLKeyEventCode(evt))){return UX.cancelHTMLEvent(evt);}
return true;};XFormsProcessor.prototype.navigateToFirstControl=function(){this.focusControl(this.navigationList.getFirstControl());};XFormsProcessor.prototype.navigateToLastControl=function(){this.focusControl(this.navigationList.getLastControl());};XFormsProcessor.prototype.navigateToNextControl=function(control){this.focusControl(this.navigationList.getNextControl(control)||this.navigationList.getFirstControl());};XFormsProcessor.prototype.navigateToPreviousControl=function(control){this.focusControl(this.navigationList.getPreviousControl(control)||this.navigationList.getLastControl());};XFormsProcessor.prototype.navigateToKeyedControl=function(accessKey){var control=this.navigationList.getControlByAccessKey(accessKey);if(control){this.focusControl(control);return true;}
return false;};XFormsProcessor.prototype.focusControl=function(control){if(control){if(typeof control.giveFocus==='function'){control.giveFocus();}else{control.focus();}}};XFormsProcessor.prototype.isAccessKeyEvent=function(keyEvent){return UX.isAltKeyPressed(keyEvent);};var FormsProcessor=new XFormsProcessor();var flushEventQueue=function(){var oPendingEvent=g_pendingEvents.pop();while(oPendingEvent){FormsProcessor.dispatchEvent(oPendingEvent.target,oPendingEvent.evt,true);oPendingEvent=g_pendingEvents.pop();}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/conditional-invocation.js

var ActionExecutor=function(){function evaluateCondition(sCondition,oContext){var oRes,bIf;bIf=false;if(oContext){oRes=oContext.model.EvaluateXPath(sCondition,oContext);if(oRes){bIf=oRes.booleanValue();}}
return bIf;}
function evaluateIfCondition(oListener,oContext){var bIf=true;if(oListener.getAttribute("if")){bIf=evaluateCondition(oListener.getAttribute("if"),oContext);}
return bIf;}
var itself={};itself.invokeListener=function(oListener,oEvt){var oRealListener,oContext,oRes,i,sIf,sWhile;oRealListener=oListener.realListener?oListener.realListener:oListener;if(typeof oRealListener.getEvaluationContext!=="undefined"){if(oRealListener.getAttribute("iterate")){oContext=oRealListener.getEvaluationContext();oRes=oContext.model.EvaluateXPath(oRealListener.getAttribute("iterate"),oContext);if(oRes&&oRes.value){for(i=0;i<oRes.value.length;++i){oRealListener.unwire();oRealListener.m_context={model:oContext.model,node:oRes.value[i],resolverElement:oRealListener.element,position:i,size:oRes.value.length};if(evaluateIfCondition(oRealListener,oRealListener.m_context)){if(oRealListener.getAttribute("while")){while(evaluateCondition(oRealListener.getAttribute("while"),oRealListener.m_context)&&evaluateIfCondition(oRealListener,oContext)){oListener.handleEvent(oEvt);}}else{oListener.handleEvent(oEvt);}}}}}else{sIf=oRealListener.getAttribute("if");sWhile=oRealListener.getAttribute("while");if(sIf||sWhile){oContext=oRealListener.getEvaluationContext();if(evaluateIfCondition(oRealListener,oContext)){if(oRealListener.getAttribute("while")){while(evaluateCondition(oRealListener.getAttribute("while"),oContext)&&evaluateIfCondition(oRealListener,oContext)){oListener.handleEvent(oEvt);oContext=oRealListener.getEvaluationContext();}}else{oListener.handleEvent(oEvt);}}}else{oListener.handleEvent(oEvt);}}}
else{oListener.handleEvent(oEvt);}
return;};return itself;}();
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/validator.js

function isValidEmail(sEmail){return(sEmail.match(/^([A-Za-z0-9!#-'\*\+\-\/=\?\^_`\{-~]+(\.[A-Za-z0-9!#-'\*\+\-\/=\?\^_`\{-~]+)*@[A-Za-z0-9!#-'\*\+\-\/=\?\^_`\{-~]+(\.[A-Za-z0-9!#-'\*\+\-\/=\?\^_`\{-~]+)*)?$/)?true:false);}
function isValidCardNumber(sNum){return(sNum.match(/^\d*[0-9]?$/)&&sNum.length>=12&&sNum.length<=19?true:false);}
function isValidDateTime(sDateTime){return(sDateTime.match(/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}T[0-9]{2}\:[0-9]{2}\:[0-9]{2}$/)||sDateTime.match(/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}T[0-9]{2}\:[0-9]{2}\:[0-9]{2}Z$/)||sDateTime.match(/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}T[0-9]{2}\:[0-9]{2}\:[0-9]{2}[+-][0-9]{2}\:[0-9]{2}$/)?true:false);}
function isValidTime(sTime){return(sTime.match(/^[0-9]{2}\:[0-9]{2}\:[0-9]{2}$/)||sTime.match(/^[0-9]{2}\:[0-9]{2}\:[0-9]{2}[+-][0-9]{2}\:[0-9]{2}$/)?true:false);}
function isValidDate(sDate){return(sDate.match(/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}$/)||sDate.match(/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}[+-][0-9]{2}\:[0-9]{2}$/)?true:false);}
function isValidGYearMonth(sGYearMonth){return(sGYearMonth.match(/^[0-9]{4}\-[0-9]{2}$/)?true:false);}
function isValidGYear(sGYear){return(sGYear.match(/^[0-9]{4}$/)?true:false);}
function isValidGMonthDay(sGMonthDay){return(sGMonthDay.match(/^\-\-[0-9]{2}\-[0-9]{2}$/)?true:false);}
function isValidGDay(sGDay){return(sGDay.match(/^\-\-\-[0-9]{2}$/)?true:false);}
function isValidGMonth(sGMonth){return(sGMonth.match(/^\-\-[0-9]{2}$/)?true:false);}
function isValidBase64Binary(sBase64){return(sBase64.match(/^[a-zA-Z0-9\+\/\=]+$/)?true:false);}
function isValidHexBinary(sHexBinary){return(sHexBinary.match(/^[0-9a-fA-F]+$/)?true:false);}
function isValidNCName(sNCName){return(sNCName.match(/^[_a-zA-Z][\w\.\-]*$/i)?true:false);}
function isValidAnyURI(sURI){var i,c,match,encodedURI="";for(i=0;i<sURI.length;i++){c=sURI.charCodeAt(i);if(((c>=0&&c<=31)||c===127)||(c===32)||(c===34)||(c===60)||(c===62)||(c===91)||(c===92)||(c===93)||(c===94)||(c===96)||(c===123)||(c===124)||(c===125)||(c>127)){encodedURI+=(encodeURIComponent(String.fromCharCode(c)));}else{encodedURI+=(String.fromCharCode(c));}}
match=encodedURI.match(/^(([^:\/?#]+):)?(\/\/([^\/\?#]*))?([^\?#]*)(\?([^#]*))?(#([^\:#\[\]\@\!\$\&\\'\(\)\*\+\,\;\=]*))?$/);return match?_isValidAnyURI(match[0]):false;}
function _isValidAnyURI(sURI){var ixPercent,s;ixPercent=sURI.indexOf("%");while(ixPercent!==-1){s=sURI.substr(ixPercent);if(s.length<3||!s.substr(ixPercent+1,2).match(/^[0-9a-fA-F]$/)){return false;}
s=s.substr(ixPercent+3);ixPercent=s.indexOf("%");}
return true;}
function isValidQName(sQName){var arrSegments,prefix,localPart;arrSegments=sQName.split(":");prefix=arrSegments.length===1?"":arrSegments[0];localPart=arrSegments.length===1?arrSegments[0]:arrSegments[1];return prefix?isValidNCName(prefix)&&isValidNCName(localPart):isValidNCName(localPart);}
function isInfinityOrNaN(sValue){return(sValue==='INF'||sValue==='-INF'||sValue==='NaN');}
function isValidBoolean(sBoolean){return(sBoolean==="true"||sBoolean==="false"||sBoolean==="1"||sBoolean==="0");}
function isValidInteger(sInteger){return(sInteger.match(/^[-+]?[0-9]+$/)?true:false);}
function isValidPositiveInteger(sInteger){return(sInteger.match(/^[+]?[1-9]+[0-9]*$/)?true:false);}
function isValidFloat(sFloat){if(isInfinityOrNaN(sFloat)){return true;}else{return(sFloat.match(/^[-+]?0*[1-9]?[0-9]*([\.]{1}[0-9]+)?([eE]{1}[-+]?[0-9]+)?$/)?true:false);}}
function isValidDouble(sDouble){return isValidFloat(sDouble);}
function isValidDecimal(sDecimal){return(sDecimal.match(/^[-+]?0*[1-9]?[0-9]*([\.]{1}[0-9]+)?$/)?true:false);}
function isValidNormalizedString(sString){return(sString.match(/^[^\n\r\t\s]+$/)?true:false);}
function isValidListItems(sList){var arrSegments,i;arrSegments=sList.split(" ");for(i=0;i<arrSegments.length;i++){if(!isValidNormalizedString(arrSegments[i])){return false;}}
return true;}
function isValidToken(sToken){var ixSpace;if(sToken.charAt(0)===" "||sToken.charAt(sToken.length-1)===" "||sToken.match(/^[\s]{2,}$/)){return false;}
return isValidNormalizedString(sToken);}
function isValidLanguage(sLanguage){return(sLanguage.match(/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/)?true:false);}
function isValidName(sName){return(sName.match(/^[a-zA-Z\_\:][a-zA-Z0-9.\-\_\:]*$/i)?true:false);}
function isValidIDREFS(sIDREFS){var arrSegments,i;arrSegments=sIDREFS.split(" ");for(i=0;i<arrSegments.length;i++){if(!isValidNCName(arrSegments[i])){return false;}}
return true;}
function isValidNMTOKEN(sNMTOKEN){return(sNMTOKEN.match(/^[a-zA-Z0-9\.\-\_\:]+$/)?true:false);}
function isValidNMTOKENS(sNMTOKENS){var arrSegments,i;arrSegments=sNMTOKENS.split(" ");for(i=0;i<arrSegments.length;i++){if(!isValidNMTOKEN(arrSegments[i])){return false;}}
return true;}
function isValidNonPositiveInteger(sInteger){return(sInteger.match(/^[-]{1}[0-9]+$/)||sInteger.match(/^[+]?0$/)?true:false);}
function isValidNegativeInteger(sInteger){return(sInteger.match(/^[-]{1}[0-9]+$/)?true:false);}
function isValidLong(sLong){var match,value;match=sLong.match(/^[+-]?[0-9]+$/);if(match){value=Number(match[0]);if(value>=-9223372036854775808&&value<=9223372036854775807){return true;}}
return false;}
function isValidInt(sInt){var match,value;match=sInt.match(/^[+-]?[0-9]+$/);if(match){value=Number(match[0]);if(value>=-2147483648&&value<=2147483647){return true;}}
return false;}
function isValidShort(sShort){var match,value;match=sShort.match(/^[+-]?[0-9]+$/);if(match){value=Number(match[0]);if(value>=-32768&&value<=32767){return true;}}
return false;}
function isValidByte(sByte){var match,value;match=sByte.match(/^[+-]?[0-9]+$/);if(match){value=Number(match[0]);if(value>=-128&&value<=127){return true;}}
return false;}
function isValidNonNegativeInteger(sInteger){return(sInteger.match(/^[+]?[0-9]+$/)||sInteger.match(/^[+-]?0$/)?true:false);}
function isValidUnsignedLong(sULong){var match,value;match=sULong.match(/^[0-9]+$/);if(match){value=Number(match[0]);if(value>=0&&value<=18446744073709551615){return true;}}
return false;}
function isValidUnsignedInt(sUInt){var match,value;match=sUInt.match(/^[0-9]+$/);if(match){value=Number(match[0]);if(value>=0&&value<=4294967295){return true;}}
return false;}
function isValidUnsignedShort(sUShort){var match,value;match=sUShort.match(/^[0-9]+$/);if(match){value=Number(match[0]);if(value>=0&&value<=65535){return true;}}
return false;}
function isValidUnsignedByte(sUByte){var match,value;match=sUByte.match(/^[0-9]+$/);if(match){value=Number(match[0]);if(value>=0&&value<=255){return true;}}
return false;}
function evalXPathFunc(func,args,ctx){var funcName=new StringValue(func);var argToken=null;var ret=new FunctionCallExpr(funcName);for(var i=0;i<args.length;++i){argToken=new TokenExpr(args[i]);ret.appendArg(argToken);}
return ret.evaluate(ctx);}
var xformsRules={namespace:"http://www.w3.org/2002/xforms",rules:{"dateTime":{validate:function(sValue){return sValue===""||isValidDateTime(sValue);}},"time":{validate:function(sValue){return sValue===""||isValidTime(sValue);}},"date":{validate:function(sValue){return sValue===""||isValidDate(sValue);}},"gYearMonth":{validate:function(sValue){return sValue===""||isValidGYearMonth(sValue);}},"gYear":{validate:function(sValue){return sValue===""||isValidGYear(sValue);}},"gMonthDay":{validate:function(sValue){return sValue===""||isValidGMonthDay(sValue);}},"gDay":{validate:function(sValue){return sValue===""||isValidGDay(sValue);}},"gMonth":{validate:function(sValue){return sValue===""||isValidGMonth(sValue);}},"string":{validate:function(sValue){return true;}},"boolean":{validate:function(sValue){return sValue===""||isValidBoolean(sValue);}},"base64Binary":{validate:function(sValue){return sValue===""||isValidBase64Binary(sValue);}},"hexBinary":{validate:function(sValue){return sValue===""||isValidHexBinary(sValue);}},"integer":{validate:function(sValue){return sValue===""||isValidInteger(sValue);}},"positiveInteger":{validate:function(sValue){return sValue===""||isValidPositiveInteger(sValue);}},"float":{validate:function(sValue){return sValue===""||isValidFloat(sValue);}},"decimal":{validate:function(sValue){return sValue===""||isValidDecimal(sValue);}},"double":{validate:function(sValue){return sValue===""||isValidDouble(sValue);}},"anyURI":{validate:function(sValue){return sValue===""||isValidAnyURI(sValue);}},"QName":{validate:function(sValue){return sValue===""||isValidQName(sValue);}},"dayTimeDuration":{validate:function(sValue){return sValue===""||isNaN(evalXPathFunc("seconds",[sValue]).numberValue())===false;}},"yearMonthDuration":{validate:function(sValue){var sExpr="months("+"'"+sValue+"')";return sValue===""||isNaN(evalXPathFunc("months",[sValue]).numberValue())===false;}},"email":{validate:function(sValue){return sValue===""||isValidEmail(sValue);}},"card-number":{validate:function(sValue){return sValue===""||isValidCardNumber(sValue);}},"normalizedString":{validate:function(sValue){return sValue===""||isValidNormalizedString(sValue);}},"listItem":{validate:function(sValue){return sValue===""||isValidNormalizedString(sValue);}},"listItems":{validate:function(sValue){return sValue===""||isValidListItems(sValue);}},"token":{validate:function(sValue){return sValue===""||isValidToken(sValue);}},"language":{validate:function(sValue){return sValue===""||isValidLanguage(sValue);}},"Name":{validate:function(sValue){return sValue===""||isValidName(sValue);}},"NCName":{validate:function(sValue){return sValue===""||isValidNCName(sValue);}},"ID":{validate:function(sValue){return sValue===""||isValidNCName(sValue);}},"IDREF":{validate:function(sValue){return sValue===""||isValidNCName(sValue);}},"IDREFS":{validate:function(sValue){return sValue===""||isValidIDREFS(sValue);}},"NMTOKEN":{validate:function(sValue){return sValue===""||isValidNMTOKEN(sValue);}},"NMTOKENS":{validate:function(sValue){return sValue===""||isValidNMTOKENS(sValue);}},"nonPositiveInteger":{validate:function(sValue){return sValue===""||isValidNonPositiveInteger(sValue);}},"negativeInteger":{validate:function(sValue){return sValue===""||isValidNegativeInteger(sValue);}},"long":{validate:function(sValue){return sValue===""||isValidLong(sValue);}},"int":{validate:function(sValue){return sValue===""||isValidInt(sValue);}},"short":{validate:function(sValue){return sValue===""||isValidShort(sValue);}},"byte":{validate:function(sValue){return sValue===""||isValidByte(sValue);}},"nonNegativeInteger":{validate:function(sValue){return sValue===""||isValidNonNegativeInteger(sValue);}},"unsignedLong":{validate:function(sValue){return sValue===""||isValidUnsignedLong(sValue);}},"unsignedInt":{validate:function(sValue){return sValue===""||isValidUnsignedInt(sValue);}},"unsignedShort":{validate:function(sValue){return sValue===""||isValidUnsignedShort(sValue);}},"unsignedByte":{validate:function(sValue){return sValue===""||isValidUnsignedByte(sValue);}}}};var xmlSchemaRules={namespace:"http://www.w3.org/2001/XMLSchema",rules:{"dateTime":{validate:function(sValue){return isValidDateTime(sValue);}},"time":{validate:function(sValue){return isValidTime(sValue);}},"date":{validate:function(sValue){return isValidDate(sValue);}},"gYearMonth":{validate:function(sValue){return isValidGYearMonth(sValue);}},"gYear":{validate:function(sValue){return isValidGYear(sValue);}},"gMonthDay":{validate:function(sValue){return isValidGMonthDay(sValue);}},"gDay":{validate:function(sValue){return isValidGDay(sValue);}},"gMonth":{validate:function(sValue){return isValidGMonth(sValue);}},"string":{validate:function(sValue){return true;}},"boolean":{validate:function(sValue){return isValidBoolean(sValue);}},"base64Binary":{validate:function(sValue){return isValidBase64Binary(sValue);}},"hexBinary":{validate:function(sValue){return isValidHexBinary(sValue);}},"integer":{validate:function(sValue){return isValidInteger(sValue);}},"positiveInteger":{validate:function(sValue){return isValidPositiveInteger(sValue);}},"float":{validate:function(sValue){return isValidFloat(sValue);}},"decimal":{validate:function(sValue){return isValidDecimal(sValue);}},"double":{validate:function(sValue){return isValidDouble(sValue);}},"anyURI":{validate:function(sValue){return isValidAnyURI(sValue);}},"QName":{validate:function(sValue){return isValidQName(sValue);}},"normalizedString":{validate:function(sValue){return isValidNormalizedString(sValue);}},"token":{validate:function(sValue){return isValidToken(sValue);}},"language":{validate:function(sValue){return isValidLanguage(sValue);}},"Name":{validate:function(sValue){return isValidName(sValue);}},"NCName":{validate:function(sValue){return isValidNCName(sValue);}},"ID":{validate:function(sValue){return isValidNCName(sValue);}},"IDREF":{validate:function(sValue){return isValidNCName(sValue);}},"IDREFS":{validate:function(sValue){return isValidIDREFS(sValue);}},"NMTOKEN":{validate:function(sValue){return isValidNMTOKEN(sValue);}},"NMTOKENS":{validate:function(sValue){return isValidNMTOKENS(sValue);}},"nonPositiveInteger":{validate:function(sValue){return isValidNonPositiveInteger(sValue);}},"negativeInteger":{validate:function(sValue){return isValidNegativeInteger(sValue);}},"long":{validate:function(sValue){return isValidLong(sValue);}},"int":{validate:function(sValue){return isValidInt(sValue);}},"short":{validate:function(sValue){return isValidShort(sValue);}},"byte":{validate:function(sValue){return isValidByte(sValue);}},"nonNegativeInteger":{validate:function(sValue){return isValidNonNegativeInteger(sValue);}},"unsignedLong":{validate:function(sValue){return isValidUnsignedLong(sValue);}},"unsignedInt":{validate:function(sValue){return isValidUnsignedInt(sValue);}},"unsignedShort":{validate:function(sValue){return isValidUnsignedShort(sValue);}},"unsignedByte":{validate:function(sValue){return isValidUnsignedByte(sValue);}}}};var Validator={nsRules:{},addRules:function(vRules){this.nsRules[vRules.namespace]=vRules;},removeRules:function(namespace){var nsRules=this.nsRules;var len=nsRules.length;var idx;for(idx=0;idx<len;idx++){if(nsRules[idx].namespace===namespace){nsRules.splice(idx,1);break;}}},validateValue:function(ns,datatype,value){var validator=null;var validateRule=this.nsRules[ns];if(validateRule){rule=validateRule.rules[datatype];if(rule&&rule.validate!==undefined){return rule.validate(value);}}
return false;}};Validator.addRules(xformsRules);Validator.addRules(xmlSchemaRules);
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/xforms-submission.js

function callback(oMediator,oObserver,oContext){this.m_mediator=oMediator;this.m_observer=oObserver;this.m_context=oContext;};callback.prototype.processResult=function(data,isFailure){this.m_mediator.processResult(data,isFailure,this.m_observer,this.m_context);};callback.prototype.success=function(o){throw"callback::success() has not been implemented";};callback.prototype.failure=function(o){throw"callback::failure() has not been implemented";};function submission(){this.navigateForReplaceAll=true;}
document.submission=new submission();submission.prototype.request=function(sMethod,sAction,sBody,nTimeout,oCallback){throw"submission::request() has not been implemented";};submission.prototype.getConnection=function(){throw"submission::getConnection() has not been implemented";};submission.prototype.setHeader=function(header,value){throw"submission::setHeader() has not been implemented";};submission.prototype.init=function(){throw"submission::init() has not been implemented";};submission.prototype.processResult=function(oResult,isFailure,oObserver,oContext){var sData,sReplace,sInstance,oInstance,oEvt,oNewDom,contentType="",sTarget,oTargetContext,oTarget,newXhtml;if(oObserver){var oEvt=oObserver.ownerDocument.createEvent("Events");oEvt.context={"resource-uri":oResult.resourceURI,"response-status-code":oResult.status,"response-reason-phrase":oResult.statusText,"response-headers":this.processResponseHeaders(oResult.responseHeaders)};if(isFailure){oEvt.context["error-type"]="resource-error";if(oResult.responseHeaders){contentType=oResult.responseHeaders["Content-Type"];}
if(contentType&&!contentType.indexOf("text/")){oEvt.context["response-body"]=oResult.responseText;}else{try{oEvt.context["response-body"]=xmlParse(oResult.responseText);}catch(e){oEvt.context["response-body"]=oResult.responseText;}}
oEvt.initEvent("xforms-submit-error",true,false);FormsProcessor.dispatchEvent(oObserver,oEvt);}else{sData=oResult.responseText;if(sData){sReplace=oObserver.getAttribute("replace")||"all";switch(sReplace){case"all":oObserver.ownerDocument.logger.log("@replace = 'all'","submission");if(oResult.method==="PUT"){document.location.href=oResult.resourceURI;}else{this.replaceDocumentContent(sData);}
break;case"instance":oObserver.ownerDocument.logger.log("@replace = 'instance'","submission");sInstance=oObserver.getAttribute("instance");if(oResult.responseHeaders){contentType=oResult.responseHeaders["Content-Type"];}
if(contentType&&!contentType.indexOf("text/")){oEvt.context["error-type"]="resource-error";oEvt.initEvent("xforms-submit-error",true,false);FormsProcessor.dispatchEvent(oObserver,oEvt);return;}else{try{oNewDom=xmlParse(sData);}catch(e){oEvt.context["error-type"]="parse-error";oEvt.initEvent("xforms-submit-error",true,false);FormsProcessor.dispatchEvent(oObserver,oEvt);return;}}
sTarget=oObserver.getAttribute("targetref")||oObserver.getAttribute("target");if(sTarget){oTarget=this.processTargetAttribute(sTarget,sInstance,oContext,oObserver,oEvt);if(!oTarget){return;}else{oInstance=sInstance?oContext.model.getInstanceDocument(sInstance).documentElement:null;if(oTarget===oInstance){oContext.model.replaceInstanceDocument(sInstance,oNewDom);}else{oTarget.parentNode.replaceChild(oNewDom.documentElement,oTarget);}}}else{if(sInstance){oContext.model.replaceInstanceDocument(sInstance,oNewDom);}else if(oObserver.srcInstance){__replaceInstanceDocument(oContext.model,oObserver.srcInstance,oNewDom);}else{debugger;}}
break;case"text":oObserver.ownerDocument.logger.log("@replace = 'text'","submission");sInstance=oObserver.getAttribute("instance");sTarget=oObserver.getAttribute("targetref")||oObserver.getAttribute("target");if(sTarget){oTarget=this.processTargetAttribute(sTarget,sInstance,oContext,oObserver,oEvt);if(!oTarget){return;}}else{oTarget=oContext.node;}
if(!oTarget||UX.isNodeReadonly(oTarget.parentNode)){oEvt.context["error-type"]="target-error";oEvt.initEvent("xforms-submit-error",true,false);FormsProcessor.dispatchEvent(oObserver,oEvt);return;}else{oTarget.firstChild.nodeValue=sData;oContext.model.flagRebuild();}
break;case"none":oObserver.ownerDocument.logger.log("@replace = 'none'","submission");break;default:oObserver.ownerDocument.logger.log("Invalid replace value.","submission");break;}}
oEvt.initEvent("xforms-submit-done",true,false);FormsProcessor.dispatchEvent(oObserver,oEvt);}}};submission.prototype.processResponseHeaders=function(oHeaders){var xmlDoc,headerElt,nameElt,valueElt,name,value,responseHeaders=[];for(name in oHeaders){value=oHeaders[name];xmlDoc=new XDocument();headerElt=xmlDoc.createElement("header");nameElt=xmlDoc.createElement("name");nameElt.appendChild(xmlDoc.createTextNode(name));headerElt.appendChild(nameElt);valueElt=xmlDoc.createElement("value");valueElt.appendChild(xmlDoc.createTextNode(value));headerElt.appendChild(valueElt);responseHeaders.push(headerElt);}
return responseHeaders;}
submission.prototype.processTargetAttribute=function(sTarget,sInstance,oContext,oObserver,oEvt){var oTarget=null,oTargetContext,oEvt;if(sTarget){oTargetContext=sInstance?oContext.model.getInstanceDocument(sInstance).documentElement:oContext;oTarget=oContext.model.EvaluateXPath(sTarget,oTargetContext).nodeSetValue()[0];if(!oTarget||oTarget.nodeType!==DOM_ELEMENT_NODE||UX.isNodeReadonly(oTarget.parentNode)){oEvt.context["error-type"]="target-error";oEvt.initEvent("xforms-submit-error",true,false);FormsProcessor.dispatchEvent(oObserver,oEvt);}}
return oTarget;}
submission.prototype.submit=function(oSubmission){var sResource=null;var currentUrl;var oEvt=null;var ns=null;var instanceId=oSubmission.getAttribute("instance");var instance;var sMethod=null;var sMediatype=oSubmission.getAttribute("mediatype");var sEncoding=oSubmission.getAttribute("encoding")||"UTF-8";var sSerialization=oSubmission.getAttribute("serialization")?(oSubmission.getAttribute("serialization")!=="none"):"";var bSerialize=(oSubmission.getAttribute("serialization")!=="none");var sSeparator=oSubmission.getAttribute("separator")||"&";var oBody;var oContext;var bHasHeaders=false;var sReplace=null;var xmlDoc=new XDocument();var oSubmissionBody=xmlDoc.createTextNode("");var relevancePruning=oSubmission.getAttribute("relevant")?(oSubmission.getAttribute("relevant")!=="false"):bSerialize;var validation=oSubmission.getAttribute("validate")?(oSubmission.getAttribute("validate")!=="false"):bSerialize;var submitDataList=[];var oForm;var cdataSectionElements=oSubmission.getAttribute("cdata-section-elements")?oSubmission.getAttribute("cdata-section-elements").split(" "):false;var sContentType=null;var bOmitXmlDeclaration=UX.JsBooleanFromXsdBoolean(oSubmission.getAttribute("omit-xml-declaration"),"false");var sStandalone=UX.JsBooleanFromXsdBoolean(oSubmission.getAttribute("standalone"));var schemeHandler;var includeNamespacePrefixes=oSubmission.getAttribute("includenamespaceprefixes");if(includeNamespacePrefixes){includeNamespacePrefixes=includeNamespacePrefixes.split(" ");}
var nTimeout=oSubmission.getAttribute("timeout");if(nTimeout===null){nTimeout=5000;}
oContext=oSubmission.getBoundNode();if(!oContext.model){oContext=oSubmission.getEvaluationContext();}
if(!oContext.node){oEvt=oSubmission.ownerDocument.createEvent("Events");oEvt.initEvent("xforms-submit-error",true,false);oEvt.context={"error-type":"no-data"};FormsProcessor.dispatchEvent(oSubmission,oEvt);return;}
if(bSerialize){submitDataList=this.constructSubmitDataList(oContext,relevancePruning);}
if(relevancePruning&&submitDataList.length===0){oEvt=oSubmission.ownerDocument.createEvent("Events");oEvt.initEvent("xforms-submit-error",true,false);oEvt.context={"error-type":"no-data"};FormsProcessor.dispatchEvent(oSubmission,oEvt);return;}
if(validation&&!this.validateSubmitDataList(submitDataList)){oEvt=oSubmission.ownerDocument.createEvent("Events");oEvt.initEvent("xforms-submit-error",true,false);oEvt.context={"error-type":"validation-error"};FormsProcessor.dispatchEvent(oSubmission,oEvt);return;}
ns=NamespaceManager.getElementsByTagNameNS(oSubmission,"http://www.w3.org/2002/xforms","resource");sResource=(ns&&ns.length>0)?getElementValueOrContent(oContext,ns[0]):null;sResource=sResource||oSubmission.getAttribute("resource")||oSubmission.getAttribute("action");if(!sResource){oEvt=oSubmission.ownerDocument.createEvent("Events");oEvt.initEvent("xforms-submit-error",true,false);oEvt.context={"error-type":"resource-error"};FormsProcessor.dispatchEvent(oSubmission,oEvt);return;}
if(instanceId){instance=oSubmission.ownerDocument.getElementById(instanceId);if(!instance||!NamespaceManager.compareFullName(instance,"instance","http://www.w3.org/2002/xforms")){UX.dispatchEvent(oSubmission,"xforms-binding-exception",true,false,false);return;}}else if(oContext.node){oSubmission.srcInstance=oContext.node.ownerDocument.XFormsInstance;}
ns=NamespaceManager.getElementsByTagNameNS(oSubmission,"http://www.w3.org/2002/xforms","method");sMethod=(ns&&ns.length>0)?getElementValueOrContent(oContext,ns[0]):oSubmission.getAttribute("method")||"get";switch(sMethod){case"get":sMethod="GET";sSerialization="application/x-www-form-urlencoded";oBody=this.serializeSubmitDataList(submitDataList,sSerialization,sSeparator,sEncoding,cdataSectionElements,bOmitXmlDeclaration,sStandalone,includeNamespacePrefixes);if(sMediatype&&sMediatype.indexOf("application/soap+xml")===0){bHasHeaders=this.setSOAPHeaders(oContext.node,sMethod,sMediatype,sEncoding);}
break;case"form-data-post":sMethod="POST";sSerialization=sSerialization||"multipart/form-data";oBody=this.serializeSubmitDataList(submitDataList,sSerialization,sSeparator,sEncoding,cdataSectionElements,bOmitXmlDeclaration,sStandalone,includeNamespacePrefixes);break;case"urlencoded-post":sMethod="POST";sSerialization="application/x-www-form-urlencoded";oBody=this.serializeSubmitDataList(submitDataList,sSerialization,sSeparator,sEncoding,cdataSectionElements,bOmitXmlDeclaration,sStandalone,includeNamespacePrefixes);break;case"post":sMethod="POST";sSerialization="application/xml";oBody=this.serializeSubmitDataList(submitDataList,sSerialization,sSeparator,sEncoding,cdataSectionElements,bOmitXmlDeclaration,sStandalone,includeNamespacePrefixes);if(sMediatype&&sMediatype.indexOf("application/soap+xml")===0){bHasHeaders=this.setSOAPHeaders(oContext.node,sMethod,sMediatype,sEncoding);}
break;case"put":sMethod="PUT";sSerialization="application/xml";oBody=this.serializeSubmitDataList(submitDataList,sSerialization,sSeparator,sEncoding,cdataSectionElements,bOmitXmlDeclaration,sStandalone,includeNamespacePrefixes);break;case"delete":sMethod="DELETE";sSerialization="application/x-www-form-urlencoded";oBody=this.serializeSubmitDataList(submitDataList,sSerialization,sSeparator,sEncoding,cdataSectionElements,bOmitXmlDeclaration,sStandalone,includeNamespacePrefixes);break;default:oSubmission.ownerDocument.logger.log("Submission method '"+sMethod+"' is not defined.","error");break;}
sContentType=sMediatype||sSerialization;try{oEvt=oSubmission.ownerDocument.createEvent("Events");oEvt.initEvent("xforms-submit-serialize",true,false);oEvt.context={"submission-body":[oSubmissionBody]};FormsProcessor.dispatchEvent(oSubmission,oEvt);oBody=oSubmission.submissionBody[0].nodeValue||oBody;}catch(e){oSubmission.ownerDocument.logger.log("Error: "+e.description,"error");}
bHasHeaders=bHasHeaders||(NamespaceManager.getElementsByTagNameNS(oSubmission,"http://www.w3.org/2002/xforms","header").length>0);sReplace=oSubmission.getAttribute("replace")||"all";if(sReplace==='all'&&(this.navigateForReplaceAll&&(sMethod==="GET"||sMethod==="POST")&&!bHasHeaders&&(sContentType===sSerialization&&(sSerialization==="application/x-www-form-urlencoded"||sSerialization==="multipart/form-data")))){oForm=this.buildFormFromObject(oBody);oForm.encoding=sSerialization;oForm.action=sResource;oForm.method=sMethod.toLowerCase();document.body.appendChild(oForm);try{oForm.submit();}catch(e){oEvt=oSubmission.ownerDocument.createEvent("Events");oEvt.initEvent("xforms-submit-error",true,false);oEvt.context={"error-type":"resource-error","resource-uri":sResource};FormsProcessor.dispatchEvent(oSubmission,oEvt);}finally{oForm.parentNode.removeChild(oForm);}}else{var oCallback=new callback(this,oSubmission,oContext);this.setHeader("content-type",sContentType);this.setHeaders(oContext.model,oSubmission);try{if((oBody||oBody!=="")&&sSerialization==="application/x-www-form-urlencoded"){switch(sMethod){case"GET":case"DELETE":sResource=this.buildGetUrl(sResource,oBody,sSeparator);oBody=null;break;case"POST":oBody=this.buildEncodedParameters(oBody,sSeparator);break;default:break;}}
currentUrl=getBaseUrl();sResource=makeAbsoluteURI(currentUrl,sResource);schemeHandler=schemeHandlers[spliturl(sResource).scheme];if(UX.isFF&&schemeHandler&&schemeHandler[sMethod]){spawn(function(){schemeHandler[sMethod](sResource,oBody,nTimeout,oCallback);});}
else{if(UX.isFF&&"file"===spliturl(currentUrl).scheme){netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");}
return this.request(sMethod,sResource,oBody,nTimeout,oCallback);}}catch(e){oEvt=oSubmission.ownerDocument.createEvent("Events");oEvt.initEvent("xforms-submit-error",true,false);oEvt.context={"error-type":"resource-error","resource-uri":sResource};FormsProcessor.dispatchEvent(oSubmission,oEvt);}}};submission.prototype.constructSubmitDataList=function(oContext,relevancePruning){var submitDataList=[];var stack=[oContext.node];var proxyNode;while(stack.length>0){proxyNode=getProxyNode(stack.pop());if(proxyNode.enabled.value||!relevancePruning){submitDataList.push(proxyNode);if(proxyNode.m_oNode.childNodes.length>0){stack=stack.concat(proxyNode.m_oNode.childNodes.slice(0).reverse());}
if(proxyNode.m_oNode.attributes.length>0){stack=stack.concat(proxyNode.m_oNode.attributes.slice(0).reverse());}}}
return submitDataList;}
submission.prototype.validateSubmitDataList=function(submitDataList){var i;for(i=0;i<submitDataList.length;i++){if(!submitDataList[i].valid.getValue()){return false;}}
return true;}
submission.prototype.serializeSubmitDataList=function(submitDataList,serializationFormat,separator,encoding,cdataSectionElements,omitXmlDeclaration,standalone,includeNamespacePrefixes){var serialization="";var xmlDoc=this.constructSubmitDataListDOM(submitDataList);if(xmlDoc){if(serializationFormat==="application/xml"){encoding=encoding||"UTF-8";this.setHeader("Content-Type",serializationFormat+"; charset="+encoding);if(!omitXmlDeclaration){xmlDoc.insertBefore(xmlDoc.createProcessingInstruction("xml","version=\"1.0\""+" encoding=\""+encoding+"\""+
((standalone!==undefined)?(" standalone=\""+((standalone)?"yes":"no")+"\""):"")),xmlDoc.firstChild);}
return xmlText(xmlDoc,cdataSectionElements,includeNamespacePrefixes);}
if(serializationFormat==="application/x-www-form-urlencoded"||serializationFormat==="multipart/form-data"){return this.serializeURLEncoded(xmlDoc);}}
return"";}
submission.prototype.constructSubmitDataListDOM=function(submitDataList){var root;var xmlDoc;if(!submitDataList.length){return null;}
root=submitDataList[0].m_oNode.cloneNode(false);if(root.nodeType===DOM_DOCUMENT_NODE){xmlDoc=root;}else if(root.nodeType===DOM_ELEMENT_NODE){xmlDoc=new XDocument();xmlDoc.appendChild(root);}else{throw("Submission data must be rooted by an element or a document node");}
this._constructSubmitDataListDOM(submitDataList,0,root);return xmlDoc;}
submission.prototype._constructSubmitDataListDOM=function(submitDataList,listPos,parentNode){var node,submitListParent;submitListParent=submitDataList[listPos].m_oNode;listPos++;if(parentNode.nodeType===DOM_ELEMENT_NODE){while(listPos<submitDataList.length&&submitDataList[listPos].m_oNode.nodeType===DOM_ATTRIBUTE_NODE){parentNode.setAttribute(submitDataList[listPos].m_oNode.nodeName,submitDataList[listPos].m_oNode.nodeValue);listPos++;}}
if(parentNode.nodeType===DOM_ELEMENT_NODE||parentNode.nodeType===DOM_DOCUMENT_NODE){while(listPos<submitDataList.length&&submitDataList[listPos].m_oNode.parentNode===submitListParent){node=submitDataList[listPos].m_oNode.cloneNode(false);node.removeAttributeList();parentNode.appendChild(node);if(node.nodeType===DOM_ELEMENT_NODE){listPos=this._constructSubmitDataListDOM(submitDataList,listPos,node);}else{listPos++;}}}
return listPos;}
submission.prototype.serializeURLEncoded=function(node){var stack=[node];var taggedValues={};var i,isLeaf,tag,value,childNode;while(stack.length>0){node=stack.pop();if(node.nodeType===DOM_ELEMENT_NODE||node.nodeType===DOM_DOCUMENT_NODE||node.nodeType===DOM_DOCUMENT_FRAGMENT_NODE){isLeaf=true;value="";for(i=node.childNodes.length-1;i>=0;i--){childNode=node.childNodes[i];if(childNode.nodeType===DOM_TEXT_NODE||childNode.nodeType===DOM_CDATA_SECTION_NODE){value=childNode.nodeValue+value;}else if(childNode.nodeType===DOM_ELEMENT_NODE){isLeaf=false;stack.push(childNode);}}
if(isLeaf&&node.nodeType===DOM_ELEMENT_NODE){tag=node.nodeName;if(tag.indexOf(':')!=0){tag=tag.slice(tag.indexOf(':')+1);}
taggedValues[tag]=value;}}}
return taggedValues;}
submission.prototype.buildFormFromObject=function(object){var form=document.createElement("form");var field=null;var key,value;for(key in object){if(object.hasOwnProperty(key)&&typeof(object[key])!=="function"){field=document.createElement("input");field.type="hidden";field.name=key;field.value=object[key];form.appendChild(field);}}
return form;};submission.prototype.setHeaders=function(oModel,oSubmission){var headers={};var header;var i,j;var elements;var nodelist;var name;var values;var value;var combine;elements=NamespaceManager.getElementsByTagNameNS(oSubmission,"http://www.w3.org/2002/xforms","header");for(i=0;i<elements.length;++i){header=elements[i];if(NamespaceManager.getElementsByTagNameNS(header,"http://www.w3.org/2002/xforms","header").length>0){continue;}
nodelist=NamespaceManager.getElementsByTagNameNS(header,"http://www.w3.org/2002/xforms","name");if(nodelist.length===0){document.logger.log("INFO: Ignoring xf:header whose xf:name is empty");continue;}else{name=nodelist[0].getValue();if(!name||name.trim()===''){document.logger.log("INFO: Ignoring xf:header whose xf:name is empty");continue;}}
combine=header.getAttribute("combine");values=[];nodelist=NamespaceManager.getElementsByTagNameNS(elements[i],"http://www.w3.org/2002/xforms","value");for(j=0;j<nodelist.length;++j){value=nodelist[j].getValue();if(value){values.push(value);}}
if(headers[name]){if(!combine||combine==="append"){headers[name]=headers[name].concat(values);}else if(combine==="prepend"){while(values.length>0){headers[name].unshift(values.pop());}}else if(combine==="replace"){headers[name]=values;}}else{headers[name]=values;}}
for(name in headers){this.setHeader(name,headers[name].join(','));}};submission.prototype.buildEncodedParameters=function(params,separator,queryString){var key,pairs=[];if(params){for(key in params){if(params.hasOwnProperty(key)&&typeof(params[key])!=="function"){pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(params[key]));}}}
return((queryString)?queryString:"")+pairs.join(separator||"&");};submission.prototype.buildGetUrl=function(action,params,separator){return action+this.buildEncodedParameters(params,separator,"?");};submission.prototype.setSOAPHeaders=function(oContextNode,sMethod,sMediatype,sEncoding){var result=false;var action=(/action=([^\s\t\r\n\v\f;]+);?/.exec(sMediatype||"")||[])[1];var charset=(/charset=([\w-]+);?/.exec(sMediatype||"")||[])[1]||sEncoding||"UTF-8";var namespaceURI=oContextNode&&NamespaceManager.getNamespaceURI(oContextNode);if(sMethod==="POST"){if(namespaceURI==="http://schemas.xmlsoap.org/soap/envelope/"){if(action){this.setHeader("SOAPAction",action);}
this.setHeader("content-type","text/xml; charset="+charset);result=true;}
else if(namespaceURI==="http://www.w3.org/2003/05/soap-envelope"){this.setHeader("content-type",sMediatype);result=true;}}else if(sMethod==="GET"){if(namespaceURI==="http://www.w3.org/2003/05/soap-envelope"){this.setHeader("accept","application/soap+xml; charset="+charset);result=true;}}
return result;};submission.prototype.replaceDocumentContent=function(data){var xhtmlContainer,htmlElement;if(UX.isFF){if(data.indexOf("<?",0)===0){data=data.substr(data.indexOf("?>")+2);}}
if(UX.isXHTML){xhtmlContainer=document.createElement("div");xhtmlContainer.innerHTML=data;htmlElement=xhtmlContainer.getElementsByTagName("html")[0];if(htmlElement){document.documentElement.innerHTML=htmlElement.innerHTML;}else{document.documentElement.innerHTML=xhtmlContainer.innerHTML;}}else{document.write(data);}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/Submission.js

function Submission(el){this.element=el;this.submissionBody="";}
Submission.prototype.onDocumentReady=function(){FormsProcessor.addDefaultEventListener(this,"xforms-submit",{handleEvent:function(evt){evt.target.ownerDocument.submission.submit(evt.target);return;}});FormsProcessor.addDefaultEventListener(this,"xforms-submit-serialize",{handleEvent:function(evt){if(evt.context){evt.target.submissionBody=evt.context["submission-body"];}}});}
if(!document.submissionJSON){document.submissionJSON={_timeoutlength:30000,_running:[],_timeout:function(id,url){var cbo=this._running[id];this._running[id]=null;if(!cbo.callbackErr)
return;cbo.callbackErr("Timeout",-1,cbo.self);},_callbackhandler:function(o){var cbo=this._running[callbackIndex];if(!cbo)
return;this._running[callbackIndex]=null;window.clearTimeout(cbo.timeout);if(!o||!o.count){if(!cbo.callbackErr)
return;cbo.callbackErr("Bad response",-2,cbo.self);return;}
if(!cbo.callbackOk)
return;cbo.callbackOk(o,cbo.resource,cbo.self);},_execute:function(url,resource,callbackOk,callbackErr,timeoutlength){if(!timeoutlength)
timeoutlength=this._timeoutlength;var id=this._running.length;url+="&_callback=document.submissionJSON._callbackhandler_"+id;var s=document.createElement("script");s.setAttribute("src",url);var fn=""+this._callbackhandler;fn=fn.replace(/callbackIndex/g,id);eval("document.submissionJSON._callbackhandler_"+id+"="+fn);this._running.push({self:this,resource:resource,callbackOk:callbackOk,callbackErr:callbackErr,timeout:window.setTimeout(function()
{this._timeout(id,url);},timeoutlength)});document.getElementsByTagName("head")[0].appendChild(s);return id;},cancelrequest:function(id){var cbo=this._running[i];window.clearTimeout(cbo.timeout);this._running[i]=null;},cancelallrequests:function(){for(var i=0;i<this._running.length;i++)
this.cancelrequest(i);},run:function(action,params,resource,callbackOk,callbackErr,timeoutLength){return this._execute(document.submission.buildGetUrl(action,params),resource,callbackOk,callbackErr,timeoutLength);}};}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../_backplane/notify.js

document.notify=document.notify||{};document.notify.activate=function(el){UX.replaceClassName(el,"inactive","active");return;};document.notify.deactivate=function(el){UX.replaceClassName(el,"active","inactive");return;};document.notify.ephemeral=function(message,activate){if(activate===undefined||activate){document.notify.activate(message);setTimeout(function(){document.notify.deactivate(message);return;},6000);}else{document.notify.deactivate(message);}
return;};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../_platform/yui/message.js

document.notify=document.notify||{};var global_window_counter=0;document.notify.messageWindow=function(pThis,activate){var width_style=UX.getStyle(pThis.element,"width");var height_style=UX.getStyle(pThis.element,"height");pThis.yahooPanel=new YAHOO.widget.SimpleDialog("dialog-window"+global_window_counter,{appendtodocumentbody:true,close:false,fixedcenter:true,constraintoviewport:false,modal:activate,visible:false,width:(width_style&&width_style!=="auto")?width_style:"300px",height:(height_style&&height_style!=="auto")?height_style:"140px"});pThis.yahooPanel2=new YAHOO.widget.SimpleDialog("background-shadow"+global_window_counter,{draggable:false,close:false,fixedcenter:true,constraintoviewport:false,visible:false});pThis.yahooPanel.yahooPanel2=pThis.yahooPanel2;global_window_counter++;UX.addClassName(pThis.yahooPanel2.element,"background-shadow");var handleOK=function(){this.hide();this.yahooPanel2.hide();this.yahooPanel2.destroy();this.destroy();};var myButtons=[{text:"OK",handler:handleOK}];pThis.yahooPanel.cfg.queueProperty("buttons",myButtons);pThis.yahooPanel.setHeader("[XForms]");if(UX.isIE){pThis.yahooPanel.setBody(pThis.element.innerText);}else{pThis.yahooPanel.setBody(pThis.element.textContent);}
pThis.yahooPanel.render(document.body);pThis.yahooPanel.show();if(activate){pThis.yahooPanel2.render(document.body);pThis.yahooPanel2.show();}
return;}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/actions.js

function ConditionalInvocationListener(obj,funcName){return{realListener:obj,handleEvent:function(evt){return obj[funcName](evt);}};}
function DeferToConditionalInvocationProcessor(evt){ActionExecutor.invokeListener(ConditionalInvocationListener(this,"performAction"),evt);}
function Recalculate(elmnt)
{this.element=elmnt;}
Recalculate.prototype.handleEvent=DeferToConditionalInvocationProcessor;Recalculate.prototype.performAction=function(evt)
{var sModelID=this.element.getAttribute("model"),oModel=this.element.ownerDocument.getElementById(sModelID);oModel.recalculate();};function Dispatch(elmnt){this.element=elmnt;}
Dispatch.prototype.handleEvent=DeferToConditionalInvocationProcessor;Dispatch.prototype.performAction=function(evt){var sTargetID,oTarget,sName,oEvt,delay_time;sTargetID=UX.getPropertyValue(this,"targetid")||UX.getPropertyValue(this,"target");if(sTargetID){oTarget=FormsProcessor.getElementById(sTargetID,this.element);if(oTarget){sName=UX.getPropertyValue(this,"name");if(sName){oEvt=this.element.ownerDocument.createEvent("Events");oEvt.initEvent(sName,UX.JsBooleanFromXsdBoolean(UX.getPropertyValue(this,"bubbles"),"false"),false);oEvt._actionDepth=evt._actionDepth;delay_time=UX.getPropertyValue(this,"delay");if(!delay_time||isNaN(parseInt(delay_time,10))||delay_time<0){delay_time=0;}
setTimeout(function(){FormsProcessor.dispatchEvent(oTarget,oEvt);},delay_time);if(evt._actionDepth!==oEvt._actionDepth){throw"Unexpected Discord between action depths.";}}}}};function Send(elmnt)
{this.element=elmnt;}
Send.prototype.handleEvent=DeferToConditionalInvocationProcessor;Send.prototype.performAction=function(evt)
{var sID,oSubmission,oEvt;sID=this.element.getAttribute("submission");if(sID)
{evt.target.ownerDocument.logger.log("Sending to '"+sID+"'","submission");oSubmission=document.getElementById(sID);if(oSubmission)
{oEvt=this.ownerDocument.createEvent("Events");oEvt.initEvent("xforms-submit",false,false,null,null);oEvt._actionDepth=evt._actionDepth;spawn(function(){FormsProcessor.dispatchEvent(oSubmission,oEvt);});if(evt._actionDepth!==oEvt._actionDepth){throw"Unexpected Discord between action depths.";}}
else{throw"There is no submission element with an ID of '"+sID+"'";}}
else{throw"A submission ID is required.";}};function Load(elmnt){this.element=elmnt;}
Load.prototype.handleEvent=DeferToConditionalInvocationProcessor;Load.prototype.performAction=function(evt){var boundNode=this.element.getBoundNode(1),resource=UX.getPropertyValue(this.element,"resource"),textNode,sTarget,sId;if((boundNode.node&&resource)||(!boundNode.node&&!resource)){return;}
if(boundNode.node){textNode=getFirstTextNode(boundNode.node);if(textNode){resource=textNode.nodeValue;}else{resource=boundNode.node.nodeValue;}}
this.element.setAttribute("xlink:href",resource);if(!this.element.Actuate){this.element.setAttribute("xlink:show",this.element.getAttribute("show")||"replace");sTarget=this.element.getAttribute("target");if(sTarget===undefined||sTarget===""){sId=evt.target.id;if(sId!==""){this.element.setAttribute("target",sId);}}
this.element.attachSingleBehaviour(XLinkElement);this.element.handleEvent=DeferToConditionalInvocationProcessor;}
if(this.element.Actuate){this.element.Actuate();}};function Message(elmnt){this.element=elmnt;this.element.addEventListener("ub-activate",this,false);}
Message.prototype.handleEvent=DeferToConditionalInvocationProcessor;Message.prototype.performAction=function(evt){var sLevel=this.element.getAttribute("level");FormsProcessor.refreshDescendents(this.element.childNodes);switch(sLevel){case"modeless":document.notify.messageWindow(this,false);break;case"ephemeral":document.notify.ephemeral(this.element,evt.activate);break;case"modal":document.notify.messageWindow(this,true);break;default:document.notify.messageWindow(this,true);break;}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/xf-action.js

function XFAction(elmnt){this.element=elmnt;}
XFAction.prototype.handleEvent=DeferToConditionalInvocationProcessor;XFAction.prototype.performAction=function(evt){var oColl,i;oColl=this.element.childNodes;for(i=0;i<oColl.length;i++){if(oColl.item(i).handleEvent){ActionExecutor.invokeListener(oColl.item(i),evt);}}
return;};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../dom/dom2.js

if(!document.createElementNS){document.createElementNS=function(namespaceURI,elementName){var element=document.createElement(elementName);element.namespaceURI=namespaceURI;return element;};}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/context.js

function Context(elmnt){this.element=elmnt;this.m_context=null;this.m_arrNodes=null;this.m_model=null;this.m_proxy=null;}
Context.prototype.unwire=function(){this.m_context=null;this.m_arrNodes=null;if(this.m_proxy&&!this.isBindingContainer){this.m_proxy=null;}
return;};Context.prototype.getEvaluationContext=function(){return _getEvaluationContext(this);};Context.prototype.getEvaluationContextFromParent=function(){return _getEvaluationContextFromParent(this);};Context.prototype.getBoundNode=function(nOrdinal){return _getBoundNode(this,nOrdinal);};function _getEvaluationContext(pThis){if(pThis.m_context){return{model:pThis.m_context.model,node:pThis.m_context.node,initialContext:pThis.m_context.initialContext,position:pThis.m_context.position,size:pThis.m_context.size,resolverElement:pThis.m_context.resolverElement}}
var oRet=null;var oElement=pThis.element;var oDocument=oElement.ownerDocument;var sModelId=oElement.getAttribute("model");if(sModelId){var oModel=oDocument.getElementById(sModelId);if(oModel&&oModel.getInstanceDocument){var oContextModel=getModelFor(oElement.parentNode);if(oContextModel===oModel){oRet=_getEvaluationContextFromParent(pThis);}else{oRet=oModel.getEvaluationContext();}}else{UX.dispatchEvent(oElement,"xforms-binding-exception",false,true,true);}}else{oRet=_getEvaluationContextFromParent(pThis);}
oRet.initialContext=oRet.node;oRet.resolverElement=pThis.element;pThis.m_context=oRet;var sContext=oElement.getAttribute("context");if(sContext){oRet.node=getFirstNode(oRet.model.EvaluateXPath(sContext,pThis.m_context));if(oRet.node!==oRet.initialContext){oRet.position=undefined;oRet.size=undefined;}}else{oRet.initialContext=undefined;}
pThis.m_context={model:oRet.model,node:oRet.node,initialContext:oRet.initialContext,position:oRet.position,size:oRet.size,resolverElement:pThis.element};return oRet;}
function _getEvaluationContextFromParent(pThis){var oRet={model:null,node:null,resolverElement:pThis.element};var oElement=pThis.element;var oParent=oElement.parentNode;var oRoot=oElement.ownerDocument.documentElement;var oBoundNode=null;var nOrdinal=Number(oElement.getAttribute("ordinal"));if(!nOrdinal||isNaN(nOrdinal)){nOrdinal=1;}else{oRet.position=nOrdinal;}
while(oParent&&oParent!==oRoot){if(oParent.getBoundNode){oBoundNode=oParent.getBoundNode(nOrdinal);if(oBoundNode&&(oBoundNode.model||oBoundNode.node)){if(oRet.position){oRet.size=oParent.m_arrNodes.length;}
oRet.model=oBoundNode.model;oRet.node=oBoundNode.node;break;}}
oParent=oParent.parentNode;}
if(!oParent||oRoot===oParent){if(!document.defaultModel){var models=NamespaceManager.getElementsByTagNameNS(oRoot,"http://www.w3.org/2002/xforms","model");if(models&&models.length>0){document.defaultModel=models[0];}else{oRet.model=null;oRet.node=null;return oRet;}}
oRet=document.defaultModel.getEvaluationContext();oRet.resolverElement=pThis.element;}
return oRet;}
function _getBoundNode(pThis,nOrdinal){var oBind;var oProxy=pThis.m_proxy;var oElement=pThis.element;var sBindId=oElement.getAttribute("bind");var oRet={model:null,node:null,resolverElement:pThis.element};var i=0;if(!nOrdinal||isNaN(nOrdinal)){nOrdinal=1;}
if(oProxy&&!oProxy.m_xpath){if(!pThis.m_model){pThis.m_model=_getEvaluationContext(pThis).model;}
return{model:pThis.m_model,node:oProxy.getNode(),resolverElement:pThis.element};}
if(NamespaceManager.getLowerCaseLocalName(pThis)==="model"){return pThis.getEvaluationContext();}
if(sBindId){if(!pThis.m_arrNodes){oBind=FormsProcessor.getBindObject(sBindId,oElement);pThis.m_model=oBind.ownerModel;pThis.m_arrNodes=oBind.boundNodeSet;}
oRet.model=pThis.m_model;i=nOrdinal-1;if(pThis.m_arrNodes&&pThis.m_arrNodes.length>i){oRet.node=pThis.m_arrNodes[i]}
return oRet;}
var sRef=oElement.getAttribute("ref");var sNodeset=oElement.getAttribute("nodeset");var sName=XF4HProcessor.getAttribute(oElement,"name");if(sRef||sNodeset||sName||oElement.getAttribute("model")){oRet=_getEvaluationContext(pThis);if(oRet.model!==null){pThis.m_model=oRet.model;if(sRef&&nOrdinal==1){var oRefNode=getFirstNode(pThis.m_model.EvaluateXPath(sRef,oRet));if(!oRefNode&&pThis.m_model.constructingUI){var oInstDoc=_getDefaultInstanceDocument(pThis.m_model);if(oInstDoc&&oInstDoc.isLazilyAuthored){if(xmlSchemaRules.rules["QName"].validate(sRef)){oRefNode=oInstDoc.createElement(sRef);if(oRefNode){oInstDoc.documentElement.appendChild(oRefNode);pThis.m_context=null;oRet=_getEvaluationContext(pThis);}
oRefNode=getFirstNode(pThis.m_model.EvaluateXPath(sRef,oRet));}else{UX.dispatchEvent(oElement,"xforms-binding-exception",false,true,true);}}}
oRet.node=oRefNode;}else if(sNodeset){if(!pThis.m_arrNodes){pThis.m_arrNodes=pThis.m_model.EvaluateXPath(sNodeset,oRet).value;}
oRet.node=pThis.m_arrNodes[nOrdinal-1];}else if(sName){oRet.node=XF4HProcessor.processElement(pThis.m_model,oRet.node,oElement,sName);}}}
return oRet;}
function _getDefaultInstanceDocument(oModel){var oInstDoc=null;var instanceNode=null;try{oInstDoc=oModel.getInstanceDocument();return oInstDoc;}catch(e){}
var namespaceURI="http://www.w3.org/2002/xforms";if(UX.isXHTML){var instanceRoot=document.createElementNS("","instanceData");instanceNode=document.createElementNS(namespaceURI,"instance");instanceNode.appendChild(instanceRoot);}else{var sPrefix=NamespaceManager.getOutputPrefixesFromURI(namespaceURI)[0];instanceNode=document.createElement(sPrefix+":"+"instance");instanceNode.innerHTML="<instanceData xmlns='' ></instanceData>";}
oModel.appendChild(instanceNode);if(UX.isIE||!UX.hasDecorationSupport){DECORATOR.attachDecoration(instanceNode,true,true);}
instanceNode.m_oDOM.isLazilyAuthored=true;return oModel.getInstanceDocument();}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/dirtystate.js

function DirtyState(){this.m_states={value:false,valid:false,enabled:false,required:false,readonly:false};}
DirtyState.prototype.isDirty=function(aspect){var prop,retval=false;if(typeof aspect==="undefined"){for(prop in this.m_states){if(this.m_states[prop]){retval=true;break;}}}else{retval=this.m_states[aspect];if(typeof retval==="undefined"){throw"DirtyState::isDirty, E_INVALIDARG";}}
return retval;};DirtyState.prototype.setDirty=function(aspect){if(typeof this.m_states[aspect]==="undefined"){throw"DirtyState::setDirty, E_INVALIDARG";}
this.m_states[aspect]=true;};DirtyState.prototype.setClean=function(aspect){var prop;if(typeof aspect==="undefined"){for(prop in this.m_states){this.m_states[prop]=false;}}else{this.m_states[aspect]=false;}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/mip-handler.js

function MIPHandler(element){this.element=element;this.dirtyState=new DirtyState();this.m_MIPSCurrentlyShowing={};}
MIPHandler.prototype.addcontroltomodel=function(){var oModel;if(!this.m_bAddedToModel){oModel=getModelFor(this);if(oModel){setInitialState(this);oModel.addControl(this);}else if((this.element.getAttribute("ref")||this.element.getAttribute("nodeset"))){throw("Could not resolve model for MIPHandler");}}else{throw("Second attempt to add MIPHandler to model as a control.");}};MIPHandler.prototype.rewire=function(){var ctxBoundNode=this.getBoundNode(1);this.m_model=ctxBoundNode.model;if(ctxBoundNode.node){this.m_proxy=getProxyNode(ctxBoundNode.node);return true;}
return false;};(function(){var isDirtyMIP=function(self,sMIPName){var state=self.getMIPState(sMIPName);return self.m_MIPSCurrentlyShowing[sMIPName]===undefined||(state.isSet&&self.m_MIPSCurrentlyShowing[sMIPName]!==state.value);},setDirtyState=function(self,mip){if(isDirtyMIP(self,mip)){self.dirtyState.setDirty(mip);}},setDirtyStates=function(self){setDirtyState(self,"enabled");setDirtyState(self,"readonly");setDirtyState(self,"required");setDirtyState(self,"valid");},updateMIPs=function(self){setDirtyStates(self);setState(self,"enabled","enabled","disabled");setState(self,"readonly","read-only","read-write");setState(self,"required","required","optional");setState(self,"valid","valid","invalid");},getMIPState=function(self,mip){var retval={isSet:false},proxyNode;if(mip==="enabled"){retval.value=self.isEnabled();retval.isSet=true;}else{proxyNode=FormsProcessor.getProxyNode(self.element);if(proxyNode){retval.value=proxyNode.getMIPState(mip);retval.isSet=true;}}
return retval;},inheritEnabled=function(self){var parent=self.element.parentNode;while(parent){if(parent.isGroup||parent.isSwitch){if(isEnabled(parent)===false){return false;}}else if(parent.isCase){if(parent.getSwitch()&&typeof parent.getSwitch().getSelectedCase==="function"&&parent!==parent.getSwitch().getSelectedCase()){return false;}}
parent=parent.parentNode;}
return true;},isEnabled=function(self){var proxyNode;if(!inheritEnabled(self)){return false;}
if(self.element.isWired===false){return true;}
proxyNode=FormsProcessor.getProxyNode(self.element);if(proxyNode){return proxyNode.enabled.getValue();}
return self.mustBeBound()?false:true;};MIPHandler.prototype.updateMIPs=function(){updateMIPs(this);};MIPHandler.prototype.isDirtyMIP=function(mip){return isDirtyMIP(this,mip);}
MIPHandler.prototype.setDirtyState=function(mip){setDirtyState(this,mip);};MIPHandler.prototype.setDirtyStates=function(){setDirtyStates(this);};MIPHandler.prototype.refresh=function(){document.logger.log("Refreshing: "+this.element.tagName+":"+this.element.uniqueID,"control");updateMIPs(this);if(this.dirtyState.isDirty()){this.broadcastMIPs();this.dirtyState.setClean();}};MIPHandler.prototype.getMIPState=function(mip){return getMIPState(this,mip);};MIPHandler.prototype.inheritEnabled=function(){return inheritEnabled(this);};MIPHandler.prototype.isEnabled=function(){return isEnabled(this);}}());MIPHandler.prototype.broadcastMIPs=function(){};MIPHandler.prototype.onDocumentReady=function(){this.addcontroltomodel();}
MIPHandler.prototype.mustBeBound=function(){return true;};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/mip-eventtarget.js

function MIPEventTarget(element){this.element=element;}
MIPEventTarget.prototype.broadcastMIPs=function(){var proxyNode=FormsProcessor.getProxyNode(this.element);if(proxyNode){UX.dispatchEvent(this.element,proxyNode.valid.getValue()?"xforms-valid":"xforms-invalid",true,false);UX.dispatchEvent(this.element,proxyNode.required.getValue()?"xforms-required":"xforms-optional",true,false);UX.dispatchEvent(this.element,proxyNode.readonly.getValue()?"xforms-readonly":"xforms-readwrite",true,false);}
UX.dispatchEvent(this.element,this.isEnabled()?"xforms-enabled":"xforms-disabled",true,false);};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/state.js

function setState(pThis,sMIPName,sOn,sOff){var state;if(pThis.dirtyState&&pThis.dirtyState.isDirty(sMIPName)){UX.removeClassName(pThis.element,sOn);UX.removeClassName(pThis.element,sOff);if(typeof pThis.getMIPState==="function"){state=pThis.getMIPState(sMIPName);if(state&&state.isSet){pThis.m_MIPSCurrentlyShowing[sMIPName]=state.value;if(state.value){UX.addClassName(pThis.element,sOn);}else{UX.addClassName(pThis.element,sOff);}}}}}
function setInitialState(pThis){pThis.m_MIPSCurrentlyShowing.readonly=false;pThis.m_MIPSCurrentlyShowing.required=false;pThis.m_MIPSCurrentlyShowing.valid=true;pThis.m_MIPSCurrentlyShowing.enabled=true;UX.addClassName(pThis.element," read-write enabled valid optional");}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/Control.js

function Control(elmnt){this.element=elmnt;this.m_MIPSCurrentlyShowing={};this.addedTVCListener=false;this.dirtyState=new DirtyState();}
Control.prototype.giveFocus=function(){if(this.m_proxy.enabled.getValue()){if(typeof this.m_value.giveFocus==="function"){this.m_value.giveFocus();}else{this.m_value.focus();}
return true;}
return false;};Control.prototype.RetrieveValuePseudoElement=function(){var coll,len,i;if(!this.m_value){coll=this.element.getElementsByTagName("pe-value");len=coll.length;for(i=0;i<len;++i){if(coll[i].parentNode===this.element){this.m_value=coll[i];break;}}}
return this.m_value;};Control.prototype.AddValuePseudoElement=function(){var childNodes,i,labelChild,referenceNode,insertionPoint;try{if(document.media!=="print"){this.RetrieveValuePseudoElement();if(!this.m_value){childNodes=this.element.childNodes;if(childNodes){for(i=0;i<childNodes.length;++i){if(DOM_TEXT_NODE===childNodes[i].nodeType){this.m_sValue=childNodes[i].nodeValue;childNodes[i].parentNode.removeChild(childNodes[i]);break;}}}
labelChild=null;for(i=0;i<childNodes.length;++i){if(NamespaceManager.compareFullName(childNodes[i],"label","http://www.w3.org/2002/xforms")){labelChild=childNodes[i];break;}}
referenceNode=null;insertionPoint="";if(document.all||UX.isWebKit){this.m_value=document.createElement("pe-value");referenceNode=(labelChild)?labelChild.nextSibling:this.element.firstChild;this.element.insertBefore(this.m_value,referenceNode);}else{if(labelChild){referenceNode=labelChild;insertionPoint="afterEnd";}else{referenceNode=this.element;insertionPoint="afterBegin";}
referenceNode.insertAdjacentHTML(insertionPoint,"<pe-value></pe-value>");this.m_value=(labelChild)?labelChild.nextSibling:this.element.firstChild;}
window.status="";}
this.m_bAddedToModel=false;this.addInputEventFilter();}}catch(e){}};Control.prototype.addInputEventFilter=function(){var pThis,filterKeyPress,filterMouseAction;if(this.m_value){pThis=this;filterKeyPress=function(e){if(pThis.m_proxy&&pThis.m_proxy.readonly&&pThis.m_proxy.readonly.getValue()){if(e.keyCode!==9&&!(e.keyCode>=112&&e.keyCode<=123)&&!(e.keyCode>=33&&e.keyCode<=36)){if(e.preventDefault){e.preventDefault();}
if(e.stopPropagation){e.stopPropagation();}
e.cancelBubble=true;return false;}}
return true;};filterMouseAction=function(e){if(pThis.m_proxy&&pThis.m_proxy.readonly&&pThis.m_proxy.readonly.getValue()){if(e.preventDefault){e.preventDefault();}
if(e.stopPropagation){e.stopPropagation();}
e.cancelBubble=true;if(e.button===0&&e.type==="mousedown"){e.target.focus();}
return false;}
return true;};if(this.m_value.addEventListener){this.m_value.addEventListener("keydown",filterKeyPress,true);this.m_value.addEventListener("mousedown",filterMouseAction,true);this.m_value.addEventListener("mousemove",filterMouseAction,true);this.m_value.addEventListener("mouseup",filterMouseAction,true);this.m_value.addEventListener("onclick",filterMouseAction,true);}else if(this.m_value.attachEvent){this.m_value.attachEvent("onkeydown",filterKeyPress);this.m_value.attachEvent("onmousedown",filterMouseAction);this.m_value.attachEvent("onmousemove",filterMouseAction);this.m_value.attachEvent("onmouseup",filterMouseAction);this.m_value.attachEvent("onclick",filterMouseAction);}}};Control.prototype.addcontroltomodel=function(){if(!this.m_bAddedToModel){var oModel=getModelFor(this);if(oModel){setInitialState(this);oModel.addControl(this);}}else{throw("Controls should only be added to the model once each.");}};Control.prototype.rewire=function(){this.AddTVCListener();return this.xrewire();};Control.prototype.AddTVCListener=function(){if(!this.addedTVCListener){if(!this.m_value){this.AddValuePseudoElement();}
if(this.m_value.addEventListener){this.m_value.addEventListener("control-value-changed",{control:this,handleEvent:function(evt){var oEvt=document.createEvent("MutationEvents");oEvt.initMutationEvent("target-value-changed",true,true,null,evt.prevValue,evt.newValue,null,null);FormsProcessor.dispatchEvent(this.control,oEvt);}},false);this.addedTVCListener=true;}}};Control.prototype.getValue=function(){if(this.m_value.getValue){return this.m_value.getValue();}else{return this.m_sValue;}};Control.prototype.setValue=function(sValue){var oldVal,oEvt,pThis,oEvt2;oldVal=this.m_sValue;this.m_sValue=sValue;if(oldVal!==sValue){this.dirtyState.setDirty("value");}
try{if(this.m_value&&this.m_value.setValue!==undefined){if(this.m_value.setValue(sValue)){oEvt=document.createEvent("MutationEvents");oEvt.initMutationEvent("data-value-changed",false,false,null,"",sValue,"",null);oEvt._actionDepth=-1;pThis=this;spawn(function(){FormsProcessor.dispatchEvent(pThis.element,oEvt);});}}
if(this.dirtyState.isDirty("value")){oEvt2=document.createEvent("MutationEvents");oEvt2.initMutationEvent("xforms-value-changed",true,false,null,oldVal,sValue,"",null);FormsProcessor.dispatchEvent(this.element,oEvt2);}}catch(e){document.logger.log("Control '"+this.element.tagName+"' has no setValue() method.","control");}
return;};Control.prototype.setType=function(sType){var pevalue;if(sType!==this.m_type){UX.removeClassName(this.element,this.m_type);this.m_type=sType;UX.addClassName(this.element,this.m_type);pevalue=this.RetrieveValuePseudoElement();if(pevalue&&typeof pevalue.isTypeAllowed==="function"){if(!pevalue.isTypeAllowed(this.m_type)){UX.dispatchEvent(this.m_model,"xforms-binding-exception",true,false,false);}}}
return;};Control.prototype.xrewire=function(){var bRet,ctxBoundNode,oPN,sValueExpr,ctx;document.logger.log("Rewiring: "+this.element.tagName+":"+this.element.uniqueID,"control");bRet=false;if(this.m_proxy){this.m_proxy=null;}
ctxBoundNode=this.getBoundNode(1);oPN=null;if(ctxBoundNode.model){this.m_model=ctxBoundNode.model;}
sValueExpr=this.element.getAttribute("value");if(sValueExpr){ctx=ctxBoundNode;if(!ctxBoundNode.model&&!ctxBoundNode.node){ctx=this.getEvaluationContext();if(ctx.model){this.m_model=ctx.model;}}
oPN=ctx.model.addControlExpression(this,ctx,sValueExpr);bRet=true;}else if(ctxBoundNode.node){oPN=getProxyNode(ctxBoundNode.node);ctxBoundNode.model.addControlBinding(this);bRet=true;}
if(oPN){this.m_proxy=oPN;}
return bRet;};Control.prototype.refresh=function(){document.logger.log("Refreshing: "+this.element.tagName+":"+this.element.uniqueID,"control");var oProxy=this.element.m_proxy;this.updateMIPs();if(oProxy){this.element.setType(oProxy.getType());this.element.setValue(oProxy.getValue());}
if(this.dirtyState.isDirty()){this.broadcastMIPs();this.dirtyState.setClean();}};Control.prototype.getValue=function(){if(this.m_value.getValue){return this.m_value.getValue();}else{return this.m_sValue;}};Control.prototype.onDocumentReady=function(){this.addcontroltomodel();var oControl=this;FormsProcessor.addDefaultEventListener(oControl,"xforms-binding-exception",{handleEvent:function(evt){throw"Fatal Error: XForms Binding Exception on "+oControl.element.nodeName+"!";}},false);};Control.prototype.onContentReady=function(){this.AddValuePseudoElement();FormsProcessor.listenForXFormsFocus(this,this);};Control.prototype.isBoundToComplexContent=function(){var i,boundNode,childNodes;boundNode=this.getBoundNode(1).node;if(boundNode){childNodes=boundNode.childNodes;if(childNodes){for(i=0;i<childNodes.length;i++){if(DOM_ELEMENT_NODE===childNodes[i].nodeType){return true;}}}}
return false;};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/navigable-control.js

function NavigableControl(element){this.element=element;}
NavigableControl.prototype.isNavigableControl=true;NavigableControl.prototype.onContentReady=function(){this.setNavIndex();this.setAccessKey();FormsProcessor.addToNavigationList(this);};NavigableControl.prototype.setNavIndex=function(){this.navIndex=parseInt(this.element.getAttribute('navindex')||'0',10);};NavigableControl.prototype.setAccessKey=function(){this.accessKey=this.element.getAttribute('accesskey');};NavigableControl.prototype.onKeyDown=function(evt){if(UX.isHTMLTabKeyEvent(evt)){if(UX.isShiftKeyPressed(evt)){this.navigateToPreviousControl();}else{this.navigateToNextControl();}
return UX.cancelHTMLEvent(evt);}
return true;};NavigableControl.prototype.navigateToNextControl=function(){UX.dispatchEvent(this.element,'xforms-next',false,true,false);FormsProcessor.navigateToNextControl(this);};NavigableControl.prototype.navigateToPreviousControl=function(){UX.dispatchEvent(this.element,'xforms-previous',false,true,false);FormsProcessor.navigateToPreviousControl(this);};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/optional-binding.js

function OptionalBinding(){}
OptionalBinding.prototype.mustBeBound=function(){return false;};function OptionalIfUnspecifiedBinding(){}
OptionalIfUnspecifiedBinding.prototype.mustBeBound=function(){return Boolean(this.getAttribute("ref"));};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/pe-value.js

function PeValue(element){this.element=element;}
PeValue.prototype.giveFocus=function(){if(this.m_value){this.m_value.focus();}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/input-value-boolean.js

function XFormsBooleanValue(elmnt){this.element=elmnt;this.currValue='false';this.m_bFirstSetValue=true;}
function booleanValueChanged(pThis){var oEvt=pThis.element.ownerDocument.createEvent("MutationEvents");if(oEvt.initMutationEvent===undefined){oEvt.initMutationEvent=oEvt.initEvent;}
oEvt.initMutationEvent("control-value-changed",true,true,null,pThis.currValue,pThis.m_value.checked?'true':'false',null,null);spawn(function(){FormsProcessor.dispatchEvent(pThis.element,oEvt);});}
XFormsBooleanValue.prototype.onDocumentReady=function(){if(this.element.ownerDocument.media!="print"){var oInput=document.createElement("input");var eventName="click";oInput.type="checkbox";UX.addStyle(oInput,"backgroundColor","transparent");UX.addStyle(oInput,"padding","0");UX.addStyle(oInput,"margin","0");UX.addClassName(oInput,"ux-input-checkbox");UX.addClassName(this.element,"ux-boolean-value");var pThis=this;if(document.all){oInput.attachEvent("on"+eventName,function(e){booleanValueChanged(pThis);});}else{oInput.addEventListener(eventName,function(e){booleanValueChanged(pThis);},false);}
this.element.appendChild(oInput);this.m_value=oInput;}};XFormsBooleanValue.prototype.setValue=function(sValue){var bRet=false;if(this.m_value.value!=sValue){this.m_value.value=sValue;this.currValue=sValue;if(sValue==='true'||sValue==='1'){this.m_value.checked='checked';}else{this.m_value.checked='';}
bRet=true;}else if(this.m_bFirstSetValue){bRet=true;this.m_bFirstSetValue=false;}
return bRet;};XFormsBooleanValue.prototype.isTypeAllowed=function(sType){var arrSegments,prefix,localPart,namespace;arrSegments=sType.split(":");prefix=arrSegments.length===2?arrSegments[0]:"";localPart=arrSegments.length===2?arrSegments[1]:"";namespace=NamespaceManager.getNamespaceURIForPrefix(prefix);return((namespace==="http://www.w3.org/2001/XMLSchema"||namespace==="http://www.w3.org/2002/xforms")&&localPart==="boolean"&&!this.parentNode.isBoundToComplexContent());};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/input-value.js

function XFormsInputValue(elmnt)
{this.element=elmnt;this.currValue="";this.m_bFirstSetValue=true;}
function valueChangedIE(pThis,evt)
{var oEvt=pThis.element.ownerDocument.createEvent("MutationEvents");oEvt.initMutationEvent("control-value-changed",true,true,null,pThis.currValue,evt.srcElement.value,null,null);spawn(function(){FormsProcessor.dispatchEvent(pThis.element,oEvt);});evt.cancelBubble=true;}
function valueChangedFF(pThis,evt)
{var oEvt=pThis.element.ownerDocument.createEvent("MutationEvents");oEvt.initMutationEvent("control-value-changed",true,true,null,pThis.currValue,evt.target.value,null,null);FormsProcessor.dispatchEvent(pThis.element,oEvt);evt.cancelBubble=true;}
XFormsInputValue.prototype.getOwnerNodeName=function()
{return NamespaceManager.getLowerCaseLocalName(this.element.parentNode);};XFormsInputValue.prototype.onDocumentReady=function()
{if(this.element.ownerDocument.media!="print")
{var sTagNameLC=this.getOwnerNodeName();var sElementToCreate=(sTagNameLC=="textarea")?"textarea":"input";var oInput=document.createElement(sElementToCreate);var eventName=(this.element.parentNode.getAttribute("incremental")==="true")?"keyup":"change";UX.addStyle(oInput,"backgroundColor","transparent");UX.addStyle(oInput,"padding","0");UX.addStyle(oInput,"margin","0");if(sTagNameLC!=="textarea"){UX.addStyle(oInput,"border","0");}
var pThis=this;if(document.all)
{oInput.attachEvent("on"+eventName,function(e){valueChangedIE(pThis,e);});}
else
{oInput.addEventListener(eventName,function(e){valueChangedFF(pThis,e);},false);}
if(sTagNameLC=="secret")
{oInput.type="password";}
else if(sTagNameLC!=="textarea")
{oInput.setAttribute("type","text");}
this.element.appendChild(oInput);this.m_value=oInput;}};XFormsInputValue.prototype.setValue=function(sValue)
{var bRet=false;if(this.m_value.value!=sValue)
{this.m_value.value=sValue;this.currValue=sValue;bRet=true;}
else if(this.m_bFirstSetValue)
{bRet=true;this.m_bFirstSetValue=false;}
return bRet;};XFormsInputValue.prototype.isTypeAllowed=function(sType){var arrSegments,prefix,localPart,namespace;arrSegments=sType.split(":");prefix=arrSegments.length===2?arrSegments[0]:"";localPart=arrSegments.length===2?arrSegments[1]:"";namespace=NamespaceManager.getNamespaceURIForPrefix(prefix);return((namespace==="http://www.w3.org/2001/XMLSchema"||namespace==="http://www.w3.org/2002/xforms")&&localPart!=="base64Binary"&&localPart!=="hexBinary"&&!this.parentNode.isBoundToComplexContent());};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../extensions/hint-googleMap.js

function HintGMap(element){this.element=element;this.mapControl=this.element.parentNode;}
HintGMap.prototype.onDocumentReady=function(){this.mapControl.setMapInfo(this.element);};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../extensions/base-googleMap.js

function GMapControl(element){this.element=element;this.element.parentNode.setMapInfo=function(infoElement){element.setMapInfo(infoElement);};}
GMapControl.prototype.setMapInfo=function(infoElement){this.mapInfo=infoElement;};GMapControl.prototype.createMap=function(){this.mapContainer=document.createElement('div');this.element.appendChild(this.mapContainer);this.setMapDimensionUnlessParentIsSet('width','300px');this.setMapDimensionUnlessParentIsSet('height','200px');this.map=new GMap2(this.mapContainer);this.mapLocation=new GLatLng(51.523811,-0.107878);this.map.setCenter(this.mapLocation,this.estimateInitialZoom());this.addMapControls();};GMapControl.prototype.setMapDimensionUnlessParentIsSet=function(dimension,value){if(this.element.parentNode.style[dimension]===''){UX.addStyle(this.mapContainer,dimension,value);}else{UX.addStyle(this.mapContainer,dimension,this.element.parentNode.style[dimension]);}};GMapControl.prototype.estimateInitialZoom=function(){if(this.mapContainer.clientWidth<120||this.mapContainer.clientHeight<120){return 8;}
if(this.mapContainer.clientWidth<160||this.mapContainer.clientHeight<160){return 13;}
if(this.mapContainer.clientWidth<200||this.mapContainer.clientHeight<200){return 14;}
return 16;};GMapControl.prototype.addMapControls=function(){this.addCommonMapControls();if(typeof this.addMapNavigationControl==='function'){this.addMapNavigationControl();}};GMapControl.prototype.addCommonMapControls=function(){this.addMapTypeControl();this.addMapScaleControl();this.addMapOverviewControl();};GMapControl.prototype.addMapTypeControl=function(){if(this.mapContainer.clientWidth>=260&&this.mapContainer.clientHeight>=100){this.map.addControl(new GMapTypeControl());}else if(this.mapContainer.clientWidth>=190&&this.mapContainer.clientHeight>=120){this.map.addControl(new GHierarchicalMapTypeControl());}else if(this.mapContainer.clientWidth>=140&&this.mapContainer.clientHeight>=140){this.map.addControl(new GMenuMapTypeControl());}};GMapControl.prototype.addMapScaleControl=function(){if(this.mapContainer.clientWidth>=500&&this.mapContainer.clientHeight>=200){this.map.addControl(new GScaleControl());}};GMapControl.prototype.addMapOverviewControl=function(){if(this.mapContainer.clientWidth>=620&&this.mapContainer.clientHeight>=200){this.map.addControl(new GOverviewMapControl());}};GMapControl.prototype.setValue=function(value){var match;if(value!==this.currentValue){match=value.match(/([\-+]?\d*\.?\d+)[\,\s\;]*([\-+]?\d*\.?\d+)/);if(match){this.setMapCoordinates(new GLatLng(Number(match[1]),Number(match[2])));}else{this.setMapLocation(value);}
this.currentValue=value;}};GMapControl.prototype.setMapLocation=function(location){var self=this;if(!this.geocoder){this.geocoder=new GClientGeocoder();}
this.geocoder.getLatLng(location,function(coords){self.setMapCoordinates(coords);});};GMapControl.prototype.setMapCoordinates=function(coords){if(coords){this.mapLocation=coords;if(this.mapMarker){this.moveMapMarker();}else{this.addMapMarker();}}};GMapControl.prototype.addMapMarker=function(){var self=this;this.mapMarker=new GMarker(this.mapLocation,{clickable:this.mapInfo?true:false,draggable:false});GEvent.addListener(this.mapMarker,'click',function(){self.onClickMapMarker();});GEvent.addListener(this.mapMarker,'infowindowclose',function(){self.onMapInfoDismissed();});GEvent.addListener(this.map,'moveend',function(){var value;if(!self.mapInfoIsVisible){value=self.map.getCenter().lat()+";"+self.map.getCenter().lng();if(value!==self.currentValue){self.valueChanged(value);}}});this.map.addOverlay(this.mapMarker);};GMapControl.prototype.moveMapMarker=function(){if(!this.mapInfoIsVisible){this.mapMarker.setLatLng(this.mapLocation);this.map.setCenter(this.mapLocation,this.map.getZoom());}};GMapControl.prototype.onClickMapMarker=function(){if(this.mapInfo){if(this.mapInfoIsVisible){this.mapMarker.closeInfoWindow();}else{this.mapInfoIsVisible=true;FormsProcessor.refreshDescendents(this.mapInfo.childNodes);this.mapMarker.openInfoWindowHtml(this.mapInfo.getValue(),{maxWidth:this.mapContainer.clientWidth>=200?this.mapContainer.clientWidth-80:120});}}};GMapControl.prototype.onMapInfoDismissed=function(){this.map.panTo(this.mapLocation);this.mapInfoIsVisible=false;};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../extensions/output-googleMap.js

function XFormsOutputValueGMap(){}
XFormsOutputValueGMap.prototype.onDocumentReady=function(){this.createMap();this.map.disableDragging();};XFormsOutputValueGMap.prototype.addMapNavigationControl=function(){if(this.mapContainer.clientWidth>=110&&this.mapContainer.clientHeight>=100){this.map.addControl(new GSmallZoomControl3D());}else if(this.mapContainer.clientWidth>=80&&this.mapContainer.clientHeight>=80){this.map.addControl(new GSmallZoomControl());}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/output-value.js

function XFormsOutputValue(elmnt){this.element=elmnt;if(this.element.parentNode.m_sValue){this.setValue(this.element.parentNode.m_sValue);}}
XFormsOutputValue.prototype.setValue=function(sValue){var mediatypeAttr;var renderAsString=true;var sTagNameLC=NamespaceManager.getLowerCaseLocalName(this.element.parentNode);if(sTagNameLC==="mediatype"){if((this.element.parentNode.parentNode)&&(NamespaceManager.getLowerCaseLocalName(this.element.parentNode.parentNode)==="output")){this.element.parentNode.parentNode.setAttribute("mediatype",sValue);}}else if(sTagNameLC==="output"){renderAsString=this.setValueForOutputRendering(sValue);}
if(renderAsString){document.all?this.element.innerText=sValue:this.element.textContent=sValue;}else{document.all?this.element.innerText="":this.element.textContent="";}
return true;};XFormsOutputValue.prototype.getValue=function(){var sRet=document.all?this.element.innerText:this.element.textContent;var composedLabels=null;var sTagNameLC=NamespaceManager.getLowerCaseLocalName(this.element.parentNode);if(sTagNameLC==="label"&&!(/[^\t\n\r ]/.test(sRet))){composedLabels=NamespaceManager.getElementsByTagNameNS(this.element.parentNode,"http://www.w3.org/2002/xforms","output");if(composedLabels&&composedLabels.length>0){return composedLabels[0].m_value.getValue();}}
return sRet;};XFormsOutputValue.prototype.createMediatypeElement=function(sElement){var oRendertype=document.createElement(sElement);oRendertype.setAttribute("width","auto");oRendertype.setAttribute("height","auto");this.element.parentNode.appendChild(oRendertype);return oRendertype;};XFormsOutputValue.prototype.setContent=function(sValue){var oRendertype=this.element.parentNode["m_mediatype"];if(oRendertype&&(NamespaceManager.getLowerCaseLocalName(oRendertype)!=="div")){this.element.parentNode.removeChild(oRendertype);oRendertype=null;}
if(!oRendertype){oRendertype=this.createMediatypeElement("div");}
oRendertype.innerHTML=sValue;return oRendertype;};XFormsOutputValue.prototype.setImage=function(sValue){var oRendertype=this.element.parentNode["m_mediatype"];if(this.element.parentNode.m_type){if(oRendertype&&(NamespaceManager.getLowerCaseLocalName(oRendertype)!=="img")){this.element.parentNode.removeChild(oRendertype);oRendertype=null;}
if(!oRendertype){oRendertype=this.createMediatypeElement("img");}
if(this.element.parentNode.m_type.indexOf("base64Binary")>0){oRendertype.setAttribute("src","data:image/*;base64,"+sValue);}else{oRendertype.setAttribute("src",sValue);}}
return oRendertype;};XFormsOutputValue.prototype.setCalendar=function(sValue){var oRendertype=this.element.parentNode["m_mediatype"];if(oRendertype&&(NamespaceManager.getLowerCaseLocalName(oRendertype)!=="div")){this.element.parentNode.removeChild(oRendertype);oRendertype=null;}
if(!oRendertype){oRendertype=this.createMediatypeElement("div");if(oRendertype){oRendertype.setAttribute("id","ux-calendar-bg"+UX.calendarcount);UX.addClassName(oRendertype,"ux-calendar-bg");this.calendar=new OutputValueCalendar(UX.calendarcount);UX.calendarcount++;}}
if(this.calendar){this.calendar.setValue(sValue);this.calendar.render();}
return oRendertype;};XFormsOutputValue.prototype.setValueForOutputRendering=function(sValue){var renderAsString=true;var mediatypeAttr=this.element.parentNode.getAttribute("mediatype");var appearance=this.element.parentNode.getAttribute("appearance");var oRendertype=null;try{if(mediatypeAttr){if(mediatypeAttr.indexOf("image")===0){oRendertype=this.setImage(sValue);}else if((mediatypeAttr==="application/xhtml+xml")||(mediatypeAttr==="text/html")){oRendertype=this.setContent(sValue);}else{throw"Unrecognised media-type";}}else if((appearance==="full")&&(this.element.parentNode.m_type)&&(this.element.parentNode.m_type.indexOf(":date")>0)){oRendertype=this.setCalendar(sValue);}
if(oRendertype){this.element.parentNode["m_mediatype"]=oRendertype;renderAsString=false;}}catch(e){UX.dispatchEvent(this.parentNode,"xforms-output-error",false,true,true);}
if(renderAsString){oRendertype=this.element.parentNode["m_mediatype"];this.element.parentNode["m_mediatype"]=null;if(oRendertype){this.element.parentNode.removeChild(oRendertype)}}
return renderAsString;}
XFormsOutputValue.prototype.isTypeAllowed=function(sType){return(!this.parentNode.isBoundToComplexContent());};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../extensions/range-googleMap.js

function RangeValueGMAP(elmnt){}
RangeValueGMAP.prototype.valueChanged=function(sNewValue)
{var oEvt=this.element.ownerDocument.createEvent("MutationEvents");if(oEvt.initMutationEvent===undefined){oEvt.initMutationEvent=oEvt.initEvent;}
oEvt.initMutationEvent("control-value-changed",true,true,null,this.currentValue,sNewValue,null,null);var that=this;spawn(function(){FormsProcessor.dispatchEvent(that.element,oEvt);});};RangeValueGMAP.prototype.onDocumentReady=function(){this.createMap();};RangeValueGMAP.prototype.addMapNavigationControl=function(){if(this.mapContainer.clientWidth>=180&&this.mapContainer.clientHeight>=300){this.map.addControl(new GLargeMapControl3D());}else if(this.mapContainer.clientWidth>=120&&this.mapContainer.clientHeight>=140){this.map.addControl(new GSmallMapControl());}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/range-value.js

var rangecount=0;function RangeValue(elmnt){this.element=elmnt;this.currValue="";this.m_bFirstSetValue=true;var rangeElement=elmnt.parentNode;this.start=Number(rangeElement.getAttribute("start"))||0;this.end=Number(rangeElement.getAttribute("end"))||(this.start+10);this.step=Number(rangeElement.getAttribute("step"))||1;}
function rangeValueChanged(pThis,sNewValue){var oEvt=pThis.element.ownerDocument.createEvent("MutationEvents");if(oEvt.initMutationEvent===undefined){oEvt.initMutationEvent=oEvt.initEvent;}
oEvt.initMutationEvent("control-value-changed",true,true,null,pThis.currValue,sNewValue,null,null);spawn(function(){FormsProcessor.dispatchEvent(pThis.element,oEvt);});}
RangeValue.prototype.onDocumentReady=function(){if(this.element.ownerDocument.media!=="print"){this.element.innerHTML="<div id='slider-bg"+rangecount+"' class='slider-bg'><div class='slider-thumb' id='slider-thumb"+rangecount+"'> </div></div>";this.tickCount=this.end-this.start;this.trackWidth=200;this.tickWidthInPixels=this.trackWidth/this.tickCount;this.m_value=YAHOO.widget.Slider.getHorizSlider("slider-bg"+rangecount,"slider-thumb"+rangecount,0,this.trackWidth);rangecount++;var pThis=this;this.m_value.subscribe((this.element.parentNode.getAttribute("incremental")==="true")?"change":"slideEnd",function(){rangeValueChanged(pThis,pThis.quantizeValue(pThis.dataValueFromSliderPosition(pThis.m_value.getValue())));});}};RangeValue.prototype.setValue=function(sValue){var bRet=false,nValue=Number(sValue),valueAsSliderPosition=this.sliderPositionFromDataValue(nValue);if(this.m_value.getValue()!==valueAsSliderPosition){this.m_value.setValue(valueAsSliderPosition,true,true,true);this.currValue=sValue;bRet=true;}else if(this.m_bFirstSetValue){bRet=true;this.m_bFirstSetValue=false;}
if(nValue>this.end||nValue<this.start||this.quantizeValue(nValue)!==nValue){this.element.parentNode.onOutOfRange();}else{this.element.parentNode.onInRange();}
return bRet;};RangeValue.prototype.getStepGranularity=function(){var retVal,sVal;sVal=String(this.step);sVal=sVal.slice(sVal.indexOf("."));if(sVal.charAt(0)==="."){retVal=sVal.length-1;}else{retVal=0;}
return retVal;};RangeValue.prototype.quantizeValue=function(value){var quantizedValue,mod,offsetValue,stepGranularityModifier;stepGranularityModifier=Math.pow(10,this.getStepGranularity());value=Math.round(value*stepGranularityModifier)/stepGranularityModifier;if(value===this.end||quantizedValue===this.start){quantizedValue=value;}else{offsetValue=value-this.start;mod=offsetValue%this.step;quantizedValue=value-mod;if(mod>(this.step/2)){quantizedValue+=this.step;}
quantizedValue=Math.round(quantizedValue*stepGranularityModifier)/stepGranularityModifier;}
return quantizedValue;};RangeValue.prototype.dataValueFromSliderPosition=function(sliderPos){return this.start+(sliderPos/this.tickWidthInPixels);};RangeValue.prototype.sliderPositionFromDataValue=function(value){return(value-this.start)*this.tickWidthInPixels;};RangeValue.prototype.isTypeAllowed=function(sType){var arrSegments,prefix,localPart,namespace;arrSegments=sType.split(":");prefix=arrSegments.length===2?arrSegments[0]:"";localPart=arrSegments.length===2?arrSegments[1]:"";namespace=NamespaceManager.getNamespaceURIForPrefix(prefix);return((namespace==="http://www.w3.org/2001/XMLSchema"||namespace==="http://www.w3.org/2002/xforms")&&(localPart==="dayTimeDuration"||localPart==="yearMonthDuration"||localPart==="date"||localPart==="time"||localPart==="dateTime"||localPart==="gYearMonth"||localPart==="gYear"||localPart==="gMonthDay"||localPart==="gDay"||localPart==="gMonth"||localPart==="float"||localPart==="double"||localPart==="decimal"));};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/container.js

function Container(element){this.element=element;this.isWired=false;}
Container.prototype.onContentReady=function(){FormsProcessor.listenForXFormsFocus(this,this);};Container.prototype.giveFocus=function(){if(!this.m_proxy||!this.m_proxy.enabled||this.m_proxy.enabled.getValue()){return UX.focusFirstEligibleChild(this.childNodes);}
return false;};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/Group.js

function Group(elmnt)
{this.element=elmnt;this.m_MIPSCurrentlyShowing={};}
Group.prototype.isGroup=true;Group.prototype.setValue=function(sValue)
{return;};Group.prototype.setType=function(sType)
{return;};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/Repeat.js

function Repeat(elmnt){this.element=elmnt;var sStartIndex;if(this.element){this.element.bindingContainerName="group";sStartIndex=elmnt.getAttribute("startindex");this.m_nIndex=(sStartIndex===null||isNaN(sStartIndex))?1:this.m_nIndex=Number(sStartIndex);}
this.m_CurrentIterationCount=0;this.m_offset=0;this.m_iterationNodesetLength=0;}
Repeat.prototype.onContentReady=function(){FormsProcessor.listenForXFormsFocus(this,this);};Repeat.prototype.giveFocus=function(){var indexNode=this.getCurrentIteration();if(typeof indexNode.giveFocus==="function"){return indexNode.giveFocus();}
return true;};Repeat.prototype.onDocumentReady=function(){this.storeTemplate();this.addcontroltomodel();this.element.addEventListener("DOMActivate",{control:this,handleEvent:function(evt){this.control.Activate(evt.target);}},true);};Repeat.prototype.Activate=function(o){var coll=this.element.childNodes,len=coll.length,i;for(i=0;i<len;++i){if(coll[i].contains(o)){this.m_nIndex=i+1;break;}}};Repeat.prototype.storeTemplate=function(){this.sTemplate=this.element.cloneNode(true);while(this.element.childNodes.length){this.element.removeChild(this.element.firstChild);}
UX.addClassName(this.element,"repeat-ready");};Repeat.prototype.addcontroltomodel=function(){if(!this.m_bAddedToModel){var oModel=getModelFor(this);if(oModel){oModel.addControl(this);}}};Repeat.prototype.refresh=function(){};Repeat.prototype.getRequestedIterationCount=function(){var sNumber=this.getAttribute("number"),desiredIterationCount=0;if(sNumber===null||isNaN(sNumber)){desiredIterationCount=this.m_iterationNodesetLength;}else{desiredIterationCount=Number(sNumber);}
return desiredIterationCount;};Repeat.prototype.putIterations=function(desiredIterationCount){var
formerOffset,i,currentOrdinal,sDefaultPrefix,iterations=this.element.childNodes,oIterationElement,templateClone,thisModel,ordinal,newOrdinal;i=0;while(i<iterations.length){node=iterations[i];if(node.m_proxy&&!node.m_proxy.m_oNode){this.element.removeChild(node);}
else{i++;}}
this.m_CurrentIterationCount=iterations.length;formerOffset=this.m_offset;if(this.m_nIndex<this.m_offset){this.m_offset=1+this.m_nIndex-desiredIterationCount;}else if(this.m_nIndex>(desiredIterationCount+this.m_offset)){this.m_offset=this.m_nIndex-1;}
for(i=0;i<this.m_CurrentIterationCount;++i){node=iterations[i];if(node.isBindingContainer){ordinal=node.getAttribute("ordinal");newOrdinal=1+i+this.m_offset;if(ordinal!==newOrdinal){node.setAttribute("ordinal",newOrdinal);}}
node.m_proxy=null;}
sDefaultPrefix=NamespaceManager.getOutputPrefixesFromURI("http://www.w3.org/2002/xforms")[0]+":";var suspension=false;if(desiredIterationCount>this.m_CurrentIterationCount){suspension=true;DECORATOR.suspend();this.m_model.stopXFormsReady();}
while(desiredIterationCount>this.m_CurrentIterationCount){oIterationElement=(UX.isXHTML)?document.createElementNS("http://www.w3.org/2002/xforms",sDefaultPrefix+this.element.bindingContainerName):document.createElement(sDefaultPrefix+this.element.bindingContainerName);oIterationElement.setAttribute("ref",".");oIterationElement.setAttribute("ordinal",this.m_offset+this.m_CurrentIterationCount+1);oIterationElement.isBindingContainer=true;UX.addClassName(oIterationElement,"repeat-iteration");oIterationElement.outerScope=this;templateClone=this.element.sTemplate.cloneNode(true);while(templateClone.hasChildNodes()){oIterationElement.appendChild(templateClone.firstChild);}
this.element.appendChild(oIterationElement);window.status="";this.m_CurrentIterationCount++;}
thisModel=this.m_model;if(suspension){spawn(function(){DECORATOR.resume();thisModel.resumeXFormsReady();});}};Repeat.prototype.normaliseIndex=function(val){return Math.max(Math.min(val,this.m_iterationNodesetLength),!this.m_iterationNodesetLength?0:1);};Repeat.prototype.rewire=function(){var arrNodes=null,sExpr,sBind=this.element.getAttribute("bind"),oBind,oContext,r,newIndex;if(sBind){oBind=FormsProcessor.getBindObject(sBind,this.element);if(oBind){arrNodes=oBind.boundNodeSet;this.m_model=oBind.ownerModel;}}else{sExpr=this.element.getAttribute("nodeset");if(sExpr){document.logger.log("Rewiring: "+this.element.tagName+":"+this.element.uniqueID+":"+sExpr,"info");oContext=this.element.getEvaluationContext();this.m_model=oContext.model;r=this.m_model.EvaluateXPath(sExpr,oContext);arrNodes=r.value;}else{document.logger.log("Element: "+this.element.tagName+":"+this.element.uniqueID+" lacks binding attributes.","warn");}}
if(arrNodes){this.m_iterationNodesetLength=arrNodes.length;newIndex=this.m_model.indexOfNewNode(arrNodes);if(newIndex!==-1){this.m_nIndex=newIndex+1;}
this.m_nIndex=this.normaliseIndex(this.m_nIndex);this.putIterations(this.getRequestedIterationCount());if(!UX.hasDecorationSupport){DECORATOR.applyDecorationRules(this.element);}}
return false;};Repeat.prototype.getIndex=function(){return this.m_nIndex;};Repeat.prototype.setIndex=function(newIndex){var ix=this.normaliseIndex(newIndex);if(ix>newIndex){UX.dispatchEvent(this.element,"xforms-scroll-first",true,false,true);}else if(ix<newIndex){UX.dispatchEvent(this.element,"xforms-scroll-last",true,false,true);}
if(ix!==this.m_nIndex){this.m_nIndex=ix;this.m_model.flagRebuild();}};Repeat.prototype.getCurrentIteration=function(){return this.element.childNodes.item(this.getIndex()-this.m_offset-1);};Repeat.prototype.getPublicElementById=function(id){return FormsProcessor.getElementByIdWithAncestor(id,this.getCurrentIteration());};Repeat.prototype.exposes=function(element){return this.getCurrentIteration().contains(element);};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../_backplane/case.js

function Case(elmnt){this.element=elmnt;}
Case.prototype.deselect=function(){this.element.sDisplay=UX.getStyle(this.element,"display");UX.addStyle(this.element,"display","none");return;};Case.prototype.select=function(){if(typeof this.element.sDisplay==="undefined"){this.element.sDisplay=UX.getStyle(this.element,"display");}
else{UX.addStyle(this.element,"display",this.element.sDisplay);}
return;};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/case.js

function XFormsCase(elmnt){this._case=new Case(elmnt);}
XFormsCase.prototype.isCase=true;XFormsCase.prototype.getSwitch=function(){return this._case.element.parentNode;};XFormsCase.prototype.deselect=function(){var element=this._case.element;this._case.deselect();spawn(function(){UX.dispatchEvent(element,"xforms-deselect",true,false,true);FormsProcessor.refreshDescendentsForRelevance(element.childNodes);});};XFormsCase.prototype.select=function(){var element=this._case.element;this._case.select();spawn(function(){UX.dispatchEvent(element,"xforms-select",true,false,true);FormsProcessor.refreshDescendentsForRelevance(element.childNodes);});};XFormsCase.prototype.toggle=function(){var oSwitch=this.getSwitch();if(oSwitch&&UX.id(this)){oSwitch.toggle(UX.id(this));}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/Switch.js

function Switch(elmnt){this.element=elmnt;this.oCurrentCase=null;}
Switch.prototype.isSwitch=true;Switch.prototype.onContentReady=function(){FormsProcessor.listenForXFormsFocus(this,this);};Switch.prototype.giveFocus=function(){return this.oCurrentCase.giveFocus();};Switch.prototype.toggleDefault=function(){var caseColl,caseInHand,candidateDefaultCase,bCaseSelectedBySelectedAttribute,i;caseColl=this.element.childNodes;caseInHand=null;candidateDefaultCase=null;bCaseSelectedBySelectedAttribute=false;for(i=0;i<caseColl.length;++i){if(caseColl[i].select&&caseColl[i].deselect){caseInHand=caseColl[i];if(!bCaseSelectedBySelectedAttribute&&caseColl[i].getAttribute("selected")==="true"){if(candidateDefaultCase!==null){candidateDefaultCase.deselect();}
candidateDefaultCase=caseInHand;bCaseSelectedBySelectedAttribute=true;}else if(candidateDefaultCase===null){candidateDefaultCase=caseInHand;}else{caseInHand.deselect();}}}
if(candidateDefaultCase!==null){candidateDefaultCase.select();this.oCurrentCase=candidateDefaultCase;}};Switch.prototype.toggle=function(sCaseID){var i,oCase;for(i=0;i<this.element.childNodes.length;++i){if(UX.id(this.element.childNodes[i])===sCaseID){oCase=this.element.childNodes[i];break;}}
if(oCase){if(this.oCurrentCase){this.oCurrentCase.deselect();}
this.oCurrentCase=oCase;oCase.select();}};Switch.prototype.getSelectedCase=function(){return this.oCurrentCase;};Switch.prototype.onDocumentReady=Switch.prototype.toggleDefault;
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../_backplane/multimap.js

function Multimap(){return{addItem:function(theItem,key){if(!this.items){this.items={};}
key=key||theItem.getValue();if(this.items[key]){var o=this.items[key];if(!(o instanceof Array)){this.items[key]=[];this.items[key].push(o);}
this.items[key].push(theItem);}
else{this.items[key]=theItem;}
if(this.onItemAdded){this.onItemAdded(theItem,key);}},removeItem:function(item,key){var retval=false;if(this.items){var thisItem=this.items[key];if(thisItem&&(thisItem instanceof Array)){var l=thisItem.length;for(var i=0;i<l;++i){if(thisItem[i]===item){thisItem.splice(i,1);if(l===2){this.items[key]=thisItem[0];}
retval=true;break;}}}
else if(this.items[key]===item){retval=true;delete this.items[key];}}
if(retval&&this.onItemRemoved){this.onItemRemoved(item,key);}
return retval;},getItem:function(key,index){var theItem=this.items[key];if(theItem instanceof Array){var ix=index|0;theItem=theItem[ix];}
return theItem;}};}
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../_backplane/select.js

function CommonSelect(){this.itemValueChanged=function(item,oldvalue,newvalue){this.removeItem(item,oldvalue);this.addItem(item,newvalue);};this.getSingleDisplayValue=function(sValue){this.currentDisplayValue=sValue;var retval=null;var theItem=null;var i;if(this.items){theItem=this.items[sValue];if(UX.isArray(theItem)){if(typeof sValue==="object"){for(i=0;i<theItem.length;++i){if(UX.isEquivalentNode(theItem[i].getValue(),sValue)){theItem=theItem[i];break;}}}
else{theItem=theItem[0];}}
if(theItem){retval=theItem.getLabel();}}
return retval;};}
CommonSelect.prototype=new Multimap();
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/finite-control.js

var FiniteControl=function(elmnt)
{var m_bInRange=true;var element=elmnt;return{onOutOfRange:function(){if(m_bInRange){m_bInRange=false;if(element){UX.addClassName(element,"xforms-out-of-range");if(element.dispatchEvent){var oEvt=document.createEvent("Events");oEvt.initEvent("xforms-out-of-range",false,true);FormsProcessor.dispatchEvent(element,oEvt);}}}},onInRange:function(){if(!m_bInRange){m_bInRange=true;if(element){UX.removeClassName(element,"xforms-out-of-range");if(element.dispatchEvent){var oEvt=document.createEvent("Events");oEvt.initEvent("xforms-in-range",false,true);FormsProcessor.dispatchEvent(element,oEvt);}}}},isInRange:function(){return m_bInRange;}};};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../_platform/yui/dropbox-yui.js

function DropBox(containerElement,referenceElement,dropElement){this.PRIVATE={containerElement:containerElement,referenceElement:referenceElement};this.PRIVATE.m_showing=false;var button,callbackScope,buttonElement=document.createElement("button"),btnHeight,deltaPosition=0,referenceYUIElement=new YAHOO.util.Element(this.PRIVATE.referenceElement),dropWrapper=document.createElement("div");UX.addClassName(this.PRIVATE.containerElement,"yui-skin-sam");UX.addClassName(this.PRIVATE.containerElement,"ux-dropbox-container");this.PRIVATE.referenceElement.insertAdjacentElement("afterEnd",buttonElement);button=new YAHOO.widget.Button(buttonElement,{type:"push",onclick:{scope:this,fn:this.toggle}});button.addClass("ux-drop-button");referenceYUIElement.setStyle("display","inline-block");btnHeight=this.PRIVATE.referenceElement.offsetHeight;if(!(UX.isIE&&UX.isQuirksMode)){btnHeight-=3;}
button.setStyle("height",btnHeight+"px");if(UX.isIE||UX.isSafari||!UX.isQuirksMode){button.setStyle("vertical-align","top");}else{button.setStyle("vertical-align","middle");if(UX.isChrome){deltaPosition=-2;}else if(UX.isFF){deltaPosition=-1;}
button.setStyle("top",deltaPosition);}
UX.addClassName(dropWrapper,"yuimenu");this.PRIVATE.containerElement.appendChild(dropWrapper);UX.addClassName(dropElement,"bd");dropWrapper.appendChild(dropElement);this.PRIVATE.m_Menu=new YAHOO.widget.Menu(dropWrapper,{context:[this.PRIVATE.referenceElement,"tl","bl"]});this.PRIVATE.m_Menu.render();callbackScope=this;this.PRIVATE.m_Menu.subscribe("hide",function(){setTimeout(function()
{callbackScope.PRIVATE.m_showing=false;},100);});this.PRIVATE.m_Menu.subscribe("show",function(){setTimeout(function()
{callbackScope.PRIVATE.m_showing=true;},100);});}
DropBox.prototype.toggle=function(){if(this.PRIVATE.m_showing){this.hide();}else{this.show();}};DropBox.prototype.show=function(){this.PRIVATE.m_Menu.align("tl","bl");this.PRIVATE.m_Menu.cfg.setProperty("width",this.PRIVATE.referenceElement.offsetWidth+"px");this.PRIVATE.m_Menu.show();};DropBox.prototype.hide=function(){this.PRIVATE.m_Menu.hide();};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/commonselect.js

function XFormsCommonSelect(element){this.element=element;}
XFormsCommonSelect.prototype.giveFocus=function(){if(this.useDropBox()&&this.m_proxy.enabled.getValue()){if(this.m_value&&this.m_value!==document.activeElement&&!this.m_value.contains(document.activeElement)){if(typeof this.m_value.giveFocus==="function"){this.m_value.giveFocus();}else{this.m_value.focus();}}
return true;}
return false;};XFormsCommonSelect.prototype.isOpen=function(){return this.getAttribute("selection")==="open";};XFormsCommonSelect.prototype.refreshDisplayValue=function(){if(this.m_value.refreshDisplayValue){this.m_value.refreshDisplayValue();}};XFormsCommonSelect.prototype.containsCopyElements=function(){return NamespaceManager.getElementsByTagNameNS(this.element,"http://www.w3.org/2002/xforms","copy").length>0;};function XFormsCommonSelectValue(elmnt){this.element=elmnt;this.currValue="";this.m_bFirstSetValue=true;}
XFormsCommonSelectValue.prototype.onDocumentReady=function(){if(this.element.ownerDocument.media!=="print"){var sElementToCreate="input",oInput=document.createElement(sElementToCreate),pSelect=this.parentNode,pThis=this;if(oInput.addEventListener){oInput.addEventListener("change",function(e){pThis.trySetManuallyEnteredValue(oInput.value);},false);oInput.addEventListener("click",function(){pSelect.showChoices();},false);if(!this.parentNode.isOpen()){oInput.addEventListener("keypress",function(e){if(e.keyCode!==9){e.preventDefault();}},true);}}
else{oInput.attachEvent("onchange",function(e){pThis.trySetManuallyEnteredValue(oInput.value);});oInput.attachEvent("onclick",function(){pSelect.showChoices();});if(!this.parentNode.isOpen()){oInput.attachEvent("onkeypress",function(e){if(e.keyCode!==9){return false;}
return true;});}}
UX.addStyle(oInput,"backgroundColor","transparent");UX.addStyle(oInput,"padding","0");UX.addStyle(oInput,"margin","0");UX.addStyle(oInput,"border","0");this.element.appendChild(oInput);this.m_value=oInput;}};XFormsCommonSelectValue.prototype.giveFocus=function(){if(this.m_value){this.m_value.focus();}else{this.focus();}}
XFormsCommonSelectValue.prototype.trySetManuallyEnteredValue=function(value){if(this.parentNode.isOpen()||this.parentNode.getDisplayValue(value)!==null){this.parentNode.onValueSelected(value);}
else{this.setDisplayValue(this.currValue,true);}};XFormsCommonSelectValue.prototype.setValue=function(sValue){if(this.m_sValue!==sValue||this.parentNode.containsCopyElements()){this.m_sValue=sValue;this.refreshDisplayValue();return true;}
return false;};XFormsCommonSelectValue.prototype.refreshDisplayValue=function(){var sDisplayValue=this.parentNode.getDisplayValue(this.m_sValue);if(sDisplayValue===null&&this.parentNode.isOpen()){sDisplayValue=this.m_sValue;}
return this.setDisplayValue(sDisplayValue);};XFormsCommonSelectValue.prototype.setDisplayValue=function(sDisplayValue,bForceRedisplay){var bRet=false;if(sDisplayValue===null){this.parentNode.onOutOfRange();sDisplayValue="";}else{this.parentNode.onInRange();}
if(this.parentNode.useDropBox()){if(bForceRedisplay||this.currValue!==sDisplayValue){this.m_value.value=sDisplayValue;this.currValue=sDisplayValue;bRet=true;}else if(this.m_bFirstSetValue){bRet=true;this.m_bFirstSetValue=false;}}else{bRet=true;}
return bRet;};XFormsSelectValue=XFormsCommonSelectValue;XFormsSelect1Value=XFormsCommonSelectValue;function ElementWithChoices(){}
ElementWithChoices.prototype.onDocumentReady=function(){this.createChoicesPseudoElement();};ElementWithChoices.prototype.createChoicesPseudoElement=function(){var oPeChoices,nl,n,s,i;if(!this.m_choices){oPeChoices=this.element.ownerDocument.createElement("div");UX.addClassName(oPeChoices,"pe-choices");nl=this.childNodes;for(i=0;i<nl.length;++i){n=nl[i];s=NamespaceManager.getLowerCaseLocalName(n);switch(s){case"item":case"itemset":case"choices":oPeChoices.appendChild(n);--i;break;default:}}
if(this.useDropBox()){this.choicesBox=new DropBox(this.element,this.element.m_value,oPeChoices);}else{this.element.appendChild(oPeChoices);}
this.m_choices=oPeChoices;}};ElementWithChoices.prototype.showChoices=function(){if(this.choicesBox){this.choicesBox.show();}};ElementWithChoices.prototype.hideChoices=function(){if(this.choicesBox){this.choicesBox.hide();}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/select.js

function XFormsSelect(elmnt){this.element=elmnt;this.multiselect=true;this.element.addEventListener("fp-select",this,false);this.element.addEventListener("fp-deselect",this,false);this.element.addEventListener("xforms-select",this,false);this.element.addEventListener("xforms-deselect",this,false);this.element.addEventListener("data-value-changed",this,false);this.m_values=[];}
XFormsSelect.prototype=new CommonSelect();XFormsSelect.prototype.useDropBox=function(){return this.element.getAttribute("appearance")==="minimal";};XFormsSelect.prototype.onValueSelected=function(item){var value=(typeof item==="string")?item:item.getValue();var oEvt;if(value&&typeof value==="object"){clone=value.cloneNode(true);item.valueInInstance=this.element.m_proxy.appendChild(value,this);if(item.valueInInstance){this.element.m_model.flagRebuild();doUpdate();}}else{this.m_values.push(value);oEvt=this.element.ownerDocument.createEvent("MutationEvents");oEvt.initMutationEvent("control-value-changed",false,true,null,"",this.m_values.join(" "),"",1);FormsProcessor.dispatchEvent(this.element.m_value,oEvt);}};XFormsSelect.prototype.onValueDeselected=function(item){var oEvt,value=item.getValue();if(value&&typeof value==="object"){if(this.element.m_proxy.removeChild(value,this)){this.element.m_model.flagRebuild();doUpdate();oEvt=this.element.ownerDocument.createEvent("MutationEvents");oEvt.initMutationEvent("data-value-changed",false,true,null,"","","",1);FormsProcessor.dispatchEvent(this.element,oEvt);}}else{for(i=0;i<this.m_values.length;++i){if(value===this.m_values[i]){this.m_values.splice(i,1);oEvt=this.element.ownerDocument.createEvent("MutationEvents");oEvt.initMutationEvent("control-value-changed",false,true,null,"",this.m_values.join(" "),"",1);FormsProcessor.dispatchEvent(this.element.m_value,oEvt);break;}}}};XFormsSelect.prototype.handleEvent=function(oEvt){var oEvt,s,i;switch(oEvt.type){case"fp-select":this.onValueSelected(oEvt.target);oEvt.stopPropagation();break;case"fp-deselect":this.onValueDeselected(oEvt.target);break;case"data-value-changed":this.m_values=oEvt.newValue.split(" ");this.onSelectionChanged(oEvt.newValue);oEvt.stopPropagation();break;case"xforms-select":case"xforms-deselect":oEvt.stopPropagation();break;}};XFormsSelect.prototype.onSelectionChanged=function(s){var i,oEvt1=this.element.ownerDocument.createEvent("MutationEvents");this.element.m_undisplayedValues=s.trim().split(" ");if(this.element.containsCopyElements()){for(i=0;i<this.element.m_proxy.m_oNode.childNodes.length;++i){if(this.element.m_proxy.m_oNode.childNodes[i].nodeType!==DOM_TEXT_NODE){this.element.m_undisplayedValues.push(this.element.m_proxy.m_oNode.childNodes[i]);}}}
oEvt1.initMutationEvent("selection-changed",false,false,null,"",s,"",1);FormsProcessor.dispatchEvent(this.element,oEvt1);if(this.element.m_undisplayedValues.length){this.element.onOutOfRange();}else{this.element.onInRange();}
return;};XFormsSelect.prototype.onContentReady=function(){var
el=this.element,selection=el.getAttribute("selection"),appearance=el.getAttribute("appearance");if(!selection){selection="closed";el.setAttribute("selection",selection);}
if(!appearance){appearance=(selection==="closed"?"compact":"minimal");el.setAttribute("appearance",appearance);}
UX.addClassName(this,"selection-"+selection);UX.addClassName(this,"appearance-"+appearance);};XFormsSelect.prototype.getDisplayValue=function(sValue){var i,l,arrDisplayValues=[],arrValues;arrValues=sValue?sValue.trim().split(" "):[];l=arrValues.length;for(i=0;i<l;++i){arrDisplayValues.push(this.getSingleDisplayValue(arrValues[i]));}
return arrDisplayValues.join(" ");};XFormsSelectValue=XFormsCommonSelectValue;
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/select1.js

function XFormsSelect1(elmnt)
{this.element=elmnt;this.currentDisplayValue="";this.element.addEventListener("fp-select",this,false);this.element.addEventListener("xforms-select",this,false);this.element.addEventListener("xforms-deselect",this,false);this.element.addEventListener("xforms-value-changed",this,false);this.element.addEventListener("data-value-changed",this,false);this.m_currentItem=null;var keypressHandler={handleEvent:function(o){switch(o.keyCode){case 38:elmnt.selectPreviousItem();break;case 40:elmnt.selectNextItem();}}},wheelHandler={handleEvent:function(o){switch(o.type){case"focus":this.trapMouseWheel();break;case"blur":this.untrapMouseWheel();break;case"mousewheel":case"DOMMouseScroll":this.handleScroll(o);}},trapMouseWheel:function(){if(UX.isFF){document.addEventListener("DOMMouseScroll",this,true);}else if(UX.isIE){document.attachEvent("onmousewheel",wheelHandler.handleScroll);}else{document.addEventListener("mousewheel",this,true);}},untrapMouseWheel:function(){if(UX.isFF){document.removeEventListener("DOMMouseScroll",this,true);}else if(UX.isIE){document.detachEvent("onmousewheel",wheelHandler.handleScroll);}else{document.removeEventListener("mousewheel",this,true);}},handleScroll:function(o){var wheelDelta=o.wheelDelta;if(typeof wheelDelta==="undefined"){wheelDelta=o.detail;}
if(UX.isFF){wheelDelta*=-1;}
if(wheelDelta>0){elmnt.selectPreviousItem();}else{elmnt.selectNextItem();}
if(o.preventDefault){o.preventDefault();}
return false;}};if(UX.isIE){this.element.attachEvent("onkeyup",keypressHandler.handleEvent);this.element.attachEvent("onfocusin",wheelHandler.trapMouseWheel);this.element.attachEvent("onfocusout",wheelHandler.untrapMouseWheel);}else{this.element.addEventListener("keyup",keypressHandler,false);this.element.addEventListener("focus",wheelHandler,true);this.element.addEventListener("blur",wheelHandler,true);}}
XFormsSelect1.prototype=new CommonSelect();XFormsSelect1.prototype.handleEvent=function(oEvt)
{switch(oEvt.type)
{case"fp-select":this.element.m_currentItem=oEvt.target;this.onValueSelected(oEvt.target.getValue());break;case"xforms-select":case"xforms-deselect":oEvt.stopPropagation();break;case"xforms-value-changed":var element=this.element;spawn(function(){element.itemChanged(oEvt);});break;case"data-value-changed":this.onSelectionChanged(oEvt.newValue);oEvt.stopPropagation();break;}};XFormsSelect1.prototype.getFirstItem=function(){return UX.getFirstNodeByName(this.m_choices,"item","http://www.w3.org/2002/xforms");};XFormsSelect1.prototype.selectFirstItem=function(){var firstItem=this.getFirstItem();if(firstItem!==null){firstItem.onUserSelect();}};XFormsSelect1.prototype.selectPreviousItem=function(){var previousItem;if(this.m_currentItem===null){this.selectFirstItem();}else{previousItem=UX.getPreviousNodeByName(this.m_currentItem,"item","http://www.w3.org/2002/xforms",this.m_choices);if(previousItem!==null){previousItem.onUserSelect();}}};XFormsSelect1.prototype.selectNextItem=function(){var nextItem;if(this.m_currentItem===null){this.selectFirstItem();}else{nextItem=UX.getNextNodeByName(this.m_currentItem,"item","http://www.w3.org/2002/xforms",this.m_choices);if(nextItem!==null){nextItem.onUserSelect();}}};XFormsSelect1.prototype.onValueSelected=function(value){var oEvt1;this.element.hideChoices();if(this.element.currentlySelectedNode!==value){if(this.element.currentlySelectedNode){this.element.m_proxy.removeChild(this.element.currentlySelectedNode,this.currentlySelectedNode);this.currentlySelectedNode=null;}
if(value&&typeof value==="object"){clone=value.cloneNode(true);this.currentlySelectedNode=this.element.m_proxy.appendChild(value,this);if(this.currentlySelectedNode){oEvt=this.element.ownerDocument.createEvent("MutationEvents");oEvt.initMutationEvent("data-value-changed",false,true,null,"","","",1);FormsProcessor.dispatchEvent(this.element,oEvt);if(this.useDropBox()){this.element.m_value.refreshDisplayValue();}
this.element.m_model.flagRebuild();doUpdate();}}else{oEvt1=document.createEvent("MutationEvents");oEvt1.initMutationEvent("control-value-changed",false,true,null,"",value,"",1);FormsProcessor.dispatchEvent(this.element.m_value,oEvt1);}}};XFormsSelect1.prototype.itemChanged=function(oEvt){if(oEvt.target!==this.element){var sNodeName=NamespaceManager.getLowerCaseLocalName(oEvt.target);if(sNodeName==="value"){this.itemValueChanged(oEvt.target.parentNode,oEvt.prevValue,oEvt.newValue);}}};XFormsSelect1.prototype.onContentReady=function(){var s=this.getAttribute("appearance");if(!s){s="minimal";}
UX.addClassName(this,"appearance-"+s);};XFormsSelect1.prototype.getDisplayValue=function(sValue){if(this.containsCopyElements()){sValue=this.m_proxy.m_oNode.firstChild;while(sValue&&sValue.nodeType===DOM_TEXT_NODE){sValue=sValue.nextSibling;}
this.currentlySelectedNode=sValue;}
return this.getSingleDisplayValue(sValue);};XFormsSelect1.prototype.onItemAdded=function(item,key){if(!this.isInRange()&&key===this.currentDisplayValue&&this.m_value.setValue){this.m_value.setValue(key);}};XFormsSelect1.prototype.onItemRemoved=function(item,key){if(this.isInRange()&&key===this.currentDisplayValue&&this.m_value.setValue){this.m_value.setValue(key);}};XFormsSelect1.prototype.useDropBox=function(){return(this.element.getAttribute("appearance")===null||this.element.getAttribute("appearance")==="minimal");};XFormsSelect1.prototype.onSelectionChanged=function(s){if(this.element.containsCopyElements()){this.element.m_undisplayedValues=[];for(i=0;i<this.element.m_proxy.m_oNode.childNodes.length;++i){if(this.element.m_proxy.m_oNode.childNodes[i].nodeType!==3){this.element.m_undisplayedValues.push(this.element.m_proxy.m_oNode.childNodes[i]);}}}
var oEvt1=this.element.ownerDocument.createEvent("MutationEvents");oEvt1.initMutationEvent("selection-changed",false,false,null,"",s,"",1);FormsProcessor.dispatchEvent(this.element,oEvt1);return;};XFormsSelect1Value=XFormsCommonSelectValue;
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/item.js

function Value(elmnt){this.element=elmnt;UX.addStyle(this.element,"display","none");}
Value.prototype.onContentReady=function(){var ownerSelect;if(typeof this.element.parentNode.getOwnerSelect==="function"){ownerSelect=this.element.parentNode.getOwnerSelect();if(ownerSelect){ownerSelect.addItem(this.element.parentNode,this.getValue());}}};Value.prototype.setValue=function(s){var ownerSelect;if(typeof this.element.parentNode.getOwnerSelect==="function"){ownerSelect=this.element.parentNode.getOwnerSelect()
if(this.m_sValue!==s){if(ownerSelect){ownerSelect.removeItem(this.element.parentNode,this.m_sValue);this.m_sValue=s;ownerSelect.addItem(this.element.parentNode,s);ownerSelect.refreshDisplayValue();}}}};Value.prototype.getValue=function(){if(this.m_sValue===undefined){if(this.element.firstChild&&DOM_TEXT_NODE===this.element.firstChild.nodeType){this.m_sValue=this.element.firstChild.nodeValue;}
else{this.m_sValue="";}}
return this.m_sValue;};function Itemset(elmnt){this.element=elmnt;this.element.bindingContainerName="item";}
Itemset.prototype=new Repeat();function Item(elmnt){this.m_value=null;this.m_copy=null;this.m_bSelected=false;this.m_bReady=false;this.m_ownerSelect=null;this.element=elmnt;}
Item.prototype.getOwnerSelect=function(){var el,s;if(!this.m_ownerSelect){el=this.element.parentNode;while(el){s=NamespaceManager.getLowerCaseLocalName(el);if(s.indexOf("select")===0){this.m_ownerSelect=el;break;}
el=el.parentNode;}}
return this.m_ownerSelect;};Item.prototype.getLabel=function(){var s;if(this.m_label){if(this.m_label.getValue){s=this.m_label.getValue();}
else{s=this.m_label.innerHTML;}}
else{s=this.m_value.getValue();}
return s;};Item.prototype.findValueElement=function(){var coll,i;coll=NamespaceManager.getElementsByTagNameNS(this.element,"http://www.w3.org/2002/xforms","value");for(i=0;i<coll.length;++i){if(coll[i].parentNode===this.element){this.m_value=coll[i];break;}}
if(!this.m_value){coll=NamespaceManager.getElementsByTagNameNS(this.element,"http://www.w3.org/2002/xforms","copy");for(i=0;i<coll.length;++i){if(coll[i].parentNode===this.element){this.m_copy=coll[i];break;}}}};Item.prototype.findLabelElement=function(){var coll,i;coll=NamespaceManager.getElementsByTagNameNS(this.element,"http://www.w3.org/2002/xforms","label");for(i=0;i<coll.length;++i){if(coll[i].parentNode===this.element){this.m_label=coll[i];break;}}};Item.prototype.onContentReady=function(){var ownerSelect,pThis;this.findValueElement();this.findLabelElement();this.addVisualRepresentation();ownerSelect=this.getOwnerSelect();if(ownerSelect){pThis=this;ownerSelect.addEventListener("selection-changed",{handleEvent:function(e){pThis.handleEvent(e);}},false);this.addEventListener("DOMActivate",{handleEvent:function(evt){evt.currentTarget.toggleSelectionStatus();evt.stopPropagation();}},false);}
if(!this.m_bReady){this.m_bSelected=false;UX.addClassName(this.element,"pc-deselected");}};Item.prototype.addVisualRepresentation=function(){};Item.prototype.handleEvent=function(oEvt){if(oEvt.type==="selection-changed"&&oEvt.target===this.getOwnerSelect()){if(oEvt.target.m_undisplayedValues){oEvt.target.m_undisplayedValues=this.array_tryDataselect(oEvt.target.m_undisplayedValues);}
else{this.string_tryDataselect(oEvt.newValue);}}};Item.prototype.getValue=function(){var value;if(this.m_value&&this.m_value.getValue){return this.m_value.getValue();}else if(this.m_copy&&this.m_copy.getValue){if(this.valueInInstance){value=this.m_copy.getValue();if(UX.isEquivalentNode(this.valueInInstance,value)){return this.valueInInstance;}}else{return this.m_copy.getValue();}}else{return"";}};Item.prototype.string_tryDataselect=function(s){if(s!==""&&s===this.getValue()){this.onDataSelect();return true;}else{this.onDataDeselect();return false;}};Item.prototype.array_tryDataselect=function(arr){var s,i;s=this.getValue();if(s!==""){for(i=0;i<arr.length;++i){if(s&&(s===arr[i]||(typeof s==="object"&&UX.isEquivalentNode(s,arr[i])))){this.valueInInstance=arr[i];this.onDataSelect();arr.splice(i,1);return arr;}}}
this.onDataDeselect();return arr;};Item.prototype.toggleSelectionStatus=function(){var bSelected=!this.m_bSelected;if(bSelected){this.onUserSelect();}else{this.onUserDeselect();}};Item.prototype.onUserSelect=function(){var oEvt,elmnt;oEvt=this.element.ownerDocument.createEvent("Events");oEvt.initEvent("fp-select",true,true);elmnt=this.element;spawn(function(){FormsProcessor.dispatchEvent(elmnt,oEvt);});};Item.prototype.onUserDeselect=function(){var oEvt,elmnt;oEvt=this.element.ownerDocument.createEvent("Events");oEvt.initEvent("fp-deselect",true,true);elmnt=this.element;spawn(function(){FormsProcessor.dispatchEvent(elmnt,oEvt);});};Item.prototype.onDataSelect=function(){var oEvt;if(!this.m_bSelected||!this.m_bReady){this.m_bSelected=true;UX.removeClassName(this.element,"pc-deselected");UX.addClassName(this.element,"pc-selected");oEvt=this.element.ownerDocument.createEvent("Events");oEvt.initEvent("xforms-select",true,true);FormsProcessor.dispatchEvent(this.element,oEvt);this.m_bReady=true;}};Item.prototype.onDataDeselect=function(){var oEvt;if(this.m_bSelected){this.m_bSelected=false;UX.removeClassName(this.element,"pc-selected");UX.addClassName(this.element,"pc-deselected");oEvt=this.element.ownerDocument.createEvent("Events");oEvt.initEvent("xforms-deselect",true,true);FormsProcessor.dispatchEvent(this.element,oEvt);this.m_bReady=true;}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/copy.js

function Copy(element){this.element=element;this.m_oValue=undefined;UX.addStyle(this.element,"display","none");}
Copy.prototype.onContentReady=function(){var ownerSelect=this.element.parentNode.getOwnerSelect();if(ownerSelect){ownerSelect.addItem(this.element.parentNode,this.getValue());}};Copy.prototype.onDocumentReady=function(){var self=this;spawn(function(){var ownerSelect;if(typeof self.element.parentNode.getOwnerSelect==="function"){ownerSelect=self.element.parentNode.getOwnerSelect();if(getModelFor(self)!==getModelFor(ownerSelect)){UX.dispatchEvent(self.element,"xforms-binding-exception",true,false);}}});};Copy.prototype.setValue=function(o){var ownerSelect=this.element.parentNode.getOwnerSelect();if(this.m_oValue!==this.m_proxy.m_oNode){if(ownerSelect){ownerSelect.itemValueChanged(this.element.parentNode,this.getValue(),this.m_proxy.m_oNode);this.m_oValue=this.m_proxy.m_oNode;ownerSelect.refreshDisplayValue();}}};Copy.prototype.getValue=function(){return this.m_oValue?this.m_oValue:null;};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/modelactions.js

function ModelFunctionAction(method)
{this.ModelMethod=method;this.handleEvent=DeferToConditionalInvocationProcessor;this.performAction=function(evt){var m=getModelFor(this.element);this.ModelMethod(m);};return this;}
function Rebuild(elmnt){this.element=elmnt;}
function Recalculate(elmnt){this.element=elmnt;}
function Revalidate(elmnt){this.element=elmnt;}
function Refresh(elmnt){this.element=elmnt;}
function Reset(elmnt){this.element=elmnt;}
Rebuild.prototype=new ModelFunctionAction(function(theModel){theModel._rebuild();});Recalculate.prototype=new ModelFunctionAction(function(theModel){theModel._recalculate();});Revalidate.prototype=new ModelFunctionAction(function(theModel){theModel._revalidate();});Refresh.prototype=new ModelFunctionAction(function(theModel){theModel._refresh();});Reset.prototype=new ModelFunctionAction(function(theModel){UX.dispatchEvent(theModel,"xforms-reset",true,true);});
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/setindex.js

function SetIndex(elmnt){this.element=elmnt;}
SetIndex.prototype.handleEvent=DeferToConditionalInvocationProcessor;SetIndex.prototype.performAction=function(evt){var ctx,repeatID,repeatElement,indexResult,indexValue,indexXPath,err;doUpdate();if(!(this.element.hasAttribute)||this.element.hasAttribute("repeat")){repeatID=this.element.getAttribute("repeat");repeatElement=FormsProcessor.getElementById(repeatID,this.element);if(repeatElement){if(repeatElement.setIndex){if(!(this.element.hasAttribute)||this.element.hasAttribute("index")){indexXPath=this.getAttribute("index");ctx=this.getEvaluationContext();indexResult=ctx.model.EvaluateXPath(indexXPath);if(indexResult){indexValue=indexResult.numberValue();if(!isNaN(indexValue)){repeatElement.setIndex(indexValue);}}else{throw"The number attribute of the setindex element must contain a valid XPath expression.";}}else{throw"The number attribute of the setindex element is required.";}}else{throw"The IDREF provided by setindex/@repeat must resolve to a repeating structure that implements a setIndex method. '"+repeatID+"' is not such a structure.";}}}else{throw"The repeat attribute of the setindex element is required.";}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/setvalue.js

function SetValue(elmnt){this.element=elmnt;}
SetValue.prototype.handleEvent=DeferToConditionalInvocationProcessor;SetValue.prototype.performAction=function(evt){var oContext,oNode,oPE,sValue;oContext=this.getBoundNode(1);oNode=oContext.node;oPE=getProxyNode(oNode);sValue=getElementValueOrContent(oContext,this.element);oPE.setValue(sValue,oContext.model);};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/setfocus.js

function SetFocus(element){this.element=element;}
SetFocus.prototype.handleEvent=DeferToConditionalInvocationProcessor;SetFocus.prototype.performAction=function(){var controlId,control;doUpdate();controlId=UX.getPropertyValue(this,"control");if(controlId){control=FormsProcessor.getElementById(controlId,this.element);if(control){UX.dispatchEvent(control,"xforms-focus",false,true);}}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/insert.js

function Insert(elmnt)
{this.element=elmnt;}
Insert.prototype.handleEvent=DeferToConditionalInvocationProcessor;Insert.prototype.performAction=function(evt)
{var oContext=this.getEvaluationContext(),bindid=this.element.getAttribute("bind"),atExpr=this.element.getAttribute("at"),positionExpr=this.element.getAttribute("position"),originExpr=this.element.getAttribute("origin"),oInstance,oModel,nodesetExpr,nodeset,bindObject;if(bindid){bindObject=FormsProcessor.getBindObject(bindid,this.element);nodeset=bindObject.boundNodeSet;}else{nodesetExpr=this.element.getAttribute("nodeset");oInstance=oContext.model.instances()[0];nodeset=(nodesetExpr)?oInstance.evalXPath(nodesetExpr,oContext).nodeSetValue():null;}
oInstance=(nodeset&&nodeset.length>0)?nodeset[0].ownerDocument.XFormsInstance:oContext.model.instances()[0];oModel=oInstance.model;if(oInstance.insertNodeset(oContext,nodeset,atExpr,positionExpr,originExpr)){if(oModel&&typeof(oModel.flagRebuild==='function'))
oModel.flagRebuild();}
this.m_context=null;};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/delete.js

function Delete(elmnt)
{this.element=elmnt;}
Delete.prototype.handleEvent=DeferToConditionalInvocationProcessor;Delete.prototype.performAction=function(evt)
{var oContext=this.getEvaluationContext(),bindid=this.element.getAttribute("bind"),atExpr=this.element.getAttribute("at"),oInstance=oContext.model.instances()[0],nodeset,nodesetExpr,bindObject;if(bindid){bindObject=FormsProcessor.getBindObject(bindid,this.element);nodeset=bindObject.boundNodeSet;}else{nodesetExpr=this.element.getAttribute("nodeset");nodeset=(nodesetExpr)?oInstance.evalXPath(nodesetExpr,oContext).nodeSetValue():null;}
if(oInstance.deleteFromNodeset(oContext,nodeset,atExpr)){oContext.model.flagRebuild();}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/toggle.js

function Toggle(elmnt){this.element=elmnt;}
Toggle.prototype.handleEvent=DeferToConditionalInvocationProcessor;Toggle.prototype.performAction=function(evt){var oCase,oContext,ns,sCaseID;oContext=this.getEvaluationContext();ns=NamespaceManager.getElementsByTagNameNS(this.element,"http://www.w3.org/2002/xforms","case");sCaseID=(ns&&ns.length>0)?getElementValueOrContent(oContext,ns[0]):this.element.getAttribute("case");if(sCaseID){oCase=FormsProcessor.getElementById(sCaseID,this.element);if(oCase&&oCase.toggle){oCase.toggle();}}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/submit.js

function Submit(elmnt){this.element=elmnt;this.element.addEventListener("DOMActivate",this,false);}
Submit.prototype.handleEvent=DeferToConditionalInvocationProcessor;Submit.prototype.performAction=function(oEvt){var control=this;var oSubmission=null;var oDocument=control.element.ownerDocument;if(oEvt.type==="DOMActivate"){var sID=control.element.getAttribute("submission");if(sID){oSubmission=oDocument.getElementById(sID);if(!oSubmission||!NamespaceManager.compareFullName(oSubmission,"submission","http://www.w3.org/2002/xforms")){UX.dispatchEvent(this.element,"xforms-binding-exception",true,false,false);}}else{var oModel=getModelFor(oDocument);if(oModel){var nsChildNodes=oModel.element.childNodes;for(var i=0;i<nsChildNodes.length;i++){if(NamespaceManager.compareFullName(nsChildNodes[i],"submission","http://www.w3.org/2002/xforms")){oSubmission=nsChildNodes[i];break;}}}
if(!oSubmission){throw"There is no submission element associated with the default model.";}}
if(oSubmission){var oSubmitEvt=oDocument.createEvent("Events");oSubmitEvt.initEvent("xforms-submit",true,true,null,null);spawn(function(){FormsProcessor.dispatchEvent(oSubmission,oSubmitEvt)});}}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/HintMixin.js

function HintMixin(element){this.element=element;var context=element.parentNode;if(!context){throw"No context found for hint";}
element.setAttribute("level","ephemeral");UX.addClassName(context,"xf-hint-container");if(typeof context.addEventListener==="function"){context.addEventListener("xforms-hint",{handleEvent:function(evt){var forwardEvt=document.createEvent("Events");forwardEvt.initEvent("ub-activate",false,false);forwardEvt.activate=true;FormsProcessor.dispatchEvent(element,forwardEvt);return;}},false);context.addEventListener("xforms-hint-off",{handleEvent:function(evt){var forwardEvt=document.createEvent("Events");forwardEvt.initEvent("ub-activate",false,false);forwardEvt.activate=false;FormsProcessor.dispatchEvent(element,forwardEvt);return;}},false);}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/HelpMixin.js

function HelpMixin(el){this.element=el;var context=el.parentNode;if(!context){throw"No context found for help";}
el.setAttribute("level","modeless");UX.addClassName(context,"xf-help-container");context.addEventListener("xforms-help",{handleEvent:function(evt){var forwardEvt=el.ownerDocument.createEvent("Events");forwardEvt.initEvent("ub-activate",false,false);FormsProcessor.dispatchEvent(el,forwardEvt);return;}},false);};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/Header.js

function Header(element){this.element=element;this.template=null;};Header.prototype.onDocumentReady=function(){var model=null;if(this.element.getAttribute("nodeset")){this.template=this.element.cloneNode(true);while(this.element.hasChildNodes()){this.element.removeChild(this.element.firstChild);}
model=getModelFor(this);model.addControl(this);}
UX.addClassName(this.element,"header-ready");};Header.prototype.refresh=function(){};Header.prototype.rewire=function(){var expression=this.element.getAttribute("nodeset");var nodes;var context;var i;var name;var element;var template;if(expression){while(this.element.childNodes.length>0){this.element.removeChild(this.element.firstChild);}
context=this.element.getEvaluationContext();nodes=context.model.EvaluateXPath(expression,context).value;if(nodes){name=NamespaceManager.getOutputPrefixesFromURI("http://www.w3.org/2002/xforms")[0]+":header";for(i=0;i<nodes.length;i++){element=document.createElementNS("http://www.w3.org/2002/xforms",name);element.setAttribute("ref",".");element.setAttribute("ordinal",i+1);UX.addClassName(element,"header-ready");template=this.template.cloneNode(true);while(template.hasChildNodes()){element.appendChild(template.firstChild);}
this.element.appendChild(element);}
if(!UX.hasDecorationSupport){DECORATOR.applyDecorationRules(this.element);}}}};
//from: http://yui.yahooapis.com/2.5.2/build/element/element-beta-min.js

YAHOO.util.Attribute=function(B,A){if(A){this.owner=A;this.configure(B,true);}};YAHOO.util.Attribute.prototype={name:undefined,value:null,owner:null,readOnly:false,writeOnce:false,_initialConfig:null,_written:false,method:null,validator:null,getValue:function(){return this.value;},setValue:function(F,B){var E;var A=this.owner;var C=this.name;var D={type:C,prevValue:this.getValue(),newValue:F};if(this.readOnly||(this.writeOnce&&this._written)){return false;}if(this.validator&&!this.validator.call(A,F)){return false;}if(!B){E=A.fireBeforeChangeEvent(D);if(E===false){return false;}}if(this.method){this.method.call(A,F);}this.value=F;this._written=true;D.type=C;if(!B){this.owner.fireChangeEvent(D);}return true;},configure:function(B,C){B=B||{};this._written=false;this._initialConfig=this._initialConfig||{};for(var A in B){if(A&&YAHOO.lang.hasOwnProperty(B,A)){this[A]=B[A];if(C){this._initialConfig[A]=B[A];}}}},resetValue:function(){return this.setValue(this._initialConfig.value);},resetConfig:function(){this.configure(this._initialConfig);},refresh:function(A){this.setValue(this.value,A);}};(function(){var A=YAHOO.util.Lang;YAHOO.util.AttributeProvider=function(){};YAHOO.util.AttributeProvider.prototype={_configs:null,get:function(C){this._configs=this._configs||{};var B=this._configs[C];if(!B){return undefined;}return B.value;},set:function(D,E,B){this._configs=this._configs||{};var C=this._configs[D];if(!C){return false;}return C.setValue(E,B);},getAttributeKeys:function(){this._configs=this._configs;var D=[];var B;for(var C in this._configs){B=this._configs[C];if(A.hasOwnProperty(this._configs,C)&&!A.isUndefined(B)){D[D.length]=C;}}return D;},setAttributes:function(D,B){for(var C in D){if(A.hasOwnProperty(D,C)){this.set(C,D[C],B);}}},resetValue:function(C,B){this._configs=this._configs||{};if(this._configs[C]){this.set(C,this._configs[C]._initialConfig.value,B);return true;}return false;},refresh:function(E,C){this._configs=this._configs;E=((A.isString(E))?[E]:E)||this.getAttributeKeys();for(var D=0,B=E.length;D<B;++D){if(this._configs[E[D]]&&!A.isUndefined(this._configs[E[D]].value)&&!A.isNull(this._configs[E[D]].value)){this._configs[E[D]].refresh(C);}}},register:function(B,C){this.setAttributeConfig(B,C);},getAttributeConfig:function(C){this._configs=this._configs||{};var B=this._configs[C]||{};var D={};for(C in B){if(A.hasOwnProperty(B,C)){D[C]=B[C];}}return D;},setAttributeConfig:function(B,C,D){this._configs=this._configs||{};C=C||{};if(!this._configs[B]){C.name=B;this._configs[B]=this.createAttribute(C);}else{this._configs[B].configure(C,D);}},configureAttribute:function(B,C,D){this.setAttributeConfig(B,C,D);},resetAttributeConfig:function(B){this._configs=this._configs||{};this._configs[B].resetConfig();},subscribe:function(B,C){this._events=this._events||{};if(!(B in this._events)){this._events[B]=this.createEvent(B);}YAHOO.util.EventProvider.prototype.subscribe.apply(this,arguments);},on:function(){this.subscribe.apply(this,arguments);},addListener:function(){this.subscribe.apply(this,arguments);},fireBeforeChangeEvent:function(C){var B="before";B+=C.type.charAt(0).toUpperCase()+C.type.substr(1)+"Change";C.type=B;return this.fireEvent(C.type,C);},fireChangeEvent:function(B){B.type+="Change";return this.fireEvent(B.type,B);},createAttribute:function(B){return new YAHOO.util.Attribute(B,this);}};YAHOO.augment(YAHOO.util.AttributeProvider,YAHOO.util.EventProvider);})();(function(){var D=YAHOO.util.Dom,F=YAHOO.util.AttributeProvider;YAHOO.util.Element=function(G,H){if(arguments.length){this.init(G,H);}};YAHOO.util.Element.prototype={DOM_EVENTS:null,appendChild:function(G){G=G.get?G.get("element"):G;this.get("element").appendChild(G);},getElementsByTagName:function(G){return this.get("element").getElementsByTagName(G);},hasChildNodes:function(){return this.get("element").hasChildNodes();},insertBefore:function(G,H){G=G.get?G.get("element"):G;H=(H&&H.get)?H.get("element"):H;this.get("element").insertBefore(G,H);},removeChild:function(G){G=G.get?G.get("element"):G;this.get("element").removeChild(G);return true;},replaceChild:function(G,H){G=G.get?G.get("element"):G;H=H.get?H.get("element"):H;return this.get("element").replaceChild(G,H);},initAttributes:function(G){},addListener:function(K,J,L,I){var H=this.get("element");I=I||this;H=this.get("id")||H;var G=this;if(!this._events[K]){if(this.DOM_EVENTS[K]){YAHOO.util.Event.addListener(H,K,function(M){if(M.srcElement&&!M.target){M.target=M.srcElement;}G.fireEvent(K,M);},L,I);}this.createEvent(K,this);}YAHOO.util.EventProvider.prototype.subscribe.apply(this,arguments);},on:function(){this.addListener.apply(this,arguments);},subscribe:function(){this.addListener.apply(this,arguments);},removeListener:function(H,G){this.unsubscribe.apply(this,arguments);},addClass:function(G){D.addClass(this.get("element"),G);},getElementsByClassName:function(H,G){return D.getElementsByClassName(H,G,this.get("element"));},hasClass:function(G){return D.hasClass(this.get("element"),G);},removeClass:function(G){return D.removeClass(this.get("element"),G);},replaceClass:function(H,G){return D.replaceClass(this.get("element"),H,G);},setStyle:function(I,H){var G=this.get("element");if(!G){return this._queue[this._queue.length]=["setStyle",arguments];}return D.setStyle(G,I,H);},getStyle:function(G){return D.getStyle(this.get("element"),G);},fireQueue:function(){var H=this._queue;for(var I=0,G=H.length;I<G;++I){this[H[I][0]].apply(this,H[I][1]);}},appendTo:function(H,I){H=(H.get)?H.get("element"):D.get(H);this.fireEvent("beforeAppendTo",{type:"beforeAppendTo",target:H});I=(I&&I.get)?I.get("element"):D.get(I);var G=this.get("element");if(!G){return false;}if(!H){return false;}if(G.parent!=H){if(I){H.insertBefore(G,I);}else{H.appendChild(G);}}this.fireEvent("appendTo",{type:"appendTo",target:H});},get:function(G){var I=this._configs||{};var H=I.element;if(H&&!I[G]&&!YAHOO.lang.isUndefined(H.value[G])){return H.value[G];}return F.prototype.get.call(this,G);},setAttributes:function(L,H){var K=this.get("element");for(var J in L){if(!this._configs[J]&&!YAHOO.lang.isUndefined(K[J])){this.setAttributeConfig(J);}}for(var I=0,G=this._configOrder.length;I<G;++I){if(L[this._configOrder[I]]!==undefined){this.set(this._configOrder[I],L[this._configOrder[I]],H);}}},set:function(H,J,G){var I=this.get("element");if(!I){this._queue[this._queue.length]=["set",arguments];if(this._configs[H]){this._configs[H].value=J;}return;}if(!this._configs[H]&&!YAHOO.lang.isUndefined(I[H])){C.call(this,H);}return F.prototype.set.apply(this,arguments);},setAttributeConfig:function(G,I,J){var H=this.get("element");if(H&&!this._configs[G]&&!YAHOO.lang.isUndefined(H[G])){C.call(this,G,I);}else{F.prototype.setAttributeConfig.apply(this,arguments);}this._configOrder.push(G);},getAttributeKeys:function(){var H=this.get("element");var I=F.prototype.getAttributeKeys.call(this);for(var G in H){if(!this._configs[G]){I[G]=I[G]||H[G];}}return I;},createEvent:function(H,G){this._events[H]=true;F.prototype.createEvent.apply(this,arguments);},init:function(H,G){A.apply(this,arguments);}};var A=function(H,G){this._queue=this._queue||[];this._events=this._events||{};this._configs=this._configs||{};this._configOrder=[];G=G||{};G.element=G.element||H||null;this.DOM_EVENTS={"click":true,"dblclick":true,"keydown":true,"keypress":true,"keyup":true,"mousedown":true,"mousemove":true,"mouseout":true,"mouseover":true,"mouseup":true,"focus":true,"blur":true,"submit":true};var I=false;if(YAHOO.lang.isString(H)){C.call(this,"id",{value:G.element});}if(D.get(H)){I=true;E.call(this,G);B.call(this,G);}YAHOO.util.Event.onAvailable(G.element,function(){if(!I){E.call(this,G);}this.fireEvent("available",{type:"available",target:G.element});},this,true);YAHOO.util.Event.onContentReady(G.element,function(){if(!I){B.call(this,G);}this.fireEvent("contentReady",{type:"contentReady",target:G.element});},this,true);};var E=function(G){this.setAttributeConfig("element",{value:D.get(G.element),readOnly:true});};var B=function(G){this.initAttributes(G);this.setAttributes(G,true);this.fireQueue();};var C=function(G,I){var H=this.get("element");I=I||{};I.name=G;I.method=I.method||function(J){H[G]=J;};I.value=I.value||H[G];this._configs[G]=new YAHOO.util.Attribute(I,this);};YAHOO.augment(YAHOO.util.Element,F);})();YAHOO.register("element",YAHOO.util.Element,{version:"2.5.2",build:"1076"});
//from: http://yui.yahooapis.com/2.5.2/build/yahoo-dom-event/yahoo-dom-event.js

if(typeof YAHOO=="undefined"||!YAHOO){var YAHOO={};}YAHOO.namespace=function(){var A=arguments,E=null,C,B,D;for(C=0;C<A.length;C=C+1){D=A[C].split(".");E=YAHOO;for(B=(D[0]=="YAHOO")?1:0;B<D.length;B=B+1){E[D[B]]=E[D[B]]||{};E=E[D[B]];}}return E;};YAHOO.log=function(D,A,C){var B=YAHOO.widget.Logger;if(B&&B.log){return B.log(D,A,C);}else{return false;}};YAHOO.register=function(A,E,D){var I=YAHOO.env.modules;if(!I[A]){I[A]={versions:[],builds:[]};}var B=I[A],H=D.version,G=D.build,F=YAHOO.env.listeners;B.name=A;B.version=H;B.build=G;B.versions.push(H);B.builds.push(G);B.mainClass=E;for(var C=0;C<F.length;C=C+1){F[C](B);}if(E){E.VERSION=H;E.BUILD=G;}else{YAHOO.log("mainClass is undefined for module "+A,"warn");}};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(A){return YAHOO.env.modules[A]||null;};YAHOO.env.ua=function(){var C={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0};var B=navigator.userAgent,A;if((/KHTML/).test(B)){C.webkit=1;}A=B.match(/AppleWebKit\/([^\s]*)/);if(A&&A[1]){C.webkit=parseFloat(A[1]);if(/ Mobile\//.test(B)){C.mobile="Apple";}else{A=B.match(/NokiaN[^\/]*/);if(A){C.mobile=A[0];}}A=B.match(/AdobeAIR\/([^\s]*)/);if(A){C.air=A[0];}}if(!C.webkit){A=B.match(/Opera[\s\/]([^\s]*)/);if(A&&A[1]){C.opera=parseFloat(A[1]);A=B.match(/Opera Mini[^;]*/);if(A){C.mobile=A[0];}}else{A=B.match(/MSIE\s([^;]*)/);if(A&&A[1]){C.ie=parseFloat(A[1]);}else{A=B.match(/Gecko\/([^\s]*)/);if(A){C.gecko=1;A=B.match(/rv:([^\s\)]*)/);if(A&&A[1]){C.gecko=parseFloat(A[1]);}}}}}return C;}();(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var B=YAHOO_config.listener,A=YAHOO.env.listeners,D=true,C;if(B){for(C=0;C<A.length;C=C+1){if(A[C]==B){D=false;break;}}if(D){A.push(B);}}}})();YAHOO.lang=YAHOO.lang||{};(function(){var A=YAHOO.lang,C=["toString","valueOf"],B={isArray:function(D){if(D){return A.isNumber(D.length)&&A.isFunction(D.splice);}return false;},isBoolean:function(D){return typeof D==="boolean";},isFunction:function(D){return typeof D==="function";},isNull:function(D){return D===null;},isNumber:function(D){return typeof D==="number"&&isFinite(D);},isObject:function(D){return(D&&(typeof D==="object"||A.isFunction(D)))||false;},isString:function(D){return typeof D==="string";},isUndefined:function(D){return typeof D==="undefined";},_IEEnumFix:(YAHOO.env.ua.ie)?function(F,E){for(var D=0;D<C.length;D=D+1){var H=C[D],G=E[H];if(A.isFunction(G)&&G!=Object.prototype[H]){F[H]=G;}}}:function(){},extend:function(H,I,G){if(!I||!H){throw new Error("extend failed, please check that "+"all dependencies are included.");}var E=function(){};E.prototype=I.prototype;H.prototype=new E();H.prototype.constructor=H;H.superclass=I.prototype;if(I.prototype.constructor==Object.prototype.constructor){I.prototype.constructor=I;}if(G){for(var D in G){if(A.hasOwnProperty(G,D)){H.prototype[D]=G[D];}}A._IEEnumFix(H.prototype,G);}},augmentObject:function(H,G){if(!G||!H){throw new Error("Absorb failed, verify dependencies.");}var D=arguments,F,I,E=D[2];if(E&&E!==true){for(F=2;F<D.length;F=F+1){H[D[F]]=G[D[F]];}}else{for(I in G){if(E||!(I in H)){H[I]=G[I];}}A._IEEnumFix(H,G);}},augmentProto:function(G,F){if(!F||!G){throw new Error("Augment failed, verify dependencies.");}var D=[G.prototype,F.prototype];for(var E=2;E<arguments.length;E=E+1){D.push(arguments[E]);}A.augmentObject.apply(this,D);},dump:function(D,I){var F,H,K=[],L="{...}",E="f(){...}",J=", ",G=" => ";if(!A.isObject(D)){return D+"";}else{if(D instanceof Date||("nodeType"in D&&"tagName"in D)){return D;}else{if(A.isFunction(D)){return E;}}}I=(A.isNumber(I))?I:3;if(A.isArray(D)){K.push("[");for(F=0,H=D.length;F<H;F=F+1){if(A.isObject(D[F])){K.push((I>0)?A.dump(D[F],I-1):L);}else{K.push(D[F]);}K.push(J);}if(K.length>1){K.pop();}K.push("]");}else{K.push("{");for(F in D){if(A.hasOwnProperty(D,F)){K.push(F+G);if(A.isObject(D[F])){K.push((I>0)?A.dump(D[F],I-1):L);}else{K.push(D[F]);}K.push(J);}}if(K.length>1){K.pop();}K.push("}");}return K.join("");},substitute:function(S,E,L){var I,H,G,O,P,R,N=[],F,J="dump",M=" ",D="{",Q="}";for(;;){I=S.lastIndexOf(D);if(I<0){break;}H=S.indexOf(Q,I);if(I+1>=H){break;}F=S.substring(I+1,H);O=F;R=null;G=O.indexOf(M);if(G>-1){R=O.substring(G+1);O=O.substring(0,G);}P=E[O];if(L){P=L(O,P,R);}if(A.isObject(P)){if(A.isArray(P)){P=A.dump(P,parseInt(R,10));}else{R=R||"";var K=R.indexOf(J);if(K>-1){R=R.substring(4);}if(P.toString===Object.prototype.toString||K>-1){P=A.dump(P,parseInt(R,10));}else{P=P.toString();}}}else{if(!A.isString(P)&&!A.isNumber(P)){P="~-"+N.length+"-~";N[N.length]=F;}}S=S.substring(0,I)+P+S.substring(H+1);}for(I=N.length-1;I>=0;I=I-1){S=S.replace(new RegExp("~-"+I+"-~"),"{"+N[I]+"}","g");}return S;},trim:function(D){try{return D.replace(/^\s+|\s+$/g,"");}catch(E){return D;}},merge:function(){var G={},E=arguments;for(var F=0,D=E.length;F<D;F=F+1){A.augmentObject(G,E[F],true);}return G;},later:function(K,E,L,G,H){K=K||0;E=E||{};var F=L,J=G,I,D;if(A.isString(L)){F=E[L];}if(!F){throw new TypeError("method undefined");}if(!A.isArray(J)){J=[G];}I=function(){F.apply(E,J);};D=(H)?setInterval(I,K):setTimeout(I,K);return{interval:H,cancel:function(){if(this.interval){clearInterval(D);}else{clearTimeout(D);}}};},isValue:function(D){return(A.isObject(D)||A.isString(D)||A.isNumber(D)||A.isBoolean(D));}};A.hasOwnProperty=(Object.prototype.hasOwnProperty)?function(D,E){return D&&D.hasOwnProperty(E);}:function(D,E){return!A.isUndefined(D[E])&&D.constructor.prototype[E]!==D[E];};B.augmentObject(A,B,true);YAHOO.util.Lang=A;A.augment=A.augmentProto;YAHOO.augment=A.augmentProto;YAHOO.extend=A.extend;})();YAHOO.register("yahoo",YAHOO,{version:"2.5.2",build:"1076"});(function(){var B=YAHOO.util,K,I,J={},F={},M=window.document;YAHOO.env._id_counter=YAHOO.env._id_counter||0;var C=YAHOO.env.ua.opera,L=YAHOO.env.ua.webkit,A=YAHOO.env.ua.gecko,G=YAHOO.env.ua.ie;var E={HYPHEN:/(-[a-z])/i,ROOT_TAG:/^body|html$/i,OP_SCROLL:/^(?:inline|table-row)$/i};var N=function(P){if(!E.HYPHEN.test(P)){return P;}if(J[P]){return J[P];}var Q=P;while(E.HYPHEN.exec(Q)){Q=Q.replace(RegExp.$1,RegExp.$1.substr(1).toUpperCase());}J[P]=Q;return Q;};var O=function(Q){var P=F[Q];if(!P){P=new RegExp("(?:^|\\s+)"+Q+"(?:\\s+|$)");F[Q]=P;}return P;};if(M.defaultView&&M.defaultView.getComputedStyle){K=function(P,S){var R=null;if(S=="float"){S="cssFloat";}var Q=P.ownerDocument.defaultView.getComputedStyle(P,"");if(Q){R=Q[N(S)];}return P.style[S]||R;};}else{if(M.documentElement.currentStyle&&G){K=function(P,R){switch(N(R)){case"opacity":var T=100;try{T=P.filters["DXImageTransform.Microsoft.Alpha"].opacity;}catch(S){try{T=P.filters("alpha").opacity;}catch(S){}}return T/100;case"float":R="styleFloat";default:var Q=P.currentStyle?P.currentStyle[R]:null;return(P.style[R]||Q);}};}else{K=function(P,Q){return P.style[Q];};}}if(G){I=function(P,Q,R){switch(Q){case"opacity":if(YAHOO.lang.isString(P.style.filter)){P.style.filter="alpha(opacity="+R*100+")";if(!P.currentStyle||!P.currentStyle.hasLayout){P.style.zoom=1;}}break;case"float":Q="styleFloat";default:P.style[Q]=R;}};}else{I=function(P,Q,R){if(Q=="float"){Q="cssFloat";}P.style[Q]=R;};}var D=function(P,Q){return P&&P.nodeType==1&&(!Q||Q(P));};YAHOO.util.Dom={get:function(R){if(R&&(R.nodeType||R.item)){return R;}if(YAHOO.lang.isString(R)||!R){return M.getElementById(R);}if(R.length!==undefined){var S=[];for(var Q=0,P=R.length;Q<P;++Q){S[S.length]=B.Dom.get(R[Q]);}return S;}return R;},getStyle:function(P,R){R=N(R);var Q=function(S){return K(S,R);};return B.Dom.batch(P,Q,B.Dom,true);},setStyle:function(P,R,S){R=N(R);var Q=function(T){I(T,R,S);};B.Dom.batch(P,Q,B.Dom,true);},getXY:function(P){var Q=function(R){if((R.parentNode===null||R.offsetParent===null||this.getStyle(R,"display")=="none")&&R!=R.ownerDocument.body){return false;}return H(R);};return B.Dom.batch(P,Q,B.Dom,true);},getX:function(P){var Q=function(R){return B.Dom.getXY(R)[0];};return B.Dom.batch(P,Q,B.Dom,true);},getY:function(P){var Q=function(R){return B.Dom.getXY(R)[1];};return B.Dom.batch(P,Q,B.Dom,true);},setXY:function(P,S,R){var Q=function(V){var U=this.getStyle(V,"position");if(U=="static"){this.setStyle(V,"position","relative");U="relative";}var X=this.getXY(V);if(X===false){return false;}var W=[parseInt(this.getStyle(V,"left"),10),parseInt(this.getStyle(V,"top"),10)];if(isNaN(W[0])){W[0]=(U=="relative")?0:V.offsetLeft;}if(isNaN(W[1])){W[1]=(U=="relative")?0:V.offsetTop;}if(S[0]!==null){V.style.left=S[0]-X[0]+W[0]+"px";}if(S[1]!==null){V.style.top=S[1]-X[1]+W[1]+"px";}if(!R){var T=this.getXY(V);if((S[0]!==null&&T[0]!=S[0])||(S[1]!==null&&T[1]!=S[1])){this.setXY(V,S,true);}}};B.Dom.batch(P,Q,B.Dom,true);},setX:function(Q,P){B.Dom.setXY(Q,[P,null]);},setY:function(P,Q){B.Dom.setXY(P,[null,Q]);},getRegion:function(P){var Q=function(R){if((R.parentNode===null||R.offsetParent===null||this.getStyle(R,"display")=="none")&&R!=R.ownerDocument.body){return false;}var S=B.Region.getRegion(R);return S;};return B.Dom.batch(P,Q,B.Dom,true);},getClientWidth:function(){return B.Dom.getViewportWidth();},getClientHeight:function(){return B.Dom.getViewportHeight();},getElementsByClassName:function(T,X,U,V){X=X||"*";U=(U)?B.Dom.get(U):null||M;if(!U){return[];}var Q=[],P=U.getElementsByTagName(X),W=O(T);for(var R=0,S=P.length;R<S;++R){if(W.test(P[R].className)){Q[Q.length]=P[R];if(V){V.call(P[R],P[R]);}}}return Q;},hasClass:function(R,Q){var P=O(Q);var S=function(T){return P.test(T.className);};return B.Dom.batch(R,S,B.Dom,true);},addClass:function(Q,P){var R=function(S){if(this.hasClass(S,P)){return false;}S.className=YAHOO.lang.trim([S.className,P].join(" "));return true;};return B.Dom.batch(Q,R,B.Dom,true);},removeClass:function(R,Q){var P=O(Q);var S=function(T){if(!Q||!this.hasClass(T,Q)){return false;}var U=T.className;T.className=U.replace(P," ");if(this.hasClass(T,Q)){this.removeClass(T,Q);}T.className=YAHOO.lang.trim(T.className);return true;};return B.Dom.batch(R,S,B.Dom,true);},replaceClass:function(S,Q,P){if(!P||Q===P){return false;}var R=O(Q);var T=function(U){if(!this.hasClass(U,Q)){this.addClass(U,P);return true;}U.className=U.className.replace(R," "+P+" ");if(this.hasClass(U,Q)){this.replaceClass(U,Q,P);}U.className=YAHOO.lang.trim(U.className);return true;};return B.Dom.batch(S,T,B.Dom,true);},generateId:function(P,R){R=R||"yui-gen";var Q=function(S){if(S&&S.id){return S.id;}var T=R+YAHOO.env._id_counter++;if(S){S.id=T;}return T;};return B.Dom.batch(P,Q,B.Dom,true)||Q.apply(B.Dom,arguments);},isAncestor:function(P,Q){P=B.Dom.get(P);Q=B.Dom.get(Q);if(!P||!Q){return false;}if(P.contains&&Q.nodeType&&!L){return P.contains(Q);}else{if(P.compareDocumentPosition&&Q.nodeType){return!!(P.compareDocumentPosition(Q)&16);}else{if(Q.nodeType){return!!this.getAncestorBy(Q,function(R){return R==P;});}}}return false;},inDocument:function(P){return this.isAncestor(M.documentElement,P);},getElementsBy:function(W,Q,R,T){Q=Q||"*";R=(R)?B.Dom.get(R):null||M;if(!R){return[];}var S=[],V=R.getElementsByTagName(Q);for(var U=0,P=V.length;U<P;++U){if(W(V[U])){S[S.length]=V[U];if(T){T(V[U]);}}}return S;},batch:function(T,W,V,R){T=(T&&(T.tagName||T.item))?T:B.Dom.get(T);if(!T||!W){return false;}var S=(R)?V:window;if(T.tagName||T.length===undefined){return W.call(S,T,V);}var U=[];for(var Q=0,P=T.length;Q<P;++Q){U[U.length]=W.call(S,T[Q],V);}return U;},getDocumentHeight:function(){var Q=(M.compatMode!="CSS1Compat")?M.body.scrollHeight:M.documentElement.scrollHeight;var P=Math.max(Q,B.Dom.getViewportHeight());return P;},getDocumentWidth:function(){var Q=(M.compatMode!="CSS1Compat")?M.body.scrollWidth:M.documentElement.scrollWidth;var P=Math.max(Q,B.Dom.getViewportWidth());return P;},getViewportHeight:function(){var P=self.innerHeight;var Q=M.compatMode;if((Q||G)&&!C){P=(Q=="CSS1Compat")?M.documentElement.clientHeight:M.body.clientHeight;}return P;},getViewportWidth:function(){var P=self.innerWidth;var Q=M.compatMode;if(Q||G){P=(Q=="CSS1Compat")?M.documentElement.clientWidth:M.body.clientWidth;}return P;},getAncestorBy:function(P,Q){while(P=P.parentNode){if(D(P,Q)){return P;}}return null;},getAncestorByClassName:function(Q,P){Q=B.Dom.get(Q);if(!Q){return null;}var R=function(S){return B.Dom.hasClass(S,P);};return B.Dom.getAncestorBy(Q,R);},getAncestorByTagName:function(Q,P){Q=B.Dom.get(Q);if(!Q){return null;}var R=function(S){return S.tagName&&S.tagName.toUpperCase()==P.toUpperCase();};return B.Dom.getAncestorBy(Q,R);},getPreviousSiblingBy:function(P,Q){while(P){P=P.previousSibling;if(D(P,Q)){return P;}}return null;},getPreviousSibling:function(P){P=B.Dom.get(P);if(!P){return null;}return B.Dom.getPreviousSiblingBy(P);},getNextSiblingBy:function(P,Q){while(P){P=P.nextSibling;if(D(P,Q)){return P;}}return null;},getNextSibling:function(P){P=B.Dom.get(P);if(!P){return null;}return B.Dom.getNextSiblingBy(P);},getFirstChildBy:function(P,R){var Q=(D(P.firstChild,R))?P.firstChild:null;return Q||B.Dom.getNextSiblingBy(P.firstChild,R);},getFirstChild:function(P,Q){P=B.Dom.get(P);if(!P){return null;}return B.Dom.getFirstChildBy(P);},getLastChildBy:function(P,R){if(!P){return null;}var Q=(D(P.lastChild,R))?P.lastChild:null;return Q||B.Dom.getPreviousSiblingBy(P.lastChild,R);},getLastChild:function(P){P=B.Dom.get(P);return B.Dom.getLastChildBy(P);},getChildrenBy:function(Q,S){var R=B.Dom.getFirstChildBy(Q,S);var P=R?[R]:[];B.Dom.getNextSiblingBy(R,function(T){if(!S||S(T)){P[P.length]=T;}return false;});return P;},getChildren:function(P){P=B.Dom.get(P);if(!P){}return B.Dom.getChildrenBy(P);},getDocumentScrollLeft:function(P){P=P||M;return Math.max(P.documentElement.scrollLeft,P.body.scrollLeft);},getDocumentScrollTop:function(P){P=P||M;return Math.max(P.documentElement.scrollTop,P.body.scrollTop);},insertBefore:function(Q,P){Q=B.Dom.get(Q);P=B.Dom.get(P);if(!Q||!P||!P.parentNode){return null;}return P.parentNode.insertBefore(Q,P);},insertAfter:function(Q,P){Q=B.Dom.get(Q);P=B.Dom.get(P);if(!Q||!P||!P.parentNode){return null;}if(P.nextSibling){return P.parentNode.insertBefore(Q,P.nextSibling);}else{return P.parentNode.appendChild(Q);}},getClientRegion:function(){var R=B.Dom.getDocumentScrollTop(),Q=B.Dom.getDocumentScrollLeft(),S=B.Dom.getViewportWidth()+Q,P=B.Dom.getViewportHeight()+R;return new B.Region(R,S,P,Q);}};var H=function(){if(M.documentElement.getBoundingClientRect){return function(Q){var R=Q.getBoundingClientRect();var P=Q.ownerDocument;return[R.left+B.Dom.getDocumentScrollLeft(P),R.top+B.Dom.getDocumentScrollTop(P)];};}else{return function(R){var S=[R.offsetLeft,R.offsetTop];var Q=R.offsetParent;var P=(L&&B.Dom.getStyle(R,"position")=="absolute"&&R.offsetParent==R.ownerDocument.body);if(Q!=R){while(Q){S[0]+=Q.offsetLeft;S[1]+=Q.offsetTop;if(!P&&L&&B.Dom.getStyle(Q,"position")=="absolute"){P=true;}Q=Q.offsetParent;}}if(P){S[0]-=R.ownerDocument.body.offsetLeft;S[1]-=R.ownerDocument.body.offsetTop;}Q=R.parentNode;while(Q.tagName&&!E.ROOT_TAG.test(Q.tagName)){if(Q.scrollTop||Q.scrollLeft){if(!E.OP_SCROLL.test(B.Dom.getStyle(Q,"display"))){if(!C||B.Dom.getStyle(Q,"overflow")!=="visible"){S[0]-=Q.scrollLeft;S[1]-=Q.scrollTop;}}}Q=Q.parentNode;}return S;};}}();})();YAHOO.util.Region=function(C,D,A,B){this.top=C;this[1]=C;this.right=D;this.bottom=A;this.left=B;this[0]=B;};YAHOO.util.Region.prototype.contains=function(A){return(A.left>=this.left&&A.right<=this.right&&A.top>=this.top&&A.bottom<=this.bottom);};YAHOO.util.Region.prototype.getArea=function(){return((this.bottom-this.top)*(this.right-this.left));};YAHOO.util.Region.prototype.intersect=function(E){var C=Math.max(this.top,E.top);var D=Math.min(this.right,E.right);var A=Math.min(this.bottom,E.bottom);var B=Math.max(this.left,E.left);if(A>=C&&D>=B){return new YAHOO.util.Region(C,D,A,B);}else{return null;}};YAHOO.util.Region.prototype.union=function(E){var C=Math.min(this.top,E.top);var D=Math.max(this.right,E.right);var A=Math.max(this.bottom,E.bottom);var B=Math.min(this.left,E.left);return new YAHOO.util.Region(C,D,A,B);};YAHOO.util.Region.prototype.toString=function(){return("Region {"+"top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+", left: "+this.left+"}");};YAHOO.util.Region.getRegion=function(D){var F=YAHOO.util.Dom.getXY(D);var C=F[1];var E=F[0]+D.offsetWidth;var A=F[1]+D.offsetHeight;var B=F[0];return new YAHOO.util.Region(C,E,A,B);};YAHOO.util.Point=function(A,B){if(YAHOO.lang.isArray(A)){B=A[1];A=A[0];}this.x=this.right=this.left=this[0]=A;this.y=this.top=this.bottom=this[1]=B;};YAHOO.util.Point.prototype=new YAHOO.util.Region();YAHOO.register("dom",YAHOO.util.Dom,{version:"2.5.2",build:"1076"});YAHOO.util.CustomEvent=function(D,B,C,A){this.type=D;this.scope=B||window;this.silent=C;this.signature=A||YAHOO.util.CustomEvent.LIST;this.subscribers=[];if(!this.silent){}var E="_YUICEOnSubscribe";if(D!==E){this.subscribeEvent=new YAHOO.util.CustomEvent(E,this,true);}this.lastError=null;};YAHOO.util.CustomEvent.LIST=0;YAHOO.util.CustomEvent.FLAT=1;YAHOO.util.CustomEvent.prototype={subscribe:function(B,C,A){if(!B){throw new Error("Invalid callback for subscriber to '"+this.type+"'");}if(this.subscribeEvent){this.subscribeEvent.fire(B,C,A);}this.subscribers.push(new YAHOO.util.Subscriber(B,C,A));},unsubscribe:function(D,F){if(!D){return this.unsubscribeAll();}var E=false;for(var B=0,A=this.subscribers.length;B<A;++B){var C=this.subscribers[B];if(C&&C.contains(D,F)){this._delete(B);E=true;}}return E;},fire:function(){this.lastError=null;var K=[],E=this.subscribers.length;if(!E&&this.silent){return true;}var I=[].slice.call(arguments,0),G=true,D,J=false;if(!this.silent){}var C=this.subscribers.slice(),A=YAHOO.util.Event.throwErrors;for(D=0;D<E;++D){var M=C[D];if(!M){J=true;}else{if(!this.silent){}var L=M.getScope(this.scope);if(this.signature==YAHOO.util.CustomEvent.FLAT){var B=null;if(I.length>0){B=I[0];}try{G=M.fn.call(L,B,M.obj);}catch(F){this.lastError=F;if(A){throw F;}}}else{try{G=M.fn.call(L,this.type,I,M.obj);}catch(H){this.lastError=H;if(A){throw H;}}}if(false===G){if(!this.silent){}break;}}}return(G!==false);},unsubscribeAll:function(){for(var A=this.subscribers.length-1;A>-1;A--){this._delete(A);}this.subscribers=[];return A;},_delete:function(A){var B=this.subscribers[A];if(B){delete B.fn;delete B.obj;}this.subscribers.splice(A,1);},toString:function(){return"CustomEvent: "+"'"+this.type+"', "+"scope: "+this.scope;}};YAHOO.util.Subscriber=function(B,C,A){this.fn=B;this.obj=YAHOO.lang.isUndefined(C)?null:C;this.override=A;};YAHOO.util.Subscriber.prototype.getScope=function(A){if(this.override){if(this.override===true){return this.obj;}else{return this.override;}}return A;};YAHOO.util.Subscriber.prototype.contains=function(A,B){if(B){return(this.fn==A&&this.obj==B);}else{return(this.fn==A);}};YAHOO.util.Subscriber.prototype.toString=function(){return"Subscriber { obj: "+this.obj+", override: "+(this.override||"no")+" }";};if(!YAHOO.util.Event){YAHOO.util.Event=function(){var H=false;var I=[];var J=[];var G=[];var E=[];var C=0;var F=[];var B=[];var A=0;var D={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9};return{POLL_RETRYS:2000,POLL_INTERVAL:20,EL:0,TYPE:1,FN:2,WFN:3,UNLOAD_OBJ:3,ADJ_SCOPE:4,OBJ:5,OVERRIDE:6,lastError:null,isSafari:YAHOO.env.ua.webkit,webkit:YAHOO.env.ua.webkit,isIE:YAHOO.env.ua.ie,_interval:null,_dri:null,DOMReady:false,throwErrors:false,startInterval:function(){if(!this._interval){var K=this;var L=function(){K._tryPreloadAttach();};this._interval=setInterval(L,this.POLL_INTERVAL);}},onAvailable:function(P,M,Q,O,N){var K=(YAHOO.lang.isString(P))?[P]:P;for(var L=0;L<K.length;L=L+1){F.push({id:K[L],fn:M,obj:Q,override:O,checkReady:N});}C=this.POLL_RETRYS;this.startInterval();},onContentReady:function(M,K,N,L){this.onAvailable(M,K,N,L,true);},onDOMReady:function(K,M,L){if(this.DOMReady){setTimeout(function(){var N=window;if(L){if(L===true){N=M;}else{N=L;}}K.call(N,"DOMReady",[],M);},0);}else{this.DOMReadyEvent.subscribe(K,M,L);}},addListener:function(M,K,V,Q,L){if(!V||!V.call){return false;}if(this._isValidCollection(M)){var W=true;for(var R=0,T=M.length;R<T;++R){W=this.on(M[R],K,V,Q,L)&&W;}return W;}else{if(YAHOO.lang.isString(M)){var P=this.getEl(M);if(P){M=P;}else{this.onAvailable(M,function(){YAHOO.util.Event.on(M,K,V,Q,L);});return true;}}}if(!M){return false;}if("unload"==K&&Q!==this){J[J.length]=[M,K,V,Q,L];return true;}var Y=M;if(L){if(L===true){Y=Q;}else{Y=L;}}var N=function(Z){return V.call(Y,YAHOO.util.Event.getEvent(Z,M),Q);};var X=[M,K,V,N,Y,Q,L];var S=I.length;I[S]=X;if(this.useLegacyEvent(M,K)){var O=this.getLegacyIndex(M,K);if(O==-1||M!=G[O][0]){O=G.length;B[M.id+K]=O;G[O]=[M,K,M["on"+K]];E[O]=[];M["on"+K]=function(Z){YAHOO.util.Event.fireLegacyEvent(YAHOO.util.Event.getEvent(Z),O);};}E[O].push(X);}else{try{this._simpleAdd(M,K,N,false);}catch(U){this.lastError=U;this.removeListener(M,K,V);return false;}}return true;},fireLegacyEvent:function(O,M){var Q=true,K,S,R,T,P;S=E[M].slice();for(var L=0,N=S.length;L<N;++L){R=S[L];if(R&&R[this.WFN]){T=R[this.ADJ_SCOPE];P=R[this.WFN].call(T,O);Q=(Q&&P);}}K=G[M];if(K&&K[2]){K[2](O);}return Q;},getLegacyIndex:function(L,M){var K=this.generateId(L)+M;if(typeof B[K]=="undefined"){return-1;}else{return B[K];}},useLegacyEvent:function(L,M){if(this.webkit&&("click"==M||"dblclick"==M)){var K=parseInt(this.webkit,10);if(!isNaN(K)&&K<418){return true;}}return false;},removeListener:function(L,K,T){var O,R,V;if(typeof L=="string"){L=this.getEl(L);}else{if(this._isValidCollection(L)){var U=true;for(O=L.length-1;O>-1;O--){U=(this.removeListener(L[O],K,T)&&U);}return U;}}if(!T||!T.call){return this.purgeElement(L,false,K);}if("unload"==K){for(O=J.length-1;O>-1;O--){V=J[O];if(V&&V[0]==L&&V[1]==K&&V[2]==T){J.splice(O,1);return true;}}return false;}var P=null;var Q=arguments[3];if("undefined"===typeof Q){Q=this._getCacheIndex(L,K,T);}if(Q>=0){P=I[Q];}if(!L||!P){return false;}if(this.useLegacyEvent(L,K)){var N=this.getLegacyIndex(L,K);var M=E[N];if(M){for(O=0,R=M.length;O<R;++O){V=M[O];if(V&&V[this.EL]==L&&V[this.TYPE]==K&&V[this.FN]==T){M.splice(O,1);break;}}}}else{try{this._simpleRemove(L,K,P[this.WFN],false);}catch(S){this.lastError=S;return false;}}delete I[Q][this.WFN];delete I[Q][this.FN];I.splice(Q,1);return true;},getTarget:function(M,L){var K=M.target||M.srcElement;return this.resolveTextNode(K);},resolveTextNode:function(L){try{if(L&&3==L.nodeType){return L.parentNode;}}catch(K){}return L;},getPageX:function(L){var K=L.pageX;if(!K&&0!==K){K=L.clientX||0;if(this.isIE){K+=this._getScrollLeft();}}return K;},getPageY:function(K){var L=K.pageY;if(!L&&0!==L){L=K.clientY||0;if(this.isIE){L+=this._getScrollTop();}}return L;},getXY:function(K){return[this.getPageX(K),this.getPageY(K)];},getRelatedTarget:function(L){var K=L.relatedTarget;if(!K){if(L.type=="mouseout"){K=L.toElement;}else{if(L.type=="mouseover"){K=L.fromElement;}}}return this.resolveTextNode(K);},getTime:function(M){if(!M.time){var L=new Date().getTime();try{M.time=L;}catch(K){this.lastError=K;return L;}}return M.time;},stopEvent:function(K){this.stopPropagation(K);this.preventDefault(K);},stopPropagation:function(K){if(K.stopPropagation){K.stopPropagation();}else{K.cancelBubble=true;}},preventDefault:function(K){if(K.preventDefault){K.preventDefault();}else{K.returnValue=false;}},getEvent:function(M,K){var L=M||window.event;if(!L){var N=this.getEvent.caller;while(N){L=N.arguments[0];if(L&&Event==L.constructor){break;}N=N.caller;}}return L;},getCharCode:function(L){var K=L.keyCode||L.charCode||0;if(YAHOO.env.ua.webkit&&(K in D)){K=D[K];}return K;},_getCacheIndex:function(O,P,N){for(var M=0,L=I.length;M<L;M=M+1){var K=I[M];if(K&&K[this.FN]==N&&K[this.EL]==O&&K[this.TYPE]==P){return M;}}return-1;},generateId:function(K){var L=K.id;if(!L){L="yuievtautoid-"+A;++A;K.id=L;}return L;},_isValidCollection:function(L){try{return(L&&typeof L!=="string"&&L.length&&!L.tagName&&!L.alert&&typeof L[0]!=="undefined");}catch(K){return false;}},elCache:{},getEl:function(K){return(typeof K==="string")?document.getElementById(K):K;},clearCache:function(){},DOMReadyEvent:new YAHOO.util.CustomEvent("DOMReady",this),_load:function(L){if(!H){H=true;var K=YAHOO.util.Event;K._ready();K._tryPreloadAttach();}},_ready:function(L){var K=YAHOO.util.Event;if(!K.DOMReady){K.DOMReady=true;K.DOMReadyEvent.fire();K._simpleRemove(document,"DOMContentLoaded",K._ready);}},_tryPreloadAttach:function(){if(F.length===0){C=0;clearInterval(this._interval);this._interval=null;return;}if(this.locked){return;}if(this.isIE){if(!this.DOMReady){this.startInterval();return;}}this.locked=true;var Q=!H;if(!Q){Q=(C>0&&F.length>0);}var P=[];var R=function(T,U){var S=T;if(U.override){if(U.override===true){S=U.obj;}else{S=U.override;}}U.fn.call(S,U.obj);};var L,K,O,N,M=[];for(L=0,K=F.length;L<K;L=L+1){O=F[L];if(O){N=this.getEl(O.id);if(N){if(O.checkReady){if(H||N.nextSibling||!Q){M.push(O);F[L]=null;}}else{R(N,O);F[L]=null;}}else{P.push(O);}}}for(L=0,K=M.length;L<K;L=L+1){O=M[L];R(this.getEl(O.id),O);}C--;if(Q){for(L=F.length-1;L>-1;L--){O=F[L];if(!O||!O.id){F.splice(L,1);}}this.startInterval();}else{clearInterval(this._interval);this._interval=null;}this.locked=false;},purgeElement:function(O,P,R){var M=(YAHOO.lang.isString(O))?this.getEl(O):O;var Q=this.getListeners(M,R),N,K;if(Q){for(N=Q.length-1;N>-1;N--){var L=Q[N];this.removeListener(M,L.type,L.fn);}}if(P&&M&&M.childNodes){for(N=0,K=M.childNodes.length;N<K;++N){this.purgeElement(M.childNodes[N],P,R);}}},getListeners:function(M,K){var P=[],L;if(!K){L=[I,J];}else{if(K==="unload"){L=[J];}else{L=[I];}}var R=(YAHOO.lang.isString(M))?this.getEl(M):M;for(var O=0;O<L.length;O=O+1){var T=L[O];if(T){for(var Q=0,S=T.length;Q<S;++Q){var N=T[Q];if(N&&N[this.EL]===R&&(!K||K===N[this.TYPE])){P.push({type:N[this.TYPE],fn:N[this.FN],obj:N[this.OBJ],adjust:N[this.OVERRIDE],scope:N[this.ADJ_SCOPE],index:Q});}}}}return(P.length)?P:null;},_unload:function(Q){var K=YAHOO.util.Event,N,M,L,P,O,R=J.slice();for(N=0,P=J.length;N<P;++N){L=R[N];if(L){var S=window;if(L[K.ADJ_SCOPE]){if(L[K.ADJ_SCOPE]===true){S=L[K.UNLOAD_OBJ];}else{S=L[K.ADJ_SCOPE];}}L[K.FN].call(S,K.getEvent(Q,L[K.EL]),L[K.UNLOAD_OBJ]);R[N]=null;L=null;S=null;}}J=null;if(I){for(M=I.length-1;M>-1;M--){L=I[M];if(L){K.removeListener(L[K.EL],L[K.TYPE],L[K.FN],M);}}L=null;}G=null;K._simpleRemove(window,"unload",K._unload);},_getScrollLeft:function(){return this._getScroll()[1];},_getScrollTop:function(){return this._getScroll()[0];},_getScroll:function(){var K=document.documentElement,L=document.body;if(K&&(K.scrollTop||K.scrollLeft)){return[K.scrollTop,K.scrollLeft];}else{if(L){return[L.scrollTop,L.scrollLeft];}else{return[0,0];}}},regCE:function(){},_simpleAdd:function(){if(window.addEventListener){return function(M,N,L,K){M.addEventListener(N,L,(K));};}else{if(window.attachEvent){return function(M,N,L,K){M.attachEvent("on"+N,L);};}else{return function(){};}}}(),_simpleRemove:function(){if(window.removeEventListener){return function(M,N,L,K){M.removeEventListener(N,L,(K));};}else{if(window.detachEvent){return function(L,M,K){L.detachEvent("on"+M,K);};}else{return function(){};}}}()};}();(function(){var EU=YAHOO.util.Event;EU.on=EU.addListener;if(EU.isIE){YAHOO.util.Event.onDOMReady(YAHOO.util.Event._tryPreloadAttach,YAHOO.util.Event,true);var n=document.createElement("p");EU._dri=setInterval(function(){try{n.doScroll("left");clearInterval(EU._dri);EU._dri=null;EU._ready();n=null;}catch(ex){}},EU.POLL_INTERVAL);}else{if(EU.webkit&&EU.webkit<525){EU._dri=setInterval(function(){var rs=document.readyState;if("loaded"==rs||"complete"==rs){clearInterval(EU._dri);EU._dri=null;EU._ready();}},EU.POLL_INTERVAL);}else{EU._simpleAdd(document,"DOMContentLoaded",EU._ready);}}EU._simpleAdd(window,"load",EU._load);EU._simpleAdd(window,"unload",EU._unload);EU._tryPreloadAttach();})();}YAHOO.util.EventProvider=function(){};YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(A,C,F,E){this.__yui_events=this.__yui_events||{};var D=this.__yui_events[A];if(D){D.subscribe(C,F,E);}else{this.__yui_subscribers=this.__yui_subscribers||{};var B=this.__yui_subscribers;if(!B[A]){B[A]=[];}B[A].push({fn:C,obj:F,override:E});}},unsubscribe:function(C,E,G){this.__yui_events=this.__yui_events||{};var A=this.__yui_events;if(C){var F=A[C];if(F){return F.unsubscribe(E,G);}}else{var B=true;for(var D in A){if(YAHOO.lang.hasOwnProperty(A,D)){B=B&&A[D].unsubscribe(E,G);}}return B;}return false;},unsubscribeAll:function(A){return this.unsubscribe(A);},createEvent:function(G,D){this.__yui_events=this.__yui_events||{};var A=D||{};var I=this.__yui_events;if(I[G]){}else{var H=A.scope||this;var E=(A.silent);var B=new YAHOO.util.CustomEvent(G,H,E,YAHOO.util.CustomEvent.FLAT);I[G]=B;if(A.onSubscribeCallback){B.subscribeEvent.subscribe(A.onSubscribeCallback);}this.__yui_subscribers=this.__yui_subscribers||{};var F=this.__yui_subscribers[G];if(F){for(var C=0;C<F.length;++C){B.subscribe(F[C].fn,F[C].obj,F[C].override);}}}return I[G];},fireEvent:function(E,D,A,C){this.__yui_events=this.__yui_events||{};var G=this.__yui_events[E];if(!G){return null;}var B=[];for(var F=1;F<arguments.length;++F){B.push(arguments[F]);}return G.fire.apply(G,B);},hasEvent:function(A){if(this.__yui_events){if(this.__yui_events[A]){return true;}}return false;}};YAHOO.util.KeyListener=function(A,F,B,C){if(!A){}else{if(!F){}else{if(!B){}}}if(!C){C=YAHOO.util.KeyListener.KEYDOWN;}var D=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(typeof A=="string"){A=document.getElementById(A);}if(typeof B=="function"){D.subscribe(B);}else{D.subscribe(B.fn,B.scope,B.correctScope);}function E(J,I){if(!F.shift){F.shift=false;}if(!F.alt){F.alt=false;}if(!F.ctrl){F.ctrl=false;}if(J.shiftKey==F.shift&&J.altKey==F.alt&&J.ctrlKey==F.ctrl){var G;if(F.keys instanceof Array){for(var H=0;H<F.keys.length;H++){G=F.keys[H];if(G==J.charCode){D.fire(J.charCode,J);break;}else{if(G==J.keyCode){D.fire(J.keyCode,J);break;}}}}else{G=F.keys;if(G==J.charCode){D.fire(J.charCode,J);}else{if(G==J.keyCode){D.fire(J.keyCode,J);}}}}}this.enable=function(){if(!this.enabled){YAHOO.util.Event.addListener(A,C,E);this.enabledEvent.fire(F);}this.enabled=true;};this.disable=function(){if(this.enabled){YAHOO.util.Event.removeListener(A,C,E);this.disabledEvent.fire(F);}this.enabled=false;};this.toString=function(){return"KeyListener ["+F.keys+"] "+A.tagName+(A.id?"["+A.id+"]":"");};};YAHOO.util.KeyListener.KEYDOWN="keydown";YAHOO.util.KeyListener.KEYUP="keyup";YAHOO.util.KeyListener.KEY={ALT:18,BACK_SPACE:8,CAPS_LOCK:20,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,META:224,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PRINTSCREEN:44,RIGHT:39,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,UP:38};YAHOO.register("event",YAHOO.util.Event,{version:"2.5.2",build:"1076"});YAHOO.register("yahoo-dom-event",YAHOO,{version:"2.5.2",build:"1076"});
//from: http://yui.yahooapis.com/2.5.2/build/button/button-min.js

(function(){var G=YAHOO.util.Dom,M=YAHOO.util.Event,I=YAHOO.lang,L=YAHOO.env.ua,B=YAHOO.widget.Overlay,J=YAHOO.widget.Menu,D={},K=null,E=null,C=null;function F(O,N,R,P){var S,Q;if(I.isString(O)&&I.isString(N)){if(L.ie){Q='<input type="'+O+'" name="'+N+'"';if(P){Q+=" checked";}Q+=">";S=document.createElement(Q);}else{S=document.createElement("input");S.name=N;S.type=O;if(P){S.checked=true;}}S.value=R;return S;}}function H(O,U){var N=O.nodeName.toUpperCase(),S=this,T,P,Q;function V(W){if(!(W in U)){T=O.getAttributeNode(W);if(T&&("value"in T)){U[W]=T.value;}}}function R(){V("type");if(U.type=="button"){U.type="push";}if(!("disabled"in U)){U.disabled=O.disabled;}V("name");V("value");V("title");}switch(N){case"A":U.type="link";V("href");V("target");break;case"INPUT":R();if(!("checked"in U)){U.checked=O.checked;}break;case"BUTTON":R();P=O.parentNode.parentNode;if(G.hasClass(P,this.CSS_CLASS_NAME+"-checked")){U.checked=true;}if(G.hasClass(P,this.CSS_CLASS_NAME+"-disabled")){U.disabled=true;}O.removeAttribute("value");O.setAttribute("type","button");break;}O.removeAttribute("id");O.removeAttribute("name");if(!("tabindex"in U)){U.tabindex=O.tabIndex;}if(!("label"in U)){Q=N=="INPUT"?O.value:O.innerHTML;if(Q&&Q.length>0){U.label=Q;}}}function A(P){var O=P.attributes,N=O.srcelement,R=N.nodeName.toUpperCase(),Q=this;if(R==this.NODE_NAME){P.element=N;P.id=N.id;G.getElementsBy(function(S){switch(S.nodeName.toUpperCase()){case"BUTTON":case"A":case"INPUT":H.call(Q,S,O);break;}},"*",N);}else{switch(R){case"BUTTON":case"A":case"INPUT":H.call(this,N,O);break;}}}YAHOO.widget.Button=function(R,O){if(!B&&YAHOO.widget.Overlay){B=YAHOO.widget.Overlay;}if(!J&&YAHOO.widget.Menu){J=YAHOO.widget.Menu;}var Q=YAHOO.widget.Button.superclass.constructor,P,N;if(arguments.length==1&&!I.isString(R)&&!R.nodeName){if(!R.id){R.id=G.generateId();}Q.call(this,(this.createButtonElement(R.type)),R);}else{P={element:null,attributes:(O||{})};if(I.isString(R)){N=G.get(R);if(N){if(!P.attributes.id){P.attributes.id=R;}P.attributes.srcelement=N;A.call(this,P);if(!P.element){P.element=this.createButtonElement(P.attributes.type);}Q.call(this,P.element,P.attributes);}}else{if(R.nodeName){if(!P.attributes.id){if(R.id){P.attributes.id=R.id;}else{P.attributes.id=G.generateId();}}P.attributes.srcelement=R;A.call(this,P);if(!P.element){P.element=this.createButtonElement(P.attributes.type);}Q.call(this,P.element,P.attributes);}}}};YAHOO.extend(YAHOO.widget.Button,YAHOO.util.Element,{_button:null,_menu:null,_hiddenFields:null,_onclickAttributeValue:null,_activationKeyPressed:false,_activationButtonPressed:false,_hasKeyEventHandlers:false,_hasMouseEventHandlers:false,NODE_NAME:"SPAN",CHECK_ACTIVATION_KEYS:[32],ACTIVATION_KEYS:[13,32],OPTION_AREA_WIDTH:20,CSS_CLASS_NAME:"yui-button",RADIO_DEFAULT_TITLE:"Unchecked.  Click to check.",RADIO_CHECKED_TITLE:"Checked.  Click another button to uncheck",CHECKBOX_DEFAULT_TITLE:"Unchecked.  Click to check.",CHECKBOX_CHECKED_TITLE:"Checked.  Click to uncheck.",MENUBUTTON_DEFAULT_TITLE:"Menu collapsed.  Click to expand.",MENUBUTTON_MENU_VISIBLE_TITLE:"Menu expanded.  Click or press Esc to collapse.",SPLITBUTTON_DEFAULT_TITLE:("Menu collapsed.  Click inside option "+"region or press Ctrl + Shift + M to show the menu."),SPLITBUTTON_OPTION_VISIBLE_TITLE:"Menu expanded.  Press Esc or Ctrl + Shift + M to hide the menu.",SUBMIT_TITLE:"Click to submit form.",_setType:function(N){if(N=="split"){this.on("option",this._onOption);}},_setLabel:function(O){this._button.innerHTML=O;var P,N=L.gecko;if(N&&N<1.9&&G.inDocument(this.get("element"))){P=this.CSS_CLASS_NAME;this.removeClass(P);I.later(0,this,this.addClass,P);}},_setTabIndex:function(N){this._button.tabIndex=N;},_setTitle:function(O){var N=O;if(this.get("type")!="link"){if(!N){switch(this.get("type")){case"radio":N=this.RADIO_DEFAULT_TITLE;break;case"checkbox":N=this.CHECKBOX_DEFAULT_TITLE;break;case"menu":N=this.MENUBUTTON_DEFAULT_TITLE;break;case"split":N=this.SPLITBUTTON_DEFAULT_TITLE;break;case"submit":N=this.SUBMIT_TITLE;break;}}this._button.title=N;}},_setDisabled:function(N){if(this.get("type")!="link"){if(N){if(this._menu){this._menu.hide();}if(this.hasFocus()){this.blur();}this._button.setAttribute("disabled","disabled");this.addStateCSSClasses("disabled");this.removeStateCSSClasses("hover");this.removeStateCSSClasses("active");this.removeStateCSSClasses("focus");}else{this._button.removeAttribute("disabled");this.removeStateCSSClasses("disabled");}}},_setHref:function(N){if(this.get("type")=="link"){this._button.href=N;}},_setTarget:function(N){if(this.get("type")=="link"){this._button.setAttribute("target",N);}},_setChecked:function(O){var P=this.get("type"),N;if(P=="checkbox"||P=="radio"){if(O){this.addStateCSSClasses("checked");N=(P=="radio")?this.RADIO_CHECKED_TITLE:this.CHECKBOX_CHECKED_TITLE;}else{this.removeStateCSSClasses("checked");N=(P=="radio")?this.RADIO_DEFAULT_TITLE:this.CHECKBOX_DEFAULT_TITLE;}this.set("title",N);}},_setMenu:function(X){var R=this.get("lazyloadmenu"),U=this.get("element"),N,Z=false,a,Q,T,P,O,W,S;if(!B){return false;}if(J){N=J.prototype.CSS_CLASS_NAME;}function Y(){a.render(U.parentNode);this.removeListener("appendTo",Y);}function V(){if(a){G.addClass(a.element,this.get("menuclassname"));G.addClass(a.element,"yui-"+this.get("type")+"-button-menu");a.showEvent.subscribe(this._onMenuShow,null,this);a.hideEvent.subscribe(this._onMenuHide,null,this);a.renderEvent.subscribe(this._onMenuRender,null,this);if(J&&a instanceof J){a.keyDownEvent.subscribe(this._onMenuKeyDown,this,true);a.subscribe("click",this._onMenuClick,this,true);a.itemAddedEvent.subscribe(this._onMenuItemAdded,this,true);T=a.srcElement;if(T&&T.nodeName.toUpperCase()=="SELECT"){T.style.display="none";T.parentNode.removeChild(T);}}else{if(B&&a instanceof B){if(!K){K=new YAHOO.widget.OverlayManager();}K.register(a);}}this._menu=a;if(!Z){if(R&&J&&!(a instanceof J)){a.beforeShowEvent.subscribe(this._onOverlayBeforeShow,null,this);}else{if(!R){if(G.inDocument(U)){a.render(U.parentNode);}else{this.on("appendTo",Y);}}}}}}if(X&&J&&(X instanceof J)){a=X;P=a.getItems();O=P.length;Z=true;if(O>0){S=O-1;do{W=P[S];if(W){W.cfg.subscribeToConfigEvent("selected",this._onMenuItemSelected,W,this);}}while(S--);}V.call(this);}else{if(B&&X&&(X instanceof B)){a=X;Z=true;a.cfg.setProperty("visible",false);a.cfg.setProperty("context",[U,"tl","bl"]);V.call(this);}else{if(J&&I.isArray(X)){this.on("appendTo",function(){a=new J(G.generateId(),{lazyload:R,itemdata:X});V.call(this);});}else{if(I.isString(X)){Q=G.get(X);if(Q){if(J&&G.hasClass(Q,N)||Q.nodeName.toUpperCase()=="SELECT"){a=new J(X,{lazyload:R});V.call(this);}else{if(B){a=new B(X,{visible:false,context:[U,"tl","bl"]});V.call(this);}}}}else{if(X&&X.nodeName){if(J&&G.hasClass(X,N)||X.nodeName.toUpperCase()=="SELECT"){a=new J(X,{lazyload:R});V.call(this);}else{if(B){if(!X.id){G.generateId(X);}a=new B(X,{visible:false,context:[U,"tl","bl"]});V.call(this);}}}}}}}},_setOnClick:function(N){if(this._onclickAttributeValue&&(this._onclickAttributeValue!=N)){this.removeListener("click",this._onclickAttributeValue.fn);this._onclickAttributeValue=null;}if(!this._onclickAttributeValue&&I.isObject(N)&&I.isFunction(N.fn)){this.on("click",N.fn,N.obj,N.scope);this._onclickAttributeValue=N;}},_setSelectedMenuItem:function(O){var N=this._menu,P;if(J&&N&&N instanceof J){P=N.getItem(O);if(P&&!P.cfg.getProperty("selected")){P.cfg.setProperty("selected",true);}}},_isActivationKey:function(N){var R=this.get("type"),O=(R=="checkbox"||R=="radio")?this.CHECK_ACTIVATION_KEYS:this.ACTIVATION_KEYS,Q=O.length,P;if(Q>0){P=Q-1;do{if(N==O[P]){return true;}}while(P--);}},_isSplitButtonOptionKey:function(P){var O=(P.ctrlKey&&P.shiftKey&&M.getCharCode(P)==77);function N(Q){M.preventDefault(Q);this.removeListener("keypress",N);}if(O&&L.opera){this.on("keypress",N);}return O;},_addListenersToForm:function(){var T=this.getForm(),S=YAHOO.widget.Button.onFormKeyPress,R,N,Q,P,O;if(T){M.on(T,"reset",this._onFormReset,null,this);M.on(T,"submit",this.createHiddenFields,null,this);N=this.get("srcelement");if(this.get("type")=="submit"||(N&&N.type=="submit")){Q=M.getListeners(T,"keypress");R=false;if(Q){P=Q.length;if(P>0){O=P-1;do{if(Q[O].fn==S){R=true;break;}}while(O--);}}if(!R){M.on(T,"keypress",S);}}}},_showMenu:function(S){if(YAHOO.widget.MenuManager){YAHOO.widget.MenuManager.hideVisible();}if(K){K.hideAll();}var Q=B.VIEWPORT_OFFSET,Z=this._menu,X=this,a=X.get("element"),U=false,W=G.getY(a),V=G.getDocumentScrollTop(),N,R,c;if(V){W=W-V;}var P=W,O=(G.getViewportHeight()-(W+a.offsetHeight));function T(){if(U){return(P-Q);}else{return(O-Q);}}function b(){var d=T();if(R>d){N=Z.cfg.getProperty("minscrollheight");if(d>N){Z.cfg.setProperty("maxheight",d);if(U){Z.align("bl","tl");}else{Z.align("tl","bl");}}if(d<N){if(U){Z.cfg.setProperty("context",[a,"tl","bl"],true);Z.align("tl","bl");}else{Z.cfg.setProperty("context",[a,"bl","tl"],true);Z.align("bl","tl");U=true;return b();}}}}if(J&&Z&&(Z instanceof J)){Z.cfg.applyConfig({context:[a,"tl","bl"],clicktohide:false});Z.cfg.fireQueue();Z.show();Z.cfg.setProperty("maxheight",0);Z.align("tl","bl");if(S.type=="mousedown"){M.stopPropagation(S);}R=Z.element.offsetHeight;c=Z.element.lastChild;b();if(this.get("focusmenu")){this._menu.focus();}}else{if(B&&Z&&(Z instanceof B)){Z.show();Z.align("tl","bl");var Y=T();R=Z.element.offsetHeight;if(Y<R){Z.align("bl","tl");U=true;Y=T();if(Y<R){Z.align("tl","bl");}}}}},_hideMenu:function(){var N=this._menu;if(N){N.hide();}},_onMouseOver:function(N){if(!this._hasMouseEventHandlers){this.on("mouseout",this._onMouseOut);this.on("mousedown",this._onMouseDown);this.on("mouseup",this._onMouseUp);this._hasMouseEventHandlers=true;}this.addStateCSSClasses("hover");if(this._activationButtonPressed){this.addStateCSSClasses("active");}if(this._bOptionPressed){this.addStateCSSClasses("activeoption");}if(this._activationButtonPressed||this._bOptionPressed){M.removeListener(document,"mouseup",this._onDocumentMouseUp);}},_onMouseOut:function(N){this.removeStateCSSClasses("hover");if(this.get("type")!="menu"){this.removeStateCSSClasses("active");}if(this._activationButtonPressed||this._bOptionPressed){M.on(document,"mouseup",this._onDocumentMouseUp,null,this);}},_onDocumentMouseUp:function(P){this._activationButtonPressed=false;this._bOptionPressed=false;var Q=this.get("type"),N,O;if(Q=="menu"||Q=="split"){N=M.getTarget(P);O=this._menu.element;if(N!=O&&!G.isAncestor(O,N)){this.removeStateCSSClasses((Q=="menu"?"active":"activeoption"));this._hideMenu();}}M.removeListener(document,"mouseup",this._onDocumentMouseUp);},_onMouseDown:function(Q){var S,O,R,P;function N(){this._hideMenu();this.removeListener("mouseup",N);}if((Q.which||Q.button)==1){if(!this.hasFocus()){this.focus();}S=this.get("type");if(S=="split"){O=this.get("element");R=M.getPageX(Q)-G.getX(O);if((O.offsetWidth-this.OPTION_AREA_WIDTH)<R){this.fireEvent("option",Q);}else{this.addStateCSSClasses("active");this._activationButtonPressed=true;}}else{if(S=="menu"){if(this.isActive()){this._hideMenu();this._activationButtonPressed=false;}else{this._showMenu(Q);this._activationButtonPressed=true;}}else{this.addStateCSSClasses("active");this._activationButtonPressed=true;}}if(S=="split"||S=="menu"){P=this;this._hideMenuTimerId=window.setTimeout(function(){P.on("mouseup",N);},250);}}},_onMouseUp:function(N){var O=this.get("type");if(this._hideMenuTimerId){window.clearTimeout(this._hideMenuTimerId);}if(O=="checkbox"||O=="radio"){this.set("checked",!(this.get("checked")));}this._activationButtonPressed=false;if(this.get("type")!="menu"){this.removeStateCSSClasses("active");}},_onFocus:function(O){var N;this.addStateCSSClasses("focus");if(this._activationKeyPressed){this.addStateCSSClasses("active");}C=this;if(!this._hasKeyEventHandlers){N=this._button;M.on(N,"blur",this._onBlur,null,this);M.on(N,"keydown",this._onKeyDown,null,this);M.on(N,"keyup",this._onKeyUp,null,this);this._hasKeyEventHandlers=true;}this.fireEvent("focus",O);},_onBlur:function(N){this.removeStateCSSClasses("focus");if(this.get("type")!="menu"){this.removeStateCSSClasses("active");}if(this._activationKeyPressed){M.on(document,"keyup",this._onDocumentKeyUp,null,this);}C=null;this.fireEvent("blur",N);},_onDocumentKeyUp:function(N){if(this._isActivationKey(M.getCharCode(N))){this._activationKeyPressed=false;M.removeListener(document,"keyup",this._onDocumentKeyUp);}},_onKeyDown:function(O){var N=this._menu;if(this.get("type")=="split"&&this._isSplitButtonOptionKey(O)){this.fireEvent("option",O);}else{if(this._isActivationKey(M.getCharCode(O))){if(this.get("type")=="menu"){this._showMenu(O);}else{this._activationKeyPressed=true;this.addStateCSSClasses("active");}}}if(N&&N.cfg.getProperty("visible")&&M.getCharCode(O)==27){N.hide();this.focus();}},_onKeyUp:function(N){var O;if(this._isActivationKey(M.getCharCode(N))){O=this.get("type");if(O=="checkbox"||O=="radio"){this.set("checked",!(this.get("checked")));}this._activationKeyPressed=false;if(this.get("type")!="menu"){this.removeStateCSSClasses("active");}}},_onClick:function(Q){var T=this.get("type"),N,R,O,P,S;switch(T){case"radio":case"checkbox":if(this.get("checked")){N=(T=="radio")?this.RADIO_CHECKED_TITLE:this.CHECKBOX_CHECKED_TITLE;}else{N=(T=="radio")?this.RADIO_DEFAULT_TITLE:this.CHECKBOX_DEFAULT_TITLE;}this.set("title",N);break;case"submit":this.submitForm();break;case"reset":R=this.getForm();if(R){R.reset();}break;case"menu":N=this._menu.cfg.getProperty("visible")?this.MENUBUTTON_MENU_VISIBLE_TITLE:this.MENUBUTTON_DEFAULT_TITLE;this.set("title",N);break;case"split":P=this.get("element");S=M.getPageX(Q)-G.getX(P);if((P.offsetWidth-this.OPTION_AREA_WIDTH)<S){return false;}else{this._hideMenu();O=this.get("srcelement");if(O&&O.type=="submit"){this.submitForm();}}N=this._menu.cfg.getProperty("visible")?this.SPLITBUTTON_OPTION_VISIBLE_TITLE:this.SPLITBUTTON_DEFAULT_TITLE;this.set("title",N);break;}},_onAppendTo:function(O){var N=this;window.setTimeout(function(){N._addListenersToForm();},0);},_onFormReset:function(O){var P=this.get("type"),N=this._menu;if(P=="checkbox"||P=="radio"){this.resetValue("checked");}if(J&&N&&(N instanceof J)){this.resetValue("selectedMenuItem");}},_onDocumentMouseDown:function(Q){var N=M.getTarget(Q),P=this.get("element"),O=this._menu.element;if(N!=P&&!G.isAncestor(P,N)&&N!=O&&!G.isAncestor(O,N)){this._hideMenu();M.removeListener(document,"mousedown",this._onDocumentMouseDown);}},_onOption:function(N){if(this.hasClass("yui-split-button-activeoption")){this._hideMenu();this._bOptionPressed=false;}else{this._showMenu(N);this._bOptionPressed=true;}},_onOverlayBeforeShow:function(O){var N=this._menu;N.render(this.get("element").parentNode);N.beforeShowEvent.unsubscribe(this._onOverlayBeforeShow);},_onMenuShow:function(O){M.on(document,"mousedown",this._onDocumentMouseDown,null,this);var N,P;if(this.get("type")=="split"){N=this.SPLITBUTTON_OPTION_VISIBLE_TITLE;P="activeoption";}else{N=this.MENUBUTTON_MENU_VISIBLE_TITLE;P="active";}this.addStateCSSClasses(P);this.set("title",N);},_onMenuHide:function(P){var O=this._menu,N,Q;if(this.get("type")=="split"){N=this.SPLITBUTTON_DEFAULT_TITLE;Q="activeoption";}else{N=this.MENUBUTTON_DEFAULT_TITLE;Q="active";}this.removeStateCSSClasses(Q);this.set("title",N);if(this.get("type")=="split"){this._bOptionPressed=false;}},_onMenuKeyDown:function(P,O){var N=O[0];if(M.getCharCode(N)==27){this.focus();if(this.get("type")=="split"){this._bOptionPressed=false;}}},_onMenuRender:function(O){var Q=this.get("element"),N=Q.parentNode,P=this._menu.element;if(N!=P.parentNode){N.appendChild(P);}this.set("selectedMenuItem",this.get("selectedMenuItem"));},_onMenuItemSelected:function(P,O,N){var Q=O[0];if(Q){this.set("selectedMenuItem",N);}},_onMenuItemAdded:function(P,O,N){var Q=O[0];Q.cfg.subscribeToConfigEvent("selected",this._onMenuItemSelected,Q,this);},_onMenuClick:function(O,N){var Q=N[1],P;if(Q){P=this.get("srcelement");if(P&&P.type=="submit"){this.submitForm();}this._hideMenu();}},createButtonElement:function(N){var P=this.NODE_NAME,O=document.createElement(P);O.innerHTML="<"+P+' class="first-child">'+(N=="link"?"<a></a>":'<button type="button"></button>')+"</"+P+">";return O;},addStateCSSClasses:function(N){var O=this.get("type");if(I.isString(N)){if(N!="activeoption"){this.addClass(this.CSS_CLASS_NAME+("-"+N));}this.addClass("yui-"+O+("-button-"+N));}},removeStateCSSClasses:function(N){var O=this.get("type");if(I.isString(N)){this.removeClass(this.CSS_CLASS_NAME+("-"+N));this.removeClass("yui-"+O+("-button-"+N));}},createHiddenFields:function(){this.removeHiddenFields();var S=this.getForm(),V,O,Q,T,U,P,R,N;if(S&&!this.get("disabled")){O=this.get("type");Q=(O=="checkbox"||O=="radio");if(Q||(E==this)){V=F((Q?O:"hidden"),this.get("name"),this.get("value"),this.get("checked"));if(V){if(Q){V.style.display="none";}S.appendChild(V);}}T=this._menu;if(J&&T&&(T instanceof J)){N=T.srcElement;U=this.get("selectedMenuItem");if(U){if(N&&N.nodeName.toUpperCase()=="SELECT"){S.appendChild(N);N.selectedIndex=U.index;}else{R=(U.value===null||U.value==="")?U.cfg.getProperty("text"):U.value;P=this.get("name");if(R&&P){N=F("hidden",(P+"_options"),R);S.appendChild(N);}}}}if(V&&N){this._hiddenFields=[V,N];}else{if(!V&&N){this._hiddenFields=N;}else{if(V&&!N){this._hiddenFields=V;}}}return this._hiddenFields;}},removeHiddenFields:function(){var Q=this._hiddenFields,O,P;function N(R){if(G.inDocument(R)){R.parentNode.removeChild(R);}}if(Q){if(I.isArray(Q)){O=Q.length;if(O>0){P=O-1;do{N(Q[P]);}while(P--);}}else{N(Q);}this._hiddenFields=null;}},submitForm:function(){var Q=this.getForm(),P=this.get("srcelement"),O=false,N;if(Q){if(this.get("type")=="submit"||(P&&P.type=="submit")){E=this;}if(L.ie){O=Q.fireEvent("onsubmit");}else{N=document.createEvent("HTMLEvents");N.initEvent("submit",true,true);O=Q.dispatchEvent(N);}if((L.ie||L.webkit)&&O){Q.submit();}}return O;},init:function(N,U){var P=U.type=="link"?"a":"button",R=U.srcelement,T=N.getElementsByTagName(P)[0],S;if(!T){S=N.getElementsByTagName("input")[0];if(S){T=document.createElement("button");T.setAttribute("type","button");S.parentNode.replaceChild(T,S);}}this._button=T;YAHOO.widget.Button.superclass.init.call(this,N,U);D[this.get("id")]=this;this.addClass(this.CSS_CLASS_NAME);this.addClass("yui-"+this.get("type")+"-button");M.on(this._button,"focus",this._onFocus,null,this);this.on("mouseover",this._onMouseOver);this.on("click",this._onClick);this.on("appendTo",this._onAppendTo);var W=this.get("container"),O=this.get("element"),V=G.inDocument(O),Q;if(W){if(R&&R!=O){Q=R.parentNode;if(Q){Q.removeChild(R);}}if(I.isString(W)){M.onContentReady(W,function(){this.appendTo(W);},null,this);}else{this.appendTo(W);}}else{if(!V&&R&&R!=O){Q=R.parentNode;if(Q){this.fireEvent("beforeAppendTo",{type:"beforeAppendTo",target:Q});Q.replaceChild(O,R);this.fireEvent("appendTo",{type:"appendTo",target:Q});}}else{if(this.get("type")!="link"&&V&&R&&R==O){this._addListenersToForm();}}}},initAttributes:function(O){var N=O||{};YAHOO.widget.Button.superclass.initAttributes.call(this,N);this.setAttributeConfig("type",{value:(N.type||"push"),validator:I.isString,writeOnce:true,method:this._setType});this.setAttributeConfig("label",{value:N.label,validator:I.isString,method:this._setLabel});this.setAttributeConfig("value",{value:N.value});this.setAttributeConfig("name",{value:N.name,validator:I.isString});this.setAttributeConfig("tabindex",{value:N.tabindex,validator:I.isNumber,method:this._setTabIndex});this.configureAttribute("title",{value:N.title,validator:I.isString,method:this._setTitle});this.setAttributeConfig("disabled",{value:(N.disabled||false),validator:I.isBoolean,method:this._setDisabled});this.setAttributeConfig("href",{value:N.href,validator:I.isString,method:this._setHref});this.setAttributeConfig("target",{value:N.target,validator:I.isString,method:this._setTarget});this.setAttributeConfig("checked",{value:(N.checked||false),validator:I.isBoolean,method:this._setChecked});this.setAttributeConfig("container",{value:N.container,writeOnce:true});this.setAttributeConfig("srcelement",{value:N.srcelement,writeOnce:true});this.setAttributeConfig("menu",{value:null,method:this._setMenu,writeOnce:true});this.setAttributeConfig("lazyloadmenu",{value:(N.lazyloadmenu===false?false:true),validator:I.isBoolean,writeOnce:true});this.setAttributeConfig("menuclassname",{value:(N.menuclassname||"yui-button-menu"),validator:I.isString,method:this._setMenuClassName,writeOnce:true});this.setAttributeConfig("selectedMenuItem",{value:null,method:this._setSelectedMenuItem});this.setAttributeConfig("onclick",{value:N.onclick,method:this._setOnClick});this.setAttributeConfig("focusmenu",{value:(N.focusmenu===false?false:true),validator:I.isBoolean});},focus:function(){if(!this.get("disabled")){this._button.focus();}},blur:function(){if(!this.get("disabled")){this._button.blur();}},hasFocus:function(){return(C==this);},isActive:function(){return this.hasClass(this.CSS_CLASS_NAME+"-active");},getMenu:function(){return this._menu;},getForm:function(){return this._button.form;},getHiddenFields:function(){return this._hiddenFields;},destroy:function(){var P=this.get("element"),O=P.parentNode,N=this._menu,R;if(N){if(K&&K.find(N)){K.remove(N);}N.destroy();}M.purgeElement(P);M.purgeElement(this._button);M.removeListener(document,"mouseup",this._onDocumentMouseUp);M.removeListener(document,"keyup",this._onDocumentKeyUp);M.removeListener(document,"mousedown",this._onDocumentMouseDown);var Q=this.getForm();if(Q){M.removeListener(Q,"reset",this._onFormReset);M.removeListener(Q,"submit",this.createHiddenFields);}this.unsubscribeAll();if(O){O.removeChild(P);}delete D[this.get("id")];R=G.getElementsByClassName(this.CSS_CLASS_NAME,this.NODE_NAME,Q);if(I.isArray(R)&&R.length===0){M.removeListener(Q,"keypress",YAHOO.widget.Button.onFormKeyPress);}},fireEvent:function(O,N){var P=arguments[0];if(this.DOM_EVENTS[P]&&this.get("disabled")){return;}return YAHOO.widget.Button.superclass.fireEvent.apply(this,arguments);},toString:function(){return("Button "+this.get("id"));}});YAHOO.widget.Button.onFormKeyPress=function(R){var P=M.getTarget(R),S=M.getCharCode(R),Q=P.nodeName&&P.nodeName.toUpperCase(),N=P.type,T=false,V,W,O,X;function U(a){var Z,Y;switch(a.nodeName.toUpperCase()){case"INPUT":case"BUTTON":if(a.type=="submit"&&!a.disabled){if(!T&&!O){O=a;}if(W&&!X){X=a;}}break;default:Z=a.id;if(Z){V=D[Z];if(V){T=true;if(!V.get("disabled")){Y=V.get("srcelement");if(!W&&(V.get("type")=="submit"||(Y&&Y.type=="submit"))){W=V;}}}}break;}}if(S==13&&((Q=="INPUT"&&(N=="text"||N=="password"||N=="checkbox"||N=="radio"||N=="file"))||Q=="SELECT")){G.getElementsBy(U,"*",this);if(O){O.focus();}else{if(!O&&W){if(X){M.preventDefault(R);}W.submitForm();}}}};YAHOO.widget.Button.addHiddenFieldsToForm=function(N){var S=G.getElementsByClassName(YAHOO.widget.Button.prototype.CSS_CLASS_NAME,"*",N),Q=S.length,R,O,P;if(Q>0){for(P=0;P<Q;P++){O=S[P].id;if(O){R=D[O];if(R){R.createHiddenFields();}}}}};YAHOO.widget.Button.getButton=function(N){var O=D[N];if(O){return O;}};})();(function(){var C=YAHOO.util.Dom,B=YAHOO.util.Event,D=YAHOO.lang,A=YAHOO.widget.Button,E={};YAHOO.widget.ButtonGroup=function(J,H){var I=YAHOO.widget.ButtonGroup.superclass.constructor,K,G,F;if(arguments.length==1&&!D.isString(J)&&!J.nodeName){if(!J.id){F=C.generateId();J.id=F;}I.call(this,(this._createGroupElement()),J);}else{if(D.isString(J)){G=C.get(J);if(G){if(G.nodeName.toUpperCase()==this.NODE_NAME){I.call(this,G,H);}}}else{K=J.nodeName.toUpperCase();if(K&&K==this.NODE_NAME){if(!J.id){J.id=C.generateId();}I.call(this,J,H);}}}};YAHOO.extend(YAHOO.widget.ButtonGroup,YAHOO.util.Element,{_buttons:null,NODE_NAME:"DIV",CSS_CLASS_NAME:"yui-buttongroup",_createGroupElement:function(){var F=document.createElement(this.NODE_NAME);return F;},_setDisabled:function(G){var H=this.getCount(),F;if(H>0){F=H-1;do{this._buttons[F].set("disabled",G);}while(F--);}},_onKeyDown:function(K){var G=B.getTarget(K),I=B.getCharCode(K),H=G.parentNode.parentNode.id,J=E[H],F=-1;if(I==37||I==38){F=(J.index===0)?(this._buttons.length-1):(J.index-1);}else{if(I==39||I==40){F=(J.index===(this._buttons.length-1))?0:(J.index+1);}}if(F>-1){this.check(F);this.getButton(F).focus();}},_onAppendTo:function(H){var I=this._buttons,G=I.length,F;for(F=0;F<G;F++){I[F].appendTo(this.get("element"));}},_onButtonCheckedChange:function(G,F){var I=G.newValue,H=this.get("checkedButton");if(I&&H!=F){if(H){H.set("checked",false,true);}this.set("checkedButton",F);this.set("value",F.get("value"));}else{if(H&&!H.set("checked")){H.set("checked",true,true);}}},init:function(I,H){this._buttons=[];YAHOO.widget.ButtonGroup.superclass.init.call(this,I,H);this.addClass(this.CSS_CLASS_NAME);var J=this.getElementsByClassName("yui-radio-button");if(J.length>0){this.addButtons(J);}function F(K){return(K.type=="radio");}J=C.getElementsBy(F,"input",this.get("element"));if(J.length>0){this.addButtons(J);}this.on("keydown",this._onKeyDown);this.on("appendTo",this._onAppendTo);var G=this.get("container");if(G){if(D.isString(G)){B.onContentReady(G,function(){this.appendTo(G);},null,this);}else{this.appendTo(G);}}},initAttributes:function(G){var F=G||{};YAHOO.widget.ButtonGroup.superclass.initAttributes.call(this,F);this.setAttributeConfig("name",{value:F.name,validator:D.isString});this.setAttributeConfig("disabled",{value:(F.disabled||false),validator:D.isBoolean,method:this._setDisabled});this.setAttributeConfig("value",{value:F.value});this.setAttributeConfig("container",{value:F.container,writeOnce:true});this.setAttributeConfig("checkedButton",{value:null});},addButton:function(J){var L,K,G,F,H,I;if(J instanceof A&&J.get("type")=="radio"){L=J;}else{if(!D.isString(J)&&!J.nodeName){J.type="radio";L=new A(J);}else{L=new A(J,{type:"radio"});}}if(L){F=this._buttons.length;H=L.get("name");I=this.get("name");L.index=F;this._buttons[F]=L;E[L.get("id")]=L;if(H!=I){L.set("name",I);}if(this.get("disabled")){L.set("disabled",true);}if(L.get("checked")){this.set("checkedButton",L);}K=L.get("element");G=this.get("element");if(K.parentNode!=G){G.appendChild(K);}L.on("checkedChange",this._onButtonCheckedChange,L,this);return L;}},addButtons:function(G){var H,I,J,F;if(D.isArray(G)){H=G.length;J=[];if(H>0){for(F=0;F<H;F++){I=this.addButton(G[F]);if(I){J[J.length]=I;}}if(J.length>0){return J;}}}},removeButton:function(H){var I=this.getButton(H),G,F;if(I){this._buttons.splice(H,1);delete E[I.get("id")];I.removeListener("checkedChange",this._onButtonCheckedChange);I.destroy();G=this._buttons.length;if(G>0){F=this._buttons.length-1;do{this._buttons[F].index=F;}while(F--);}}},getButton:function(F){if(D.isNumber(F)){return this._buttons[F];}},getButtons:function(){return this._buttons;},getCount:function(){return this._buttons.length;},focus:function(H){var I,G,F;if(D.isNumber(H)){I=this._buttons[H];if(I){I.focus();}}else{G=this.getCount();for(F=0;F<G;F++){I=this._buttons[F];if(!I.get("disabled")){I.focus();break;}}}},check:function(F){var G=this.getButton(F);if(G){G.set("checked",true);}},destroy:function(){var I=this._buttons.length,H=this.get("element"),F=H.parentNode,G;if(I>0){G=this._buttons.length-1;do{this._buttons[G].destroy();}while(G--);}B.purgeElement(H);F.removeChild(H);},toString:function(){return("ButtonGroup "+this.get("id"));}});})();YAHOO.register("button",YAHOO.widget.Button,{version:"2.5.2",build:"1076"});
//from: http://yui.yahooapis.com/2.5.2/build/container/container_core-min.js

(function(){YAHOO.util.Config=function(D){if(D){this.init(D);}};var B=YAHOO.lang,C=YAHOO.util.CustomEvent,A=YAHOO.util.Config;A.CONFIG_CHANGED_EVENT="configChanged";A.BOOLEAN_TYPE="boolean";A.prototype={owner:null,queueInProgress:false,config:null,initialConfig:null,eventQueue:null,configChangedEvent:null,init:function(D){this.owner=D;this.configChangedEvent=this.createEvent(A.CONFIG_CHANGED_EVENT);this.configChangedEvent.signature=C.LIST;this.queueInProgress=false;this.config={};this.initialConfig={};this.eventQueue=[];},checkBoolean:function(D){return(typeof D==A.BOOLEAN_TYPE);},checkNumber:function(D){return(!isNaN(D));},fireEvent:function(D,F){var E=this.config[D];if(E&&E.event){E.event.fire(F);}},addProperty:function(E,D){E=E.toLowerCase();this.config[E]=D;D.event=this.createEvent(E,{scope:this.owner});D.event.signature=C.LIST;D.key=E;if(D.handler){D.event.subscribe(D.handler,this.owner);}this.setProperty(E,D.value,true);if(!D.suppressEvent){this.queueProperty(E,D.value);}},getConfig:function(){var D={},F,E;for(F in this.config){E=this.config[F];if(E&&E.event){D[F]=E.value;}}return D;},getProperty:function(D){var E=this.config[D.toLowerCase()];if(E&&E.event){return E.value;}else{return undefined;}},resetProperty:function(D){D=D.toLowerCase();var E=this.config[D];if(E&&E.event){if(this.initialConfig[D]&&!B.isUndefined(this.initialConfig[D])){this.setProperty(D,this.initialConfig[D]);return true;}}else{return false;}},setProperty:function(E,G,D){var F;E=E.toLowerCase();if(this.queueInProgress&&!D){this.queueProperty(E,G);return true;}else{F=this.config[E];if(F&&F.event){if(F.validator&&!F.validator(G)){return false;}else{F.value=G;if(!D){this.fireEvent(E,G);this.configChangedEvent.fire([E,G]);}return true;}}else{return false;}}},queueProperty:function(S,P){S=S.toLowerCase();var R=this.config[S],K=false,J,G,H,I,O,Q,F,M,N,D,L,T,E;if(R&&R.event){if(!B.isUndefined(P)&&R.validator&&!R.validator(P)){return false;}else{if(!B.isUndefined(P)){R.value=P;}else{P=R.value;}K=false;J=this.eventQueue.length;for(L=0;L<J;L++){G=this.eventQueue[L];if(G){H=G[0];I=G[1];if(H==S){this.eventQueue[L]=null;this.eventQueue.push([S,(!B.isUndefined(P)?P:I)]);K=true;break;}}}if(!K&&!B.isUndefined(P)){this.eventQueue.push([S,P]);}}if(R.supercedes){O=R.supercedes.length;for(T=0;T<O;T++){Q=R.supercedes[T];F=this.eventQueue.length;for(E=0;E<F;E++){M=this.eventQueue[E];if(M){N=M[0];D=M[1];if(N==Q.toLowerCase()){this.eventQueue.push([N,D]);this.eventQueue[E]=null;break;}}}}}return true;}else{return false;}},refireEvent:function(D){D=D.toLowerCase();var E=this.config[D];if(E&&E.event&&!B.isUndefined(E.value)){if(this.queueInProgress){this.queueProperty(D);}else{this.fireEvent(D,E.value);}}},applyConfig:function(D,G){var F,E;if(G){E={};for(F in D){if(B.hasOwnProperty(D,F)){E[F.toLowerCase()]=D[F];}}this.initialConfig=E;}for(F in D){if(B.hasOwnProperty(D,F)){this.queueProperty(F,D[F]);}}},refresh:function(){var D;for(D in this.config){this.refireEvent(D);}},fireQueue:function(){var E,H,D,G,F;this.queueInProgress=true;for(E=0;E<this.eventQueue.length;E++){H=this.eventQueue[E];if(H){D=H[0];G=H[1];F=this.config[D];F.value=G;this.fireEvent(D,G);}}this.queueInProgress=false;this.eventQueue=[];},subscribeToConfigEvent:function(E,F,H,D){var G=this.config[E.toLowerCase()];if(G&&G.event){if(!A.alreadySubscribed(G.event,F,H)){G.event.subscribe(F,H,D);}return true;}else{return false;}},unsubscribeFromConfigEvent:function(D,E,G){var F=this.config[D.toLowerCase()];if(F&&F.event){return F.event.unsubscribe(E,G);}else{return false;}},toString:function(){var D="Config";if(this.owner){D+=" ["+this.owner.toString()+"]";}return D;},outputEventQueue:function(){var D="",G,E,F=this.eventQueue.length;for(E=0;E<F;E++){G=this.eventQueue[E];if(G){D+=G[0]+"="+G[1]+", ";}}return D;},destroy:function(){var E=this.config,D,F;for(D in E){if(B.hasOwnProperty(E,D)){F=E[D];F.event.unsubscribeAll();F.event=null;}}this.configChangedEvent.unsubscribeAll();this.configChangedEvent=null;this.owner=null;this.config=null;this.initialConfig=null;this.eventQueue=null;}};A.alreadySubscribed=function(E,H,I){var F=E.subscribers.length,D,G;if(F>0){G=F-1;do{D=E.subscribers[G];if(D&&D.obj==I&&D.fn==H){return true;}}while(G--);}return false;};YAHOO.lang.augmentProto(A,YAHOO.util.EventProvider);}());(function(){YAHOO.widget.Module=function(Q,P){if(Q){this.init(Q,P);}else{}};var F=YAHOO.util.Dom,D=YAHOO.util.Config,M=YAHOO.util.Event,L=YAHOO.util.CustomEvent,G=YAHOO.widget.Module,H,O,N,E,A={"BEFORE_INIT":"beforeInit","INIT":"init","APPEND":"append","BEFORE_RENDER":"beforeRender","RENDER":"render","CHANGE_HEADER":"changeHeader","CHANGE_BODY":"changeBody","CHANGE_FOOTER":"changeFooter","CHANGE_CONTENT":"changeContent","DESTORY":"destroy","BEFORE_SHOW":"beforeShow","SHOW":"show","BEFORE_HIDE":"beforeHide","HIDE":"hide"},I={"VISIBLE":{key:"visible",value:true,validator:YAHOO.lang.isBoolean},"EFFECT":{key:"effect",suppressEvent:true,supercedes:["visible"]},"MONITOR_RESIZE":{key:"monitorresize",value:true},"APPEND_TO_DOCUMENT_BODY":{key:"appendtodocumentbody",value:false}};G.IMG_ROOT=null;G.IMG_ROOT_SSL=null;G.CSS_MODULE="yui-module";G.CSS_HEADER="hd";G.CSS_BODY="bd";G.CSS_FOOTER="ft";G.RESIZE_MONITOR_SECURE_URL="javascript:false;";G.textResizeEvent=new L("textResize");function K(){if(!H){H=document.createElement("div");H.innerHTML=('<div class="'+G.CSS_HEADER+'"></div>'+'<div class="'+G.CSS_BODY+'"></div><div class="'+G.CSS_FOOTER+'"></div>');O=H.firstChild;N=O.nextSibling;E=N.nextSibling;}return H;}function J(){if(!O){K();}return(O.cloneNode(false));}function B(){if(!N){K();}return(N.cloneNode(false));}function C(){if(!E){K();}return(E.cloneNode(false));}G.prototype={constructor:G,element:null,header:null,body:null,footer:null,id:null,imageRoot:G.IMG_ROOT,initEvents:function(){var P=L.LIST;this.beforeInitEvent=this.createEvent(A.BEFORE_INIT);this.beforeInitEvent.signature=P;this.initEvent=this.createEvent(A.INIT);this.initEvent.signature=P;this.appendEvent=this.createEvent(A.APPEND);this.appendEvent.signature=P;this.beforeRenderEvent=this.createEvent(A.BEFORE_RENDER);this.beforeRenderEvent.signature=P;this.renderEvent=this.createEvent(A.RENDER);this.renderEvent.signature=P;this.changeHeaderEvent=this.createEvent(A.CHANGE_HEADER);this.changeHeaderEvent.signature=P;this.changeBodyEvent=this.createEvent(A.CHANGE_BODY);this.changeBodyEvent.signature=P;this.changeFooterEvent=this.createEvent(A.CHANGE_FOOTER);this.changeFooterEvent.signature=P;this.changeContentEvent=this.createEvent(A.CHANGE_CONTENT);this.changeContentEvent.signature=P;this.destroyEvent=this.createEvent(A.DESTORY);this.destroyEvent.signature=P;this.beforeShowEvent=this.createEvent(A.BEFORE_SHOW);this.beforeShowEvent.signature=P;this.showEvent=this.createEvent(A.SHOW);this.showEvent.signature=P;this.beforeHideEvent=this.createEvent(A.BEFORE_HIDE);this.beforeHideEvent.signature=P;this.hideEvent=this.createEvent(A.HIDE);this.hideEvent.signature=P;},platform:function(){var P=navigator.userAgent.toLowerCase();if(P.indexOf("windows")!=-1||P.indexOf("win32")!=-1){return"windows";}else{if(P.indexOf("macintosh")!=-1){return"mac";}else{return false;}}}(),browser:function(){var P=navigator.userAgent.toLowerCase();if(P.indexOf("opera")!=-1){return"opera";}else{if(P.indexOf("msie 7")!=-1){return"ie7";}else{if(P.indexOf("msie")!=-1){return"ie";}else{if(P.indexOf("safari")!=-1){return"safari";}else{if(P.indexOf("gecko")!=-1){return"gecko";}else{return false;}}}}}}(),isSecure:function(){if(window.location.href.toLowerCase().indexOf("https")===0){return true;}else{return false;}}(),initDefaultConfig:function(){this.cfg.addProperty(I.VISIBLE.key,{handler:this.configVisible,value:I.VISIBLE.value,validator:I.VISIBLE.validator});this.cfg.addProperty(I.EFFECT.key,{suppressEvent:I.EFFECT.suppressEvent,supercedes:I.EFFECT.supercedes});this.cfg.addProperty(I.MONITOR_RESIZE.key,{handler:this.configMonitorResize,value:I.MONITOR_RESIZE.value});this.cfg.addProperty(I.APPEND_TO_DOCUMENT_BODY.key,{value:I.APPEND_TO_DOCUMENT_BODY.value});},init:function(U,T){var R,V;this.initEvents();this.beforeInitEvent.fire(G);this.cfg=new D(this);if(this.isSecure){this.imageRoot=G.IMG_ROOT_SSL;}if(typeof U=="string"){R=U;U=document.getElementById(U);if(!U){U=(K()).cloneNode(false);U.id=R;}}this.element=U;if(U.id){this.id=U.id;}V=this.element.firstChild;if(V){var Q=false,P=false,S=false;do{if(1==V.nodeType){if(!Q&&F.hasClass(V,G.CSS_HEADER)){this.header=V;Q=true;}else{if(!P&&F.hasClass(V,G.CSS_BODY)){this.body=V;P=true;}else{if(!S&&F.hasClass(V,G.CSS_FOOTER)){this.footer=V;S=true;}}}}}while((V=V.nextSibling));}this.initDefaultConfig();F.addClass(this.element,G.CSS_MODULE);if(T){this.cfg.applyConfig(T,true);}if(!D.alreadySubscribed(this.renderEvent,this.cfg.fireQueue,this.cfg)){this.renderEvent.subscribe(this.cfg.fireQueue,this.cfg,true);}this.initEvent.fire(G);},initResizeMonitor:function(){var Q=(YAHOO.env.ua.gecko&&this.platform=="windows");if(Q){var P=this;setTimeout(function(){P._initResizeMonitor();},0);}else{this._initResizeMonitor();}},_initResizeMonitor:function(){var P,R,T;function V(){G.textResizeEvent.fire();}if(!YAHOO.env.ua.opera){R=F.get("_yuiResizeMonitor");var U=this._supportsCWResize();if(!R){R=document.createElement("iframe");if(this.isSecure&&G.RESIZE_MONITOR_SECURE_URL&&YAHOO.env.ua.ie){R.src=G.RESIZE_MONITOR_SECURE_URL;}if(!U){T=["<html><head><script ",'type="text/javascript">',"window.onresize=function(){window.parent.","YAHOO.widget.Module.textResizeEvent.","fire();};<","/script></head>","<body></body></html>"].join("");R.src="data:text/html;charset=utf-8,"+encodeURIComponent(T);}R.id="_yuiResizeMonitor";R.style.position="absolute";R.style.visibility="hidden";var Q=document.body,S=Q.firstChild;if(S){Q.insertBefore(R,S);}else{Q.appendChild(R);}R.style.width="10em";R.style.height="10em";R.style.top=(-1*R.offsetHeight)+"px";R.style.left=(-1*R.offsetWidth)+"px";R.style.borderWidth="0";R.style.visibility="visible";if(YAHOO.env.ua.webkit){P=R.contentWindow.document;P.open();P.close();}}if(R&&R.contentWindow){G.textResizeEvent.subscribe(this.onDomResize,this,true);if(!G.textResizeInitialized){if(U){if(!M.on(R.contentWindow,"resize",V)){M.on(R,"resize",V);}}G.textResizeInitialized=true;}this.resizeMonitor=R;}}},_supportsCWResize:function(){var P=true;if(YAHOO.env.ua.gecko&&YAHOO.env.ua.gecko<=1.8){P=false;}return P;},onDomResize:function(S,R){var Q=-1*this.resizeMonitor.offsetWidth,P=-1*this.resizeMonitor.offsetHeight;this.resizeMonitor.style.top=P+"px";this.resizeMonitor.style.left=Q+"px";},setHeader:function(Q){var P=this.header||(this.header=J());if(Q.nodeName){P.innerHTML="";P.appendChild(Q);}else{P.innerHTML=Q;}this.changeHeaderEvent.fire(Q);this.changeContentEvent.fire();},appendToHeader:function(Q){var P=this.header||(this.header=J());P.appendChild(Q);this.changeHeaderEvent.fire(Q);this.changeContentEvent.fire();},setBody:function(Q){var P=this.body||(this.body=B());if(Q.nodeName){P.innerHTML="";P.appendChild(Q);}else{P.innerHTML=Q;}this.changeBodyEvent.fire(Q);this.changeContentEvent.fire();},appendToBody:function(Q){var P=this.body||(this.body=B());P.appendChild(Q);this.changeBodyEvent.fire(Q);this.changeContentEvent.fire();},setFooter:function(Q){var P=this.footer||(this.footer=C());if(Q.nodeName){P.innerHTML="";P.appendChild(Q);}else{P.innerHTML=Q;}this.changeFooterEvent.fire(Q);this.changeContentEvent.fire();},appendToFooter:function(Q){var P=this.footer||(this.footer=C());P.appendChild(Q);this.changeFooterEvent.fire(Q);this.changeContentEvent.fire();},render:function(R,P){var S=this,T;function Q(U){if(typeof U=="string"){U=document.getElementById(U);}if(U){S._addToParent(U,S.element);S.appendEvent.fire();}}this.beforeRenderEvent.fire();if(!P){P=this.element;}if(R){Q(R);}else{if(!F.inDocument(this.element)){return false;}}if(this.header&&!F.inDocument(this.header)){T=P.firstChild;if(T){P.insertBefore(this.header,T);}else{P.appendChild(this.header);}}if(this.body&&!F.inDocument(this.body)){if(this.footer&&F.isAncestor(this.moduleElement,this.footer)){P.insertBefore(this.body,this.footer);}else{P.appendChild(this.body);}}if(this.footer&&!F.inDocument(this.footer)){P.appendChild(this.footer);}this.renderEvent.fire();return true;},destroy:function(){var P,Q;if(this.element){M.purgeElement(this.element,true);P=this.element.parentNode;}if(P){P.removeChild(this.element);}this.element=null;this.header=null;this.body=null;this.footer=null;G.textResizeEvent.unsubscribe(this.onDomResize,this);this.cfg.destroy();this.cfg=null;this.destroyEvent.fire();for(Q in this){if(Q instanceof L){Q.unsubscribeAll();}}},show:function(){this.cfg.setProperty("visible",true);},hide:function(){this.cfg.setProperty("visible",false);},configVisible:function(Q,P,R){var S=P[0];if(S){this.beforeShowEvent.fire();F.setStyle(this.element,"display","block");this.showEvent.fire();}else{this.beforeHideEvent.fire();F.setStyle(this.element,"display","none");this.hideEvent.fire();}},configMonitorResize:function(R,Q,S){var P=Q[0];if(P){this.initResizeMonitor();}else{G.textResizeEvent.unsubscribe(this.onDomResize,this,true);this.resizeMonitor=null;}},_addToParent:function(P,Q){if(!this.cfg.getProperty("appendtodocumentbody")&&P===document.body&&P.firstChild){P.insertBefore(Q,P.firstChild);}else{P.appendChild(Q);}},toString:function(){return"Module "+this.id;}};YAHOO.lang.augmentProto(G,YAHOO.util.EventProvider);}());(function(){YAHOO.widget.Overlay=function(L,K){YAHOO.widget.Overlay.superclass.constructor.call(this,L,K);};var F=YAHOO.lang,I=YAHOO.util.CustomEvent,E=YAHOO.widget.Module,J=YAHOO.util.Event,D=YAHOO.util.Dom,C=YAHOO.util.Config,B=YAHOO.widget.Overlay,G,A={"BEFORE_MOVE":"beforeMove","MOVE":"move"},H={"X":{key:"x",validator:F.isNumber,suppressEvent:true,supercedes:["iframe"]},"Y":{key:"y",validator:F.isNumber,suppressEvent:true,supercedes:["iframe"]},"XY":{key:"xy",suppressEvent:true,supercedes:["iframe"]},"CONTEXT":{key:"context",suppressEvent:true,supercedes:["iframe"]},"FIXED_CENTER":{key:"fixedcenter",value:false,validator:F.isBoolean,supercedes:["iframe","visible"]},"WIDTH":{key:"width",suppressEvent:true,supercedes:["context","fixedcenter","iframe"]},"HEIGHT":{key:"height",suppressEvent:true,supercedes:["context","fixedcenter","iframe"]},"ZINDEX":{key:"zindex",value:null},"CONSTRAIN_TO_VIEWPORT":{key:"constraintoviewport",value:false,validator:F.isBoolean,supercedes:["iframe","x","y","xy"]},"IFRAME":{key:"iframe",value:(YAHOO.env.ua.ie==6?true:false),validator:F.isBoolean,supercedes:["zindex"]}};B.IFRAME_SRC="javascript:false;";B.IFRAME_OFFSET=3;B.VIEWPORT_OFFSET=10;B.TOP_LEFT="tl";B.TOP_RIGHT="tr";B.BOTTOM_LEFT="bl";B.BOTTOM_RIGHT="br";B.CSS_OVERLAY="yui-overlay";B.windowScrollEvent=new I("windowScroll");B.windowResizeEvent=new I("windowResize");B.windowScrollHandler=function(K){if(YAHOO.env.ua.ie){if(!window.scrollEnd){window.scrollEnd=-1;}clearTimeout(window.scrollEnd);window.scrollEnd=setTimeout(function(){B.windowScrollEvent.fire();},1);}else{B.windowScrollEvent.fire();}};B.windowResizeHandler=function(K){if(YAHOO.env.ua.ie){if(!window.resizeEnd){window.resizeEnd=-1;}clearTimeout(window.resizeEnd);window.resizeEnd=setTimeout(function(){B.windowResizeEvent.fire();},100);}else{B.windowResizeEvent.fire();}};B._initialized=null;if(B._initialized===null){J.on(window,"scroll",B.windowScrollHandler);J.on(window,"resize",B.windowResizeHandler);B._initialized=true;}YAHOO.extend(B,E,{init:function(L,K){B.superclass.init.call(this,L);this.beforeInitEvent.fire(B);D.addClass(this.element,B.CSS_OVERLAY);if(K){this.cfg.applyConfig(K,true);}if(this.platform=="mac"&&YAHOO.env.ua.gecko){if(!C.alreadySubscribed(this.showEvent,this.showMacGeckoScrollbars,this)){this.showEvent.subscribe(this.showMacGeckoScrollbars,this,true);}if(!C.alreadySubscribed(this.hideEvent,this.hideMacGeckoScrollbars,this)){this.hideEvent.subscribe(this.hideMacGeckoScrollbars,this,true);}}this.initEvent.fire(B);},initEvents:function(){B.superclass.initEvents.call(this);var K=I.LIST;this.beforeMoveEvent=this.createEvent(A.BEFORE_MOVE);this.beforeMoveEvent.signature=K;this.moveEvent=this.createEvent(A.MOVE);this.moveEvent.signature=K;},initDefaultConfig:function(){B.superclass.initDefaultConfig.call(this);this.cfg.addProperty(H.X.key,{handler:this.configX,validator:H.X.validator,suppressEvent:H.X.suppressEvent,supercedes:H.X.supercedes});this.cfg.addProperty(H.Y.key,{handler:this.configY,validator:H.Y.validator,suppressEvent:H.Y.suppressEvent,supercedes:H.Y.supercedes});this.cfg.addProperty(H.XY.key,{handler:this.configXY,suppressEvent:H.XY.suppressEvent,supercedes:H.XY.supercedes});this.cfg.addProperty(H.CONTEXT.key,{handler:this.configContext,suppressEvent:H.CONTEXT.suppressEvent,supercedes:H.CONTEXT.supercedes});this.cfg.addProperty(H.FIXED_CENTER.key,{handler:this.configFixedCenter,value:H.FIXED_CENTER.value,validator:H.FIXED_CENTER.validator,supercedes:H.FIXED_CENTER.supercedes});this.cfg.addProperty(H.WIDTH.key,{handler:this.configWidth,suppressEvent:H.WIDTH.suppressEvent,supercedes:H.WIDTH.supercedes});this.cfg.addProperty(H.HEIGHT.key,{handler:this.configHeight,suppressEvent:H.HEIGHT.suppressEvent,supercedes:H.HEIGHT.supercedes});this.cfg.addProperty(H.ZINDEX.key,{handler:this.configzIndex,value:H.ZINDEX.value});this.cfg.addProperty(H.CONSTRAIN_TO_VIEWPORT.key,{handler:this.configConstrainToViewport,value:H.CONSTRAIN_TO_VIEWPORT.value,validator:H.CONSTRAIN_TO_VIEWPORT.validator,supercedes:H.CONSTRAIN_TO_VIEWPORT.supercedes});this.cfg.addProperty(H.IFRAME.key,{handler:this.configIframe,value:H.IFRAME.value,validator:H.IFRAME.validator,supercedes:H.IFRAME.supercedes});},moveTo:function(K,L){this.cfg.setProperty("xy",[K,L]);},hideMacGeckoScrollbars:function(){D.removeClass(this.element,"show-scrollbars");D.addClass(this.element,"hide-scrollbars");},showMacGeckoScrollbars:function(){D.removeClass(this.element,"hide-scrollbars");D.addClass(this.element,"show-scrollbars");},configVisible:function(N,K,T){var M=K[0],O=D.getStyle(this.element,"visibility"),U=this.cfg.getProperty("effect"),R=[],Q=(this.platform=="mac"&&YAHOO.env.ua.gecko),b=C.alreadySubscribed,S,L,a,Y,X,W,Z,V,P;if(O=="inherit"){a=this.element.parentNode;while(a.nodeType!=9&&a.nodeType!=11){O=D.getStyle(a,"visibility");if(O!="inherit"){break;}a=a.parentNode;}if(O=="inherit"){O="visible";}}if(U){if(U instanceof Array){V=U.length;for(Y=0;Y<V;Y++){S=U[Y];R[R.length]=S.effect(this,S.duration);}}else{R[R.length]=U.effect(this,U.duration);}}if(M){if(Q){this.showMacGeckoScrollbars();}if(U){if(M){if(O!="visible"||O===""){this.beforeShowEvent.fire();P=R.length;for(X=0;X<P;X++){L=R[X];if(X===0&&!b(L.animateInCompleteEvent,this.showEvent.fire,this.showEvent)){L.animateInCompleteEvent.subscribe(this.showEvent.fire,this.showEvent,true);}L.animateIn();}}}}else{if(O!="visible"||O===""){this.beforeShowEvent.fire();D.setStyle(this.element,"visibility","visible");this.cfg.refireEvent("iframe");this.showEvent.fire();}}}else{if(Q){this.hideMacGeckoScrollbars();}if(U){if(O=="visible"){this.beforeHideEvent.fire();P=R.length;for(W=0;W<P;W++){Z=R[W];if(W===0&&!b(Z.animateOutCompleteEvent,this.hideEvent.fire,this.hideEvent)){Z.animateOutCompleteEvent.subscribe(this.hideEvent.fire,this.hideEvent,true);}Z.animateOut();}}else{if(O===""){D.setStyle(this.element,"visibility","hidden");}}}else{if(O=="visible"||O===""){this.beforeHideEvent.fire();D.setStyle(this.element,"visibility","hidden");this.hideEvent.fire();}}}},doCenterOnDOMEvent:function(){if(this.cfg.getProperty("visible")){this.center();}},configFixedCenter:function(O,M,P){var Q=M[0],L=C.alreadySubscribed,N=B.windowResizeEvent,K=B.windowScrollEvent;if(Q){this.center();if(!L(this.beforeShowEvent,this.center,this)){this.beforeShowEvent.subscribe(this.center);}if(!L(N,this.doCenterOnDOMEvent,this)){N.subscribe(this.doCenterOnDOMEvent,this,true);}if(!L(K,this.doCenterOnDOMEvent,this)){K.subscribe(this.doCenterOnDOMEvent,this,true);}}else{this.beforeShowEvent.unsubscribe(this.center);N.unsubscribe(this.doCenterOnDOMEvent,this);K.unsubscribe(this.doCenterOnDOMEvent,this);}},configHeight:function(N,L,O){var K=L[0],M=this.element;D.setStyle(M,"height",K);this.cfg.refireEvent("iframe");},configWidth:function(N,K,O){var M=K[0],L=this.element;D.setStyle(L,"width",M);this.cfg.refireEvent("iframe");},configzIndex:function(M,K,N){var O=K[0],L=this.element;if(!O){O=D.getStyle(L,"zIndex");if(!O||isNaN(O)){O=0;}}if(this.iframe||this.cfg.getProperty("iframe")===true){if(O<=0){O=1;}}D.setStyle(L,"zIndex",O);this.cfg.setProperty("zIndex",O,true);if(this.iframe){this.stackIframe();}},configXY:function(M,L,N){var P=L[0],K=P[0],O=P[1];this.cfg.setProperty("x",K);this.cfg.setProperty("y",O);this.beforeMoveEvent.fire([K,O]);K=this.cfg.getProperty("x");O=this.cfg.getProperty("y");this.cfg.refireEvent("iframe");this.moveEvent.fire([K,O]);},configX:function(M,L,N){var K=L[0],O=this.cfg.getProperty("y");this.cfg.setProperty("x",K,true);this.cfg.setProperty("y",O,true);this.beforeMoveEvent.fire([K,O]);K=this.cfg.getProperty("x");O=this.cfg.getProperty("y");D.setX(this.element,K,true);this.cfg.setProperty("xy",[K,O],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([K,O]);},configY:function(M,L,N){var K=this.cfg.getProperty("x"),O=L[0];this.cfg.setProperty("x",K,true);this.cfg.setProperty("y",O,true);this.beforeMoveEvent.fire([K,O]);K=this.cfg.getProperty("x");O=this.cfg.getProperty("y");D.setY(this.element,O,true);this.cfg.setProperty("xy",[K,O],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([K,O]);},showIframe:function(){var L=this.iframe,K;if(L){K=this.element.parentNode;if(K!=L.parentNode){this._addToParent(K,L);}L.style.display="block";}},hideIframe:function(){if(this.iframe){this.iframe.style.display="none";}},syncIframe:function(){var K=this.iframe,M=this.element,O=B.IFRAME_OFFSET,L=(O*2),N;if(K){K.style.width=(M.offsetWidth+L+"px");K.style.height=(M.offsetHeight+L+"px");N=this.cfg.getProperty("xy");if(!F.isArray(N)||(isNaN(N[0])||isNaN(N[1]))){this.syncPosition();N=this.cfg.getProperty("xy");}D.setXY(K,[(N[0]-O),(N[1]-O)]);}},stackIframe:function(){if(this.iframe){var K=D.getStyle(this.element,"zIndex");if(!YAHOO.lang.isUndefined(K)&&!isNaN(K)){D.setStyle(this.iframe,"zIndex",(K-1));}}},configIframe:function(N,M,O){var K=M[0];function P(){var R=this.iframe,S=this.element,T;if(!R){if(!G){G=document.createElement("iframe");if(this.isSecure){G.src=B.IFRAME_SRC;}if(YAHOO.env.ua.ie){G.style.filter="alpha(opacity=0)";G.frameBorder=0;}else{G.style.opacity="0";}G.style.position="absolute";G.style.border="none";G.style.margin="0";G.style.padding="0";G.style.display="none";}R=G.cloneNode(false);T=S.parentNode;var Q=T||document.body;this._addToParent(Q,R);this.iframe=R;}this.showIframe();this.syncIframe();this.stackIframe();if(!this._hasIframeEventListeners){this.showEvent.subscribe(this.showIframe);this.hideEvent.subscribe(this.hideIframe);this.changeContentEvent.subscribe(this.syncIframe);this._hasIframeEventListeners=true;}}function L(){P.call(this);this.beforeShowEvent.unsubscribe(L);this._iframeDeferred=false;}if(K){if(this.cfg.getProperty("visible")){P.call(this);}else{if(!this._iframeDeferred){this.beforeShowEvent.subscribe(L);this._iframeDeferred=true;}}}else{this.hideIframe();if(this._hasIframeEventListeners){this.showEvent.unsubscribe(this.showIframe);this.hideEvent.unsubscribe(this.hideIframe);this.changeContentEvent.unsubscribe(this.syncIframe);this._hasIframeEventListeners=false;}}},_primeXYFromDOM:function(){if(YAHOO.lang.isUndefined(this.cfg.getProperty("xy"))){this.syncPosition();this.cfg.refireEvent("xy");this.beforeShowEvent.unsubscribe(this._primeXYFromDOM);}},configConstrainToViewport:function(L,K,M){var N=K[0];if(N){if(!C.alreadySubscribed(this.beforeMoveEvent,this.enforceConstraints,this)){this.beforeMoveEvent.subscribe(this.enforceConstraints,this,true);}if(!C.alreadySubscribed(this.beforeShowEvent,this._primeXYFromDOM)){this.beforeShowEvent.subscribe(this._primeXYFromDOM);}}else{this.beforeShowEvent.unsubscribe(this._primeXYFromDOM);this.beforeMoveEvent.unsubscribe(this.enforceConstraints,this);}},configContext:function(M,L,O){var Q=L[0],N,P,K;if(Q){N=Q[0];P=Q[1];K=Q[2];if(N){if(typeof N=="string"){this.cfg.setProperty("context",[document.getElementById(N),P,K],true);}if(P&&K){this.align(P,K);}}}},align:function(L,K){var Q=this.cfg.getProperty("context"),P=this,O,N,R;function M(S,T){switch(L){case B.TOP_LEFT:P.moveTo(T,S);break;case B.TOP_RIGHT:P.moveTo((T-N.offsetWidth),S);break;case B.BOTTOM_LEFT:P.moveTo(T,(S-N.offsetHeight));break;case B.BOTTOM_RIGHT:P.moveTo((T-N.offsetWidth),(S-N.offsetHeight));break;}}if(Q){O=Q[0];N=this.element;P=this;if(!L){L=Q[1];}if(!K){K=Q[2];}if(N&&O){R=D.getRegion(O);switch(K){case B.TOP_LEFT:M(R.top,R.left);break;case B.TOP_RIGHT:M(R.top,R.right);break;case B.BOTTOM_LEFT:M(R.bottom,R.left);break;case B.BOTTOM_RIGHT:M(R.bottom,R.right);break;}}}},enforceConstraints:function(L,K,M){var O=K[0];var N=this.getConstrainedXY(O[0],O[1]);this.cfg.setProperty("x",N[0],true);this.cfg.setProperty("y",N[1],true);this.cfg.setProperty("xy",N,true);},getConstrainedXY:function(V,T){var N=B.VIEWPORT_OFFSET,U=D.getViewportWidth(),Q=D.getViewportHeight(),M=this.element.offsetHeight,S=this.element.offsetWidth,Y=D.getDocumentScrollLeft(),W=D.getDocumentScrollTop();var P=V;var L=T;if(S+N<U){var R=Y+N;var X=Y+U-S-N;if(V<R){P=R;}else{if(V>X){P=X;}}}else{P=N+Y;}if(M+N<Q){var O=W+N;var K=W+Q-M-N;if(T<O){L=O;}else{if(T>K){L=K;}}}else{L=N+W;}return[P,L];},center:function(){var N=B.VIEWPORT_OFFSET,O=this.element.offsetWidth,M=this.element.offsetHeight,L=D.getViewportWidth(),P=D.getViewportHeight(),K,Q;if(O<L){K=(L/2)-(O/2)+D.getDocumentScrollLeft();}else{K=N+D.getDocumentScrollLeft();}if(M<P){Q=(P/2)-(M/2)+D.getDocumentScrollTop();}else{Q=N+D.getDocumentScrollTop();}this.cfg.setProperty("xy",[parseInt(K,10),parseInt(Q,10)]);this.cfg.refireEvent("iframe");},syncPosition:function(){var K=D.getXY(this.element);this.cfg.setProperty("x",K[0],true);this.cfg.setProperty("y",K[1],true);this.cfg.setProperty("xy",K,true);},onDomResize:function(M,L){var K=this;B.superclass.onDomResize.call(this,M,L);setTimeout(function(){K.syncPosition();K.cfg.refireEvent("iframe");K.cfg.refireEvent("context");},0);},bringToTop:function(){var O=[],N=this.element;function R(V,U){var X=D.getStyle(V,"zIndex"),W=D.getStyle(U,"zIndex"),T=(!X||isNaN(X))?0:parseInt(X,10),S=(!W||isNaN(W))?0:parseInt(W,10);if(T>S){return-1;}else{if(T<S){return 1;}else{return 0;}}}function M(U){var S=D.hasClass(U,B.CSS_OVERLAY),T=YAHOO.widget.Panel;if(S&&!D.isAncestor(N,S)){if(T&&D.hasClass(U,T.CSS_PANEL)){O[O.length]=U.parentNode;}else{O[O.length]=U;}}}D.getElementsBy(M,"DIV",document.body);O.sort(R);var K=O[0],Q;if(K){Q=D.getStyle(K,"zIndex");if(!isNaN(Q)){var P=false;if(K!=N){P=true;}else{if(O.length>1){var L=D.getStyle(O[1],"zIndex");if(!isNaN(L)&&(Q==L)){P=true;}}}if(P){this.cfg.setProperty("zindex",(parseInt(Q,10)+2));}}}},destroy:function(){if(this.iframe){this.iframe.parentNode.removeChild(this.iframe);}this.iframe=null;B.windowResizeEvent.unsubscribe(this.doCenterOnDOMEvent,this);B.windowScrollEvent.unsubscribe(this.doCenterOnDOMEvent,this);B.superclass.destroy.call(this);},toString:function(){return"Overlay "+this.id;}});}());(function(){YAHOO.widget.OverlayManager=function(G){this.init(G);};var D=YAHOO.widget.Overlay,C=YAHOO.util.Event,E=YAHOO.util.Dom,B=YAHOO.util.Config,F=YAHOO.util.CustomEvent,A=YAHOO.widget.OverlayManager;A.CSS_FOCUSED="focused";A.prototype={constructor:A,overlays:null,initDefaultConfig:function(){this.cfg.addProperty("overlays",{suppressEvent:true});this.cfg.addProperty("focusevent",{value:"mousedown"});},init:function(I){this.cfg=new B(this);this.initDefaultConfig();if(I){this.cfg.applyConfig(I,true);}this.cfg.fireQueue();var H=null;this.getActive=function(){return H;};this.focus=function(J){var K=this.find(J);if(K){if(H!=K){if(H){H.blur();}this.bringToTop(K);H=K;E.addClass(H.element,A.CSS_FOCUSED);K.focusEvent.fire();}}};this.remove=function(K){var M=this.find(K),J;if(M){if(H==M){H=null;}var L=(M.element===null&&M.cfg===null)?true:false;if(!L){J=E.getStyle(M.element,"zIndex");M.cfg.setProperty("zIndex",-1000,true);}this.overlays.sort(this.compareZIndexDesc);this.overlays=this.overlays.slice(0,(this.overlays.length-1));M.hideEvent.unsubscribe(M.blur);M.destroyEvent.unsubscribe(this._onOverlayDestroy,M);if(!L){C.removeListener(M.element,this.cfg.getProperty("focusevent"),this._onOverlayElementFocus);M.cfg.setProperty("zIndex",J,true);M.cfg.setProperty("manager",null);}M.focusEvent.unsubscribeAll();M.blurEvent.unsubscribeAll();M.focusEvent=null;M.blurEvent=null;M.focus=null;M.blur=null;}};this.blurAll=function(){var K=this.overlays.length,J;if(K>0){J=K-1;do{this.overlays[J].blur();}while(J--);}};this._onOverlayBlur=function(K,J){H=null;};var G=this.cfg.getProperty("overlays");if(!this.overlays){this.overlays=[];}if(G){this.register(G);this.overlays.sort(this.compareZIndexDesc);}},_onOverlayElementFocus:function(I){var G=C.getTarget(I),H=this.close;if(H&&(G==H||E.isAncestor(H,G))){this.blur();}else{this.focus();}},_onOverlayDestroy:function(H,G,I){this.remove(I);},register:function(G){var K=this,L,I,H,J;if(G instanceof D){G.cfg.addProperty("manager",{value:this});G.focusEvent=G.createEvent("focus");G.focusEvent.signature=F.LIST;G.blurEvent=G.createEvent("blur");G.blurEvent.signature=F.LIST;G.focus=function(){K.focus(this);};G.blur=function(){if(K.getActive()==this){E.removeClass(this.element,A.CSS_FOCUSED);this.blurEvent.fire();}};G.blurEvent.subscribe(K._onOverlayBlur);G.hideEvent.subscribe(G.blur);G.destroyEvent.subscribe(this._onOverlayDestroy,G,this);C.on(G.element,this.cfg.getProperty("focusevent"),this._onOverlayElementFocus,null,G);L=E.getStyle(G.element,"zIndex");if(!isNaN(L)){G.cfg.setProperty("zIndex",parseInt(L,10));}else{G.cfg.setProperty("zIndex",0);}this.overlays.push(G);this.bringToTop(G);return true;}else{if(G instanceof Array){I=0;J=G.length;for(H=0;H<J;H++){if(this.register(G[H])){I++;}}if(I>0){return true;}}else{return false;}}},bringToTop:function(M){var I=this.find(M),L,G,J;if(I){J=this.overlays;J.sort(this.compareZIndexDesc);G=J[0];if(G){L=E.getStyle(G.element,"zIndex");if(!isNaN(L)){var K=false;if(G!==I){K=true;}else{if(J.length>1){var H=E.getStyle(J[1].element,"zIndex");if(!isNaN(H)&&(L==H)){K=true;}}}if(K){I.cfg.setProperty("zindex",(parseInt(L,10)+2));}}J.sort(this.compareZIndexDesc);}}},find:function(G){var I=this.overlays,J=I.length,H;if(J>0){H=J-1;if(G instanceof D){do{if(I[H]==G){return I[H];}}while(H--);}else{if(typeof G=="string"){do{if(I[H].id==G){return I[H];}}while(H--);}}return null;}},compareZIndexDesc:function(J,I){var H=(J.cfg)?J.cfg.getProperty("zIndex"):null,G=(I.cfg)?I.cfg.getProperty("zIndex"):null;if(H===null&&G===null){return 0;}else{if(H===null){return 1;}else{if(G===null){return-1;}else{if(H>G){return-1;}else{if(H<G){return 1;}else{return 0;}}}}}},showAll:function(){var H=this.overlays,I=H.length,G;if(I>0){G=I-1;do{H[G].show();}while(G--);}},hideAll:function(){var H=this.overlays,I=H.length,G;if(I>0){G=I-1;do{H[G].hide();}while(G--);}},toString:function(){return"OverlayManager";}};}());(function(){YAHOO.widget.ContainerEffect=function(F,I,H,E,G){if(!G){G=YAHOO.util.Anim;}this.overlay=F;this.attrIn=I;this.attrOut=H;this.targetElement=E||F.element;this.animClass=G;};var B=YAHOO.util.Dom,D=YAHOO.util.CustomEvent,C=YAHOO.util.Easing,A=YAHOO.widget.ContainerEffect;A.FADE=function(E,G){var I={attributes:{opacity:{from:0,to:1}},duration:G,method:C.easeIn};var F={attributes:{opacity:{to:0}},duration:G,method:C.easeOut};var H=new A(E,I,F,E.element);H.handleUnderlayStart=function(){var K=this.overlay.underlay;if(K&&YAHOO.env.ua.ie){var J=(K.filters&&K.filters.length>0);if(J){B.addClass(E.element,"yui-effect-fade");}}};H.handleUnderlayComplete=function(){var J=this.overlay.underlay;if(J&&YAHOO.env.ua.ie){B.removeClass(E.element,"yui-effect-fade");}};H.handleStartAnimateIn=function(K,J,L){B.addClass(L.overlay.element,"hide-select");if(!L.overlay.underlay){L.overlay.cfg.refireEvent("underlay");}L.handleUnderlayStart();B.setStyle(L.overlay.element,"visibility","visible");B.setStyle(L.overlay.element,"opacity",0);};H.handleCompleteAnimateIn=function(K,J,L){B.removeClass(L.overlay.element,"hide-select");if(L.overlay.element.style.filter){L.overlay.element.style.filter=null;}L.handleUnderlayComplete();L.overlay.cfg.refireEvent("iframe");L.animateInCompleteEvent.fire();};H.handleStartAnimateOut=function(K,J,L){B.addClass(L.overlay.element,"hide-select");L.handleUnderlayStart();};H.handleCompleteAnimateOut=function(K,J,L){B.removeClass(L.overlay.element,"hide-select");if(L.overlay.element.style.filter){L.overlay.element.style.filter=null;}B.setStyle(L.overlay.element,"visibility","hidden");B.setStyle(L.overlay.element,"opacity",1);L.handleUnderlayComplete();L.overlay.cfg.refireEvent("iframe");L.animateOutCompleteEvent.fire();};H.init();return H;};A.SLIDE=function(G,I){var F=G.cfg.getProperty("x")||B.getX(G.element),K=G.cfg.getProperty("y")||B.getY(G.element),J=B.getClientWidth(),H=G.element.offsetWidth,E=new A(G,{attributes:{points:{to:[F,K]}},duration:I,method:C.easeIn},{attributes:{points:{to:[(J+25),K]}},duration:I,method:C.easeOut},G.element,YAHOO.util.Motion);E.handleStartAnimateIn=function(M,L,N){N.overlay.element.style.left=((-25)-H)+"px";N.overlay.element.style.top=K+"px";};E.handleTweenAnimateIn=function(O,N,P){var Q=B.getXY(P.overlay.element),M=Q[0],L=Q[1];if(B.getStyle(P.overlay.element,"visibility")=="hidden"&&M<F){B.setStyle(P.overlay.element,"visibility","visible");}P.overlay.cfg.setProperty("xy",[M,L],true);P.overlay.cfg.refireEvent("iframe");};E.handleCompleteAnimateIn=function(M,L,N){N.overlay.cfg.setProperty("xy",[F,K],true);N.startX=F;N.startY=K;N.overlay.cfg.refireEvent("iframe");N.animateInCompleteEvent.fire();};E.handleStartAnimateOut=function(M,L,P){var N=B.getViewportWidth(),Q=B.getXY(P.overlay.element),O=Q[1];P.animOut.attributes.points.to=[(N+25),O];};E.handleTweenAnimateOut=function(N,M,O){var Q=B.getXY(O.overlay.element),L=Q[0],P=Q[1];O.overlay.cfg.setProperty("xy",[L,P],true);O.overlay.cfg.refireEvent("iframe");};E.handleCompleteAnimateOut=function(M,L,N){B.setStyle(N.overlay.element,"visibility","hidden");N.overlay.cfg.setProperty("xy",[F,K]);N.animateOutCompleteEvent.fire();};E.init();return E;};A.prototype={init:function(){this.beforeAnimateInEvent=this.createEvent("beforeAnimateIn");this.beforeAnimateInEvent.signature=D.LIST;this.beforeAnimateOutEvent=this.createEvent("beforeAnimateOut");this.beforeAnimateOutEvent.signature=D.LIST;this.animateInCompleteEvent=this.createEvent("animateInComplete");this.animateInCompleteEvent.signature=D.LIST;this.animateOutCompleteEvent=this.createEvent("animateOutComplete");this.animateOutCompleteEvent.signature=D.LIST;this.animIn=new this.animClass(this.targetElement,this.attrIn.attributes,this.attrIn.duration,this.attrIn.method);this.animIn.onStart.subscribe(this.handleStartAnimateIn,this);this.animIn.onTween.subscribe(this.handleTweenAnimateIn,this);this.animIn.onComplete.subscribe(this.handleCompleteAnimateIn,this);this.animOut=new this.animClass(this.targetElement,this.attrOut.attributes,this.attrOut.duration,this.attrOut.method);this.animOut.onStart.subscribe(this.handleStartAnimateOut,this);this.animOut.onTween.subscribe(this.handleTweenAnimateOut,this);this.animOut.onComplete.subscribe(this.handleCompleteAnimateOut,this);},animateIn:function(){this.beforeAnimateInEvent.fire();this.animIn.animate();},animateOut:function(){this.beforeAnimateOutEvent.fire();this.animOut.animate();},handleStartAnimateIn:function(F,E,G){},handleTweenAnimateIn:function(F,E,G){},handleCompleteAnimateIn:function(F,E,G){},handleStartAnimateOut:function(F,E,G){},handleTweenAnimateOut:function(F,E,G){},handleCompleteAnimateOut:function(F,E,G){},toString:function(){var E="ContainerEffect";if(this.overlay){E+=" ["+this.overlay.toString()+"]";}return E;}};YAHOO.lang.augmentProto(A,YAHOO.util.EventProvider);})();YAHOO.register("containercore",YAHOO.widget.Module,{version:"2.5.2",build:"1076"});
//from: http://yui.yahooapis.com/2.5.2/build/calendar/calendar-min.js

(function(){YAHOO.util.Config=function(D){if(D){this.init(D);}};var B=YAHOO.lang,C=YAHOO.util.CustomEvent,A=YAHOO.util.Config;A.CONFIG_CHANGED_EVENT="configChanged";A.BOOLEAN_TYPE="boolean";A.prototype={owner:null,queueInProgress:false,config:null,initialConfig:null,eventQueue:null,configChangedEvent:null,init:function(D){this.owner=D;this.configChangedEvent=this.createEvent(A.CONFIG_CHANGED_EVENT);this.configChangedEvent.signature=C.LIST;this.queueInProgress=false;this.config={};this.initialConfig={};this.eventQueue=[];},checkBoolean:function(D){return(typeof D==A.BOOLEAN_TYPE);},checkNumber:function(D){return(!isNaN(D));},fireEvent:function(D,F){var E=this.config[D];if(E&&E.event){E.event.fire(F);}},addProperty:function(E,D){E=E.toLowerCase();this.config[E]=D;D.event=this.createEvent(E,{scope:this.owner});D.event.signature=C.LIST;D.key=E;if(D.handler){D.event.subscribe(D.handler,this.owner);}this.setProperty(E,D.value,true);if(!D.suppressEvent){this.queueProperty(E,D.value);}},getConfig:function(){var D={},F,E;for(F in this.config){E=this.config[F];if(E&&E.event){D[F]=E.value;}}return D;},getProperty:function(D){var E=this.config[D.toLowerCase()];if(E&&E.event){return E.value;}else{return undefined;}},resetProperty:function(D){D=D.toLowerCase();var E=this.config[D];if(E&&E.event){if(this.initialConfig[D]&&!B.isUndefined(this.initialConfig[D])){this.setProperty(D,this.initialConfig[D]);return true;}}else{return false;}},setProperty:function(E,G,D){var F;E=E.toLowerCase();if(this.queueInProgress&&!D){this.queueProperty(E,G);return true;}else{F=this.config[E];if(F&&F.event){if(F.validator&&!F.validator(G)){return false;}else{F.value=G;if(!D){this.fireEvent(E,G);this.configChangedEvent.fire([E,G]);}return true;}}else{return false;}}},queueProperty:function(S,P){S=S.toLowerCase();var R=this.config[S],K=false,J,G,H,I,O,Q,F,M,N,D,L,T,E;if(R&&R.event){if(!B.isUndefined(P)&&R.validator&&!R.validator(P)){return false;}else{if(!B.isUndefined(P)){R.value=P;}else{P=R.value;}K=false;J=this.eventQueue.length;for(L=0;L<J;L++){G=this.eventQueue[L];if(G){H=G[0];I=G[1];if(H==S){this.eventQueue[L]=null;this.eventQueue.push([S,(!B.isUndefined(P)?P:I)]);K=true;break;}}}if(!K&&!B.isUndefined(P)){this.eventQueue.push([S,P]);}}if(R.supercedes){O=R.supercedes.length;for(T=0;T<O;T++){Q=R.supercedes[T];F=this.eventQueue.length;for(E=0;E<F;E++){M=this.eventQueue[E];if(M){N=M[0];D=M[1];if(N==Q.toLowerCase()){this.eventQueue.push([N,D]);this.eventQueue[E]=null;break;}}}}}return true;}else{return false;}},refireEvent:function(D){D=D.toLowerCase();var E=this.config[D];if(E&&E.event&&!B.isUndefined(E.value)){if(this.queueInProgress){this.queueProperty(D);}else{this.fireEvent(D,E.value);}}},applyConfig:function(D,G){var F,E;if(G){E={};for(F in D){if(B.hasOwnProperty(D,F)){E[F.toLowerCase()]=D[F];}}this.initialConfig=E;}for(F in D){if(B.hasOwnProperty(D,F)){this.queueProperty(F,D[F]);}}},refresh:function(){var D;for(D in this.config){this.refireEvent(D);}},fireQueue:function(){var E,H,D,G,F;this.queueInProgress=true;for(E=0;E<this.eventQueue.length;E++){H=this.eventQueue[E];if(H){D=H[0];G=H[1];F=this.config[D];F.value=G;this.fireEvent(D,G);}}this.queueInProgress=false;this.eventQueue=[];},subscribeToConfigEvent:function(E,F,H,D){var G=this.config[E.toLowerCase()];if(G&&G.event){if(!A.alreadySubscribed(G.event,F,H)){G.event.subscribe(F,H,D);}return true;}else{return false;}},unsubscribeFromConfigEvent:function(D,E,G){var F=this.config[D.toLowerCase()];if(F&&F.event){return F.event.unsubscribe(E,G);}else{return false;}},toString:function(){var D="Config";if(this.owner){D+=" ["+this.owner.toString()+"]";}return D;},outputEventQueue:function(){var D="",G,E,F=this.eventQueue.length;for(E=0;E<F;E++){G=this.eventQueue[E];if(G){D+=G[0]+"="+G[1]+", ";}}return D;},destroy:function(){var E=this.config,D,F;for(D in E){if(B.hasOwnProperty(E,D)){F=E[D];F.event.unsubscribeAll();F.event=null;}}this.configChangedEvent.unsubscribeAll();this.configChangedEvent=null;this.owner=null;this.config=null;this.initialConfig=null;this.eventQueue=null;}};A.alreadySubscribed=function(E,H,I){var F=E.subscribers.length,D,G;if(F>0){G=F-1;do{D=E.subscribers[G];if(D&&D.obj==I&&D.fn==H){return true;}}while(G--);}return false;};YAHOO.lang.augmentProto(A,YAHOO.util.EventProvider);}());YAHOO.widget.DateMath={DAY:"D",WEEK:"W",YEAR:"Y",MONTH:"M",ONE_DAY_MS:1000*60*60*24,WEEK_ONE_JAN_DATE:1,add:function(A,D,C){var F=new Date(A.getTime());switch(D){case this.MONTH:var E=A.getMonth()+C;var B=0;if(E<0){while(E<0){E+=12;B-=1;}}else{if(E>11){while(E>11){E-=12;B+=1;}}}F.setMonth(E);F.setFullYear(A.getFullYear()+B);break;case this.DAY:this._addDays(F,C);break;case this.YEAR:F.setFullYear(A.getFullYear()+C);break;case this.WEEK:this._addDays(F,(C*7));break;}return F;},_addDays:function(D,C){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420){if(C<0){for(var B=-128;C<B;C-=B){D.setDate(D.getDate()+B);}}else{for(var A=96;C>A;C-=A){D.setDate(D.getDate()+A);}}}D.setDate(D.getDate()+C);},subtract:function(A,C,B){return this.add(A,C,(B*-1));},before:function(C,B){var A=B.getTime();if(C.getTime()<A){return true;}else{return false;}},after:function(C,B){var A=B.getTime();if(C.getTime()>A){return true;}else{return false;}},between:function(B,A,C){if(this.after(B,A)&&this.before(B,C)){return true;}else{return false;}},getJan1:function(A){return this.getDate(A,0,1);},getDayOffset:function(B,D){var C=this.getJan1(D);var A=Math.ceil((B.getTime()-C.getTime())/this.ONE_DAY_MS);return A;},getWeekNumber:function(E,B,H){B=B||0;H=H||this.WEEK_ONE_JAN_DATE;var I=this.clearTime(E),M,N;if(I.getDay()===B){M=I;}else{M=this.getFirstDayOfWeek(I,B);}var J=M.getFullYear(),C=M.getTime();N=new Date(M.getTime()+6*this.ONE_DAY_MS);var G;if(J!==N.getFullYear()&&N.getDate()>=H){G=1;}else{var F=this.clearTime(this.getDate(J,0,H)),A=this.getFirstDayOfWeek(F,B);var K=Math.round((I.getTime()-A.getTime())/this.ONE_DAY_MS);var L=K%7;var D=(K-L)/7;G=D+1;}return G;},getFirstDayOfWeek:function(D,A){A=A||0;var B=D.getDay(),C=(B-A+7)%7;return this.subtract(D,this.DAY,C);},isYearOverlapWeek:function(A){var C=false;var B=this.add(A,this.DAY,6);if(B.getFullYear()!=A.getFullYear()){C=true;}return C;},isMonthOverlapWeek:function(A){var C=false;var B=this.add(A,this.DAY,6);if(B.getMonth()!=A.getMonth()){C=true;}return C;},findMonthStart:function(A){var B=this.getDate(A.getFullYear(),A.getMonth(),1);return B;},findMonthEnd:function(B){var D=this.findMonthStart(B);var C=this.add(D,this.MONTH,1);var A=this.subtract(C,this.DAY,1);return A;},clearTime:function(A){A.setHours(12,0,0,0);return A;},getDate:function(D,A,C){var B=null;if(YAHOO.lang.isUndefined(C)){C=1;}if(D>=100){B=new Date(D,A,C);}else{B=new Date();B.setFullYear(D);B.setMonth(A);B.setDate(C);B.setHours(0,0,0,0);}return B;}};YAHOO.widget.Calendar=function(C,A,B){this.init.apply(this,arguments);};YAHOO.widget.Calendar.IMG_ROOT=null;YAHOO.widget.Calendar.DATE="D";YAHOO.widget.Calendar.MONTH_DAY="MD";YAHOO.widget.Calendar.WEEKDAY="WD";YAHOO.widget.Calendar.RANGE="R";YAHOO.widget.Calendar.MONTH="M";YAHOO.widget.Calendar.DISPLAY_DAYS=42;YAHOO.widget.Calendar.STOP_RENDER="S";YAHOO.widget.Calendar.SHORT="short";YAHOO.widget.Calendar.LONG="long";YAHOO.widget.Calendar.MEDIUM="medium";YAHOO.widget.Calendar.ONE_CHAR="1char";YAHOO.widget.Calendar._DEFAULT_CONFIG={PAGEDATE:{key:"pagedate",value:null},SELECTED:{key:"selected",value:null},TITLE:{key:"title",value:""},CLOSE:{key:"close",value:false},IFRAME:{key:"iframe",value:(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<=6)?true:false},MINDATE:{key:"mindate",value:null},MAXDATE:{key:"maxdate",value:null},MULTI_SELECT:{key:"multi_select",value:false},START_WEEKDAY:{key:"start_weekday",value:0},SHOW_WEEKDAYS:{key:"show_weekdays",value:true},SHOW_WEEK_HEADER:{key:"show_week_header",value:false},SHOW_WEEK_FOOTER:{key:"show_week_footer",value:false},HIDE_BLANK_WEEKS:{key:"hide_blank_weeks",value:false},NAV_ARROW_LEFT:{key:"nav_arrow_left",value:null},NAV_ARROW_RIGHT:{key:"nav_arrow_right",value:null},MONTHS_SHORT:{key:"months_short",value:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},MONTHS_LONG:{key:"months_long",value:["January","February","March","April","May","June","July","August","September","October","November","December"]},WEEKDAYS_1CHAR:{key:"weekdays_1char",value:["S","M","T","W","T","F","S"]},WEEKDAYS_SHORT:{key:"weekdays_short",value:["Su","Mo","Tu","We","Th","Fr","Sa"]},WEEKDAYS_MEDIUM:{key:"weekdays_medium",value:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},WEEKDAYS_LONG:{key:"weekdays_long",value:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},LOCALE_MONTHS:{key:"locale_months",value:"long"},LOCALE_WEEKDAYS:{key:"locale_weekdays",value:"short"},DATE_DELIMITER:{key:"date_delimiter",value:","},DATE_FIELD_DELIMITER:{key:"date_field_delimiter",value:"/"},DATE_RANGE_DELIMITER:{key:"date_range_delimiter",value:"-"},MY_MONTH_POSITION:{key:"my_month_position",value:1},MY_YEAR_POSITION:{key:"my_year_position",value:2},MD_MONTH_POSITION:{key:"md_month_position",value:1},MD_DAY_POSITION:{key:"md_day_position",value:2},MDY_MONTH_POSITION:{key:"mdy_month_position",value:1},MDY_DAY_POSITION:{key:"mdy_day_position",value:2},MDY_YEAR_POSITION:{key:"mdy_year_position",value:3},MY_LABEL_MONTH_POSITION:{key:"my_label_month_position",value:1},MY_LABEL_YEAR_POSITION:{key:"my_label_year_position",value:2},MY_LABEL_MONTH_SUFFIX:{key:"my_label_month_suffix",value:" "},MY_LABEL_YEAR_SUFFIX:{key:"my_label_year_suffix",value:""},NAV:{key:"navigator",value:null}};YAHOO.widget.Calendar._EVENT_TYPES={BEFORE_SELECT:"beforeSelect",SELECT:"select",BEFORE_DESELECT:"beforeDeselect",DESELECT:"deselect",CHANGE_PAGE:"changePage",BEFORE_RENDER:"beforeRender",RENDER:"render",RESET:"reset",CLEAR:"clear",BEFORE_HIDE:"beforeHide",HIDE:"hide",BEFORE_SHOW:"beforeShow",SHOW:"show",BEFORE_HIDE_NAV:"beforeHideNav",HIDE_NAV:"hideNav",BEFORE_SHOW_NAV:"beforeShowNav",SHOW_NAV:"showNav",BEFORE_RENDER_NAV:"beforeRenderNav",RENDER_NAV:"renderNav"};YAHOO.widget.Calendar._STYLES={CSS_ROW_HEADER:"calrowhead",CSS_ROW_FOOTER:"calrowfoot",CSS_CELL:"calcell",CSS_CELL_SELECTOR:"selector",CSS_CELL_SELECTED:"selected",CSS_CELL_SELECTABLE:"selectable",CSS_CELL_RESTRICTED:"restricted",CSS_CELL_TODAY:"today",CSS_CELL_OOM:"oom",CSS_CELL_OOB:"previous",CSS_HEADER:"calheader",CSS_HEADER_TEXT:"calhead",CSS_BODY:"calbody",CSS_WEEKDAY_CELL:"calweekdaycell",CSS_WEEKDAY_ROW:"calweekdayrow",CSS_FOOTER:"calfoot",CSS_CALENDAR:"yui-calendar",CSS_SINGLE:"single",CSS_CONTAINER:"yui-calcontainer",CSS_NAV_LEFT:"calnavleft",CSS_NAV_RIGHT:"calnavright",CSS_NAV:"calnav",CSS_CLOSE:"calclose",CSS_CELL_TOP:"calcelltop",CSS_CELL_LEFT:"calcellleft",CSS_CELL_RIGHT:"calcellright",CSS_CELL_BOTTOM:"calcellbottom",CSS_CELL_HOVER:"calcellhover",CSS_CELL_HIGHLIGHT1:"highlight1",CSS_CELL_HIGHLIGHT2:"highlight2",CSS_CELL_HIGHLIGHT3:"highlight3",CSS_CELL_HIGHLIGHT4:"highlight4"};YAHOO.widget.Calendar.prototype={Config:null,parent:null,index:-1,cells:null,cellDates:null,id:null,containerId:null,oDomContainer:null,today:null,renderStack:null,_renderStack:null,oNavigator:null,_selectedDates:null,domEventMap:null,_parseArgs:function(B){var A={id:null,container:null,config:null};if(B&&B.length&&B.length>0){switch(B.length){case 1:A.id=null;A.container=B[0];A.config=null;break;case 2:if(YAHOO.lang.isObject(B[1])&&!B[1].tagName&&!(B[1]instanceof String)){A.id=null;A.container=B[0];A.config=B[1];}else{A.id=B[0];A.container=B[1];A.config=null;}break;default:A.id=B[0];A.container=B[1];A.config=B[2];break;}}else{}return A;},init:function(D,B,C){var A=this._parseArgs(arguments);D=A.id;B=A.container;C=A.config;this.oDomContainer=YAHOO.util.Dom.get(B);if(!this.oDomContainer.id){this.oDomContainer.id=YAHOO.util.Dom.generateId();}if(!D){D=this.oDomContainer.id+"_t";}this.id=D;this.containerId=this.oDomContainer.id;this.initEvents();this.today=new Date();YAHOO.widget.DateMath.clearTime(this.today);this.cfg=new YAHOO.util.Config(this);this.Options={};this.Locale={};this.initStyles();YAHOO.util.Dom.addClass(this.oDomContainer,this.Style.CSS_CONTAINER);YAHOO.util.Dom.addClass(this.oDomContainer,this.Style.CSS_SINGLE);this.cellDates=[];this.cells=[];this.renderStack=[];this._renderStack=[];this.setupConfig();if(C){this.cfg.applyConfig(C,true);}this.cfg.fireQueue();},configIframe:function(C,B,D){var A=B[0];if(!this.parent){if(YAHOO.util.Dom.inDocument(this.oDomContainer)){if(A){var E=YAHOO.util.Dom.getStyle(this.oDomContainer,"position");if(E=="absolute"||E=="relative"){if(!YAHOO.util.Dom.inDocument(this.iframe)){this.iframe=document.createElement("iframe");this.iframe.src="javascript:false;";YAHOO.util.Dom.setStyle(this.iframe,"opacity","0");if(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<=6){YAHOO.util.Dom.addClass(this.iframe,"fixedsize");}this.oDomContainer.insertBefore(this.iframe,this.oDomContainer.firstChild);}}}else{if(this.iframe){if(this.iframe.parentNode){this.iframe.parentNode.removeChild(this.iframe);}this.iframe=null;}}}}},configTitle:function(B,A,C){var E=A[0];if(E){this.createTitleBar(E);}else{var D=this.cfg.getProperty(YAHOO.widget.Calendar._DEFAULT_CONFIG.CLOSE.key);if(!D){this.removeTitleBar();}else{this.createTitleBar("&#160;");}}},configClose:function(B,A,C){var E=A[0],D=this.cfg.getProperty(YAHOO.widget.Calendar._DEFAULT_CONFIG.TITLE.key);if(E){if(!D){this.createTitleBar("&#160;");}this.createCloseButton();}else{this.removeCloseButton();if(!D){this.removeTitleBar();}}},initEvents:function(){var A=YAHOO.widget.Calendar._EVENT_TYPES;this.beforeSelectEvent=new YAHOO.util.CustomEvent(A.BEFORE_SELECT);this.selectEvent=new YAHOO.util.CustomEvent(A.SELECT);this.beforeDeselectEvent=new YAHOO.util.CustomEvent(A.BEFORE_DESELECT);this.deselectEvent=new YAHOO.util.CustomEvent(A.DESELECT);this.changePageEvent=new YAHOO.util.CustomEvent(A.CHANGE_PAGE);this.beforeRenderEvent=new YAHOO.util.CustomEvent(A.BEFORE_RENDER);this.renderEvent=new YAHOO.util.CustomEvent(A.RENDER);this.resetEvent=new YAHOO.util.CustomEvent(A.RESET);this.clearEvent=new YAHOO.util.CustomEvent(A.CLEAR);this.beforeShowEvent=new YAHOO.util.CustomEvent(A.BEFORE_SHOW);this.showEvent=new YAHOO.util.CustomEvent(A.SHOW);this.beforeHideEvent=new YAHOO.util.CustomEvent(A.BEFORE_HIDE);this.hideEvent=new YAHOO.util.CustomEvent(A.HIDE);this.beforeShowNavEvent=new YAHOO.util.CustomEvent(A.BEFORE_SHOW_NAV);this.showNavEvent=new YAHOO.util.CustomEvent(A.SHOW_NAV);this.beforeHideNavEvent=new YAHOO.util.CustomEvent(A.BEFORE_HIDE_NAV);this.hideNavEvent=new YAHOO.util.CustomEvent(A.HIDE_NAV);this.beforeRenderNavEvent=new YAHOO.util.CustomEvent(A.BEFORE_RENDER_NAV);this.renderNavEvent=new YAHOO.util.CustomEvent(A.RENDER_NAV);this.beforeSelectEvent.subscribe(this.onBeforeSelect,this,true);this.selectEvent.subscribe(this.onSelect,this,true);this.beforeDeselectEvent.subscribe(this.onBeforeDeselect,this,true);this.deselectEvent.subscribe(this.onDeselect,this,true);this.changePageEvent.subscribe(this.onChangePage,this,true);this.renderEvent.subscribe(this.onRender,this,true);this.resetEvent.subscribe(this.onReset,this,true);this.clearEvent.subscribe(this.onClear,this,true);},doSelectCell:function(G,A){var L,F,I,C;var H=YAHOO.util.Event.getTarget(G);var B=H.tagName.toLowerCase();var E=false;while(B!="td"&&!YAHOO.util.Dom.hasClass(H,A.Style.CSS_CELL_SELECTABLE)){if(!E&&B=="a"&&YAHOO.util.Dom.hasClass(H,A.Style.CSS_CELL_SELECTOR)){E=true;}H=H.parentNode;B=H.tagName.toLowerCase();if(B=="html"){return;}}if(E){YAHOO.util.Event.preventDefault(G);}L=H;if(YAHOO.util.Dom.hasClass(L,A.Style.CSS_CELL_SELECTABLE)){F=L.id.split("cell")[1];I=A.cellDates[F];C=YAHOO.widget.DateMath.getDate(I[0],I[1]-1,I[2]);var K;if(A.Options.MULTI_SELECT){K=L.getElementsByTagName("a")[0];if(K){K.blur();}var D=A.cellDates[F];var J=A._indexOfSelectedFieldArray(D);if(J>-1){A.deselectCell(F);}else{A.selectCell(F);}}else{K=L.getElementsByTagName("a")[0];if(K){K.blur();}A.selectCell(F);}}},doCellMouseOver:function(C,B){var A;if(C){A=YAHOO.util.Event.getTarget(C);}else{A=this;}while(A.tagName&&A.tagName.toLowerCase()!="td"){A=A.parentNode;if(!A.tagName||A.tagName.toLowerCase()=="html"){return;}}if(YAHOO.util.Dom.hasClass(A,B.Style.CSS_CELL_SELECTABLE)){YAHOO.util.Dom.addClass(A,B.Style.CSS_CELL_HOVER);}},doCellMouseOut:function(C,B){var A;if(C){A=YAHOO.util.Event.getTarget(C);}else{A=this;}while(A.tagName&&A.tagName.toLowerCase()!="td"){A=A.parentNode;if(!A.tagName||A.tagName.toLowerCase()=="html"){return;}}if(YAHOO.util.Dom.hasClass(A,B.Style.CSS_CELL_SELECTABLE)){YAHOO.util.Dom.removeClass(A,B.Style.CSS_CELL_HOVER);}},setupConfig:function(){var A=YAHOO.widget.Calendar._DEFAULT_CONFIG;this.cfg.addProperty(A.PAGEDATE.key,{value:new Date(),handler:this.configPageDate});this.cfg.addProperty(A.SELECTED.key,{value:[],handler:this.configSelected});this.cfg.addProperty(A.TITLE.key,{value:A.TITLE.value,handler:this.configTitle});this.cfg.addProperty(A.CLOSE.key,{value:A.CLOSE.value,handler:this.configClose});this.cfg.addProperty(A.IFRAME.key,{value:A.IFRAME.value,handler:this.configIframe,validator:this.cfg.checkBoolean});this.cfg.addProperty(A.MINDATE.key,{value:A.MINDATE.value,handler:this.configMinDate});this.cfg.addProperty(A.MAXDATE.key,{value:A.MAXDATE.value,handler:this.configMaxDate});this.cfg.addProperty(A.MULTI_SELECT.key,{value:A.MULTI_SELECT.value,handler:this.configOptions,validator:this.cfg.checkBoolean});this.cfg.addProperty(A.START_WEEKDAY.key,{value:A.START_WEEKDAY.value,handler:this.configOptions,validator:this.cfg.checkNumber});this.cfg.addProperty(A.SHOW_WEEKDAYS.key,{value:A.SHOW_WEEKDAYS.value,handler:this.configOptions,validator:this.cfg.checkBoolean});this.cfg.addProperty(A.SHOW_WEEK_HEADER.key,{value:A.SHOW_WEEK_HEADER.value,handler:this.configOptions,validator:this.cfg.checkBoolean});this.cfg.addProperty(A.SHOW_WEEK_FOOTER.key,{value:A.SHOW_WEEK_FOOTER.value,handler:this.configOptions,validator:this.cfg.checkBoolean});this.cfg.addProperty(A.HIDE_BLANK_WEEKS.key,{value:A.HIDE_BLANK_WEEKS.value,handler:this.configOptions,validator:this.cfg.checkBoolean});this.cfg.addProperty(A.NAV_ARROW_LEFT.key,{value:A.NAV_ARROW_LEFT.value,handler:this.configOptions});this.cfg.addProperty(A.NAV_ARROW_RIGHT.key,{value:A.NAV_ARROW_RIGHT.value,handler:this.configOptions});this.cfg.addProperty(A.MONTHS_SHORT.key,{value:A.MONTHS_SHORT.value,handler:this.configLocale});this.cfg.addProperty(A.MONTHS_LONG.key,{value:A.MONTHS_LONG.value,handler:this.configLocale});this.cfg.addProperty(A.WEEKDAYS_1CHAR.key,{value:A.WEEKDAYS_1CHAR.value,handler:this.configLocale});this.cfg.addProperty(A.WEEKDAYS_SHORT.key,{value:A.WEEKDAYS_SHORT.value,handler:this.configLocale});this.cfg.addProperty(A.WEEKDAYS_MEDIUM.key,{value:A.WEEKDAYS_MEDIUM.value,handler:this.configLocale});this.cfg.addProperty(A.WEEKDAYS_LONG.key,{value:A.WEEKDAYS_LONG.value,handler:this.configLocale});var B=function(){this.cfg.refireEvent(A.LOCALE_MONTHS.key);this.cfg.refireEvent(A.LOCALE_WEEKDAYS.key);};this.cfg.subscribeToConfigEvent(A.START_WEEKDAY.key,B,this,true);this.cfg.subscribeToConfigEvent(A.MONTHS_SHORT.key,B,this,true);this.cfg.subscribeToConfigEvent(A.MONTHS_LONG.key,B,this,true);this.cfg.subscribeToConfigEvent(A.WEEKDAYS_1CHAR.key,B,this,true);this.cfg.subscribeToConfigEvent(A.WEEKDAYS_SHORT.key,B,this,true);this.cfg.subscribeToConfigEvent(A.WEEKDAYS_MEDIUM.key,B,this,true);this.cfg.subscribeToConfigEvent(A.WEEKDAYS_LONG.key,B,this,true);this.cfg.addProperty(A.LOCALE_MONTHS.key,{value:A.LOCALE_MONTHS.value,handler:this.configLocaleValues});this.cfg.addProperty(A.LOCALE_WEEKDAYS.key,{value:A.LOCALE_WEEKDAYS.value,handler:this.configLocaleValues});this.cfg.addProperty(A.DATE_DELIMITER.key,{value:A.DATE_DELIMITER.value,handler:this.configLocale});this.cfg.addProperty(A.DATE_FIELD_DELIMITER.key,{value:A.DATE_FIELD_DELIMITER.value,handler:this.configLocale});this.cfg.addProperty(A.DATE_RANGE_DELIMITER.key,{value:A.DATE_RANGE_DELIMITER.value,handler:this.configLocale});this.cfg.addProperty(A.MY_MONTH_POSITION.key,{value:A.MY_MONTH_POSITION.value,handler:this.configLocale,validator:this.cfg.checkNumber});this.cfg.addProperty(A.MY_YEAR_POSITION.key,{value:A.MY_YEAR_POSITION.value,handler:this.configLocale,validator:this.cfg.checkNumber});this.cfg.addProperty(A.MD_MONTH_POSITION.key,{value:A.MD_MONTH_POSITION.value,handler:this.configLocale,validator:this.cfg.checkNumber});this.cfg.addProperty(A.MD_DAY_POSITION.key,{value:A.MD_DAY_POSITION.value,handler:this.configLocale,validator:this.cfg.checkNumber});this.cfg.addProperty(A.MDY_MONTH_POSITION.key,{value:A.MDY_MONTH_POSITION.value,handler:this.configLocale,validator:this.cfg.checkNumber});this.cfg.addProperty(A.MDY_DAY_POSITION.key,{value:A.MDY_DAY_POSITION.value,handler:this.configLocale,validator:this.cfg.checkNumber});this.cfg.addProperty(A.MDY_YEAR_POSITION.key,{value:A.MDY_YEAR_POSITION.value,handler:this.configLocale,validator:this.cfg.checkNumber});this.cfg.addProperty(A.MY_LABEL_MONTH_POSITION.key,{value:A.MY_LABEL_MONTH_POSITION.value,handler:this.configLocale,validator:this.cfg.checkNumber});this.cfg.addProperty(A.MY_LABEL_YEAR_POSITION.key,{value:A.MY_LABEL_YEAR_POSITION.value,handler:this.configLocale,validator:this.cfg.checkNumber});this.cfg.addProperty(A.MY_LABEL_MONTH_SUFFIX.key,{value:A.MY_LABEL_MONTH_SUFFIX.value,handler:this.configLocale});this.cfg.addProperty(A.MY_LABEL_YEAR_SUFFIX.key,{value:A.MY_LABEL_YEAR_SUFFIX.value,handler:this.configLocale});this.cfg.addProperty(A.NAV.key,{value:A.NAV.value,handler:this.configNavigator});},configPageDate:function(B,A,C){this.cfg.setProperty(YAHOO.widget.Calendar._DEFAULT_CONFIG.PAGEDATE.key,this._parsePageDate(A[0]),true);},configMinDate:function(B,A,C){var D=A[0];if(YAHOO.lang.isString(D)){D=this._parseDate(D);this.cfg.setProperty(YAHOO.widget.Calendar._DEFAULT_CONFIG.MINDATE.key,YAHOO.widget.DateMath.getDate(D[0],(D[1]-1),D[2]));}},configMaxDate:function(B,A,C){var D=A[0];if(YAHOO.lang.isString(D)){D=this._parseDate(D);this.cfg.setProperty(YAHOO.widget.Calendar._DEFAULT_CONFIG.MAXDATE.key,YAHOO.widget.DateMath.getDate(D[0],(D[1]-1),D[2]));}},configSelected:function(C,A,E){var B=A[0];var D=YAHOO.widget.Calendar._DEFAULT_CONFIG.SELECTED.key;if(B){if(YAHOO.lang.isString(B)){this.cfg.setProperty(D,this._parseDates(B),true);}}if(!this._selectedDates){this._selectedDates=this.cfg.getProperty(D);}},configOptions:function(B,A,C){this.Options[B.toUpperCase()]=A[0];},configLocale:function(C,B,D){var A=YAHOO.widget.Calendar._DEFAULT_CONFIG;this.Locale[C.toUpperCase()]=B[0];this.cfg.refireEvent(A.LOCALE_MONTHS.key);this.cfg.refireEvent(A.LOCALE_WEEKDAYS.key);},configLocaleValues:function(D,C,E){var B=YAHOO.widget.Calendar._DEFAULT_CONFIG;D=D.toLowerCase();var G=C[0];switch(D){case B.LOCALE_MONTHS.key:switch(G){case YAHOO.widget.Calendar.SHORT:this.Locale.LOCALE_MONTHS=this.cfg.getProperty(B.MONTHS_SHORT.key).concat();break;case YAHOO.widget.Calendar.LONG:this.Locale.LOCALE_MONTHS=this.cfg.getProperty(B.MONTHS_LONG.key).concat();break;}break;case B.LOCALE_WEEKDAYS.key:switch(G){case YAHOO.widget.Calendar.ONE_CHAR:this.Locale.LOCALE_WEEKDAYS=this.cfg.getProperty(B.WEEKDAYS_1CHAR.key).concat();break;case YAHOO.widget.Calendar.SHORT:this.Locale.LOCALE_WEEKDAYS=this.cfg.getProperty(B.WEEKDAYS_SHORT.key).concat();break;case YAHOO.widget.Calendar.MEDIUM:this.Locale.LOCALE_WEEKDAYS=this.cfg.getProperty(B.WEEKDAYS_MEDIUM.key).concat();break;case YAHOO.widget.Calendar.LONG:this.Locale.LOCALE_WEEKDAYS=this.cfg.getProperty(B.WEEKDAYS_LONG.key).concat();break;}var F=this.cfg.getProperty(B.START_WEEKDAY.key);if(F>0){for(var A=0;A<F;++A){this.Locale.LOCALE_WEEKDAYS.push(this.Locale.LOCALE_WEEKDAYS.shift());}}break;}},configNavigator:function(C,A,D){var E=A[0];if(YAHOO.widget.CalendarNavigator&&(E===true||YAHOO.lang.isObject(E))){if(!this.oNavigator){this.oNavigator=new YAHOO.widget.CalendarNavigator(this);function B(){if(!this.pages){this.oNavigator.erase();}}this.beforeRenderEvent.subscribe(B,this,true);}}else{if(this.oNavigator){this.oNavigator.destroy();this.oNavigator=null;}}},initStyles:function(){var A=YAHOO.widget.Calendar._STYLES;this.Style={CSS_ROW_HEADER:A.CSS_ROW_HEADER,CSS_ROW_FOOTER:A.CSS_ROW_FOOTER,CSS_CELL:A.CSS_CELL,CSS_CELL_SELECTOR:A.CSS_CELL_SELECTOR,CSS_CELL_SELECTED:A.CSS_CELL_SELECTED,CSS_CELL_SELECTABLE:A.CSS_CELL_SELECTABLE,CSS_CELL_RESTRICTED:A.CSS_CELL_RESTRICTED,CSS_CELL_TODAY:A.CSS_CELL_TODAY,CSS_CELL_OOM:A.CSS_CELL_OOM,CSS_CELL_OOB:A.CSS_CELL_OOB,CSS_HEADER:A.CSS_HEADER,CSS_HEADER_TEXT:A.CSS_HEADER_TEXT,CSS_BODY:A.CSS_BODY,CSS_WEEKDAY_CELL:A.CSS_WEEKDAY_CELL,CSS_WEEKDAY_ROW:A.CSS_WEEKDAY_ROW,CSS_FOOTER:A.CSS_FOOTER,CSS_CALENDAR:A.CSS_CALENDAR,CSS_SINGLE:A.CSS_SINGLE,CSS_CONTAINER:A.CSS_CONTAINER,CSS_NAV_LEFT:A.CSS_NAV_LEFT,CSS_NAV_RIGHT:A.CSS_NAV_RIGHT,CSS_NAV:A.CSS_NAV,CSS_CLOSE:A.CSS_CLOSE,CSS_CELL_TOP:A.CSS_CELL_TOP,CSS_CELL_LEFT:A.CSS_CELL_LEFT,CSS_CELL_RIGHT:A.CSS_CELL_RIGHT,CSS_CELL_BOTTOM:A.CSS_CELL_BOTTOM,CSS_CELL_HOVER:A.CSS_CELL_HOVER,CSS_CELL_HIGHLIGHT1:A.CSS_CELL_HIGHLIGHT1,CSS_CELL_HIGHLIGHT2:A.CSS_CELL_HIGHLIGHT2,CSS_CELL_HIGHLIGHT3:A.CSS_CELL_HIGHLIGHT3,CSS_CELL_HIGHLIGHT4:A.CSS_CELL_HIGHLIGHT4};},buildMonthLabel:function(){var A=this.cfg.getProperty(YAHOO.widget.Calendar._DEFAULT_CONFIG.PAGEDATE.key);var C=this.Locale.LOCALE_MONTHS[A.getMonth()]+this.Locale.MY_LABEL_MONTH_SUFFIX;var B=A.getFullYear()+this.Locale.MY_LABEL_YEAR_SUFFIX;if(this.Locale.MY_LABEL_MONTH_POSITION==2||this.Locale.MY_LABEL_YEAR_POSITION==1){return B+C;}else{return C+B;}},buildDayLabel:function(A){return A.getDate();},createTitleBar:function(A){var B=YAHOO.util.Dom.getElementsByClassName(YAHOO.widget.CalendarGroup.CSS_2UPTITLE,"div",this.oDomContainer)[0]||document.createElement("div");B.className=YAHOO.widget.CalendarGroup.CSS_2UPTITLE;B.innerHTML=A;this.oDomContainer.insertBefore(B,this.oDomContainer.firstChild);YAHOO.util.Dom.addClass(this.oDomContainer,"withtitle");return B;},removeTitleBar:function(){var A=YAHOO.util.Dom.getElementsByClassName(YAHOO.widget.CalendarGroup.CSS_2UPTITLE,"div",this.oDomContainer)[0]||null;if(A){YAHOO.util.Event.purgeElement(A);this.oDomContainer.removeChild(A);}YAHOO.util.Dom.removeClass(this.oDomContainer,"withtitle");},createCloseButton:function(){var D=YAHOO.util.Dom,A=YAHOO.util.Event,C=YAHOO.widget.CalendarGroup.CSS_2UPCLOSE,F="us/my/bn/x_d.gif";var E=D.getElementsByClassName("link-close","a",this.oDomContainer)[0];if(!E){E=document.createElement("a");A.addListener(E,"click",function(H,G){G.hide();A.preventDefault(H);},this);}E.href="#";E.className="link-close";if(YAHOO.widget.Calendar.IMG_ROOT!==null){var B=D.getElementsByClassName(C,"img",E)[0]||document.createElement("img");B.src=YAHOO.widget.Calendar.IMG_ROOT+F;B.className=C;E.appendChild(B);}else{E.innerHTML='<span class="'+C+" "+this.Style.CSS_CLOSE+'"></span>';}this.oDomContainer.appendChild(E);return E;},removeCloseButton:function(){var A=YAHOO.util.Dom.getElementsByClassName("link-close","a",this.oDomContainer)[0]||null;if(A){YAHOO.util.Event.purgeElement(A);this.oDomContainer.removeChild(A);}},renderHeader:function(E){var H=7;var F="us/tr/callt.gif";var G="us/tr/calrt.gif";var M=YAHOO.widget.Calendar._DEFAULT_CONFIG;if(this.cfg.getProperty(M.SHOW_WEEK_HEADER.key)){H+=1;}if(this.cfg.getProperty(M.SHOW_WEEK_FOOTER.key)){H+=1;}E[E.length]="<thead>";E[E.length]="<tr>";E[E.length]='<th colspan="'+H+'" class="'+this.Style.CSS_HEADER_TEXT+'">';E[E.length]='<div class="'+this.Style.CSS_HEADER+'">';var K,L=false;if(this.parent){if(this.index===0){K=true;}if(this.index==(this.parent.cfg.getProperty("pages")-1)){L=true;}}else{K=true;L=true;}if(K){var A=this.cfg.getProperty(M.NAV_ARROW_LEFT.key);if(A===null&&YAHOO.widget.Calendar.IMG_ROOT!==null){A=YAHOO.widget.Calendar.IMG_ROOT+F;}var C=(A===null)?"":' style="background-image:url('+A+')"';E[E.length]='<a class="'+this.Style.CSS_NAV_LEFT+'"'+C+" >&#160;</a>";}var J=this.buildMonthLabel();var B=this.parent||this;if(B.cfg.getProperty("navigator")){J='<a class="'+this.Style.CSS_NAV+'" href="#">'+J+"</a>";}E[E.length]=J;if(L){var D=this.cfg.getProperty(M.NAV_ARROW_RIGHT.key);if(D===null&&YAHOO.widget.Calendar.IMG_ROOT!==null){D=YAHOO.widget.Calendar.IMG_ROOT+G;}var I=(D===null)?"":' style="background-image:url('+D+')"';E[E.length]='<a class="'+this.Style.CSS_NAV_RIGHT+'"'+I+" >&#160;</a>";}E[E.length]="</div>\n</th>\n</tr>";if(this.cfg.getProperty(M.SHOW_WEEKDAYS.key)){E=this.buildWeekdays(E);}E[E.length]="</thead>";return E;},buildWeekdays:function(C){var A=YAHOO.widget.Calendar._DEFAULT_CONFIG;C[C.length]='<tr class="'+this.Style.CSS_WEEKDAY_ROW+'">';if(this.cfg.getProperty(A.SHOW_WEEK_HEADER.key)){C[C.length]="<th>&#160;</th>";}for(var B=0;B<this.Locale.LOCALE_WEEKDAYS.length;++B){C[C.length]='<th class="calweekdaycell">'+this.Locale.LOCALE_WEEKDAYS[B]+"</th>";}if(this.cfg.getProperty(A.SHOW_WEEK_FOOTER.key)){C[C.length]="<th>&#160;</th>";}C[C.length]="</tr>";return C;},renderBody:function(g,e){var AF=YAHOO.widget.DateMath,M=YAHOO.widget.Calendar,Q=YAHOO.util.Dom,q=M._DEFAULT_CONFIG;var AE=this.cfg.getProperty(q.START_WEEKDAY.key);this.preMonthDays=g.getDay();if(AE>0){this.preMonthDays-=AE;}if(this.preMonthDays<0){this.preMonthDays+=7;}this.monthDays=AF.findMonthEnd(g).getDate();this.postMonthDays=M.DISPLAY_DAYS-this.preMonthDays-this.monthDays;g=AF.subtract(g,AF.DAY,this.preMonthDays);var T,I,H="w",Z="_cell",X="wd",n="d",J,l,R=this.today.getFullYear(),m=this.today.getMonth(),E=this.today.getDate(),v=this.cfg.getProperty(q.PAGEDATE.key),C=this.cfg.getProperty(q.HIDE_BLANK_WEEKS.key),c=this.cfg.getProperty(q.SHOW_WEEK_FOOTER.key),W=this.cfg.getProperty(q.SHOW_WEEK_HEADER.key),O=this.cfg.getProperty(q.MINDATE.key),V=this.cfg.getProperty(q.MAXDATE.key);if(O){O=AF.clearTime(O);}if(V){V=AF.clearTime(V);}e[e.length]='<tbody class="m'+(v.getMonth()+1)+" "+this.Style.CSS_BODY+'">';var AC=0,K=document.createElement("div"),f=document.createElement("td");K.appendChild(f);var u=this.parent||this;for(var y=0;y<6;y++){T=AF.getWeekNumber(g,AE);I=H+T;if(y!==0&&C===true&&g.getMonth()!=v.getMonth()){break;}else{e[e.length]='<tr class="'+I+'">';if(W){e=this.renderRowHeader(T,e);}for(var AD=0;AD<7;AD++){J=[];this.clearElement(f);f.className=this.Style.CSS_CELL;f.id=this.id+Z+AC;if(g.getDate()==E&&g.getMonth()==m&&g.getFullYear()==R){J[J.length]=u.renderCellStyleToday;}var U=[g.getFullYear(),g.getMonth()+1,g.getDate()];this.cellDates[this.cellDates.length]=U;if(g.getMonth()!=v.getMonth()){J[J.length]=u.renderCellNotThisMonth;}else{Q.addClass(f,X+g.getDay());Q.addClass(f,n+g.getDate());for(var w=0;w<this.renderStack.length;++w){l=null;var o=this.renderStack[w],AG=o[0],B,Y,G;switch(AG){case M.DATE:B=o[1][1];Y=o[1][2];G=o[1][0];if(g.getMonth()+1==B&&g.getDate()==Y&&g.getFullYear()==G){l=o[2];this.renderStack.splice(w,1);}break;case M.MONTH_DAY:B=o[1][0];Y=o[1][1];if(g.getMonth()+1==B&&g.getDate()==Y){l=o[2];this.renderStack.splice(w,1);}break;case M.RANGE:var b=o[1][0],a=o[1][1],h=b[1],N=b[2],S=b[0],AB=AF.getDate(S,h-1,N),F=a[1],k=a[2],A=a[0],AA=AF.getDate(A,F-1,k);if(g.getTime()>=AB.getTime()&&g.getTime()<=AA.getTime()){l=o[2];if(g.getTime()==AA.getTime()){this.renderStack.splice(w,1);}}break;case M.WEEKDAY:var L=o[1][0];if(g.getDay()+1==L){l=o[2];}break;case M.MONTH:B=o[1][0];if(g.getMonth()+1==B){l=o[2];}break;}if(l){J[J.length]=l;}}}if(this._indexOfSelectedFieldArray(U)>-1){J[J.length]=u.renderCellStyleSelected;}if((O&&(g.getTime()<O.getTime()))||(V&&(g.getTime()>V.getTime()))){J[J.length]=u.renderOutOfBoundsDate;}else{J[J.length]=u.styleCellDefault;J[J.length]=u.renderCellDefault;}for(var t=0;t<J.length;++t){if(J[t].call(u,g,f)==M.STOP_RENDER){break;}}g.setTime(g.getTime()+AF.ONE_DAY_MS);g=AF.clearTime(g);if(AC>=0&&AC<=6){Q.addClass(f,this.Style.CSS_CELL_TOP);}if((AC%7)===0){Q.addClass(f,this.Style.CSS_CELL_LEFT);}if(((AC+1)%7)===0){Q.addClass(f,this.Style.CSS_CELL_RIGHT);}var j=this.postMonthDays;if(C&&j>=7){var P=Math.floor(j/7);for(var z=0;z<P;++z){j-=7;}}if(AC>=((this.preMonthDays+j+this.monthDays)-7)){Q.addClass(f,this.Style.CSS_CELL_BOTTOM);}e[e.length]=K.innerHTML;AC++;}if(c){e=this.renderRowFooter(T,e);}e[e.length]="</tr>";}}e[e.length]="</tbody>";return e;},renderFooter:function(A){return A;},render:function(){this.beforeRenderEvent.fire();var A=YAHOO.widget.Calendar._DEFAULT_CONFIG;var C=YAHOO.widget.DateMath.findMonthStart(this.cfg.getProperty(A.PAGEDATE.key));this.resetRenderers();this.cellDates.length=0;YAHOO.util.Event.purgeElement(this.oDomContainer,true);var B=[];B[B.length]='<table cellSpacing="0" class="'+this.Style.CSS_CALENDAR+" y"+C.getFullYear()+'" id="'+this.id+'">';B=this.renderHeader(B);B=this.renderBody(C,B);B=this.renderFooter(B);B[B.length]="</table>";this.oDomContainer.innerHTML=B.join("\n");this.applyListeners();this.cells=this.oDomContainer.getElementsByTagName("td");this.cfg.refireEvent(A.TITLE.key);this.cfg.refireEvent(A.CLOSE.key);this.cfg.refireEvent(A.IFRAME.key);this.renderEvent.fire();},applyListeners:function(){var K=this.oDomContainer;var B=this.parent||this;var G="a";var D="mousedown";var H=YAHOO.util.Dom.getElementsByClassName(this.Style.CSS_NAV_LEFT,G,K);var C=YAHOO.util.Dom.getElementsByClassName(this.Style.CSS_NAV_RIGHT,G,K);if(H&&H.length>0){this.linkLeft=H[0];YAHOO.util.Event.addListener(this.linkLeft,D,B.previousMonth,B,true);}if(C&&C.length>0){this.linkRight=C[0];YAHOO.util.Event.addListener(this.linkRight,D,B.nextMonth,B,true);}if(B.cfg.getProperty("navigator")!==null){this.applyNavListeners();}if(this.domEventMap){var E,A;for(var M in this.domEventMap){if(YAHOO.lang.hasOwnProperty(this.domEventMap,M)){var I=this.domEventMap[M];if(!(I instanceof Array)){I=[I];}for(var F=0;F<I.length;F++){var L=I[F];A=YAHOO.util.Dom.getElementsByClassName(M,L.tag,this.oDomContainer);for(var J=0;J<A.length;J++){E=A[J];YAHOO.util.Event.addListener(E,L.event,L.handler,L.scope,L.correct);}}}}}YAHOO.util.Event.addListener(this.oDomContainer,"click",this.doSelectCell,this);YAHOO.util.Event.addListener(this.oDomContainer,"mouseover",this.doCellMouseOver,this);YAHOO.util.Event.addListener(this.oDomContainer,"mouseout",this.doCellMouseOut,this);},applyNavListeners:function(){var D=YAHOO.util.Event;var C=this.parent||this;var F=this;var B=YAHOO.util.Dom.getElementsByClassName(this.Style.CSS_NAV,"a",this.oDomContainer);if(B.length>0){function A(J,I){var H=D.getTarget(J);if(this===H||YAHOO.util.Dom.isAncestor(this,H)){D.preventDefault(J);}var E=C.oNavigator;if(E){var G=F.cfg.getProperty("pagedate");E.setYear(G.getFullYear());E.setMonth(G.getMonth());E.show();}}D.addListener(B,"click",A);}},getDateByCellId:function(B){var A=this.getDateFieldsByCellId(B);return YAHOO.widget.DateMath.getDate(A[0],A[1]-1,A[2]);},getDateFieldsByCellId:function(A){A=A.toLowerCase().split("_cell")[1];A=parseInt(A,10);return this.cellDates[A];},getCellIndex:function(C){var B=-1;if(C){var A=C.getMonth(),H=C.getFullYear(),G=C.getDate(),E=this.cellDates;for(var D=0;D<E.length;++D){var F=E[D];if(F[0]===H&&F[1]===A+1&&F[2]===G){B=D;break;}}}return B;},renderOutOfBoundsDate:function(B,A){YAHOO.util.Dom.addClass(A,this.Style.CSS_CELL_OOB);A.innerHTML=B.getDate();return YAHOO.widget.Calendar.STOP_RENDER;},renderRowHeader:function(B,A){A[A.length]='<th class="calrowhead">'+B+"</th>";return A;},renderRowFooter:function(B,A){A[A.length]='<th class="calrowfoot">'+B+"</th>";return A;},renderCellDefault:function(B,A){A.innerHTML='<a href="#" class="'+this.Style.CSS_CELL_SELECTOR+'">'+this.buildDayLabel(B)+"</a>";},styleCellDefault:function(B,A){YAHOO.util.Dom.addClass(A,this.Style.CSS_CELL_SELECTABLE);},renderCellStyleHighlight1:function(B,A){YAHOO.util.Dom.addClass(A,this.Style.CSS_CELL_HIGHLIGHT1);},renderCellStyleHighlight2:function(B,A){YAHOO.util.Dom.addClass(A,this.Style.CSS_CELL_HIGHLIGHT2);},renderCellStyleHighlight3:function(B,A){YAHOO.util.Dom.addClass(A,this.Style.CSS_CELL_HIGHLIGHT3);},renderCellStyleHighlight4:function(B,A){YAHOO.util.Dom.addClass(A,this.Style.CSS_CELL_HIGHLIGHT4);},renderCellStyleToday:function(B,A){YAHOO.util.Dom.addClass(A,this.Style.CSS_CELL_TODAY);},renderCellStyleSelected:function(B,A){YAHOO.util.Dom.addClass(A,this.Style.CSS_CELL_SELECTED);},renderCellNotThisMonth:function(B,A){YAHOO.util.Dom.addClass(A,this.Style.CSS_CELL_OOM);A.innerHTML=B.getDate();return YAHOO.widget.Calendar.STOP_RENDER;},renderBodyCellRestricted:function(B,A){YAHOO.util.Dom.addClass(A,this.Style.CSS_CELL);YAHOO.util.Dom.addClass(A,this.Style.CSS_CELL_RESTRICTED);A.innerHTML=B.getDate();return YAHOO.widget.Calendar.STOP_RENDER;},addMonths:function(B){var A=YAHOO.widget.Calendar._DEFAULT_CONFIG.PAGEDATE.key;this.cfg.setProperty(A,YAHOO.widget.DateMath.add(this.cfg.getProperty(A),YAHOO.widget.DateMath.MONTH,B));this.resetRenderers();this.changePageEvent.fire();},subtractMonths:function(B){var A=YAHOO.widget.Calendar._DEFAULT_CONFIG.PAGEDATE.key;this.cfg.setProperty(A,YAHOO.widget.DateMath.subtract(this.cfg.getProperty(A),YAHOO.widget.DateMath.MONTH,B));this.resetRenderers();this.changePageEvent.fire();},addYears:function(B){var A=YAHOO.widget.Calendar._DEFAULT_CONFIG.PAGEDATE.key;this.cfg.setProperty(A,YAHOO.widget.DateMath.add(this.cfg.getProperty(A),YAHOO.widget.DateMath.YEAR,B));this.resetRenderers();this.changePageEvent.fire();},subtractYears:function(B){var A=YAHOO.widget.Calendar._DEFAULT_CONFIG.PAGEDATE.key;this.cfg.setProperty(A,YAHOO.widget.DateMath.subtract(this.cfg.getProperty(A),YAHOO.widget.DateMath.YEAR,B));this.resetRenderers();this.changePageEvent.fire();},nextMonth:function(){this.addMonths(1);},previousMonth:function(){this.subtractMonths(1);},nextYear:function(){this.addYears(1);},previousYear:function(){this.subtractYears(1);},reset:function(){var A=YAHOO.widget.Calendar._DEFAULT_CONFIG;this.cfg.resetProperty(A.SELECTED.key);this.cfg.resetProperty(A.PAGEDATE.key);this.resetEvent.fire();},clear:function(){var A=YAHOO.widget.Calendar._DEFAULT_CONFIG;this.cfg.setProperty(A.SELECTED.key,[]);this.cfg.setProperty(A.PAGEDATE.key,new Date(this.today.getTime()));this.clearEvent.fire();},select:function(C){var F=this._toFieldArray(C);var B=[];var E=[];var G=YAHOO.widget.Calendar._DEFAULT_CONFIG.SELECTED.key;for(var A=0;A<F.length;++A){var D=F[A];if(!this.isDateOOB(this._toDate(D))){if(B.length===0){this.beforeSelectEvent.fire();E=this.cfg.getProperty(G);}B.push(D);if(this._indexOfSelectedFieldArray(D)==-1){E[E.length]=D;}}}if(B.length>0){if(this.parent){this.parent.cfg.setProperty(G,E);}else{this.cfg.setProperty(G,E);}this.selectEvent.fire(B);}return this.getSelectedDates();},selectCell:function(D){var B=this.cells[D];var H=this.cellDates[D];var G=this._toDate(H);var C=YAHOO.util.Dom.hasClass(B,this.Style.CSS_CELL_SELECTABLE);if(C){this.beforeSelectEvent.fire();var F=YAHOO.widget.Calendar._DEFAULT_CONFIG.SELECTED.key;var E=this.cfg.getProperty(F);var A=H.concat();if(this._indexOfSelectedFieldArray(A)==-1){E[E.length]=A;}if(this.parent){this.parent.cfg.setProperty(F,E);}else{this.cfg.setProperty(F,E);}this.renderCellStyleSelected(G,B);this.selectEvent.fire([A]);this.doCellMouseOut.call(B,null,this);}return this.getSelectedDates();},deselect:function(E){var A=this._toFieldArray(E);var D=[];var G=[];var H=YAHOO.widget.Calendar._DEFAULT_CONFIG.SELECTED.key;for(var B=0;B<A.length;++B){var F=A[B];if(!this.isDateOOB(this._toDate(F))){if(D.length===0){this.beforeDeselectEvent.fire();G=this.cfg.getProperty(H);}D.push(F);var C=this._indexOfSelectedFieldArray(F);if(C!=-1){G.splice(C,1);}}}if(D.length>0){if(this.parent){this.parent.cfg.setProperty(H,G);}else{this.cfg.setProperty(H,G);}this.deselectEvent.fire(D);}return this.getSelectedDates();},deselectCell:function(E){var H=this.cells[E];var B=this.cellDates[E];var F=this._indexOfSelectedFieldArray(B);var G=YAHOO.util.Dom.hasClass(H,this.Style.CSS_CELL_SELECTABLE);if(G){this.beforeDeselectEvent.fire();var I=YAHOO.widget.Calendar._DEFAULT_CONFIG;var D=this.cfg.getProperty(I.SELECTED.key);var C=this._toDate(B);var A=B.concat();if(F>-1){if(this.cfg.getProperty(I.PAGEDATE.key).getMonth()==C.getMonth()&&this.cfg.getProperty(I.PAGEDATE.key).getFullYear()==C.getFullYear()){YAHOO.util.Dom.removeClass(H,this.Style.CSS_CELL_SELECTED);}D.splice(F,1);}if(this.parent){this.parent.cfg.setProperty(I.SELECTED.key,D);}else{this.cfg.setProperty(I.SELECTED.key,D);}this.deselectEvent.fire(A);}return this.getSelectedDates();},deselectAll:function(){this.beforeDeselectEvent.fire();var D=YAHOO.widget.Calendar._DEFAULT_CONFIG.SELECTED.key;var A=this.cfg.getProperty(D);var B=A.length;var C=A.concat();if(this.parent){this.parent.cfg.setProperty(D,[]);}else{this.cfg.setProperty(D,[]);}if(B>0){this.deselectEvent.fire(C);}return this.getSelectedDates();},_toFieldArray:function(B){var A=[];if(B instanceof Date){A=[[B.getFullYear(),B.getMonth()+1,B.getDate()]];}else{if(YAHOO.lang.isString(B)){A=this._parseDates(B);}else{if(YAHOO.lang.isArray(B)){for(var C=0;C<B.length;++C){var D=B[C];A[A.length]=[D.getFullYear(),D.getMonth()+1,D.getDate()];}}}}return A;},toDate:function(A){return this._toDate(A);},_toDate:function(A){if(A instanceof Date){return A;}else{return YAHOO.widget.DateMath.getDate(A[0],A[1]-1,A[2]);}},_fieldArraysAreEqual:function(C,B){var A=false;if(C[0]==B[0]&&C[1]==B[1]&&C[2]==B[2]){A=true;}return A;},_indexOfSelectedFieldArray:function(E){var D=-1;var A=this.cfg.getProperty(YAHOO.widget.Calendar._DEFAULT_CONFIG.SELECTED.key);for(var C=0;C<A.length;++C){var B=A[C];if(E[0]==B[0]&&E[1]==B[1]&&E[2]==B[2]){D=C;break;}}return D;},isDateOOM:function(A){return(A.getMonth()!=this.cfg.getProperty(YAHOO.widget.Calendar._DEFAULT_CONFIG.PAGEDATE.key).getMonth());},isDateOOB:function(D){var A=YAHOO.widget.Calendar._DEFAULT_CONFIG;var E=this.cfg.getProperty(A.MINDATE.key);var F=this.cfg.getProperty(A.MAXDATE.key);var C=YAHOO.widget.DateMath;if(E){E=C.clearTime(E);}if(F){F=C.clearTime(F);}var B=new Date(D.getTime());B=C.clearTime(B);return((E&&B.getTime()<E.getTime())||(F&&B.getTime()>F.getTime()));},_parsePageDate:function(B){var E;var A=YAHOO.widget.Calendar._DEFAULT_CONFIG;if(B){if(B instanceof Date){E=YAHOO.widget.DateMath.findMonthStart(B);}else{var F,D,C;C=B.split(this.cfg.getProperty(A.DATE_FIELD_DELIMITER.key));F=parseInt(C[this.cfg.getProperty(A.MY_MONTH_POSITION.key)-1],10)-1;D=parseInt(C[this.cfg.getProperty(A.MY_YEAR_POSITION.key)-1],10);E=YAHOO.widget.DateMath.getDate(D,F,1);}}else{E=YAHOO.widget.DateMath.getDate(this.today.getFullYear(),this.today.getMonth(),1);}return E;},onBeforeSelect:function(){if(this.cfg.getProperty(YAHOO.widget.Calendar._DEFAULT_CONFIG.MULTI_SELECT.key)===false){if(this.parent){this.parent.callChildFunction("clearAllBodyCellStyles",this.Style.CSS_CELL_SELECTED);this.parent.deselectAll();}else{this.clearAllBodyCellStyles(this.Style.CSS_CELL_SELECTED);this.deselectAll();}}},onSelect:function(A){},onBeforeDeselect:function(){},onDeselect:function(A){},onChangePage:function(){this.render();},onRender:function(){},onReset:function(){this.render();},onClear:function(){this.render();},validate:function(){return true;},_parseDate:function(C){var D=C.split(this.Locale.DATE_FIELD_DELIMITER);var A;if(D.length==2){A=[D[this.Locale.MD_MONTH_POSITION-1],D[this.Locale.MD_DAY_POSITION-1]];A.type=YAHOO.widget.Calendar.MONTH_DAY;}else{A=[D[this.Locale.MDY_YEAR_POSITION-1],D[this.Locale.MDY_MONTH_POSITION-1],D[this.Locale.MDY_DAY_POSITION-1]];A.type=YAHOO.widget.Calendar.DATE;}for(var B=0;B<A.length;B++){A[B]=parseInt(A[B],10);}return A;},_parseDates:function(B){var I=[];var H=B.split(this.Locale.DATE_DELIMITER);for(var G=0;G<H.length;++G){var F=H[G];if(F.indexOf(this.Locale.DATE_RANGE_DELIMITER)!=-1){var A=F.split(this.Locale.DATE_RANGE_DELIMITER);var E=this._parseDate(A[0]);var J=this._parseDate(A[1]);var D=this._parseRange(E,J);I=I.concat(D);}else{var C=this._parseDate(F);I.push(C);}}return I;},_parseRange:function(A,E){var B=YAHOO.widget.DateMath.add(YAHOO.widget.DateMath.getDate(A[0],A[1]-1,A[2]),YAHOO.widget.DateMath.DAY,1);var D=YAHOO.widget.DateMath.getDate(E[0],E[1]-1,E[2]);var C=[];C.push(A);while(B.getTime()<=D.getTime()){C.push([B.getFullYear(),B.getMonth()+1,B.getDate()]);B=YAHOO.widget.DateMath.add(B,YAHOO.widget.DateMath.DAY,1);}return C;},resetRenderers:function(){this.renderStack=this._renderStack.concat();},removeRenderers:function(){this._renderStack=[];this.renderStack=[];},clearElement:function(A){A.innerHTML="&#160;";A.className="";},addRenderer:function(A,B){var D=this._parseDates(A);for(var C=0;C<D.length;++C){var E=D[C];if(E.length==2){if(E[0]instanceof Array){this._addRenderer(YAHOO.widget.Calendar.RANGE,E,B);}else{this._addRenderer(YAHOO.widget.Calendar.MONTH_DAY,E,B);}}else{if(E.length==3){this._addRenderer(YAHOO.widget.Calendar.DATE,E,B);}}}},_addRenderer:function(B,C,A){var D=[B,C,A];this.renderStack.unshift(D);this._renderStack=this.renderStack.concat();},addMonthRenderer:function(B,A){this._addRenderer(YAHOO.widget.Calendar.MONTH,[B],A);},addWeekdayRenderer:function(B,A){this._addRenderer(YAHOO.widget.Calendar.WEEKDAY,[B],A);},clearAllBodyCellStyles:function(A){for(var B=0;B<this.cells.length;++B){YAHOO.util.Dom.removeClass(this.cells[B],A);}},setMonth:function(C){var A=YAHOO.widget.Calendar._DEFAULT_CONFIG.PAGEDATE.key;var B=this.cfg.getProperty(A);B.setMonth(parseInt(C,10));this.cfg.setProperty(A,B);},setYear:function(B){var A=YAHOO.widget.Calendar._DEFAULT_CONFIG.PAGEDATE.key;var C=this.cfg.getProperty(A);C.setFullYear(parseInt(B,10));this.cfg.setProperty(A,C);},getSelectedDates:function(){var C=[];var B=this.cfg.getProperty(YAHOO.widget.Calendar._DEFAULT_CONFIG.SELECTED.key);for(var E=0;E<B.length;++E){var D=B[E];var A=YAHOO.widget.DateMath.getDate(D[0],D[1]-1,D[2]);C.push(A);}C.sort(function(G,F){return G-F;});return C;},hide:function(){if(this.beforeHideEvent.fire()){this.oDomContainer.style.display="none";this.hideEvent.fire();}},show:function(){if(this.beforeShowEvent.fire()){this.oDomContainer.style.display="block";this.showEvent.fire();}},browser:(function(){var A=navigator.userAgent.toLowerCase();if(A.indexOf("opera")!=-1){return"opera";}else{if(A.indexOf("msie 7")!=-1){return"ie7";}else{if(A.indexOf("msie")!=-1){return"ie";}else{if(A.indexOf("safari")!=-1){return"safari";}else{if(A.indexOf("gecko")!=-1){return"gecko";}else{return false;}}}}}})(),toString:function(){return"Calendar "+this.id;}};YAHOO.widget.Calendar_Core=YAHOO.widget.Calendar;YAHOO.widget.Cal_Core=YAHOO.widget.Calendar;YAHOO.widget.CalendarGroup=function(C,A,B){if(arguments.length>0){this.init.apply(this,arguments);}};YAHOO.widget.CalendarGroup.prototype={init:function(D,B,C){var A=this._parseArgs(arguments);D=A.id;B=A.container;C=A.config;this.oDomContainer=YAHOO.util.Dom.get(B);if(!this.oDomContainer.id){this.oDomContainer.id=YAHOO.util.Dom.generateId();}if(!D){D=this.oDomContainer.id+"_t";}this.id=D;this.containerId=this.oDomContainer.id;this.initEvents();this.initStyles();this.pages=[];YAHOO.util.Dom.addClass(this.oDomContainer,YAHOO.widget.CalendarGroup.CSS_CONTAINER);YAHOO.util.Dom.addClass(this.oDomContainer,YAHOO.widget.CalendarGroup.CSS_MULTI_UP);this.cfg=new YAHOO.util.Config(this);this.Options={};this.Locale={};this.setupConfig();if(C){this.cfg.applyConfig(C,true);}this.cfg.fireQueue();if(YAHOO.env.ua.opera){this.renderEvent.subscribe(this._fixWidth,this,true);this.showEvent.subscribe(this._fixWidth,this,true);}},setupConfig:function(){var A=YAHOO.widget.CalendarGroup._DEFAULT_CONFIG;this.cfg.addProperty(A.PAGES.key,{value:A.PAGES.value,validator:this.cfg.checkNumber,handler:this.configPages});this.cfg.addProperty(A.PAGEDATE.key,{value:new Date(),handler:this.configPageDate});this.cfg.addProperty(A.SELECTED.key,{value:[],handler:this.configSelected});this.cfg.addProperty(A.TITLE.key,{value:A.TITLE.value,handler:this.configTitle});this.cfg.addProperty(A.CLOSE.key,{value:A.CLOSE.value,handler:this.configClose});this.cfg.addProperty(A.IFRAME.key,{value:A.IFRAME.value,handler:this.configIframe,validator:this.cfg.checkBoolean});this.cfg.addProperty(A.MINDATE.key,{value:A.MINDATE.value,handler:this.delegateConfig});this.cfg.addProperty(A.MAXDATE.key,{value:A.MAXDATE.value,handler:this.delegateConfig});this.cfg.addProperty(A.MULTI_SELECT.key,{value:A.MULTI_SELECT.value,handler:this.delegateConfig,validator:this.cfg.checkBoolean});this.cfg.addProperty(A.START_WEEKDAY.key,{value:A.START_WEEKDAY.value,handler:this.delegateConfig,validator:this.cfg.checkNumber});this.cfg.addProperty(A.SHOW_WEEKDAYS.key,{value:A.SHOW_WEEKDAYS.value,handler:this.delegateConfig,validator:this.cfg.checkBoolean});this.cfg.addProperty(A.SHOW_WEEK_HEADER.key,{value:A.SHOW_WEEK_HEADER.value,handler:this.delegateConfig,validator:this.cfg.checkBoolean});this.cfg.addProperty(A.SHOW_WEEK_FOOTER.key,{value:A.SHOW_WEEK_FOOTER.value,handler:this.delegateConfig,validator:this.cfg.checkBoolean});this.cfg.addProperty(A.HIDE_BLANK_WEEKS.key,{value:A.HIDE_BLANK_WEEKS.value,handler:this.delegateConfig,validator:this.cfg.checkBoolean});this.cfg.addProperty(A.NAV_ARROW_LEFT.key,{value:A.NAV_ARROW_LEFT.value,handler:this.delegateConfig});this.cfg.addProperty(A.NAV_ARROW_RIGHT.key,{value:A.NAV_ARROW_RIGHT.value,handler:this.delegateConfig});this.cfg.addProperty(A.MONTHS_SHORT.key,{value:A.MONTHS_SHORT.value,handler:this.delegateConfig});this.cfg.addProperty(A.MONTHS_LONG.key,{value:A.MONTHS_LONG.value,handler:this.delegateConfig});this.cfg.addProperty(A.WEEKDAYS_1CHAR.key,{value:A.WEEKDAYS_1CHAR.value,handler:this.delegateConfig});this.cfg.addProperty(A.WEEKDAYS_SHORT.key,{value:A.WEEKDAYS_SHORT.value,handler:this.delegateConfig});this.cfg.addProperty(A.WEEKDAYS_MEDIUM.key,{value:A.WEEKDAYS_MEDIUM.value,handler:this.delegateConfig});this.cfg.addProperty(A.WEEKDAYS_LONG.key,{value:A.WEEKDAYS_LONG.value,handler:this.delegateConfig});this.cfg.addProperty(A.LOCALE_MONTHS.key,{value:A.LOCALE_MONTHS.value,handler:this.delegateConfig});this.cfg.addProperty(A.LOCALE_WEEKDAYS.key,{value:A.LOCALE_WEEKDAYS.value,handler:this.delegateConfig});this.cfg.addProperty(A.DATE_DELIMITER.key,{value:A.DATE_DELIMITER.value,handler:this.delegateConfig});this.cfg.addProperty(A.DATE_FIELD_DELIMITER.key,{value:A.DATE_FIELD_DELIMITER.value,handler:this.delegateConfig});this.cfg.addProperty(A.DATE_RANGE_DELIMITER.key,{value:A.DATE_RANGE_DELIMITER.value,handler:this.delegateConfig});this.cfg.addProperty(A.MY_MONTH_POSITION.key,{value:A.MY_MONTH_POSITION.value,handler:this.delegateConfig,validator:this.cfg.checkNumber});this.cfg.addProperty(A.MY_YEAR_POSITION.key,{value:A.MY_YEAR_POSITION.value,handler:this.delegateConfig,validator:this.cfg.checkNumber});this.cfg.addProperty(A.MD_MONTH_POSITION.key,{value:A.MD_MONTH_POSITION.value,handler:this.delegateConfig,validator:this.cfg.checkNumber});this.cfg.addProperty(A.MD_DAY_POSITION.key,{value:A.MD_DAY_POSITION.value,handler:this.delegateConfig,validator:this.cfg.checkNumber});this.cfg.addProperty(A.MDY_MONTH_POSITION.key,{value:A.MDY_MONTH_POSITION.value,handler:this.delegateConfig,validator:this.cfg.checkNumber});this.cfg.addProperty(A.MDY_DAY_POSITION.key,{value:A.MDY_DAY_POSITION.value,handler:this.delegateConfig,validator:this.cfg.checkNumber});this.cfg.addProperty(A.MDY_YEAR_POSITION.key,{value:A.MDY_YEAR_POSITION.value,handler:this.delegateConfig,validator:this.cfg.checkNumber});this.cfg.addProperty(A.MY_LABEL_MONTH_POSITION.key,{value:A.MY_LABEL_MONTH_POSITION.value,handler:this.delegateConfig,validator:this.cfg.checkNumber});this.cfg.addProperty(A.MY_LABEL_YEAR_POSITION.key,{value:A.MY_LABEL_YEAR_POSITION.value,handler:this.delegateConfig,validator:this.cfg.checkNumber});this.cfg.addProperty(A.MY_LABEL_MONTH_SUFFIX.key,{value:A.MY_LABEL_MONTH_SUFFIX.value,handler:this.delegateConfig});this.cfg.addProperty(A.MY_LABEL_YEAR_SUFFIX.key,{value:A.MY_LABEL_YEAR_SUFFIX.value,handler:this.delegateConfig});this.cfg.addProperty(A.NAV.key,{value:A.NAV.value,handler:this.configNavigator});},initEvents:function(){var C=this;var E="Event";var B=function(G,J,F){for(var I=0;I<C.pages.length;++I){var H=C.pages[I];H[this.type+E].subscribe(G,J,F);}};var A=function(F,I){for(var H=0;H<C.pages.length;++H){var G=C.pages[H];G[this.type+E].unsubscribe(F,I);}};var D=YAHOO.widget.Calendar._EVENT_TYPES;this.beforeSelectEvent=new YAHOO.util.CustomEvent(D.BEFORE_SELECT);this.beforeSelectEvent.subscribe=B;this.beforeSelectEvent.unsubscribe=A;this.selectEvent=new YAHOO.util.CustomEvent(D.SELECT);this.selectEvent.subscribe=B;this.selectEvent.unsubscribe=A;this.beforeDeselectEvent=new YAHOO.util.CustomEvent(D.BEFORE_DESELECT);this.beforeDeselectEvent.subscribe=B;this.beforeDeselectEvent.unsubscribe=A;this.deselectEvent=new YAHOO.util.CustomEvent(D.DESELECT);this.deselectEvent.subscribe=B;this.deselectEvent.unsubscribe=A;this.changePageEvent=new YAHOO.util.CustomEvent(D.CHANGE_PAGE);this.changePageEvent.subscribe=B;this.changePageEvent.unsubscribe=A;this.beforeRenderEvent=new YAHOO.util.CustomEvent(D.BEFORE_RENDER);this.beforeRenderEvent.subscribe=B;this.beforeRenderEvent.unsubscribe=A;this.renderEvent=new YAHOO.util.CustomEvent(D.RENDER);this.renderEvent.subscribe=B;this.renderEvent.unsubscribe=A;this.resetEvent=new YAHOO.util.CustomEvent(D.RESET);this.resetEvent.subscribe=B;this.resetEvent.unsubscribe=A;this.clearEvent=new YAHOO.util.CustomEvent(D.CLEAR);this.clearEvent.subscribe=B;this.clearEvent.unsubscribe=A;this.beforeShowEvent=new YAHOO.util.CustomEvent(D.BEFORE_SHOW);this.showEvent=new YAHOO.util.CustomEvent(D.SHOW);this.beforeHideEvent=new YAHOO.util.CustomEvent(D.BEFORE_HIDE);this.hideEvent=new YAHOO.util.CustomEvent(D.HIDE);this.beforeShowNavEvent=new YAHOO.util.CustomEvent(D.BEFORE_SHOW_NAV);this.showNavEvent=new YAHOO.util.CustomEvent(D.SHOW_NAV);this.beforeHideNavEvent=new YAHOO.util.CustomEvent(D.BEFORE_HIDE_NAV);this.hideNavEvent=new YAHOO.util.CustomEvent(D.HIDE_NAV);this.beforeRenderNavEvent=new YAHOO.util.CustomEvent(D.BEFORE_RENDER_NAV);this.renderNavEvent=new YAHOO.util.CustomEvent(D.RENDER_NAV);},configPages:function(K,J,G){var E=J[0];var C=YAHOO.widget.CalendarGroup._DEFAULT_CONFIG.PAGEDATE.key;var O="_";var L="groupcal";var N="first-of-type";var D="last-of-type";for(var B=0;B<E;++B){var M=this.id+O+B;var I=this.containerId+O+B;var H=this.cfg.getConfig();H.close=false;H.title=false;H.navigator=null;var A=this.constructChild(M,I,H);var F=A.cfg.getProperty(C);this._setMonthOnDate(F,F.getMonth()+B);A.cfg.setProperty(C,F);YAHOO.util.Dom.removeClass(A.oDomContainer,this.Style.CSS_SINGLE);YAHOO.util.Dom.addClass(A.oDomContainer,L);if(B===0){YAHOO.util.Dom.addClass(A.oDomContainer,N);}if(B==(E-1)){YAHOO.util.Dom.addClass(A.oDomContainer,D);}A.parent=this;A.index=B;this.pages[this.pages.length]=A;}},configPageDate:function(H,G,E){var C=G[0];var F;var D=YAHOO.widget.CalendarGroup._DEFAULT_CONFIG.PAGEDATE.key;for(var B=0;B<this.pages.length;++B){var A=this.pages[B];if(B===0){F=A._parsePageDate(C);A.cfg.setProperty(D,F);}else{var I=new Date(F);this._setMonthOnDate(I,I.getMonth()+B);A.cfg.setProperty(D,I);}}},configSelected:function(C,A,E){var D=YAHOO.widget.CalendarGroup._DEFAULT_CONFIG.SELECTED.key;this.delegateConfig(C,A,E);var B=(this.pages.length>0)?this.pages[0].cfg.getProperty(D):[];this.cfg.setProperty(D,B,true);},delegateConfig:function(B,A,E){var F=A[0];var D;for(var C=0;C<this.pages.length;C++){D=this.pages[C];D.cfg.setProperty(B,F);}},setChildFunction:function(D,B){var A=this.cfg.getProperty(YAHOO.widget.CalendarGroup._DEFAULT_CONFIG.PAGES.key);for(var C=0;C<A;++C){this.pages[C][D]=B;}},callChildFunction:function(F,B){var A=this.cfg.getProperty(YAHOO.widget.CalendarGroup._DEFAULT_CONFIG.PAGES.key);for(var E=0;E<A;++E){var D=this.pages[E];if(D[F]){var C=D[F];C.call(D,B);}}},constructChild:function(D,B,C){var A=document.getElementById(B);if(!A){A=document.createElement("div");A.id=B;this.oDomContainer.appendChild(A);}return new YAHOO.widget.Calendar(D,B,C);},setMonth:function(E){E=parseInt(E,10);var F;var B=YAHOO.widget.CalendarGroup._DEFAULT_CONFIG.PAGEDATE.key;for(var D=0;D<this.pages.length;++D){var C=this.pages[D];var A=C.cfg.getProperty(B);if(D===0){F=A.getFullYear();}else{A.setFullYear(F);}this._setMonthOnDate(A,E+D);C.cfg.setProperty(B,A);}},setYear:function(C){var B=YAHOO.widget.CalendarGroup._DEFAULT_CONFIG.PAGEDATE.key;C=parseInt(C,10);for(var E=0;E<this.pages.length;++E){var D=this.pages[E];var A=D.cfg.getProperty(B);if((A.getMonth()+1)==1&&E>0){C+=1;}D.setYear(C);}},render:function(){this.renderHeader();for(var B=0;B<this.pages.length;++B){var A=this.pages[B];A.render();}this.renderFooter();},select:function(A){for(var C=0;C<this.pages.length;++C){var B=this.pages[C];B.select(A);}return this.getSelectedDates();},selectCell:function(A){for(var C=0;C<this.pages.length;++C){var B=this.pages[C];B.selectCell(A);}return this.getSelectedDates();},deselect:function(A){for(var C=0;C<this.pages.length;++C){var B=this.pages[C];B.deselect(A);}return this.getSelectedDates();},deselectAll:function(){for(var B=0;B<this.pages.length;++B){var A=this.pages[B];A.deselectAll();}return this.getSelectedDates();},deselectCell:function(A){for(var C=0;C<this.pages.length;++C){var B=this.pages[C];B.deselectCell(A);}return this.getSelectedDates();},reset:function(){for(var B=0;B<this.pages.length;++B){var A=this.pages[B];A.reset();}},clear:function(){for(var B=0;B<this.pages.length;++B){var A=this.pages[B];A.clear();}},nextMonth:function(){for(var B=0;B<this.pages.length;++B){var A=this.pages[B];A.nextMonth();}},previousMonth:function(){for(var B=this.pages.length-1;B>=0;--B){var A=this.pages[B];A.previousMonth();}},nextYear:function(){for(var B=0;B<this.pages.length;++B){var A=this.pages[B];A.nextYear();}},previousYear:function(){for(var B=0;B<this.pages.length;++B){var A=this.pages[B];A.previousYear();}},getSelectedDates:function(){var C=[];var B=this.cfg.getProperty(YAHOO.widget.CalendarGroup._DEFAULT_CONFIG.SELECTED.key);for(var E=0;E<B.length;++E){var D=B[E];var A=YAHOO.widget.DateMath.getDate(D[0],D[1]-1,D[2]);C.push(A);}C.sort(function(G,F){return G-F;});return C;},addRenderer:function(A,B){for(var D=0;D<this.pages.length;++D){var C=this.pages[D];C.addRenderer(A,B);}},addMonthRenderer:function(D,A){for(var C=0;C<this.pages.length;++C){var B=this.pages[C];B.addMonthRenderer(D,A);}},addWeekdayRenderer:function(B,A){for(var D=0;D<this.pages.length;++D){var C=this.pages[D];C.addWeekdayRenderer(B,A);}},removeRenderers:function(){this.callChildFunction("removeRenderers");},renderHeader:function(){},renderFooter:function(){},addMonths:function(A){this.callChildFunction("addMonths",A);},subtractMonths:function(A){this.callChildFunction("subtractMonths",A);},addYears:function(A){this.callChildFunction("addYears",A);},subtractYears:function(A){this.callChildFunction("subtractYears",A);},getCalendarPage:function(D){var F=null;if(D){var G=D.getFullYear(),C=D.getMonth();var B=this.pages;for(var E=0;E<B.length;++E){var A=B[E].cfg.getProperty("pagedate");if(A.getFullYear()===G&&A.getMonth()===C){F=B[E];break;}}}return F;},_setMonthOnDate:function(C,D){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420&&(D<0||D>11)){var B=YAHOO.widget.DateMath;var A=B.add(C,B.MONTH,D-C.getMonth());C.setTime(A.getTime());}else{C.setMonth(D);}},_fixWidth:function(){var A=0;for(var C=0;C<this.pages.length;++C){var B=this.pages[C];A+=B.oDomContainer.offsetWidth;}if(A>0){this.oDomContainer.style.width=A+"px";}},toString:function(){return"CalendarGroup "+this.id;}};YAHOO.widget.CalendarGroup.CSS_CONTAINER="yui-calcontainer";YAHOO.widget.CalendarGroup.CSS_MULTI_UP="multi";YAHOO.widget.CalendarGroup.CSS_2UPTITLE="title";YAHOO.widget.CalendarGroup.CSS_2UPCLOSE="close-icon";YAHOO.lang.augmentProto(YAHOO.widget.CalendarGroup,YAHOO.widget.Calendar,"buildDayLabel","buildMonthLabel","renderOutOfBoundsDate","renderRowHeader","renderRowFooter","renderCellDefault","styleCellDefault","renderCellStyleHighlight1","renderCellStyleHighlight2","renderCellStyleHighlight3","renderCellStyleHighlight4","renderCellStyleToday","renderCellStyleSelected","renderCellNotThisMonth","renderBodyCellRestricted","initStyles","configTitle","configClose","configIframe","configNavigator","createTitleBar","createCloseButton","removeTitleBar","removeCloseButton","hide","show","toDate","_toDate","_parseArgs","browser");YAHOO.widget.CalendarGroup._DEFAULT_CONFIG=YAHOO.widget.Calendar._DEFAULT_CONFIG;YAHOO.widget.CalendarGroup._DEFAULT_CONFIG.PAGES={key:"pages",value:2};YAHOO.widget.CalGrp=YAHOO.widget.CalendarGroup;YAHOO.widget.Calendar2up=function(C,A,B){this.init(C,A,B);};YAHOO.extend(YAHOO.widget.Calendar2up,YAHOO.widget.CalendarGroup);YAHOO.widget.Cal2up=YAHOO.widget.Calendar2up;YAHOO.widget.CalendarNavigator=function(A){this.init(A);};(function(){var A=YAHOO.widget.CalendarNavigator;A.CLASSES={NAV:"yui-cal-nav",NAV_VISIBLE:"yui-cal-nav-visible",MASK:"yui-cal-nav-mask",YEAR:"yui-cal-nav-y",MONTH:"yui-cal-nav-m",BUTTONS:"yui-cal-nav-b",BUTTON:"yui-cal-nav-btn",ERROR:"yui-cal-nav-e",YEAR_CTRL:"yui-cal-nav-yc",MONTH_CTRL:"yui-cal-nav-mc",INVALID:"yui-invalid",DEFAULT:"yui-default"};A._DEFAULT_CFG={strings:{month:"Month",year:"Year",submit:"Okay",cancel:"Cancel",invalidYear:"Year needs to be a number"},monthFormat:YAHOO.widget.Calendar.LONG,initialFocus:"year"};A.ID_SUFFIX="_nav";A.MONTH_SUFFIX="_month";A.YEAR_SUFFIX="_year";A.ERROR_SUFFIX="_error";A.CANCEL_SUFFIX="_cancel";A.SUBMIT_SUFFIX="_submit";A.YR_MAX_DIGITS=4;A.YR_MINOR_INC=1;A.YR_MAJOR_INC=10;A.UPDATE_DELAY=50;A.YR_PATTERN=/^\d+$/;A.TRIM=/^\s*(.*?)\s*$/;})();YAHOO.widget.CalendarNavigator.prototype={id:null,cal:null,navEl:null,maskEl:null,yearEl:null,monthEl:null,errorEl:null,submitEl:null,cancelEl:null,firstCtrl:null,lastCtrl:null,_doc:null,_year:null,_month:0,__rendered:false,init:function(A){var C=A.oDomContainer;this.cal=A;this.id=C.id+YAHOO.widget.CalendarNavigator.ID_SUFFIX;this._doc=C.ownerDocument;var B=YAHOO.env.ua.ie;this.__isIEQuirks=(B&&((B<=6)||(B===7&&this._doc.compatMode=="BackCompat")));},show:function(){var A=YAHOO.widget.CalendarNavigator.CLASSES;if(this.cal.beforeShowNavEvent.fire()){if(!this.__rendered){this.render();}this.clearErrors();this._updateMonthUI();this._updateYearUI();this._show(this.navEl,true);this.setInitialFocus();this.showMask();YAHOO.util.Dom.addClass(this.cal.oDomContainer,A.NAV_VISIBLE);this.cal.showNavEvent.fire();}},hide:function(){var A=YAHOO.widget.CalendarNavigator.CLASSES;if(this.cal.beforeHideNavEvent.fire()){this._show(this.navEl,false);this.hideMask();YAHOO.util.Dom.removeClass(this.cal.oDomContainer,A.NAV_VISIBLE);this.cal.hideNavEvent.fire();}},showMask:function(){this._show(this.maskEl,true);if(this.__isIEQuirks){this._syncMask();}},hideMask:function(){this._show(this.maskEl,false);},getMonth:function(){return this._month;},getYear:function(){return this._year;},setMonth:function(A){if(A>=0&&A<12){this._month=A;}this._updateMonthUI();},setYear:function(B){var A=YAHOO.widget.CalendarNavigator.YR_PATTERN;if(YAHOO.lang.isNumber(B)&&A.test(B+"")){this._year=B;}this._updateYearUI();},render:function(){this.cal.beforeRenderNavEvent.fire();if(!this.__rendered){this.createNav();this.createMask();this.applyListeners();this.__rendered=true;}this.cal.renderNavEvent.fire();},createNav:function(){var B=YAHOO.widget.CalendarNavigator;var C=this._doc;var D=C.createElement("div");D.className=B.CLASSES.NAV;var A=this.renderNavContents([]);D.innerHTML=A.join("");this.cal.oDomContainer.appendChild(D);this.navEl=D;this.yearEl=C.getElementById(this.id+B.YEAR_SUFFIX);this.monthEl=C.getElementById(this.id+B.MONTH_SUFFIX);this.errorEl=C.getElementById(this.id+B.ERROR_SUFFIX);this.submitEl=C.getElementById(this.id+B.SUBMIT_SUFFIX);this.cancelEl=C.getElementById(this.id+B.CANCEL_SUFFIX);if(YAHOO.env.ua.gecko&&this.yearEl&&this.yearEl.type=="text"){this.yearEl.setAttribute("autocomplete","off");}this._setFirstLastElements();},createMask:function(){var B=YAHOO.widget.CalendarNavigator.CLASSES;var A=this._doc.createElement("div");A.className=B.MASK;this.cal.oDomContainer.appendChild(A);this.maskEl=A;},_syncMask:function(){var B=this.cal.oDomContainer;if(B&&this.maskEl){var A=YAHOO.util.Dom.getRegion(B);YAHOO.util.Dom.setStyle(this.maskEl,"width",A.right-A.left+"px");YAHOO.util.Dom.setStyle(this.maskEl,"height",A.bottom-A.top+"px");}},renderNavContents:function(A){var D=YAHOO.widget.CalendarNavigator,E=D.CLASSES,B=A;B[B.length]='<div class="'+E.MONTH+'">';this.renderMonth(B);B[B.length]="</div>";B[B.length]='<div class="'+E.YEAR+'">';this.renderYear(B);B[B.length]="</div>";B[B.length]='<div class="'+E.BUTTONS+'">';this.renderButtons(B);B[B.length]="</div>";B[B.length]='<div class="'+E.ERROR+'" id="'+this.id+D.ERROR_SUFFIX+'"></div>';return B;},renderMonth:function(D){var G=YAHOO.widget.CalendarNavigator,H=G.CLASSES;var I=this.id+G.MONTH_SUFFIX,F=this.__getCfg("monthFormat"),A=this.cal.cfg.getProperty((F==YAHOO.widget.Calendar.SHORT)?"MONTHS_SHORT":"MONTHS_LONG"),E=D;if(A&&A.length>0){E[E.length]='<label for="'+I+'">';E[E.length]=this.__getCfg("month",true);E[E.length]="</label>";E[E.length]='<select name="'+I+'" id="'+I+'" class="'+H.MONTH_CTRL+'">';for(var B=0;B<A.length;B++){E[E.length]='<option value="'+B+'">';E[E.length]=A[B];E[E.length]="</option>";}E[E.length]="</select>";}return E;},renderYear:function(B){var E=YAHOO.widget.CalendarNavigator,F=E.CLASSES;var G=this.id+E.YEAR_SUFFIX,A=E.YR_MAX_DIGITS,D=B;D[D.length]='<label for="'+G+'">';D[D.length]=this.__getCfg("year",true);D[D.length]="</label>";D[D.length]='<input type="text" name="'+G+'" id="'+G+'" class="'+F.YEAR_CTRL+'" maxlength="'+A+'"/>';return D;},renderButtons:function(A){var D=YAHOO.widget.CalendarNavigator.CLASSES;var B=A;B[B.length]='<span class="'+D.BUTTON+" "+D.DEFAULT+'">';B[B.length]='<button type="button" id="'+this.id+"_submit"+'">';B[B.length]=this.__getCfg("submit",true);B[B.length]="</button>";B[B.length]="</span>";B[B.length]='<span class="'+D.BUTTON+'">';B[B.length]='<button type="button" id="'+this.id+"_cancel"+'">';B[B.length]=this.__getCfg("cancel",true);B[B.length]="</button>";B[B.length]="</span>";return B;},applyListeners:function(){var B=YAHOO.util.Event;function A(){if(this.validate()){this.setYear(this._getYearFromUI());}}function C(){this.setMonth(this._getMonthFromUI());}B.on(this.submitEl,"click",this.submit,this,true);B.on(this.cancelEl,"click",this.cancel,this,true);B.on(this.yearEl,"blur",A,this,true);B.on(this.monthEl,"change",C,this,true);if(this.__isIEQuirks){YAHOO.util.Event.on(this.cal.oDomContainer,"resize",this._syncMask,this,true);}this.applyKeyListeners();},purgeListeners:function(){var A=YAHOO.util.Event;A.removeListener(this.submitEl,"click",this.submit);A.removeListener(this.cancelEl,"click",this.cancel);A.removeListener(this.yearEl,"blur");A.removeListener(this.monthEl,"change");if(this.__isIEQuirks){A.removeListener(this.cal.oDomContainer,"resize",this._syncMask);}this.purgeKeyListeners();},applyKeyListeners:function(){var D=YAHOO.util.Event,A=YAHOO.env.ua;var C=(A.ie||A.webkit)?"keydown":"keypress";var B=(A.ie||A.opera||A.webkit)?"keydown":"keypress";D.on(this.yearEl,"keypress",this._handleEnterKey,this,true);D.on(this.yearEl,C,this._handleDirectionKeys,this,true);D.on(this.lastCtrl,B,this._handleTabKey,this,true);D.on(this.firstCtrl,B,this._handleShiftTabKey,this,true);},purgeKeyListeners:function(){var D=YAHOO.util.Event,A=YAHOO.env.ua;var C=(A.ie||A.webkit)?"keydown":"keypress";var B=(A.ie||A.opera||A.webkit)?"keydown":"keypress";D.removeListener(this.yearEl,"keypress",this._handleEnterKey);D.removeListener(this.yearEl,C,this._handleDirectionKeys);D.removeListener(this.lastCtrl,B,this._handleTabKey);D.removeListener(this.firstCtrl,B,this._handleShiftTabKey);},submit:function(){if(this.validate()){this.hide();this.setMonth(this._getMonthFromUI());this.setYear(this._getYearFromUI());var B=this.cal;var C=this;function D(){B.setYear(C.getYear());B.setMonth(C.getMonth());B.render();}var A=YAHOO.widget.CalendarNavigator.UPDATE_DELAY;if(A>0){window.setTimeout(D,A);}else{D();}}},cancel:function(){this.hide();},validate:function(){if(this._getYearFromUI()!==null){this.clearErrors();return true;}else{this.setYearError();this.setError(this.__getCfg("invalidYear",true));return false;}},setError:function(A){if(this.errorEl){this.errorEl.innerHTML=A;this._show(this.errorEl,true);}},clearError:function(){if(this.errorEl){this.errorEl.innerHTML="";this._show(this.errorEl,false);}},setYearError:function(){YAHOO.util.Dom.addClass(this.yearEl,YAHOO.widget.CalendarNavigator.CLASSES.INVALID);},clearYearError:function(){YAHOO.util.Dom.removeClass(this.yearEl,YAHOO.widget.CalendarNavigator.CLASSES.INVALID);},clearErrors:function(){this.clearError();this.clearYearError();},setInitialFocus:function(){var A=this.submitEl,C=this.__getCfg("initialFocus");if(C&&C.toLowerCase){C=C.toLowerCase();if(C=="year"){A=this.yearEl;try{this.yearEl.select();}catch(B){}}else{if(C=="month"){A=this.monthEl;}}}if(A&&YAHOO.lang.isFunction(A.focus)){try{A.focus();}catch(B){}}},erase:function(){if(this.__rendered){this.purgeListeners();this.yearEl=null;this.monthEl=null;this.errorEl=null;this.submitEl=null;this.cancelEl=null;this.firstCtrl=null;this.lastCtrl=null;if(this.navEl){this.navEl.innerHTML="";}var B=this.navEl.parentNode;if(B){B.removeChild(this.navEl);}this.navEl=null;var A=this.maskEl.parentNode;if(A){A.removeChild(this.maskEl);}this.maskEl=null;this.__rendered=false;}},destroy:function(){this.erase();this._doc=null;this.cal=null;this.id=null;},_show:function(B,A){if(B){YAHOO.util.Dom.setStyle(B,"display",(A)?"block":"none");}},_getMonthFromUI:function(){if(this.monthEl){return this.monthEl.selectedIndex;}else{return 0;}},_getYearFromUI:function(){var B=YAHOO.widget.CalendarNavigator;var A=null;if(this.yearEl){var C=this.yearEl.value;C=C.replace(B.TRIM,"$1");if(B.YR_PATTERN.test(C)){A=parseInt(C,10);}}return A;},_updateYearUI:function(){if(this.yearEl&&this._year!==null){this.yearEl.value=this._year;}},_updateMonthUI:function(){if(this.monthEl){this.monthEl.selectedIndex=this._month;}},_setFirstLastElements:function(){this.firstCtrl=this.monthEl;this.lastCtrl=this.cancelEl;if(this.__isMac){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420){this.firstCtrl=this.monthEl;this.lastCtrl=this.yearEl;}if(YAHOO.env.ua.gecko){this.firstCtrl=this.yearEl;this.lastCtrl=this.yearEl;}}},_handleEnterKey:function(B){var A=YAHOO.util.KeyListener.KEY;if(YAHOO.util.Event.getCharCode(B)==A.ENTER){YAHOO.util.Event.preventDefault(B);this.submit();}},_handleDirectionKeys:function(H){var G=YAHOO.util.Event,A=YAHOO.util.KeyListener.KEY,D=YAHOO.widget.CalendarNavigator;var F=(this.yearEl.value)?parseInt(this.yearEl.value,10):null;if(isFinite(F)){var B=false;switch(G.getCharCode(H)){case A.UP:this.yearEl.value=F+D.YR_MINOR_INC;B=true;break;case A.DOWN:this.yearEl.value=Math.max(F-D.YR_MINOR_INC,0);B=true;break;case A.PAGE_UP:this.yearEl.value=F+D.YR_MAJOR_INC;B=true;break;case A.PAGE_DOWN:this.yearEl.value=Math.max(F-D.YR_MAJOR_INC,0);B=true;break;default:break;}if(B){G.preventDefault(H);try{this.yearEl.select();}catch(C){}}}},_handleTabKey:function(D){var C=YAHOO.util.Event,A=YAHOO.util.KeyListener.KEY;if(C.getCharCode(D)==A.TAB&&!D.shiftKey){try{C.preventDefault(D);this.firstCtrl.focus();}catch(B){}}},_handleShiftTabKey:function(D){var C=YAHOO.util.Event,A=YAHOO.util.KeyListener.KEY;if(D.shiftKey&&C.getCharCode(D)==A.TAB){try{C.preventDefault(D);this.lastCtrl.focus();}catch(B){}}},__getCfg:function(D,B){var C=YAHOO.widget.CalendarNavigator._DEFAULT_CFG;var A=this.cal.cfg.getProperty("navigator");if(B){return(A!==true&&A.strings&&A.strings[D])?A.strings[D]:C.strings[D];}else{return(A!==true&&A[D])?A[D]:C[D];}},__isMac:(navigator.userAgent.toLowerCase().indexOf("macintosh")!=-1)};YAHOO.register("calendar",YAHOO.widget.Calendar,{version:"2.5.2",build:"1076"});
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../extensions/input-calendar.js

UX.calendarcount=0;function InputValueCalendar(elmnt){this.element=elmnt;this.currValue="";this.m_bFirstSetValue=true;this.m_bPopup=false;this.m_sInputId='';}
function calendarValueChanged(pThis,sNewValue){var oEvt=pThis.element.ownerDocument.createEvent("MutationEvents");if(oEvt.initMutationEvent===undefined){oEvt.initMutationEvent=oEvt.initEvent;}
oEvt.initMutationEvent("control-value-changed",true,true,null,pThis.currValue,sNewValue,null,null);spawn(function(){FormsProcessor.dispatchEvent(pThis.element,oEvt);});}
InputValueCalendar.prototype.currentCalendarValue=function(){var date=this.m_value.getSelectedDates()[0];var yr=date.getYear();var mn=date.getMonth()+1;var da=date.getDate();var xsdDate;yr=(yr>1900)?yr:(1900+yr);mn=(mn<10)?('0'+mn):mn;da=(da<10)?('0'+da):da;this.currValue=mn+'/'+da+'/'+yr;xsdDate=yr+'-'+mn+'-'+da;if(this.m_bPopup){YAHOO.util.Dom.get(this.m_sInputId).value=xsdDate;}
return xsdDate;}
InputValueCalendar.prototype.onDocumentReady=function(){if(this.element.ownerDocument.media!="print"){var pThis=this,appearance=this.element.parentNode.getAttribute("appearance"),datatype=this.element.parentNode.getAttribute("datatype"),xf4hdatatype=XF4HProcessor.getAttribute(this.element.parentNode,"datatype");if(appearance==='yui:popup-calendar'||((datatype==='xsd:date'||datatype==='xf:date'||datatype==='xforms:date'||xf4hdatatype==='date')&&(appearance===null||appearance==='compact'))){this.m_bPopup=true;this.m_sInputId="ux-calendar-input-"+UX.calendarcount;this.element.innerHTML="<div id='ux-calendar-bg"+UX.calendarcount+"' class='ux-calendar-bg'>"+"<input type='text' disabled='true' class='ux-input-compact-calendar' id='"+
this.m_sInputId+"'></input></div>";var calendarMenu=new YAHOO.widget.Overlay("calendarmenu"+UX.calendarcount,{visible:false});var button=new YAHOO.widget.Button({type:"menu",id:"calendarpicker"+UX.calendarcount,label:"",menu:calendarMenu,container:"ux-calendar-bg"+UX.calendarcount});var calcount=UX.calendarcount;button.on("appendTo",function(){calendarMenu.setBody("&#32;");calendarMenu.body.id="calendarcontainer"+calcount;calendarMenu.render(this.get("container"));});button.on("click",function(){if(!pThis.m_value){pThis.m_value=new YAHOO.widget.Calendar("ux-calendar-"+calcount,calendarMenu.body.id);if(pThis.currValue){pThis.m_value.setYear(pThis.currValue.substring(6,10));pThis.m_value.setMonth(pThis.currValue.substring(0,2)-1);pThis.m_value.select(pThis.currValue);}
pThis.m_value.render();pThis.m_value.changePageEvent.subscribe(function(){window.setTimeout(function(){calendarMenu.show();},0);});pThis.m_value.selectEvent.subscribe(function(){calendarValueChanged(pThis,pThis.currentCalendarValue());calendarMenu.hide();pThis.m_value.hide();});}
pThis.m_value.show();calendarMenu.show();});}else{this.element.innerHTML="<div id='ux-calendar-bg"+UX.calendarcount+"' class='ux-calendar-bg'></div>";this.m_value=new YAHOO.widget.Calendar("ux-calendar-"+UX.calendarcount,"ux-calendar-bg"+UX.calendarcount);this.m_value.selectEvent.subscribe(function(){calendarValueChanged(pThis,pThis.currentCalendarValue());});this.m_value.render();}
UX.calendarcount++;}};InputValueCalendar.prototype.setValue=function(sValue){var bRet=false;var yr;var mn;var da;var calendarDate;if(sValue.match(/^(\d{4})\-(\d{2})\-(\d{2})/)){yr=RegExp.$1;mn=RegExp.$2;da=RegExp.$3;calendarDate=mn+'/'+da+'/'+yr;if(this.currValue!=calendarDate||this.m_bFirstSetValue){this.currValue=calendarDate;if(this.m_bPopup){YAHOO.util.Dom.get(this.m_sInputId).value=sValue;}
if(this.m_value){this.m_value.setYear(yr);this.m_value.setMonth(mn-1);this.m_value.select(calendarDate);this.m_value.render();}
bRet=true;if(this.m_bFirstSetValue){this.m_bFirstSetValue=false;}}}
return bRet;};
//from: http://yui.yahooapis.com/2.5.2/build/slider/slider-min.js

YAHOO.widget.Slider=function(C,A,B,D){YAHOO.widget.Slider.ANIM_AVAIL=(!YAHOO.lang.isUndefined(YAHOO.util.Anim));if(C){this.init(C,A,true);this.initSlider(D);this.initThumb(B);}};YAHOO.widget.Slider.getHorizSlider=function(B,C,E,D,A){return new YAHOO.widget.Slider(B,B,new YAHOO.widget.SliderThumb(C,B,E,D,0,0,A),"horiz");};YAHOO.widget.Slider.getVertSlider=function(C,D,A,E,B){return new YAHOO.widget.Slider(C,C,new YAHOO.widget.SliderThumb(D,C,0,0,A,E,B),"vert");};YAHOO.widget.Slider.getSliderRegion=function(C,D,F,E,A,G,B){return new YAHOO.widget.Slider(C,C,new YAHOO.widget.SliderThumb(D,C,F,E,A,G,B),"region");};YAHOO.widget.Slider.ANIM_AVAIL=false;YAHOO.extend(YAHOO.widget.Slider,YAHOO.util.DragDrop,{dragOnly:true,initSlider:function(A){this.type=A;this.createEvent("change",this);this.createEvent("slideStart",this);this.createEvent("slideEnd",this);this.isTarget=false;this.animate=YAHOO.widget.Slider.ANIM_AVAIL;this.backgroundEnabled=true;this.tickPause=40;this.enableKeys=true;this.keyIncrement=20;this.moveComplete=true;this.animationDuration=0.2;this.SOURCE_UI_EVENT=1;this.SOURCE_SET_VALUE=2;this.valueChangeSource=0;this._silent=false;this.lastOffset=[0,0];},initThumb:function(B){var A=this;this.thumb=B;B.cacheBetweenDrags=true;if(B._isHoriz&&B.xTicks&&B.xTicks.length){this.tickPause=Math.round(360/B.xTicks.length);}else{if(B.yTicks&&B.yTicks.length){this.tickPause=Math.round(360/B.yTicks.length);}}B.onAvailable=function(){return A.setStartSliderState();};B.onMouseDown=function(){return A.focus();};B.startDrag=function(){A._slideStart();};B.onDrag=function(){A.fireEvents(true);};B.onMouseUp=function(){A.thumbMouseUp();};},onAvailable:function(){var A=YAHOO.util.Event;A.on(this.id,"keydown",this.handleKeyDown,this,true);A.on(this.id,"keypress",this.handleKeyPress,this,true);},handleKeyPress:function(C){if(this.enableKeys){var A=YAHOO.util.Event;var B=A.getCharCode(C);switch(B){case 37:case 38:case 39:case 40:case 36:case 35:A.preventDefault(C);break;default:}}},handleKeyDown:function(E){if(this.enableKeys){var G=YAHOO.util.Event;var C=G.getCharCode(E),I=this.thumb;var B=this.getXValue(),F=this.getYValue();var H=false;var D=true;switch(C){case 37:B-=this.keyIncrement;break;case 38:F-=this.keyIncrement;break;case 39:B+=this.keyIncrement;break;case 40:F+=this.keyIncrement;break;case 36:B=I.leftConstraint;F=I.topConstraint;break;case 35:B=I.rightConstraint;F=I.bottomConstraint;break;default:D=false;}if(D){if(I._isRegion){this.setRegionValue(B,F,true);}else{var A=(I._isHoriz)?B:F;this.setValue(A,true);}G.stopEvent(E);}}},setStartSliderState:function(){this.setThumbCenterPoint();this.baselinePos=YAHOO.util.Dom.getXY(this.getEl());this.thumb.startOffset=this.thumb.getOffsetFromParent(this.baselinePos);if(this.thumb._isRegion){if(this.deferredSetRegionValue){this.setRegionValue.apply(this,this.deferredSetRegionValue,true);this.deferredSetRegionValue=null;}else{this.setRegionValue(0,0,true,true,true);}}else{if(this.deferredSetValue){this.setValue.apply(this,this.deferredSetValue,true);this.deferredSetValue=null;}else{this.setValue(0,true,true,true);}}},setThumbCenterPoint:function(){var A=this.thumb.getEl();if(A){this.thumbCenterPoint={x:parseInt(A.offsetWidth/2,10),y:parseInt(A.offsetHeight/2,10)};}},lock:function(){this.thumb.lock();this.locked=true;},unlock:function(){this.thumb.unlock();this.locked=false;},thumbMouseUp:function(){if(!this.isLocked()&&!this.moveComplete){this.endMove();}},onMouseUp:function(){if(!this.isLocked()&&!this.moveComplete){this.endMove();}},getThumb:function(){return this.thumb;},focus:function(){this.valueChangeSource=this.SOURCE_UI_EVENT;var A=this.getEl();if(A.focus){try{A.focus();}catch(B){}}this.verifyOffset();if(this.isLocked()){return false;}else{this._slideStart();return true;}},onChange:function(A,B){},onSlideStart:function(){},onSlideEnd:function(){},getValue:function(){return this.thumb.getValue();},getXValue:function(){return this.thumb.getXValue();},getYValue:function(){return this.thumb.getYValue();},handleThumbChange:function(){},setValue:function(G,C,D,A){this._silent=A;this.valueChangeSource=this.SOURCE_SET_VALUE;if(!this.thumb.available){this.deferredSetValue=arguments;return false;}if(this.isLocked()&&!D){return false;}if(isNaN(G)){return false;}var B=this.thumb;B.lastOffset=[G,G];var F,E;this.verifyOffset(true);if(B._isRegion){return false;}else{if(B._isHoriz){this._slideStart();F=B.initPageX+G+this.thumbCenterPoint.x;this.moveThumb(F,B.initPageY,C);}else{this._slideStart();E=B.initPageY+G+this.thumbCenterPoint.y;this.moveThumb(B.initPageX,E,C);}}return true;},setRegionValue:function(H,A,D,E,B){this._silent=B;this.valueChangeSource=this.SOURCE_SET_VALUE;if(!this.thumb.available){this.deferredSetRegionValue=arguments;return false;}if(this.isLocked()&&!E){return false;}if(isNaN(H)){return false;}var C=this.thumb;C.lastOffset=[H,A];this.verifyOffset(true);if(C._isRegion){this._slideStart();var G=C.initPageX+H+this.thumbCenterPoint.x;var F=C.initPageY+A+this.thumbCenterPoint.y;this.moveThumb(G,F,D);return true;}return false;},verifyOffset:function(B){var A=YAHOO.util.Dom.getXY(this.getEl());if(A){if(A[0]!=this.baselinePos[0]||A[1]!=this.baselinePos[1]){this.thumb.resetConstraints();this.baselinePos=A;return false;}}return true;},moveThumb:function(G,F,E,D){var H=this.thumb;var I=this;if(!H.available){return;}H.setDelta(this.thumbCenterPoint.x,this.thumbCenterPoint.y);var B=H.getTargetCoord(G,F);var C=[B.x,B.y];this._slideStart();if(this.animate&&YAHOO.widget.Slider.ANIM_AVAIL&&H._graduated&&!E){this.lock();this.curCoord=YAHOO.util.Dom.getXY(this.thumb.getEl());setTimeout(function(){I.moveOneTick(C);},this.tickPause);}else{if(this.animate&&YAHOO.widget.Slider.ANIM_AVAIL&&!E){this.lock();var A=new YAHOO.util.Motion(H.id,{points:{to:C}},this.animationDuration,YAHOO.util.Easing.easeOut);A.onComplete.subscribe(function(){I.endMove();});A.animate();}else{H.setDragElPos(G,F);if(!D){this.endMove();}}}},_slideStart:function(){if(!this._sliding){if(!this._silent){this.onSlideStart();this.fireEvent("slideStart");}this._sliding=true;}},_slideEnd:function(){if(this._sliding&&this.moveComplete){if(!this._silent){this.onSlideEnd();this.fireEvent("slideEnd");}this._sliding=false;this._silent=false;this.moveComplete=false;}},moveOneTick:function(B){var E=this.thumb,D;var F=null;if(E._isRegion){F=this._getNextX(this.curCoord,B);var A=(F)?F[0]:this.curCoord[0];F=this._getNextY([A,this.curCoord[1]],B);}else{if(E._isHoriz){F=this._getNextX(this.curCoord,B);}else{F=this._getNextY(this.curCoord,B);}}if(F){this.curCoord=F;this.thumb.alignElWithMouse(E.getEl(),F[0],F[1]);if(!(F[0]==B[0]&&F[1]==B[1])){var C=this;setTimeout(function(){C.moveOneTick(B);},this.tickPause);}else{this.endMove();}}else{this.endMove();}},_getNextX:function(A,B){var D=this.thumb;var F;var C=[];var E=null;if(A[0]>B[0]){F=D.tickSize-this.thumbCenterPoint.x;C=D.getTargetCoord(A[0]-F,A[1]);E=[C.x,C.y];}else{if(A[0]<B[0]){F=D.tickSize+this.thumbCenterPoint.x;C=D.getTargetCoord(A[0]+F,A[1]);E=[C.x,C.y];}else{}}return E;},_getNextY:function(A,B){var D=this.thumb;var F;var C=[];var E=null;if(A[1]>B[1]){F=D.tickSize-this.thumbCenterPoint.y;C=D.getTargetCoord(A[0],A[1]-F);E=[C.x,C.y];}else{if(A[1]<B[1]){F=D.tickSize+this.thumbCenterPoint.y;C=D.getTargetCoord(A[0],A[1]+F);E=[C.x,C.y];}else{}}return E;},b4MouseDown:function(A){this.thumb.autoOffset();this.thumb.resetConstraints();},onMouseDown:function(B){if(!this.isLocked()&&this.backgroundEnabled){var A=YAHOO.util.Event.getPageX(B);var C=YAHOO.util.Event.getPageY(B);this.focus();this.moveThumb(A,C);}},onDrag:function(B){if(!this.isLocked()){var A=YAHOO.util.Event.getPageX(B);var C=YAHOO.util.Event.getPageY(B);this.moveThumb(A,C,true,true);this.fireEvents();}},endMove:function(){this.unlock();this.moveComplete=true;this.fireEvents();},fireEvents:function(C){var B=this.thumb;if(!C){B.cachePosition();}if(!this.isLocked()){if(B._isRegion){var E=B.getXValue();var D=B.getYValue();if(E!=this.previousX||D!=this.previousY){if(!this._silent){this.onChange(E,D);this.fireEvent("change",{x:E,y:D});}}this.previousX=E;this.previousY=D;}else{var A=B.getValue();if(A!=this.previousVal){if(!this._silent){this.onChange(A);this.fireEvent("change",A);}}this.previousVal=A;}this._slideEnd();}},toString:function(){return("Slider ("+this.type+") "+this.id);}});YAHOO.augment(YAHOO.widget.Slider,YAHOO.util.EventProvider);YAHOO.widget.SliderThumb=function(G,B,E,D,A,F,C){if(G){YAHOO.widget.SliderThumb.superclass.constructor.call(this,G,B);this.parentElId=B;}this.isTarget=false;this.tickSize=C;this.maintainOffset=true;this.initSlider(E,D,A,F,C);this.scroll=false;};YAHOO.extend(YAHOO.widget.SliderThumb,YAHOO.util.DD,{startOffset:null,dragOnly:true,_isHoriz:false,_prevVal:0,_graduated:false,getOffsetFromParent0:function(C){var A=YAHOO.util.Dom.getXY(this.getEl());var B=C||YAHOO.util.Dom.getXY(this.parentElId);return[(A[0]-B[0]),(A[1]-B[1])];},getOffsetFromParent:function(H){var A=this.getEl(),E;if(!this.deltaOffset){var I=YAHOO.util.Dom.getXY(A);var F=H||YAHOO.util.Dom.getXY(this.parentElId);E=[(I[0]-F[0]),(I[1]-F[1])];var B=parseInt(YAHOO.util.Dom.getStyle(A,"left"),10);var K=parseInt(YAHOO.util.Dom.getStyle(A,"top"),10);var D=B-E[0];var C=K-E[1];if(isNaN(D)||isNaN(C)){}else{this.deltaOffset=[D,C];}}else{var J=parseInt(YAHOO.util.Dom.getStyle(A,"left"),10);var G=parseInt(YAHOO.util.Dom.getStyle(A,"top"),10);E=[J+this.deltaOffset[0],G+this.deltaOffset[1]];}return E;},initSlider:function(D,C,A,E,B){this.initLeft=D;this.initRight=C;this.initUp=A;this.initDown=E;this.setXConstraint(D,C,B);this.setYConstraint(A,E,B);if(B&&B>1){this._graduated=true;}this._isHoriz=(D||C);this._isVert=(A||E);this._isRegion=(this._isHoriz&&this._isVert);},clearTicks:function(){YAHOO.widget.SliderThumb.superclass.clearTicks.call(this);this.tickSize=0;this._graduated=false;},getValue:function(){return(this._isHoriz)?this.getXValue():this.getYValue();},getXValue:function(){if(!this.available){return 0;}var A=this.getOffsetFromParent();if(YAHOO.lang.isNumber(A[0])){this.lastOffset=A;return(A[0]-this.startOffset[0]);}else{return(this.lastOffset[0]-this.startOffset[0]);}},getYValue:function(){if(!this.available){return 0;}var A=this.getOffsetFromParent();if(YAHOO.lang.isNumber(A[1])){this.lastOffset=A;return(A[1]-this.startOffset[1]);}else{return(this.lastOffset[1]-this.startOffset[1]);}},toString:function(){return"SliderThumb "+this.id;},onChange:function(A,B){}});YAHOO.widget.DualSlider=function(E,B,D,A){var C=this,G=YAHOO.lang;this.minSlider=E;this.maxSlider=B;this.activeSlider=E;this.isHoriz=E.thumb._isHoriz;A=YAHOO.lang.isArray(A)?A:[0,D];A[0]=Math.min(Math.max(parseInt(A[0],10)|0,0),D);A[1]=Math.max(Math.min(parseInt(A[1],10)|0,D),0);if(A[0]>A[1]){A.splice(0,2,A[1],A[0]);}var F={min:false,max:false};this.minSlider.thumb.onAvailable=function(){E.setStartSliderState();F.min=true;if(F.max){E.setValue(A[0],true,true,true);B.setValue(A[1],true,true,true);C.updateValue(true);C.fireEvent("ready",C);}};this.maxSlider.thumb.onAvailable=function(){B.setStartSliderState();F.max=true;if(F.min){E.setValue(A[0],true,true,true);B.setValue(A[1],true,true,true);C.updateValue(true);C.fireEvent("ready",C);}};E.onMouseDown=function(H){C._handleMouseDown(H);};B.onMouseDown=function(H){YAHOO.util.Event.stopEvent(H);};E.onDrag=B.onDrag=function(H){C._handleDrag(H);};E.subscribe("change",this._handleMinChange,E,this);E.subscribe("slideStart",this._handleSlideStart,E,this);E.subscribe("slideEnd",this._handleSlideEnd,E,this);B.subscribe("change",this._handleMaxChange,B,this);B.subscribe("slideStart",this._handleSlideStart,B,this);B.subscribe("slideEnd",this._handleSlideEnd,B,this);this.createEvent("ready",this);this.createEvent("change",this);this.createEvent("slideStart",this);this.createEvent("slideEnd",this);};YAHOO.widget.DualSlider.prototype={minVal:-1,maxVal:-1,minRange:0,_handleSlideStart:function(B,A){this.fireEvent("slideStart",A);},_handleSlideEnd:function(B,A){this.fireEvent("slideEnd",A);},_handleDrag:function(A){YAHOO.widget.Slider.prototype.onDrag.call(this.activeSlider,A);},_handleMinChange:function(){this.activeSlider=this.minSlider;this.updateValue();},_handleMaxChange:function(){this.activeSlider=this.maxSlider;this.updateValue();},setValues:function(E,H,F,B,G){var C=this.minSlider,J=this.maxSlider,A=C.thumb,I=J.thumb,K=this,D={min:false,max:false};if(A._isHoriz){A.setXConstraint(A.leftConstraint,I.rightConstraint,A.tickSize);I.setXConstraint(A.leftConstraint,I.rightConstraint,I.tickSize);}else{A.setYConstraint(A.topConstraint,I.bottomConstraint,A.tickSize);I.setYConstraint(A.topConstraint,I.bottomConstraint,I.tickSize);}this._oneTimeCallback(C,"slideEnd",function(){D.min=true;if(D.max){K.updateValue(G);setTimeout(function(){K._cleanEvent(C,"slideEnd");K._cleanEvent(J,"slideEnd");},0);}});this._oneTimeCallback(J,"slideEnd",function(){D.max=true;if(D.min){K.updateValue(G);setTimeout(function(){K._cleanEvent(C,"slideEnd");K._cleanEvent(J,"slideEnd");},0);}});C.setValue(E,F,B,G);J.setValue(H,F,B,G);},setMinValue:function(C,E,F,B){var D=this.minSlider;this.activeSlider=D;var A=this;this._oneTimeCallback(D,"slideEnd",function(){A.updateValue(B);setTimeout(function(){A._cleanEvent(D,"slideEnd");},0);});D.setValue(C,E,F,B);},setMaxValue:function(A,E,F,C){var D=this.maxSlider;this.activeSlider=D;var B=this;this._oneTimeCallback(D,"slideEnd",function(){B.updateValue(C);setTimeout(function(){B._cleanEvent(D,"slideEnd");},0);});D.setValue(A,E,F,C);},updateValue:function(F){var B=this.minSlider.getValue(),G=this.maxSlider.getValue(),C=false;if(B!=this.minVal||G!=this.maxVal){C=true;var A=this.minSlider.thumb;var I=this.maxSlider.thumb;var D=this.minSlider.thumbCenterPoint.x+this.maxSlider.thumbCenterPoint.x;var E=Math.max(G-D-this.minRange,0);var H=Math.min(-B-D-this.minRange,0);if(this.isHoriz){E=Math.min(E,I.rightConstraint);A.setXConstraint(A.leftConstraint,E,A.tickSize);I.setXConstraint(H,I.rightConstraint,I.tickSize);}else{E=Math.min(E,I.bottomConstraint);A.setYConstraint(A.leftConstraint,E,A.tickSize);I.setYConstraint(H,I.bottomConstraint,I.tickSize);}}this.minVal=B;this.maxVal=G;if(C&&!F){this.fireEvent("change",this);}},selectActiveSlider:function(C){var B=this.minSlider.getValue(),A=this.maxSlider.getValue(),D;if(this.isHoriz){D=YAHOO.util.Event.getPageX(C)-this.minSlider.initPageX-this.minSlider.thumbCenterPoint.x;}else{D=YAHOO.util.Event.getPageY(C)-this.minSlider.initPageY-this.minSlider.thumbCenterPoint.y;}if(D<B){this.activeSlider=this.minSlider;}else{if(D>A){this.activeSlider=this.maxSlider;}else{this.activeSlider=D*2>A+B?this.maxSlider:this.minSlider;}}},_handleMouseDown:function(A){this.selectActiveSlider(A);YAHOO.widget.Slider.prototype.onMouseDown.call(this.activeSlider,A);},_oneTimeCallback:function(C,A,B){C.subscribe(A,function(){C.unsubscribe(A,arguments.callee);B.apply({},[].slice.apply(arguments));});},_cleanEvent:function(H,B){if(H.__yui_events&&H.events[B]){var G,F,A;for(F=H.__yui_events.length;F>=0;--F){if(H.__yui_events[F].type===B){G=H.__yui_events[F];break;}}if(G){var E=G.subscribers,C=[],D=0;for(F=0,A=E.length;F<A;++F){if(E[F]){C[D++]=E[F];}}G.subscribers=C;}}}};YAHOO.augment(YAHOO.widget.DualSlider,YAHOO.util.EventProvider);YAHOO.widget.Slider.getHorizDualSlider=function(F,C,K,G,H,B){var A,J;var D=YAHOO.widget,E=D.Slider,I=D.SliderThumb;A=new I(C,F,0,G,0,0,H);J=new I(K,F,0,G,0,0,H);return new D.DualSlider(new E(F,F,A,"horiz"),new E(F,F,J,"horiz"),G,B);};YAHOO.widget.Slider.getVertDualSlider=function(F,C,K,G,H,B){var A,J;var D=YAHOO.widget,E=D.Slider,I=D.SliderThumb;A=new I(C,F,0,0,0,G,H);J=new I(K,F,0,0,0,G,H);return new D.DualSlider(new E(F,F,A,"vert"),new E(F,F,J,"vert"),G,B);};YAHOO.register("slider",YAHOO.widget.Slider,{version:"2.5.2",build:"1076"});
//from: http://yui.yahooapis.com/2.5.2/build/colorpicker/colorpicker-min.js

YAHOO.util.Color=function(){var A="0123456789ABCDEF",B=YAHOO.lang;return{real2dec:function(C){return Math.min(255,Math.round(C*256));},hsv2rgb:function(G,N,L){if(B.isArray(G)){return this.hsv2rgb.call(this,G[0],G[1],G[2]);}var C,H,K,F,I,E,D,M;F=Math.floor((G/60)%6);I=(G/60)-F;E=L*(1-N);D=L*(1-I*N);M=L*(1-(1-I)*N);switch(F){case 0:C=L;H=M;K=E;break;case 1:C=D;H=L;K=E;break;case 2:C=E;H=L;K=M;break;case 3:C=E;H=D;K=L;break;case 4:C=M;H=E;K=L;break;case 5:C=L;H=E;K=D;break;}var J=this.real2dec;return[J(C),J(H),J(K)];},rgb2hsv:function(C,G,H){if(B.isArray(C)){return this.rgb2hsv.call(this,C[0],C[1],C[2]);}C=C/255;G=G/255;H=H/255;var D,I,K,F,L,J;D=Math.min(Math.min(C,G),H);I=Math.max(Math.max(C,G),H);K=I-D;switch(I){case D:F=0;break;case C:F=60*(G-H)/K;if(G<H){F+=360;}break;case G:F=(60*(H-C)/K)+120;break;case H:F=(60*(C-G)/K)+240;break;}L=(I===0)?0:1-(D/I);var E=[Math.round(F),L,I];return E;},rgb2hex:function(E,D,C){if(B.isArray(E)){return this.rgb2hex.call(this,E[0],E[1],E[2]);}var F=this.dec2hex;return F(E)+F(D)+F(C);},dec2hex:function(C){C=parseInt(C,10);C=(B.isNumber(C))?C:0;C=(C>255||C<0)?0:C;return A.charAt((C-C%16)/16)+A.charAt(C%16);},hex2dec:function(E){var D=function(F){return A.indexOf(F.toUpperCase());};var C=E.split("");return((D(C[0])*16)+D(C[1]));},hex2rgb:function(C){var D=this.hex2dec;return[D(C.substr(0,2)),D(C.substr(2,2)),D(C.substr(4,2))];},websafe:function(E,D,C){if(B.isArray(E)){return this.websafe.call(this,E[0],E[1],E[2]);}var F=function(G){if(B.isNumber(G)){G=Math.min(Math.max(0,G),255);var H,I;for(H=0;H<256;H=H+51){I=H+51;if(G>=H&&G<=I){return(G-H>25)?I:H;}}}return G;};return[F(E),F(D),F(C)];}};}();(function(){var E=0;var R=function(){var b=document.createElement("div");if(this.CSS.BASE){b.className=this.CSS.BASE;}return b;};YAHOO.widget.ColorPicker=function(h,b){E=E+1;b=b||{};if(arguments.length===1&&!YAHOO.lang.isString(h)&&!h.nodeName){b=h;h=b.element||null;}if(!h&&!b.element){h=R.call(this,b);}YAHOO.widget.ColorPicker.superclass.constructor.call(this,h,b);};YAHOO.extend(YAHOO.widget.ColorPicker,YAHOO.util.Element);var Q=YAHOO.widget.ColorPicker.prototype,P=YAHOO.widget.Slider,e=YAHOO.util.Color,C=YAHOO.util.Dom,f=YAHOO.util.Event,g=YAHOO.lang,J=g.substitute;var a="yui-picker";Q.ID={R:a+"-r",R_HEX:a+"-rhex",G:a+"-g",G_HEX:a+"-ghex",B:a+"-b",B_HEX:a+"-bhex",H:a+"-h",S:a+"-s",V:a+"-v",PICKER_BG:a+"-bg",PICKER_THUMB:a+"-thumb",HUE_BG:a+"-hue-bg",HUE_THUMB:a+"-hue-thumb",HEX:a+"-hex",SWATCH:a+"-swatch",WEBSAFE_SWATCH:a+"-websafe-swatch",CONTROLS:a+"-controls",RGB_CONTROLS:a+"-rgb-controls",HSV_CONTROLS:a+"-hsv-controls",HEX_CONTROLS:a+"-hex-controls",HEX_SUMMARY:a+"-hex-summary",CONTROLS_LABEL:a+"-controls-label"};Q.TXT={ILLEGAL_HEX:"Illegal hex value entered",SHOW_CONTROLS:"Show color details",HIDE_CONTROLS:"Hide color details",CURRENT_COLOR:"Currently selected color: {rgb}",CLOSEST_WEBSAFE:"Closest websafe color: {rgb}. Click to select.",R:"R",G:"G",B:"B",H:"H",S:"S",V:"V",HEX:"#",DEG:"\u00B0",PERCENT:"%"};Q.IMAGE={PICKER_THUMB:"../../build/colorpicker/assets/picker_thumb.png",HUE_THUMB:"../../build/colorpicker/assets/hue_thumb.png"};Q.DEFAULT={PICKER_SIZE:180};Q.OPT={HUE:"hue",SATURATION:"saturation",VALUE:"value",RED:"red",GREEN:"green",BLUE:"blue",HSV:"hsv",RGB:"rgb",WEBSAFE:"websafe",HEX:"hex",PICKER_SIZE:"pickersize",SHOW_CONTROLS:"showcontrols",SHOW_RGB_CONTROLS:"showrgbcontrols",SHOW_HSV_CONTROLS:"showhsvcontrols",SHOW_HEX_CONTROLS:"showhexcontrols",SHOW_HEX_SUMMARY:"showhexsummary",SHOW_WEBSAFE:"showwebsafe",CONTAINER:"container",IDS:"ids",ELEMENTS:"elements",TXT:"txt",IMAGES:"images",ANIMATE:"animate"};var S=function(){var b=this.get(this.OPT.PICKER_SIZE),i=this.get(this.OPT.HUE);i=b-Math.round(i/360*b);if(i===b){i=0;}this.hueSlider.setValue(i);};var d=function(){var h=this.get(this.OPT.PICKER_SIZE),i=this.get(this.OPT.SATURATION),b=this.get(this.OPT.VALUE);i=Math.round(i*h/100);b=Math.round(h-(b*h/100));this.pickerSlider.setRegionValue(i,b);};var T=function(){S.call(this);d.call(this);};Q.setValue=function(h,b){b=(b)||false;this.set(this.OPT.RGB,h,b);T.call(this);};Q.hueSlider=null;Q.pickerSlider=null;var X=function(){var b=this.get(this.OPT.PICKER_SIZE),i=(b-this.hueSlider.getValue())/b;i=Math.round(i*360);return(i===360)?0:i;};var O=function(){return this.pickerSlider.getXValue()/this.get(this.OPT.PICKER_SIZE);};var N=function(){var b=this.get(this.OPT.PICKER_SIZE);return(b-this.pickerSlider.getYValue())/b;};var M=function(){var i=this.get(this.OPT.RGB),k=this.get(this.OPT.WEBSAFE),j=this.getElement(this.ID.SWATCH),h=i.join(","),b=this.get(this.OPT.TXT);C.setStyle(j,"background-color","rgb("+h+")");j.title=g.substitute(b.CURRENT_COLOR,{"rgb":"#"+this.get(this.OPT.HEX)});j=this.getElement(this.ID.WEBSAFE_SWATCH);h=k.join(",");C.setStyle(j,"background-color","rgb("+h+")");j.title=g.substitute(b.CLOSEST_WEBSAFE,{"rgb":"#"+e.rgb2hex(k)});};var Z=function(){var k=X.call(this),j=O.call(this),b=N.call(this);var i=e.hsv2rgb(k,j,b);this.set(this.OPT.RGB,i);};var B=function(){this.getElement(this.ID.H).value=this.get(this.OPT.HUE);this.getElement(this.ID.S).value=this.get(this.OPT.SATURATION);this.getElement(this.ID.V).value=this.get(this.OPT.VALUE);this.getElement(this.ID.R).value=this.get(this.OPT.RED);this.getElement(this.ID.R_HEX).innerHTML=e.dec2hex(this.get(this.OPT.RED));this.getElement(this.ID.G).value=this.get(this.OPT.GREEN);this.getElement(this.ID.G_HEX).innerHTML=e.dec2hex(this.get(this.OPT.GREEN));this.getElement(this.ID.B).value=this.get(this.OPT.BLUE);this.getElement(this.ID.B_HEX).innerHTML=e.dec2hex(this.get(this.OPT.BLUE));this.getElement(this.ID.HEX).value=this.get(this.OPT.HEX);};var Y=function(k){var i=X.call(this);this.set(this.OPT.HUE,i,true);var b=e.hsv2rgb(i,1,1);var j="rgb("+b.join(",")+")";C.setStyle(this.getElement(this.ID.PICKER_BG),"background-color",j);if(this.hueSlider.valueChangeSource===this.hueSlider.SOURCE_UI_EVENT){Z.call(this);}B.call(this);M.call(this);};var H=function(i){var h=O.call(this),b=N.call(this);this.set(this.OPT.SATURATION,Math.round(h*100),true);this.set(this.OPT.VALUE,Math.round(b*100),true);if(this.pickerSlider.valueChangeSource===this.pickerSlider.SOURCE_UI_EVENT){Z.call(this);}B.call(this);M.call(this);};var W=function(b){var h=f.getCharCode(b);if(h===38){return 3;}else{if(h===13){return 6;}else{if(h===40){return 4;}else{if(h>=48&&h<=57){return 1;}else{if(h>=97&&h<=102){return 2;}else{if(h>=65&&h<=70){return 2;}else{if("8, 9, 13, 27, 37, 39".indexOf(h)>-1){return 5;}else{return 0;}}}}}}}};var I=function(h,b,j){var i=b.value;if(j!==this.OPT.HEX){i=parseInt(i,10);}if(i!==this.get(j)){this.set(j,i);}};var G=function(i,b,k){var j=W(i);var h=(i.shiftKey)?10:1;switch(j){case 6:I.apply(this,arguments);break;case 3:this.set(k,Math.min(this.get(k)+h,255));B.call(this);break;case 4:this.set(k,Math.max(this.get(k)-h,0));B.call(this);break;default:}};var A=function(h,b,j){var i=W(h);if(i===6){I.apply(this,arguments);}};var L=function(h,b){var i=W(h);switch(i){case 6:case 5:case 1:break;case 2:if(b!==true){break;}default:f.stopEvent(h);return false;}};var K=function(b){return L(b,true);};Q.getElement=function(b){return this.get(this.OPT.ELEMENTS)[this.get(this.OPT.IDS)[b]];};var D=function(){var k,j,n,l,m,b=this.get(this.OPT.IDS),o=this.get(this.OPT.TXT),r=this.get(this.OPT.IMAGES),q=function(i,p){var t=document.createElement(i);if(p){g.augmentObject(t,p,true);}return t;},s=function(i,p){var t=g.merge({autocomplete:"off",value:"0",size:3,maxlength:3},p);t.name=t.id;return new q(i,t);};var h=this.get("element");k=new q("div",{id:b[this.ID.PICKER_BG],className:"yui-picker-bg",tabIndex:-1,hideFocus:true});j=new q("div",{id:b[this.ID.PICKER_THUMB],className:"yui-picker-thumb"});n=new q("img",{src:r.PICKER_THUMB});j.appendChild(n);k.appendChild(j);h.appendChild(k);k=new q("div",{id:b[this.ID.HUE_BG],className:"yui-picker-hue-bg",tabIndex:-1,hideFocus:true});j=new q("div",{id:b[this.ID.HUE_THUMB],className:"yui-picker-hue-thumb"});n=new q("img",{src:r.HUE_THUMB});j.appendChild(n);k.appendChild(j);h.appendChild(k);k=new q("div",{id:b[this.ID.CONTROLS],className:"yui-picker-controls"});h.appendChild(k);h=k;k=new q("div",{className:"hd"});j=new q("a",{id:b[this.ID.CONTROLS_LABEL],href:"#"});k.appendChild(j);h.appendChild(k);k=new q("div",{className:"bd"});h.appendChild(k);h=k;k=new q("ul",{id:b[this.ID.RGB_CONTROLS],className:"yui-picker-rgb-controls"});j=new q("li");j.appendChild(document.createTextNode(o.R+" "));l=new s("input",{id:b[this.ID.R],className:"yui-picker-r"});j.appendChild(l);k.appendChild(j);j=new q("li");j.appendChild(document.createTextNode(o.G+" "));l=new s("input",{id:b[this.ID.G],className:"yui-picker-g"});j.appendChild(l);k.appendChild(j);j=new q("li");j.appendChild(document.createTextNode(o.B+" "));l=new s("input",{id:b[this.ID.B],className:"yui-picker-b"});j.appendChild(l);k.appendChild(j);h.appendChild(k);k=new q("ul",{id:b[this.ID.HSV_CONTROLS],className:"yui-picker-hsv-controls"});j=new q("li");j.appendChild(document.createTextNode(o.H+" "));l=new s("input",{id:b[this.ID.H],className:"yui-picker-h"});j.appendChild(l);j.appendChild(document.createTextNode(" "+o.DEG));k.appendChild(j);j=new q("li");j.appendChild(document.createTextNode(o.S+" "));l=new s("input",{id:b[this.ID.S],className:"yui-picker-s"});j.appendChild(l);j.appendChild(document.createTextNode(" "+o.PERCENT));k.appendChild(j);j=new q("li");j.appendChild(document.createTextNode(o.V+" "));l=new s("input",{id:b[this.ID.V],className:"yui-picker-v"});j.appendChild(l);j.appendChild(document.createTextNode(" "+o.PERCENT));k.appendChild(j);h.appendChild(k);k=new q("ul",{id:b[this.ID.HEX_SUMMARY],className:"yui-picker-hex_summary"});j=new q("li",{id:b[this.ID.R_HEX]});k.appendChild(j);j=new q("li",{id:b[this.ID.G_HEX]});k.appendChild(j);j=new q("li",{id:b[this.ID.B_HEX]});k.appendChild(j);h.appendChild(k);k=new q("div",{id:b[this.ID.HEX_CONTROLS],className:"yui-picker-hex-controls"});k.appendChild(document.createTextNode(o.HEX+" "));j=new s("input",{id:b[this.ID.HEX],className:"yui-picker-hex",size:6,maxlength:6});k.appendChild(j);h.appendChild(k);h=this.get("element");k=new q("div",{id:b[this.ID.SWATCH],className:"yui-picker-swatch"});h.appendChild(k);k=new q("div",{id:b[this.ID.WEBSAFE_SWATCH],className:"yui-picker-websafe-swatch"});h.appendChild(k);};var c=function(h,b){f.on(this.getElement(h),"keydown",function(j,i){G.call(i,j,this,b);},this);f.on(this.getElement(h),"keypress",K,this);f.on(this.getElement(h),"blur",function(j,i){I.call(i,j,this,b);},this);};var F=function(){var b=[this.get(this.OPT.RED),this.get(this.OPT.GREEN),this.get(this.OPT.BLUE)];this.set(this.OPT.RGB,b);T.call(this);};Q.initPicker=function(){var m=this.OPT,l=this.get(m.IDS),h=this.get(m.ELEMENTS),b,k,n;for(b in this.ID){if(g.hasOwnProperty(this.ID,b)){l[this.ID[b]]=l[b];}}k=C.get(l[this.ID.PICKER_BG]);if(!k){D.call(this);}else{}for(b in l){if(g.hasOwnProperty(l,b)){k=C.get(l[b]);n=C.generateId(k);l[b]=n;l[l[b]]=n;h[n]=k;}}h=[m.SHOW_CONTROLS,m.SHOW_RGB_CONTROLS,m.SHOW_HSV_CONTROLS,m.SHOW_HEX_CONTROLS,m.SHOW_HEX_SUMMARY,m.SHOW_WEBSAFE];for(b=0;b<h.length;b=b+1){this.set(h[b],this.get(h[b]));}var j=this.get(m.PICKER_SIZE);this.hueSlider=P.getVertSlider(this.getElement(this.ID.HUE_BG),this.getElement(this.ID.HUE_THUMB),0,j);this.hueSlider.subscribe("change",Y,this,true);this.pickerSlider=P.getSliderRegion(this.getElement(this.ID.PICKER_BG),this.getElement(this.ID.PICKER_THUMB),0,j,0,j);this.pickerSlider.subscribe("change",H,this,true);this.set(m.ANIMATE,this.get(m.ANIMATE));f.on(this.getElement(this.ID.WEBSAFE_SWATCH),"click",function(i){this.setValue(this.get(m.WEBSAFE));},this,true);f.on(this.getElement(this.ID.CONTROLS_LABEL),"click",function(i){this.set(m.SHOW_CONTROLS,!this.get(m.SHOW_CONTROLS));f.preventDefault(i);},this,true);c.call(this,this.ID.R,this.OPT.RED);c.call(this,this.ID.G,this.OPT.GREEN);c.call(this,this.ID.B,this.OPT.BLUE);c.call(this,this.ID.H,this.OPT.HUE);c.call(this,this.ID.S,this.OPT.SATURATION);c.call(this,this.ID.V,this.OPT.VALUE);f.on(this.getElement(this.ID.HEX),"keydown",function(o,i){A.call(i,o,this,i.OPT.HEX);},this);f.on(this.getElement(this.ID.HEX),"keypress",L,this);f.on(this.getElement(this.ID.HEX),"blur",function(o,i){I.call(i,o,this,i.OPT.HEX);},this);F.call(this);};var U=function(){var h=[this.get(this.OPT.HUE),this.get(this.OPT.SATURATION)/100,this.get(this.OPT.VALUE)/100];var b=e.hsv2rgb(h);this.set(this.OPT.RGB,b);T.call(this);};var V=function(){var k=this.get(this.OPT.HEX),b=k.length;if(b===3){var m=k.split(""),j;for(j=0;j<b;j=j+1){m[j]=m[j]+m[j];}k=m.join("");}if(k.length!==6){return false;}var h=e.hex2rgb(k);this.setValue(h);};Q.initAttributes=function(b){b=b||{};YAHOO.widget.ColorPicker.superclass.initAttributes.call(this,b);this.setAttributeConfig(this.OPT.PICKER_SIZE,{value:b.size||this.DEFAULT.PICKER_SIZE});this.setAttributeConfig(this.OPT.HUE,{value:b.hue||0,validator:g.isNumber});this.setAttributeConfig(this.OPT.SATURATION,{value:b.saturation||0,validator:g.isNumber});this.setAttributeConfig(this.OPT.VALUE,{value:g.isNumber(b.value)?b.value:100,validator:g.isNumber});this.setAttributeConfig(this.OPT.RED,{value:g.isNumber(b.red)?b.red:255,validator:g.isNumber});this.setAttributeConfig(this.OPT.GREEN,{value:g.isNumber(b.green)?b.green:255,validator:g.isNumber});this.setAttributeConfig(this.OPT.BLUE,{value:g.isNumber(b.blue)?b.blue:255,validator:g.isNumber});this.setAttributeConfig(this.OPT.HEX,{value:b.hex||"FFFFFF",validator:g.isString});this.setAttributeConfig(this.OPT.RGB,{value:b.rgb||[255,255,255],method:function(l){this.set(this.OPT.RED,l[0],true);this.set(this.OPT.GREEN,l[1],true);this.set(this.OPT.BLUE,l[2],true);var n=e.websafe(l);this.set(this.OPT.WEBSAFE,n,true);var m=e.rgb2hex(l);this.set(this.OPT.HEX,m,true);var i=e.rgb2hsv(l);this.set(this.OPT.HUE,i[0],true);this.set(this.OPT.SATURATION,Math.round(i[1]*100),true);this.set(this.OPT.VALUE,Math.round(i[2]*100),true);},readonly:true});this.setAttributeConfig(this.OPT.CONTAINER,{value:null,method:function(i){if(i){i.showEvent.subscribe(function(){this.pickerSlider.focus();},this,true);}}});this.setAttributeConfig(this.OPT.WEBSAFE,{value:b.websafe||[255,255,255]});var j=b.ids||g.merge({},this.ID);if(!b.ids&&E>1){for(var h in j){if(g.hasOwnProperty(j,h)){j[h]=j[h]+E;}}}this.setAttributeConfig(this.OPT.IDS,{value:j,writeonce:true});this.setAttributeConfig(this.OPT.TXT,{value:b.txt||this.TXT,writeonce:true});this.setAttributeConfig(this.OPT.IMAGES,{value:b.images||this.IMAGE,writeonce:true});this.setAttributeConfig(this.OPT.ELEMENTS,{value:{},readonly:true});var k=function(m,i){var l=(g.isString(m)?this.getElement(m):m);C.setStyle(l,"display",(i)?"":"none");};this.setAttributeConfig(this.OPT.SHOW_CONTROLS,{value:g.isBoolean(b.showcontrols)?b.showcontrols:true,method:function(i){var l=C.getElementsByClassName("bd","div",this.getElement(this.ID.CONTROLS))[0];k.call(this,l,i);this.getElement(this.ID.CONTROLS_LABEL).innerHTML=(i)?this.get(this.OPT.TXT).HIDE_CONTROLS:this.get(this.OPT.TXT).SHOW_CONTROLS;}});this.setAttributeConfig(this.OPT.SHOW_RGB_CONTROLS,{value:g.isBoolean(b.showrgbcontrols)?b.showrgbcontrols:true,method:function(i){k.call(this,this.ID.RGB_CONTROLS,i);}});this.setAttributeConfig(this.OPT.SHOW_HSV_CONTROLS,{value:g.isBoolean(b.showhsvcontrols)?b.showhsvcontrols:false,method:function(i){k.call(this,this.ID.HSV_CONTROLS,i);if(i&&this.get(this.OPT.SHOW_HEX_SUMMARY)){this.set(this.OPT.SHOW_HEX_SUMMARY,false);}}});this.setAttributeConfig(this.OPT.SHOW_HEX_CONTROLS,{value:g.isBoolean(b.showhexcontrols)?b.showhexcontrols:false,method:function(i){k.call(this,this.ID.HEX_CONTROLS,i);}});this.setAttributeConfig(this.OPT.SHOW_WEBSAFE,{value:g.isBoolean(b.showwebsafe)?b.showwebsafe:true,method:function(i){k.call(this,this.ID.WEBSAFE_SWATCH,i);}});this.setAttributeConfig(this.OPT.SHOW_HEX_SUMMARY,{value:g.isBoolean(b.showhexsummary)?b.showhexsummary:true,method:function(i){k.call(this,this.ID.HEX_SUMMARY,i);if(i&&this.get(this.OPT.SHOW_HSV_CONTROLS)){this.set(this.OPT.SHOW_HSV_CONTROLS,false);}}});this.setAttributeConfig(this.OPT.ANIMATE,{value:g.isBoolean(b.animate)?b.animate:true,method:function(i){this.pickerSlider.animate=i;this.hueSlider.animate=i;}});this.on(this.OPT.HUE+"Change",U,this,true);this.on(this.OPT.SATURATION+"Change",U,this,true);this.on(this.OPT.VALUE+"Change",d,this,true);this.on(this.OPT.RED+"Change",F,this,true);this.on(this.OPT.GREEN+"Change",F,this,true);this.on(this.OPT.BLUE+"Change",F,this,true);this.on(this.OPT.HEX+"Change",V,this,true);this.initPicker();};})();YAHOO.register("colorpicker",YAHOO.widget.ColorPicker,{version:"2.5.2",build:"1076"});
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../extensions/input-color.js

UX.colorcount=0;function InputValueColor(elmnt)
{this.element=elmnt;this.currValue="";this.m_bFirstSetValue=true;}
function colorValueChanged(pThis,sNewValue)
{var oEvt=pThis.element.ownerDocument.createEvent("MutationEvents");if(oEvt.initMutationEvent===undefined){oEvt.initMutationEvent=oEvt.initEvent;}
oEvt.initMutationEvent("control-value-changed",true,true,null,pThis.currValue,sNewValue,null,null);spawn(function(){FormsProcessor.dispatchEvent(pThis.element,oEvt);});}
InputValueColor.prototype.onDocumentReady=function()
{if(this.element.ownerDocument.media!="print")
{this.element.innerHTML="<div id='ux-color-bg"+UX.colorcount+"' class='ux-color-bg'></div>";this.m_value=new YAHOO.widget.ColorPicker("ux-color-bg"+UX.colorcount,{images:{PICKER_THUMB:"http://yui.yahooapis.com/2.5.2/build/colorpicker/assets/picker_thumb.png",HUE_THUMB:"http://yui.yahooapis.com/2.5.2/build/colorpicker/assets/hue_thumb.png"}});UX.colorcount++;var pThis=this;this.m_value.on("rgbChange",function(o){colorValueChanged(pThis,"#"+pThis.m_value.get("hex"));});}};InputValueColor.prototype.setValue=function(sValue)
{var bRet=false;if(sValue.match(/^#[0-9abcdefABCDEF]{6}/)){if(this.currValue!=sValue||m_bFirstSetValue){var rgb=YAHOO.util.Color.hex2rgb(sValue.substring(1));this.m_value.setValue(rgb,true);this.currValue=sValue;bRet=true;if(this.m_bFirstSetValue){this.m_bFirstSetValue=false;}}}
return bRet;};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/xf4h.js

XF4HProcessor={nsURI:"http://www.w3.org/TR/xf4h",defaultPrefix:"x4h:",getAttribute:function(oElement,sAttributeName){var sAttrValue=NamespaceManager.getAttributeNS(oElement,this.nsURI,sAttributeName);if(!sAttrValue){sAttrValue=oElement.getAttribute(this.defaultPrefix+sAttributeName);}
return sAttrValue;},processElement:function(oModel,oContextNode,oElement,sName){var sValue,oValueNode,oParent;var oRefNode=null;var oEvalResult=oModel.EvaluateXPath(sName,{node:oContextNode,model:oModel,resolverElement:oElement});if(oEvalResult){oRefNode=getFirstNode(oEvalResult);}
var oInstDoc=_getDefaultInstanceDocument(oModel);if(!oRefNode&&oInstDoc){oRefNode=oInstDoc.createElement(sName);sValue=this.getAttribute(oElement,"value");if(sValue&&sValue.length!==0){oValueNode=oInstDoc.createTextNode(sValue);if(oValueNode){oRefNode.appendChild(oValueNode);}}
oParent=oContextNode?oContextNode:oInstDoc.documentElement;oParent.appendChild(oRefNode);}
if(!oElement["bindCreated"]){this._createBind(oModel,oElement,oRefNode);oElement["bindCreated"]=true;}
return oRefNode;},_createBind:function(oModel,oElement,oRefNode){var sDatatype,sCalculate,sConstraint;var sRelevant,sReadonly,sRequired,sNodeset;var oBind=null;var oContextBind=null;if(!oModel||!oElement||!oRefNode){return;}
sDatatype=this.getAttribute(oElement,"datatype");sCalculate=this.getAttribute(oElement,"calculate");sConstraint=this.getAttribute(oElement,"constraint");sRelevant=this.getAttribute(oElement,"relevant");sReadonly=this.getAttribute(oElement,"readonly");sRequired=this.getAttribute(oElement,"required");if(!sDatatype&&!sCalculate&&!sConstraint&&!sRelevant&&!sReadonly&&!sRequired){return;}
oBind=UX.createElementNS(oElement,"http://www.w3.org/2002/xforms","bind");sNodeset=this._getNodeset(oRefNode,oRefNode.ownerDocument.documentElement);if(!oBind||!sNodeset){return;}
oBind.setAttribute("nodeset",sNodeset);oContextBind=UX.createElementNS(oElement,"http://www.w3.org/2002/xforms","bind");oContextBind.setAttribute("context","..");oBind.appendChild(oContextBind);if(sDatatype){var sType="xsd:"+sDatatype;oContextBind.setAttribute("type",sType);}
if(sCalculate){oContextBind.setAttribute("calculate",sCalculate);}
if(sConstraint){oBind.setAttribute("constraint",sConstraint);}
if(sRelevant){oContextBind.setAttribute("relevant",sRelevant);}
if(sReadonly){oContextBind.setAttribute("readonly",((sReadonly!="false")?"true":"false"));}
if(sRequired){oContextBind.setAttribute("required",((sRequired!=="false")?"true()":"false()"));}
oModel.appendChild(oBind);if(!UX.hasDecorationSupport){oModel.rebuild();}},_getNodeset:function(oElem,oDocRoot){var sParentRef=null;if(!oElem||oElem===oDocRoot){return null;}else{sParentRef=this._getNodeset(oElem.parentNode,oDocRoot);if(sParentRef){sParentRef+="/";}else{sParentRef="";}
return sParentRef+oElem.nodeName;}}};
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../_platform/yui/xforms-submission-yui.js

callback.prototype.success=function(o){this.processResult({status:o.status||NaN,statusText:o.statusText||"",responseText:o.responseText||"",responseHeaders:o.getResponseHeader,resourceURI:this.resourceURI},false);}
callback.prototype.failure=function(o){this.processResult({status:o.status||NaN,statusText:o.statusText||"",responseText:o.responseText||"",responseHeaders:o.getResponseHeader,resourceURI:this.resourceURI},true);}
submission.prototype.request=function(sMethod,sAction,sBody,nTimeout,oCallback){if(nTimeout){oCallback.timeout=nTimeout;}
oCallback.resourceURI=sAction;return YAHOO.util.Connect.asyncRequest(sMethod,sAction,oCallback,sBody);}
submission.prototype.getConnection=function(){return YAHOO.util.Connect;}
submission.prototype.init=function(){this.getConnection().setDefaultPostHeader(false);return true;}
submission.prototype.setHeader=function(header,value){return this.getConnection().initHeader(header,value);}
document.submission.init();
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/xforms-defs.js

DECORATOR.addDecorationRules({"namespaceURI":"http://www.w3.org/2002/xforms","rules":{"model":[{"name":"model-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,Model]);}}],"instance":[{"name":"instance-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,Instance]);}}],"submission":[{"name":"submission-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,Context,Submission]);}}],"header":[{"name":"header-element","apply":function(arrBehaviours){return arrBehaviours.concat([Context,Header]);}}],"name":[{"name":"name-element",apply:function(arrBehavious){return arrBehavious.concat([EventTarget,MIPHandler,Context,Control,Value]);}}],"group":[{"name":"group-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,MIPHandler,MIPEventTarget,Context,Container,OptionalIfUnspecifiedBinding,Group]);}}],"switch":[{"name":"switch-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,MIPHandler,MIPEventTarget,Context,OptionalBinding,Switch]);}}],"case":[{"name":"case-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,Context,Container,XFormsCase]);}}],"repeat":[{"name":"repeat-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,Context,Repeat]);}}],"submit":[{"name":"submit-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,MIPHandler,MIPEventTarget,Context,Control,NavigableControl,OptionalBinding,Submit]);}}],"trigger":[{"name":"trigger-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,MIPHandler,MIPEventTarget,Context,Control,NavigableControl,OptionalBinding]);}}],"input":[{"name":"input-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,MIPHandler,MIPEventTarget,Context,Control,NavigableControl]);}}],"output":[{"name":"output-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,MIPHandler,MIPEventTarget,Context,Control,NavigableControl,OptionalIfUnspecifiedBinding]);}}],"range":[{"name":"range-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,MIPHandler,MIPEventTarget,Context,Control,NavigableControl,FiniteControl]);}}],"textarea":[{"name":"textarea-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,MIPHandler,MIPEventTarget,Context,Control,NavigableControl]);}}],"secret":[{"name":"secret-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,MIPHandler,MIPEventTarget,Context,Control,NavigableControl]);}}],"select":[{"name":"select-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,MIPHandler,MIPEventTarget,Context,Control,NavigableControl,XFormsCommonSelect,ElementWithChoices,XFormsSelect,FiniteControl]);}}],"select1":[{"name":"select1-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,MIPHandler,MIPEventTarget,Context,Control,NavigableControl,XFormsCommonSelect,ElementWithChoices,XFormsSelect1,FiniteControl]);}}],"mediatype":[{"name":"mediatype-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,MIPHandler,Context,Control]);}}],"label":[{"name":"label-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,MIPHandler,Context,Control,OptionalBinding]);}}],"alert":[{"name":"alert-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,MIPHandler,Context,Control,OptionalBinding]);}}],"hint":[{"name":"hint-element","match":function(element){if(!element.parentNode.className||element.parentNode.className.indexOf('geolocation')===-1){return true;}
return false;},"apply":function(arrBehaviours){return arrBehaviours.concat([Listener,EventTarget,MIPHandler,Context,Control,OptionalBinding,Message,HintMixin]);}},{"name":"hint-map","match":function(element){if(element.parentNode.className&&element.parentNode.className.indexOf('geolocation')!==-1){return true;}
return false;},"apply":function(arrBehaviours){return arrBehaviours.concat([Listener,EventTarget,MIPHandler,Context,Control,OptionalBinding,HintGMap]);}}],"item":[{"name":"item-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,Context,Item]);}}],"itemset":[{"name":"item-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,Context,Itemset]);}}],"value":[{"name":"value-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,MIPHandler,Context,Control,OptionalBinding,Value]);}}],"copy":[{"name":"copy-element","apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,Context,Control,OptionalBinding,Copy]);}}],"action":[{"name":"action-element","apply":function(arrBehaviours){return arrBehaviours.concat([Listener,Context,XFAction]);}}],"help":[{"name":"help-element","apply":function(arrBehaviours){return arrBehaviours.concat([Listener,EventTarget,MIPHandler,Context,Control,OptionalBinding,Message,HelpMixin]);}}],"load":[{"name":"setvalue-element","apply":function(arrBehaviours){return arrBehaviours.concat([Listener,EventTarget,Context,OptionalBinding,Load]);}}],"message":[{"name":"message-element","apply":function(arrBehaviours){return arrBehaviours.concat([Listener,EventTarget,MIPHandler,Context,Control,OptionalBinding,Message]);}}],"setindex":[{"name":"setindex-element","apply":function(arrBehaviours){return arrBehaviours.concat([Listener,Context,SetIndex]);}}],"setvalue":[{"name":"setvalue-element","apply":function(arrBehaviours){return arrBehaviours.concat([Listener,Context,SetValue]);}}],"setfocus":[{"name":"setfocus-element","apply":function(arrBehaviours){return arrBehaviours.concat([Listener,Context,SetFocus]);}}],"insert":[{"name":"insert-element","apply":function(arrBehaviours){return arrBehaviours.concat([Listener,Context,OptionalBinding,Insert]);}}],"delete":[{"name":"delete-element","apply":function(arrBehaviours){return arrBehaviours.concat([Listener,Context,Delete]);}}],"send":[{"name":"send-element","apply":function(arrBehaviours){return arrBehaviours.concat([Listener,Send]);}}],"dispatch":[{"name":"dispatch-element","apply":function(arrBehaviours){return arrBehaviours.concat([Listener,Dispatch]);}}],"toggle":[{"name":"toggle-element","apply":function(arrBehaviours){return arrBehaviours.concat([Listener,Context,Toggle]);}}],"rebuild":[{"name":"rebuild-element","apply":function(arrBehaviours){return arrBehaviours.concat([Listener,Rebuild]);}}],"recalculate":[{"name":"recalculate-element","apply":function(arrBehaviours){return arrBehaviours.concat([Listener,Recalculate]);}}],"revalidate":[{"name":"revalidate-element","apply":function(arrBehaviours){return arrBehaviours.concat([Listener,Revalidate]);}}],"refresh":[{"name":"refresh-element","apply":function(arrBehaviours){return arrBehaviours.concat([Listener,Refresh]);}}],"reset":[{"name":"reset-element","apply":function(arrBehaviours){return arrBehaviours.concat([Listener,Reset]);}}],"pe-value":[{"name":"value-pevalue","match":function(element){return NamespaceManager.compareFullName(element.parentNode,"value","http://www.w3.org/2002/xforms");},"apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget]);}},{"name":"output-pevalue","match":function(element){return NamespaceManager.compareFullName(element.parentNode,"output","http://www.w3.org/2002/xforms")||NamespaceManager.compareFullName(element.parentNode,"label","http://www.w3.org/2002/xforms")||NamespaceManager.compareFullName(element.parentNode,"alert","http://www.w3.org/2002/xforms")||NamespaceManager.compareFullName(element.parentNode,"help","http://www.w3.org/2002/xforms")||NamespaceManager.compareFullName(element.parentNode,"hint","http://www.w3.org/2002/xforms")||NamespaceManager.compareFullName(element.parentNode,"message","http://www.w3.org/2002/xforms")||NamespaceManager.compareFullName(element.parentNode,"mediatype","http://www.w3.org/2002/xforms");},"apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,XFormsOutputValue]);}},{"name":"input-pevalue","match":function(element){return NamespaceManager.compareFullName(element.parentNode,"input","http://www.w3.org/2002/xforms")||NamespaceManager.compareFullName(element.parentNode,"secret","http://www.w3.org/2002/xforms")||NamespaceManager.compareFullName(element.parentNode,"textarea","http://www.w3.org/2002/xforms");},"apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,PeValue,XFormsInputValue]);}},{"name":"select-pevalue","match":function(element){return NamespaceManager.compareFullName(element.parentNode,"select","http://www.w3.org/2002/xforms");},"apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,XFormsSelectValue]);}},{"name":"select1-pevalue","match":function(element){return NamespaceManager.compareFullName(element.parentNode,"select1","http://www.w3.org/2002/xforms");},"apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,XFormsSelect1Value]);}},{"name":"range-pevalue","match":function(element){return NamespaceManager.compareFullName(element.parentNode,"range","http://www.w3.org/2002/xforms");},"apply":function(arrBehaviours){return arrBehaviours.concat([EventTarget,RangeValue]);}},{"name":"inputcalendar-pevalue","match":function(element){var parent=element.parentNode,datatype=parent.getAttribute("datatype"),appearance=parent.getAttribute("appearance"),xf4hdatatype=XF4HProcessor.getAttribute(parent,"datatype"),prefixes=[],prefix="",isDate=false,match=false;if(NamespaceManager.compareFullName(parent,"input","http://www.w3.org/2002/xforms")){prefixes=NamespaceManager.getOutputPrefixesFromURI("http://www.w3.org/2002/xforms");prefix=prefixes[prefixes.length-1];isDate=(datatype==="xsd:date"||datatype===(prefix+":date")||xf4hdatatype==="date");if(isDate&&appearance!=="minimal"){match=true;}}
return match;},"apply":function(arrBehaviours){UX.replaceArrayElement(arrBehaviours,XFormsInputValue,InputValueCalendar);return arrBehaviours;}},{"name":"inputcolor-pevalue","match":function(element){var parent=element.parentNode,datatype=parent.getAttribute("datatype"),appearance=parent.getAttribute("appearance"),match=false;if(NamespaceManager.compareFullName(parent,"input","http://www.w3.org/2002/xforms")&&datatype==="xhd:color"){match=true;}
return match;},"apply":function(arrBehaviours){UX.replaceArrayElement(arrBehaviours,XFormsInputValue,InputValueColor);return arrBehaviours;}},{"name":"inputboolean-pevalue","match":function(element){var parent=element.parentNode,datatype=parent.getAttribute("datatype"),prefixes=[],prefix="",match=false;if(NamespaceManager.compareFullName(parent,"input","http://www.w3.org/2002/xforms")){prefixes=NamespaceManager.getOutputPrefixesFromURI("http://www.w3.org/2002/xforms");prefix=prefixes[prefixes.length-1];if(datatype==="xsd:boolean"||datatype===(prefix+":boolean")){match=true;}}
return match;},"apply":function(arrBehaviours){UX.replaceArrayElement(arrBehaviours,XFormsInputValue,XFormsBooleanValue);return arrBehaviours;}},{"name":"rangemap-pevalue","match":function(element){var parent=element.parentNode,rangeClass=parent.className,match=false;if(NamespaceManager.compareFullName(parent,"range","http://www.w3.org/2002/xforms")&&rangeClass&&rangeClass.indexOf("geolocation")!==-1){match=true;}
return match;},"apply":function(arrBehaviours){UX.replaceArrayElement(arrBehaviours,RangeValue,RangeValueGMAP);UX.insertArrayElement(arrBehaviours,GMapControl,RangeValueGMAP);return arrBehaviours;}},{"name":"outputmap-pevalue","match":function(element){var parent=element.parentNode,outputClass=parent.className,match=false;if(NamespaceManager.compareFullName(parent,"output","http://www.w3.org/2002/xforms")&&outputClass&&outputClass.indexOf("geolocation")!==-1){match=true;}
return match;},"apply":function(arrBehaviours){UX.replaceArrayElement(arrBehaviours,XFormsOutputValue,XFormsOutputValueGMap);UX.insertArrayElement(arrBehaviours,GMapControl,XFormsOutputValueGMap);return arrBehaviours;}}],"*":[]}});UX.replaceArrayElement=function(array,remove,add){var counter;for(counter=0;counter<array.length;counter++){if(array[counter]===remove){array[counter]=add;break;}}};UX.insertArrayElement=function(array,insertItem,indexItem){var i,lastItem,swap;for(var i=0;i<array.length;++i){if(array[i]===indexItem){lastItem=array[i];array[i]=insertItem;}else if(lastItem){swap=array[i];array[i]=lastItem;lastItem=swap;}}
if(lastItem){array[i]=lastItem;}};UX.selectors={input:{color:{value:"xf|input.yui-widget-color > pe-value",labelvalue:"xf|input.yui-widget-color > xf|label > pe-value"},date:{value:"xf|input.yui-widget-calendar > pe-value",labelvalue:"xf|input.yui-widget-calendar > xf|label > pe-value"},dateminimal:{value:"xf|input.minimal-date > pe-value",labelvalue:"xf|input.minimal-date > xf|label > pe-value"}},itemset:{repeatReady:"xf|itemset.repeat-ready > xf|item"},repeat:{repeatReady:"xf|repeat.repeat-ready > xf|group"},header:{headerReady:"xf|header.header-ready > *"}};if(!UX.isIE6){UX.selectors.input.color.value+=", xf|input[datatype='xhd:color'] > pe-value";UX.selectors.input.color.labelvalue+=", xf|input[datatype='xhd:color'] > xf| label > pe-value";UX.selectors.input.date.value+=", xf|input[datatype='xsd:date'] > pe-value, xf|input[datatype='xf:date'] > pe-value";UX.selectors.input.date.labelvalue+=", xf|input[datatype='xsd:date'] > xf|label > pe-value, xf|input[datatype='xf:date'] > xf|label > pe-value";UX.selectors.input.dateminimal.value+=", xf|input[datatype='xsd:date'][appearance='minimal'] > pe-value, xf|input[datatype='xf:date'][appearance='minimal'] > pe-value";UX.selectors.input.dateminimal.labelvalue+=", xf|input[datatype='xsd:date'][appearance='minimal'] > xf|label > pe-value, xf|input[datatype='xf:date'][appearance='minimal'] > xf|label > pe-value";UX.selectors.repeat.repeatReady+=", xf|repeat[class~='repeat-ready'] > xf|group";UX.selectors.itemset.repeatReady+=", xf|itemset[class~='repeat-ready'] > xf|item";UX.selectors.header.headerReady+=", xf|header[class~='header-ready'] > *";}
NamespaceManager.addSelectionNamespace("xf","http://www.w3.org/2002/xforms");DECORATOR.setupDecorator([{selector:"xf|instance",objects:[]},{selector:"xf|model",objects:[]},{selector:"xf|submission",objects:[]},{selector:"xf|header",objects:[]},{selector:"xf|name",objects:[]},{selector:"xf|repeat",objects:[]},{selector:"xf|group",objects:[]},{selector:"xf|switch",objects:[]},{selector:"xf|case",objects:[]},{selector:"xf|submit",objects:[]},{selector:"xf|trigger",objects:[]},{selector:"xf|output >  pe-value",objects:[]},{selector:"xf|input",objects:[]},{selector:"xf|range",objects:[]},{selector:"xf|output",objects:[]},{selector:"xf|textarea",objects:[]},{selector:"xf|secret",objects:[]},{selector:"xf|label",objects:[]},{selector:"xf|alert",objects:[]},{selector:"xf|value",objects:[]},{selector:"xf|copy",objects:[]},{selector:"xf|input > pe-value",objects:[]},{selector:"xf|secret  > pe-value",objects:[]},{selector:"xf|textarea  > pe-value",objects:[]},{selector:"xf|select > pe-value",objects:[]},{selector:"xf|select1 >  pe-value ",objects:[]},{selector:"xf|range > pe-value",objects:[]},{selector:" xf|alert > pe-value",objects:[]},{selector:" xf|hint > pe-value",objects:[]},{selector:" xf|message > pe-value",objects:[]},{selector:" xf|help > pe-value",objects:[]},{selector:"xf|label",objects:[]},{selector:"xf|mediatype",objects:[]},{selector:"xf|value > pe-value",objects:[]},{selector:"xf|item",objects:[]},{selector:"xf|itemset",objects:[]},{selector:"xf|range.geolocation > pe-value",objects:[]},{selector:"xf|range.geolocation > xf|label > pe-value",objects:[]},{selector:"xf|output.geolocation > pe-value",objects:[]},{selector:"xf|output.geolocation > xf|label > pe-value",objects:[]},{selector:UX.selectors.input.color.value,objects:[]},{selector:UX.selectors.input.color.labelvalue,objects:[]},{selector:UX.selectors.input.date.value,objects:[]},{selector:UX.selectors.input.date.labelvalue,objects:[]},{selector:UX.selectors.input.dateminimal.value,objects:[]},{selector:UX.selectors.input.dateminimal.labelvalue,objects:[]},{selector:"xf|select",objects:[]},{selector:"xf|select1",objects:[]},{selector:"xf|action",objects:[]},{selector:"xf|hint",objects:[]},{selector:"xf|load",objects:[]},{selector:"xf|message",objects:[]},{selector:"xf|help",objects:[]},{selector:"xf|setindex",objects:[]},{selector:"xf|setvalue",objects:[]},{selector:"xf|setfocus",objects:[]},{selector:"xf|insert",objects:[]},{selector:"xf|delete",objects:[]},{selector:"xf|send",objects:[]},{selector:"xf|dispatch",objects:[]},{selector:"xf|toggle",objects:[]},{selector:"xf|rebuild",objects:[]},{selector:"xf|recalculate",objects:[]},{selector:"xf|revalidate",objects:[]},{selector:"xf|refresh",objects:[]},{selector:"xf|reset",objects:[]},{selector:"xf|label >  pe-value",objects:[],important:true},{selector:"xf|mediatype >  pe-value",objects:[]},{selector:"xf|repeat > *,  xf|itemset > *, xf|header > *",cssText:"-moz-binding:url();"},{selector:UX.selectors.itemset.repeatReady,objects:[]},{selector:UX.selectors.repeat.repeatReady,objects:[]},{selector:UX.selectors.header.headerReady,objects:[]},{selector:"xf|repeat *, xf|itemset *, xf|header *",cssText:"-binding-ignore:true;"},{selector:"xf|repeat.repeat-ready xf|repeat.repeat-ready *",cssText:"-binding-ignore:false;"},{selector:"xf|repeat.repeat-ready xf|repeat *",cssText:"-binding-ignore:true;"},{selector:"xf|repeat.repeat-ready *, xf|header.header-ready *",cssText:"-binding-ignore:false;"},{selector:"xf|itemset.repeat-ready *",cssText:"-binding-ignore:false;"},{selector:"xf|header.header-ready *",cssText:"-binding-ignore:false;"}],"http://www.w3.org/2002/xforms");
//from: file:///D:\Work\UXF-pending\issue-514\build\../src/lib/xforms/../second-onload.js

function isFirefox3()
{return(navigator.oscpu&&document.getElementsByClassName);}
function FFInsertElementForOnloadXBL(){var oBody=document.getElementsByTagName("body")[0];oBody.insertAdjacentHTML("beforeEnd","<p id='second-onload-loading-element' style='width:0px;display:inline-block;'>Loading...</p>");if(isFirefox3()||UX.isIE){var cssNode=document.createElement('link');cssNode.type='text/css';cssNode.rel='stylesheet';cssNode.href=g_sBehaviourDirectory+"onload.css";cssNode.media='screen';cssNode.title='dynamicLoadedSheet';document.getElementsByTagName("head")[0].appendChild(cssNode);}
else
{var oHead=document.getElementsByTagName("head")[0];var oStyle=document.createElement('style');var s="";oStyle.setAttribute("type","text/css");oStyle.innerHTML="p#second-onload-loading-element{-moz-binding: url(\""+g_sBehaviourDirectory+"onload.xml#loader\");}";oHead.insertBefore(oStyle,null);}}
InsertElementForOnloadXBL=(UX.isFF||UX.isIE)?FFInsertElementForOnloadXBL:function(){};if(document.body){spawn(InsertElementForOnloadXBL);}
else if(window.addEventListener){window.addEventListener("load",function(e){spawn(InsertElementForOnloadXBL);},false);}
else if(window.attachEvent){window.attachEvent("onload",function(e){spawn(InsertElementForOnloadXBL);});}
