<!--
  // Ubiquity provides a standards-based suite of browser enhancements for
  // building a new generation of internet-related applications.
  //
  // The Ubiquity XForms module adds XForms 1.1 support to the Ubiquity
  // library.
  //
  // Copyright (C) 2008 Backplane Ltd.
  //
  // Licensed under the Apache License, Version 2.0 (the "License");
  // you may not use this file except in compliance with the License.
  // You may obtain a copy of the License at
  //
  //  http://www.apache.org/licenses/LICENSE-2.0
  //
  // Unless required by applicable law or agreed to in writing, software
  // distributed under the License is distributed on an "AS IS" BASIS,
  // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  // See the License for the specific language governing permissions and
  // limitations under the License.
-->
<html
   xmlns="http://www.w3.org/1999/xhtml"
   xmlns:xf="http://www.w3.org/2002/xforms"
   xmlns:ev="http://www.w3.org/2001/xml-events"
>
	<head>
		<title>Test xf:insert at root</title>
	  <script type="text/javascript" src="../src/ubiquity-loader.js" >/**/</script>
	</head>
  <body class="yui-skin-sam">
		<!-- XForms UI -->
		<xf:model id="m">
			<xf:instance id="data">
				<a xmlns="">
				  <c>1</c>
				  <c>2</c>
				</a>
			</xf:instance>
			<xf:instance id="proto">
				<b xmlns="">
					<c>7</c>
					<c>20</c>
				</b>
			</xf:instance>
			<xf:instance id="test-results">
				<data xmlns="">
					<test1></test1>
				</data>
			</xf:instance>
		  <xf:action ev:event="xforms-ready">
		    <xf:setvalue if="sum(/*/c) != 3" ref="instance('test-results')/test1" value="'Initial data not set correctly'"></xf:setvalue>		
		    <xf:insert nodeset="." origin="instance('proto')" ></xf:insert>		
		    <xf:setvalue if="sum(/*/c) = 27" ref="instance('test-results')/test1" value="concat(., ' Instance correctly replaced')"></xf:setvalue>
		  </xf:action>			
		</xf:model>
		<!-- XForms UI -->
		<xf:output value="sum(/*/c)"></xf:output>
		<hr />
		<xf:output id="t1" ref="instance('test-results')/test1"></xf:output>    
  </body>
</html>
