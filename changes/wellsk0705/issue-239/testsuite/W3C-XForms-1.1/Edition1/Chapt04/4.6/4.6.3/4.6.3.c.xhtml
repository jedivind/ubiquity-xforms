<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xforms="http://www.w3.org/2002/xforms" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:et="http://w3c.org/eventtracker">
  <head>
  	<title>4.6.3.c event sequencing for select/select1 controls (focus changes)</title>
    <script  src="../../../../../../src/ubiquity-loader.js" type="text/javascript">/**/</script>
    <link rel="stylesheet" href="../../../driverPages/forms/TestSuite11.css" type="text/css"/>
    
    
  </head>
  <body>
    <xforms:model id="m_001">
      <xforms:instance>
      	<car>
      		<carSelected1/>
      		<carSelected2/>
      	</car>
      </xforms:instance>

      <xforms:action ev:event="xforms-recalculate">
      	<xforms:insert at="index('repeat_event_tracker')" position="before" nodeset="/et:events/et:event" model="event_tracker"/>
        <xforms:setvalue model="event_tracker" ref="/et:events/et:event[index('repeat_event_tracker')]/@name">xforms-recalculate</xforms:setvalue>
      </xforms:action>
      <xforms:action ev:event="xforms-revalidate">
      	<xforms:insert at="index('repeat_event_tracker')" position="before" nodeset="/et:events/et:event" model="event_tracker"/>
        <xforms:setvalue model="event_tracker" ref="/et:events/et:event[index('repeat_event_tracker')]/@name">xforms-revalidate</xforms:setvalue>
      </xforms:action>
      <xforms:action ev:event="xforms-refresh">
      	<xforms:insert at="index('repeat_event_tracker')" position="before" nodeset="/et:events/et:event" model="event_tracker"/>
        <xforms:setvalue model="event_tracker" ref="/et:events/et:event[index('repeat_event_tracker')]/@name">xforms-refresh</xforms:setvalue>
      </xforms:action>
    </xforms:model>
    <xforms:model id="event_tracker">
      <xforms:instance id="tracker_instance">
      	<et:events>
      	   <et:event name=""/>
      	</et:events>
      </xforms:instance>
      <xforms:bind nodeset="instance('tracker_instance')/et:event[last()]" relevant="false()"/>
    </xforms:model>
  	<xforms:group>
  		<xforms:label class="title">4.6.3.c event sequencing for select/select1 controls (focus changes)</xforms:label>
  	</xforms:group>
  	
  	<xforms:group>
  		<xforms:label>
  			You must see outputs for a "Value Change" sequence (xforms-recalculate, xforms-revalidate, and xforms-refresh) 
  			when you activate either of the Test triggers. 
  		</xforms:label>	
  	</xforms:group>
  	<xforms:group>
		<xforms:select id="select" ref="/car/carSelected1" incremental="false">
		    <xforms:label>car</xforms:label>
	  		<xforms:item>
	          <xforms:label>Acura</xforms:label>
	          <xforms:value>acu</xforms:value>
	        </xforms:item>
	        <xforms:item>
	          <xforms:label>Honda</xforms:label>
	          <xforms:value>hon</xforms:value>
	        </xforms:item>
	        <xforms:item>
	          <xforms:label>Subaru</xforms:label>
	          <xforms:value>sub</xforms:value>
	        </xforms:item>
	        <xforms:item>
	          <xforms:label>Toyota</xforms:label>
	          <xforms:value>toy</xforms:value>
	        </xforms:item>
	  	</xforms:select>
		<xforms:select1 id="select1" ref="/car/carSelected2" model="m_001" incremental="false">
		    <xforms:label>Car</xforms:label>
	  		<xforms:item>
	          <xforms:label>Acura</xforms:label>
	          <xforms:value>acu</xforms:value>
	        </xforms:item>
	        <xforms:item>
	          <xforms:label>Honda</xforms:label>
	          <xforms:value>hon</xforms:value>
	        </xforms:item>
	        <xforms:item>
	          <xforms:label>Subaru</xforms:label>
	          <xforms:value>sub</xforms:value>
	        </xforms:item>
	        <xforms:item>
	          <xforms:label>Toyota</xforms:label>
	          <xforms:value>toy</xforms:value>
	        </xforms:item>
		</xforms:select1>
	</xforms:group>
	<xforms:group>
		<xforms:trigger>
	      <xforms:label>Test select</xforms:label>
	      <xforms:setvalue ev:event="DOMActivate" ref="/car/carSelected1">acu</xforms:setvalue>
	      <xforms:setfocus ev:event="DOMActivate" control="select1"/>
	      <xforms:setvalue ev:event="DOMActivate" ref="/car/carSelected1">sub</xforms:setvalue>
	      <xforms:setfocus ev:event="DOMActivate" control="select1"/>
	    </xforms:trigger>
		<xforms:trigger>
	      <xforms:label>Test select1</xforms:label>
	      <xforms:setvalue ev:event="DOMActivate" ref="/car/carSelected2">acu</xforms:setvalue>
	      <xforms:setfocus ev:event="DOMActivate" control="select"/>
	      <xforms:setvalue ev:event="DOMActivate" ref="/car/carSelected2">sub</xforms:setvalue>
	      <xforms:setfocus ev:event="DOMActivate" control="select"/>
	    </xforms:trigger>
	</xforms:group>
	<xforms:repeat model="event_tracker" id="repeat_event_tracker" nodeset="/et:events/et:event">
      <xforms:output ref="./@name" model="event_tracker">
        <xforms:label>Event fired:</xforms:label>
      </xforms:output>
    </xforms:repeat>
	
  </body>
</html>
