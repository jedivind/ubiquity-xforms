<html
 xmlns="http://www.w3.org/1999/xhtml"
 xmlns:xf="http://www.w3.org/2002/xforms"
 xmlns:ev="http://www.w3.org/2001/xml-events"
>
	<head>
		<title>
			Issue 612
		</title>

		<script src="../../src/ubiquity-loader.js" type="text/javascript">/**/</script>
	</head>

	<body>
		<h1>
			<a href="http://code.google.com/p/ubiquity-xforms/issues/detail?id=612">Issue 612</a>
		</h1>

		<h2>Custom submission headers are broken</h2>

		<p>After pressing the button labelled 'Test', you should see the text 'TEST PASSED' in the result field.</p>

		<xf:model id="mdl">
			<xf:instance id="instResult">
				<result xmlns=""></result>
			</xf:instance>

			<xf:instance id="instResponse">
				<response xmlns=""></response>
			</xf:instance>

			<xf:submission id="sbm" resource="http://FAIL/" method="get" replace="instance" instance="instResponse">
				<xf:header>
					<xf:name>HeaderName</xf:name>

					<xf:value>HeaderValue</xf:value>
				</xf:header>

				<xf:setvalue ev:event="xforms-submit" ref="instance('instResult')" value="'TEST FAILED'"></xf:setvalue>

				<xf:setvalue ev:event="xforms-submit-error" ref="instance('instResult')" value="'TEST PASSED'"></xf:setvalue>
			</xf:submission>
		</xf:model>

		<xf:submit submission="sbm" id="test">
			<xf:label>Test</xf:label>
		</xf:submit>

		<xf:output ref="instance('instResult')" id="result">
			<xf:label>Result:</xf:label>
		</xf:output>
	</body>
</html>
