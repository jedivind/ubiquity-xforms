<?xml version="1.0" encoding="utf-8"?>
<html
 xmlns="http://www.w3.org/1999/xhtml"
 xmlns:atom="http://www.w3.org/2005/Atom"
 xmlns:ev="http://www.w3.org/2001/xml-events"
 xmlns:fp="urn:formsplayer.com"
 xmlns:xf="http://www.w3.org/2002/xforms"
>
  <head>
    <script type="text/javascript" src="../../../../ubiquity-loader.js" >/**/</script>
    <title>XForms 1.0 Output: Evaluation Context</title>
    <style type="text/css">
      xf\:output { display: block; }
    </style>
  </head>
  <body>
    <xf:model id="mdl">
      <xf:instance id="inst-results">
        <instanceData xmlns="" status="not started">
          <t1 label="Test 1:" ></t1>
        </instanceData>
      </xf:instance>

      <!--
        Chain the tests together. We do this because we might at
        some point want to allow each test to be run from a trigger,
        or one test might use the results of a prior test.
      -->
      <xf:dispatch target="mdl" name="my-complete" ev:event="xforms-ready" ></xf:dispatch>

      <!--
        Indicate that we're done.
      -->
      <xf:action ev:event="my-complete">
        <xf:setvalue ref="@status">complete</xf:setvalue>
      </xf:action>
    </xf:model>
    <!--
      Ensure that the evaluation context is preserved even with @value.
    -->
    <xf:group ref="t1/@label">
      <xf:output id="t1" value="concat('o', 'k')">
        <xf:label ref="."></xf:label>
      </xf:output>
    </xf:group>
    <xf:output id="status" ref="@status">
      <xf:label>Status:</xf:label>
    </xf:output>    
  </body>
</html>