<!--
  * Copyright (C) 2008 Backplane Ltd.
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *  http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
-->
<?xml version="1.0" encoding="iso-8859-1"?>
<html
 xmlns="http://www.w3.org/1999/xhtml"
 xmlns:xf="http://www.w3.org/2002/xforms"
>
	<head>
		<title>Using the XForms 1.1 digest function</title>
		<script type="text/javascript" src="../../../../ubiquity-loader.js" >/**/</script>
		<style type="text/css">
			xf\:output { display: block; }
		</style>
	</head>
	<body>
		<xf:model>
			<xf:instance>
				<instanceData xmlns="">
					<function_input>abc</function_input>
					<node id="md5-hex" ></node>
					<node id="md5-b64" ></node>
					<node id="sha1-hex" ></node>
					<node id="sha1-b64" ></node>
					<node id="sha256-hex" ></node>
					<node id="sha256-b64" ></node>
					<node id="sha385-hex" ></node>
					<node id="sha385-b64" ></node>
					<node id="sha512-hex" ></node>
					<node id="sha512-b64" ></node>
				</instanceData>
			</xf:instance>
			
			<xf:bind nodeset="/instanceData">
				<xf:bind nodeset="node[@id = 'md5-hex']"	calculate="digest(../function_input, 'md5', 'hex')" ></xf:bind>
				<xf:bind nodeset="node[@id = 'md5-b64']"	calculate="digest(../function_input, 'md5', 'base64')" ></xf:bind>
				<xf:bind nodeset="node[@id = 'sha1-hex']"	calculate="digest(../function_input, 'sha1', 'hex')" ></xf:bind>
				<xf:bind nodeset="node[@id = 'sha1-b64']"	calculate="digest(../function_input, 'sha1', 'base64')" ></xf:bind>
				<xf:bind nodeset="node[@id = 'sha256-hex']"	calculate="digest(../function_input, 'sha256', 'hex')" ></xf:bind>
				<xf:bind nodeset="node[@id = 'sha256-b64']"	calculate="digest(../function_input, 'sha256', 'base64')" ></xf:bind>
				<xf:bind nodeset="node[@id = 'sha384-hex']"	calculate="digest(../function_input, 'sha384', 'hex')" ></xf:bind>
				<xf:bind nodeset="node[@id = 'sha384-b64']"	calculate="digest(../function_input, 'sha384', 'base64')" ></xf:bind>
				<xf:bind nodeset="node[@id = 'sha512-hex']"	calculate="digest(../function_input, 'sha512', 'hex')" ></xf:bind> 
				<xf:bind nodeset="node[@id = 'sha512-b64']"	calculate="digest(../function_input, 'sha512', 'base64')" ></xf:bind>
			</xf:bind>
		</xf:model>
		
		<xf:output id="ready" value="concat('rea', 'dy')" style="display: none;" ></xf:output>

		<a href="http://www.w3.org/TR/xforms11/#fn-digest">http://www.w3.org/TR/xforms11/#fn-digest</a>

		<h1>Literal values</h1>

		<!-- 
			MD5 hex. 
			Should return: 900150983cd24fb0d6963f7d28e17f72 
			
			HashCalc: http://www.coredownload.com/download-HashCalc-8599.html
		-->
		<xf:output id="t2a" value="digest('abc', 'md5', 'hex')">
			<xf:label>Test 2a:</xf:label>
		</xf:output>
		
		<!-- 
			MD5 base 64. 
			Should return: 
		-->
		<xf:output id="t2a1" value="digest('abc', 'md5', 'base64')">
			<xf:label>Test 2a1:</xf:label>
		</xf:output>
		
		<!-- 
			SHA1 hex. 
			Should return a9993e364706816aba3e25717850c26c9cd0d89d
		-->
		<xf:output id="t2b" value="digest('abc', 'sha1', 'hex')">
			<xf:label>Test 2b:</xf:label>
		</xf:output>
		
		<!-- 
			SHA1 base64.  
			Should return: 
		-->
		<xf:output id="t2b1" value="digest('abc', 'sha1', 'base64')">
			<xf:label>Test 2b1:</xf:label>
		</xf:output>
		
		<!-- 
			SHA256 hex. 
			Should return ba7816bf8f01cfea414140de5dae2223b00361a396177a9cb410ff61f20015ad
		-->
		<xf:output id="t2c" value="digest('abc', 'sha256', 'hex')">
			<xf:label>Test 2c:</xf:label>
		</xf:output>
		
		<!-- 
			SHA256 base64. 
			Should return: 
		-->
		<xf:output id="t2c1" value="digest('abc', 'sha256', 'base64')">
			<xf:label>Test 2c1:</xf:label>
		</xf:output>
		
		<!-- 
			SHA384 hex. 
			Should return cb00753f45a35e8bb5a03d699ac65007272c32ab0eded1631a8b605a43ff5bed8086072ba1e7cc2358baeca134c825a7
		-->
		<xf:output id="t2d" value="digest('abc', 'sha384', 'hex')">
			<xf:label>Test 2d:</xf:label>
		</xf:output>
		
		<!-- 
			SHA384 base64. 
			Should return: 
		-->
		<xf:output id="t2d1" value="digest('abc', 'sha384', 'base64')">
			<xf:label>Test 2d1:</xf:label>
		</xf:output>
		
		<!-- 
			SHA512 hex. 
			Should return ddaf35a193617abacc417349ae20413112e6fa4e89a97ea20a9eeee64b55d39a2192992a274fc1a836ba3c23a3feebbd454d4423643ce80e2a9ac94fa54ca49f
		-->
		<xf:output id="t2e" value="digest('abc', 'sha512', 'hex')">
			<xf:label>Test 2e:</xf:label>
		</xf:output>
		
		<!-- 
			SHA512 base64. 
			Should return: 
		-->
		<xf:output id="t2e1" value="digest('abc', 'sha512', 'base64')">
			<xf:label>Test 2e1:</xf:label>
		</xf:output>
		
		<h1>Referenced values</h1>
		
		<!-- MD5 hex. -->
		<xf:output id="t2f" ref="/instanceData/node[@id = 'md5-hex']">
			<xf:label>Test 2f:</xf:label>
		</xf:output>
		
		<!-- MD5 base64 -->
		<xf:output id="t2f1" ref="/instanceData/node[@id = 'md5-b64']">
			<xf:label>Test 2f1:</xf:label>
		</xf:output>
		
		<!-- SHA1 hex. -->
		<xf:output id="t2g" ref="/instanceData/node[@id = 'sha1-hex']">
			<xf:label>Test 2g:</xf:label>
		</xf:output>
		
		<!-- SHA1 base64. -->
		<xf:output id="t2g1" ref="/instanceData/node[@id = 'sha1-b64']">
			<xf:label>Test 2g1:</xf:label>
		</xf:output>
		
		<!-- SHA256 hex. -->
		<xf:output id="t2h" ref="/instanceData/node[@id = 'sha256-hex']">
			<xf:label>Test 2h:</xf:label>
		</xf:output>
		
		<!-- SHA256 base64. -->
		<xf:output id="t2h1" ref="/instanceData/node[@id = 'sha256-b64']">
			<xf:label>Test 2h1:</xf:label>
		</xf:output>
		
		<!-- SHA384 hex. -->
		<xf:output id="t2i" ref="/instanceData/node[@id = 'sha384-hex']">
			<xf:label>Test 2i:</xf:label>
		</xf:output>
		
		<!-- SHA384 base64. -->
		<xf:output id="t2i1" ref="/instanceData/node[@id = 'sha384-b64']">
			<xf:label>Test 2i1:</xf:label>
		</xf:output>
		
		<!-- SHA512 hex. -->
		<xf:output id="t2j" ref="/instanceData/node[@id = 'sha512-hex']">
			<xf:label>Test 2j:</xf:label>
		</xf:output>
		
		<!-- SHA512 base64. -->
		<xf:output id="t2j1" ref="/instanceData/node[@id = 'sha512-b64']">
			<xf:label>Test 2j1:</xf:label>
		</xf:output>
	</body>
</html>