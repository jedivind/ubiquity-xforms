<!--
  * Copyright (C) 2008 Backplane Ltd.
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *  http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xf="http://www.w3.org/2002/xforms" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:js="http://www.formsplayer.com/inlineScript">
	<head>
		<title>
			trigger
		</title>

		<script type="text/javascript" src="../../../../ubiquity-loader.js" >/**/</script>

		<script type="text/javascript">
			function OnTriggerActivate(node)
			{
				return node;
			}
		</script>

		<style type="text/css">
			li
			{
				margin: 2px;
				padding: 2px;
				border: 2px solid black;
			}

			p
			{
				padding: 0px;
				margin: 0px;
			}

			#output-status
			{
				float: right;
				color: gray;
			}
		</style>
	</head>

	<body>
		<xf:model id="mdl">
			<xf:instance id="inst">
				<inst xmlns="">
					<status>Loading...</status>
					<a>0</a>
					<b>0</b>
					<c>0</c>
				</inst>
			</xf:instance>

			<xf:bind nodeset="instance('inst')">
				<xf:bind id="status" nodeset="status" ></xf:bind>
				<xf:bind id="a" nodeset="a" ></xf:bind>
				<xf:bind id="b" nodeset="b" ></xf:bind>
				<xf:bind id="c" nodeset="c" ></xf:bind>
			</xf:bind>

			<xf:action ev:event="xforms-ready">
				<xf:setvalue bind="status" value="'Ready'" ></xf:setvalue>
			</xf:action>
		</xf:model>
		
		<xf:output id="output-status" bind="status" ></xf:output>

		<h1>
			trigger
		</h1>

		<ol>
			<li>
				<p>
					Each time this trigger is activated, the count value should be incremented by one.
				</p>

				<xf:trigger id="trigger-DOMActivate-counter">
					<xf:label id="label-trigger-DOMActivate-counter">
						trigger
					</xf:label>

					<xf:action ev:event="DOMActivate">
						<xf:setvalue bind="a" value="number(.) + 1" ></xf:setvalue>
					</xf:action>
				</xf:trigger>

				<xf:output id="output-DOMActivate-counter" bind="a">
					<xf:label>
						Count:
					</xf:label>
				</xf:output>
			</li>

			<li>
				<p>
					Each time this trigger is activated, the count value should be incremented by one.
				</p>

				<xf:trigger id="trigger-DOMActivate-counter-via-script">
					<xf:label id="label-trigger-DOMActivate-counter-via-script">
						trigger
					</xf:label>

					<xf:action ev:event="DOMActivate">
						<xf:setvalue ref="js:OnTriggerActivate(instance('inst')/b)" value="number(.) + 1" ></xf:setvalue>
					</xf:action>
				</xf:trigger>

				<xf:output id="output-DOMActivate-counter-via-script" bind="b">
					<xf:label>
						Count:
					</xf:label>
				</xf:output>
			</li>

			<li>
				<p>
					Each time this minimal trigger is activated, the count value should be incremented by one.
				</p>

				<xf:trigger id="trigger-minimal-DOMActivate-counter" appearance="minimal">
					<xf:label id="label-minimal-DOMActivate-counter">
						trigger
					</xf:label>

					<xf:action ev:event="DOMActivate">
						<xf:setvalue bind="c" value="number(.) + 1" ></xf:setvalue>
					</xf:action>
				</xf:trigger>

				<xf:output id="output-minimal-DOMActivate-counter" bind="c">
					<xf:label>
						Count:
					</xf:label>
				</xf:output>
			</li>
		</ol>
	</body>
</html>
