<!--
  * Copyright (C) 2008 Backplane Ltd.
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *  http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
-->
<?xml version="1.0" encoding="iso-8859-1"?>
<html
 xmlns="http://www.w3.org/1999/xhtml"
 xmlns:xf="http://www.w3.org/2002/xforms"
>
	<head>
		<title>Using the XForms 1.1 encode function</title>
		<script type="text/javascript" src="../../../../src/ubiquity-loader.js" >/**/</script>
		<style type="text/css">
			xf\:output { display: block; }
		</style>
	</head>
	<body>
		<xf:model>
			<xf:instance>
				<instanceData xmlns="">
					<number id="enc-default" ></number>
					<number id="enc-hex" ></number>
					<number id="enc-b64" ></number>
					<number id="enc-ERR" ></number>
				</instanceData>
			</xf:instance>
			
			<xf:bind nodeset="/instanceData">
				<xf:bind nodeset="number[@id = 'enc-default']"	calculate="encode('abc')" ></xf:bind>
				<xf:bind nodeset="number[@id = 'enc-hex']" 		calculate="encode('abc', 'hex')" ></xf:bind>
				<xf:bind nodeset="number[@id = 'enc-b64']" 		calculate="encode('abc', 'base64')" ></xf:bind>
				<xf:bind nodeset="number[@id = 'enc-ERR']" 		calculate="encode('abc', 'NON_EXISTENT_ENCODING')" ></xf:bind>
			</xf:bind>
		</xf:model>
		
		<xf:output id="ready" value="concat('rea', 'dy')" style="display: none;" ></xf:output>

		<a href="http://www.w3.org/TR/xforms11/#fn-encode">http://www.w3.org/TR/xforms11/#fn-encode</a>

		<!-- 
			
			xxx: Unsure on how to automate the excpetion test
			
		-->

		<h1>Literal values</h1>

		<!-- default (base64) -->
		<xf:output id="t2a" value="encode('abc')">
			<xf:label>Test 2a:</xf:label>
		</xf:output>

		<!-- hex encoding -->
		<xf:output id="t2b" value="encode('abc', 'hex')">
			<xf:label>Test 2b:</xf:label>
		</xf:output >
		
		<!-- base64 encoding -->
		<xf:output id="t2c" value="encode('abc', 'base64')">
			<xf:label>Test 2c:</xf:label>
		</xf:output>
		
		<!-- should throw exception -->
		<!-- xf:output id="tErr1" value="encode('abc', 'NON_EXISTENT_ENCODING')">
			<xf:label>Test tErr1:</xf:label>
		</xf:output -->
		
		<h1>Referenced values</h1>
		
		<!-- default (base64) -->
		<xf:output id="t2d" ref="/instanceData/number[@id = 'enc-default']">
			<xf:label>Test 2d:</xf:label>
		</xf:output>
		
		<!-- hex encoding -->
		<xf:output id="t2e" ref="/instanceData/number[@id = 'enc-hex']">
			<xf:label>Test 2e:</xf:label>
		</xf:output>
		
		<!-- base64 encoding -->
		<xf:output id="t2f" ref="/instanceData/number[@id = 'enc-b64']">
			<xf:label>Test 2f:</xf:label>
		</xf:output>
		
		<!-- should throw exception -->
		<!-- xf:output id="tErr2" ref="/instanceData/number[@id = 'enc-ERR']">
			<xf:label>Test tErr2:</xf:label>
		</xf:output -->
	</body>
</html>