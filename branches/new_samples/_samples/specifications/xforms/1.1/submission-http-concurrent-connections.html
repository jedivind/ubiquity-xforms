<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:xf="http://www.w3.org/2002/xforms"
	xmlns:ev="http://www.w3.org/2001/xml-events"
	xmlns:xs="http://www.w3.org/2001/XMLSchema"
>
	<head>
		<title>Submission using GET</title>
		<script type="text/javascript" src="../../../../ubiquity-loader.js" >/**/</script>
		<style type="text/css">
			xf\:output { display: block; }
		</style>
	</head>
	<body>
		<xf:model id="m">
			<!--
				The first instance manages the data for the Flickr
				query.
			-->
			<xf:instance>
				<instanceData xmlns="">
					<method>flickr.photos.search</method>
					<api_key>68149024a667e0be3c63708f002ffe1e</api_key>
					<tags>building</tags>
					<per_page>12</per_page>
					<dummy ></dummy>
				</instanceData>
			</xf:instance>

			<!--
				We use this instance to store the results of the request.
			-->
			<xf:instance id="inst-rs">
				<dummy xmlns="" ></dummy>
			</xf:instance>

			<!--
				We use this instance to store other data.
			-->
			<xf:instance id="inst-control">
				<instanceData xmlns="">
					<t1 ></t1>
					<t2 ></t2>
					<t3 ></t3>
					<t4 ></t4>
					<t5 ></t5>
					<t6 ></t6>
				</instanceData>
			</xf:instance>

			<xf:instance src="http://www.flickr.com/services/rest/?method=flickr.photos.search&amp;api_key=68149024a667e0be3c63708f002ffe1e&amp;tags=london&amp;per_page=12&amp;test=2" ></xf:instance>
			<xf:instance src="http://www.flickr.com/services/rest/?method=flickr.photos.search&amp;api_key=68149024a667e0be3c63708f002ffe1e&amp;tags=brighton&amp;per_page=12&amp;test=2" ></xf:instance>
			<xf:instance src="http://www.flickr.com/services/rest/?method=flickr.photos.search&amp;api_key=68149024a667e0be3c63708f002ffe1e&amp;tags=manchester&amp;per_page=12&amp;test=2" ></xf:instance>
			<xf:instance src="http://www.flickr.com/services/rest/?method=flickr.photos.search&amp;api_key=68149024a667e0be3c63708f002ffe1e&amp;tags=chicago&amp;per_page=12&amp;test=2" ></xf:instance>
			<xf:instance src="http://www.flickr.com/services/rest/?method=flickr.photos.search&amp;api_key=68149024a667e0be3c63708f002ffe1e&amp;tags=washington&amp;per_page=12&amp;test=2" ></xf:instance>
			<xf:instance src="http://www.flickr.com/services/rest/?method=flickr.photos.search&amp;api_key=68149024a667e0be3c63708f002ffe1e&amp;tags=colorful&amp;per_page=12&amp;test=2" ></xf:instance>

			<!--
				Get some Flickr images.
			-->
			<xf:submission id="sub1"
				method="get" action="http://www.flickr.com/services/rest/"
				separator="&amp;"
				replace="instance" instance="inst-rs"
				mode="asynchronous"
			>
				<xf:setvalue ref="dummy" value="concat('1', now())" ev:event="xforms-submit" ></xf:setvalue>
			</xf:submission>

			<xf:submission id="sub2"
				method="get" action="http://www.flickr.com/services/rest/"
				separator="&amp;"
				replace="instance" instance="inst-rs"
				mode="asynchronous"
			>
				<xf:setvalue ref="dummy" value="concat('2', now())" ev:event="xforms-submit" ></xf:setvalue>
			</xf:submission>
			
			<xf:submission id="sub3"
				method="get" action="http://www.flickr.com/services/rest/"
				separator="&amp;"
				replace="instance" instance="inst-rs"
				mode="asynchronous"
			>
				<xf:setvalue ref="dummy" value="concat('3', now())" ev:event="xforms-submit" ></xf:setvalue>
			</xf:submission>
			
			<xf:submission id="sub4"
				method="get" action="http://www.flickr.com/services/rest/"
				separator="&amp;"
				replace="instance" instance="inst-rs"
				mode="asynchronous"
			>
				<xf:setvalue ref="dummy" value="concat('4', now())" ev:event="xforms-submit" ></xf:setvalue>
			</xf:submission>
			
			<xf:submission id="sub5"
				method="get" action="http://www.flickr.com/services/rest/"
				separator="&amp;"
				replace="instance" instance="inst-rs"
				mode="asynchronous"
			>
				<xf:setvalue ref="dummy" value="concat('5', now())" ev:event="xforms-submit" ></xf:setvalue>
			</xf:submission>
			
			<xf:submission id="sub6"
				method="get" action="http://www.flickr.com/services/rest/"
				separator="&amp;"
				replace="instance" instance="inst-rs"
				mode="asynchronous"
			>
				<xf:setvalue ref="dummy" value="concat('6', now())" ev:event="xforms-submit" ></xf:setvalue>
			</xf:submission>
			
			<xf:action ev:event="t1">
				<xf:setvalue ref="tags" value="'london'" ></xf:setvalue>
				<xf:setvalue ref="instance('inst-control')/t1" value="'submit'" ></xf:setvalue>
				<xf:setvalue ref="dummy" value="now()" ></xf:setvalue>
				<xf:send submission="sub1" ></xf:send>
				<xf:dispatch name="t1-complete" target="m" ></xf:dispatch>
			</xf:action>

			<xf:action ev:event="t2">
				<xf:setvalue ref="tags" value="'brighton'" ></xf:setvalue>
				<xf:setvalue ref="instance('inst-control')/t2" value="'submit'" ></xf:setvalue>
				<xf:setvalue ref="dummy" value="now()" ></xf:setvalue>
				<xf:send submission="sub2" ></xf:send>
				<xf:dispatch name="t2-complete" target="m" ></xf:dispatch>
			</xf:action>

			<xf:action ev:event="t3">
				<xf:setvalue ref="tags" value="'manchester'" ></xf:setvalue>
				<xf:setvalue ref="instance('inst-control')/t3" value="'submit'" ></xf:setvalue>
				<xf:setvalue ref="dummy" value="now()" ></xf:setvalue>
				<xf:send submission="sub3" ></xf:send>
				<xf:dispatch name="t3-complete" target="m" ></xf:dispatch>
			</xf:action>

			<xf:action ev:event="t4">
				<xf:setvalue ref="tags" value="'chicago'" ></xf:setvalue>
				<xf:setvalue ref="instance('inst-control')/t4" value="'submit'" ></xf:setvalue>
				<xf:setvalue ref="dummy" value="now()" ></xf:setvalue>
				<xf:send submission="sub4" ></xf:send>
				<xf:dispatch name="t4-complete" target="m" ></xf:dispatch>
			</xf:action>

			<xf:action ev:event="t5">
				<xf:setvalue ref="tags" value="'washington'" ></xf:setvalue>
				<xf:setvalue ref="instance('inst-control')/t5" value="'submit'" ></xf:setvalue>
				<xf:setvalue ref="dummy" value="now()" ></xf:setvalue>
				<xf:send submission="sub5" ></xf:send>
				<xf:dispatch name="t5-complete" target="m" ></xf:dispatch>
			</xf:action>
			
			<xf:action ev:event="t6">
				<xf:setvalue ref="tags" value="'colorful'" ></xf:setvalue>
				<xf:setvalue ref="instance('inst-control')/t6" value="'submit'" ></xf:setvalue>
				<xf:setvalue ref="dummy" value="now()" ></xf:setvalue>
				<xf:send submission="sub6" ></xf:send>
				<xf:dispatch name="t6-complete" target="m" ></xf:dispatch>
			</xf:action>

			<!--
				Chain the tests together
			-->
			<xf:send submission="sub1" ev:event="xforms-ready" ></xf:send>
			<xf:send submission="sub2" ev:event="xforms-ready" ></xf:send>
			<xf:send submission="sub3" ev:event="xforms-ready" ></xf:send>
			<xf:send submission="sub4" ev:event="xforms-ready" ></xf:send>
			<xf:send submission="sub5" ev:event="xforms-ready" ></xf:send>
			<xf:send submission="sub6" ev:event="xforms-ready" ></xf:send>
			<xf:dispatch name="t1" target="m" ev:event="xforms-ready" ></xf:dispatch>
			<xf:dispatch name="t2" target="m" ev:event="xforms-ready" ></xf:dispatch>
			<xf:dispatch name="t3" target="m" ev:event="xforms-ready" ></xf:dispatch>
			<xf:dispatch name="t4" target="m" ev:event="xforms-ready" ></xf:dispatch>
			<xf:dispatch name="t5" target="m" ev:event="xforms-ready" ></xf:dispatch>
			<xf:dispatch name="t6" target="m" ev:event="xforms-ready" ></xf:dispatch>
		</xf:model>
		<xf:output id="ready" value="concat('rea', 'dy')" ></xf:output>
		<xf:group ref="instance('inst-control')">
			<xf:output id="t1" ref="t1">
				<xf:label>Test 1:</xf:label>
			</xf:output>
			<xf:output id="t2" ref="t2">
				<xf:label>Test 2:</xf:label>
			</xf:output>
			<xf:output id="t3" ref="t3">
				<xf:label>Test 3:</xf:label>
			</xf:output>
			<xf:output id="t4" ref="t4">
				<xf:label>Test 4:</xf:label>
			</xf:output>
			<xf:output id="t5" ref="t5">
				<xf:label>Test 5:</xf:label>
			</xf:output>
			<xf:output id="t6" ref="t6">
				<xf:label>Test 6:</xf:label>
			</xf:output>
		</xf:group>
	</body>
</html>
