<?xml version="1.0" encoding="utf-8" ?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xf="http://www.w3.org/2002/xforms">
	<head>
		<title>Using xf:output</title>
		<script type="text/javascript" src="../../../../ubiquity-loader.js" >/**/</script>
		<link rel="stylesheet" href="../style/sample.css" type="text/css" />
		<style type="text/css">
			xf\:output { display: block; }
		</style>
	</head>
	<body>
		<xf:model id="m0">
			<xf:instance id="i0">
				<instanceData xmlns="">
					<a>FAIL</a>
					<b>FAIL</b>
					<t0>t0</t0>
					<t1>t1</t1>
					<t2>t2</t2>
					<t3>t3<a>FAIL</a><b>OK</b></t3>
					<t4>t4<a>FAIL</a><b>FAIL</b></t4>
					<t5>t5<a>OK</a></t5>
				</instanceData>
			</xf:instance>
			<xf:bind id="b-t2" nodeset="t2" ></xf:bind>
		</xf:model>
		<xf:model id="m1">
			<xf:instance id="i1">
				<instanceData xmlns="">
					<a>OK</a>
					<b>OK</b>
					<t0>FAIL</t0>
					<t1>FAIL</t1>
					<t2>FAIL</t2>
					<t3>t3<a>OK</a><b>FAIL</b></t3>
					<t4>t4<a>FAIL</a></t4>
				</instanceData>
			</xf:instance>
		</xf:model>
		<xf:output id="ready" value="concat('rea', 'dy')" ></xf:output>
		<p>This test relies on output working correctly</p>
		<h2>Testing that group sets context within the default model</h2>
		<xf:group ref="t0">
			<xf:output id="t0" ref=".">
				<xf:label>t0=</xf:label>
			</xf:output>
		</xf:group>
		
		<xf:group ref="t1">
			<xf:output id="t1" value=".">
				<xf:label>t1=</xf:label>
			</xf:output>
		</xf:group>

		<h2>Testing that group sets context using bind</h2>
		<xf:group bind="b-t2">
			<xf:output id="t2" ref=".">
				<xf:label>t2=</xf:label>
			</xf:output>
		</xf:group>

		<h2>Testing that group can nest</h2>
		<xf:group ref="t3">
			<xf:group ref="b">
				<xf:output id="t3" ref=".">
					<xf:label>OK=</xf:label>
				</xf:output>
			</xf:group>
		</xf:group>

		<h2>Testing that context is ignored where nested item specifies different model.</h2>
		<xf:group ref="t4">
			<xf:group ref="a" model="m1">
				<xf:output id="t4" ref=".">
					<xf:label>OK=</xf:label>
				</xf:output>
			</xf:group>
		</xf:group>
		<h2>
			Testing that context is obeyed where nested item explicitly specifies same  model.
		</h2>
		<xf:group ref="t5" model="m0">
			<xf:group ref="a" model="m0">
				<xf:output id="t5" ref=".">
					<xf:label>OK=</xf:label>
				</xf:output>
			</xf:group>
		</xf:group>
	</body>
</html>
