<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <script src="../../ubiquity-simple.js" ></script>
   <script src="../../ubiquity-loader.js" type="text/javascript">/**/</script>
</head>
<body>

<form name="datarecord" impl="xforms-simple" method="post"
      action="http://xformstest.org/cgi-bin/echo.sh"  >
   <label>Loan Form</label>
   <label for="startdate" >Agreement Date:</label>
   <input name="startdate" type="date" default="08-08-2008" />
   <br/>
   <group name="borrower">
     <label>Borrower</label>
     <label for="name">Name:</label>
     <input id="name" name="name" type="string" default="Joe Q. Public" 
            constraint="string-length(.) > 0" />
     <br/>
     <label for="addr">Address:</label>
     <input id="addr" name="addr" type="string" default="123 Main St. Tinyville" 
            constraint="string-length(.) > 0" />
     <br/>     
   </group>
   <label for="principal">Principal</label>
   <input name="principal" type="double" default="10000" 
          constraint=". &gt;= 1000 and . &lt;= 100000" />
   <br/>
   <label for="currency">Choose currency</label>
   <select name="currency" >
     <option value="USD">US Dollars</option>
     <option value="CDN">Canadian Dollars</option>
     <option value="EUR">Euros</option>
   </select>
   <br/>
   <label for="duration">Duration of Loan in Months:</label>
   <input name="duration" type="integer" default="12" 
          constraint=". &gt; 0 and . &lt;= 84" />
   <label for="interestrate">Yearly Interest Rate:</label>
   <input name="interestrate" type="double" default="5" 
          constraint=". &gt;= 5 and . &lt;= 60" />
   <br/>
   <label for="submit">Apply Loan</label>
   <submit id="submit" />
</form>
<hidden name="rate" calculate="interestrate div 1200.0" />
<output name="monthly-payment" 
        calculate="if(rate &gt; 0, principal * rate div (1.0 - power(1.0 + rate, -duration)), principal div duration" 
        relevant="principal > 0 and duration > 0" />
<output name="totalpayout" calculate="monthly-Payment * duration" 
        relevant="monthly-payment &gt; 0 and duration &gt; 0" />
</body>
</html>