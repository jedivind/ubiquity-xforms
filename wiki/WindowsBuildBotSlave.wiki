#summary Notes about creating a BuildBot slave on Windows.
#labels Phase-QA

= Introduction =

It's fairly straightforward to create a !BuildBot slave that will connect to the Ubiquity XForms !BuildBot master. This page captures notes on the process, and will apply to any !BuildBot slave. If you specifically want to set up a slave that talks to the Ubiquity XForms master then you'll need to obtain a slave name, and let us know the user-name and password. You can do this by contacting [mailto:mark.birbeck@webBackplane.com Mark Birbeck].

= Details =

== Install Python ==

The latest versions of Python are on the [http://www.python.org/download/ Python download page]. The Windows installers for version 2.x are recommended over version 3 installers. At the time of writing the latest was version 2.6.1.

Add the Python (`c:\Python26\`) and Python scripts (`c:\Python26\Scripts\`) directories to `PATH` in the environment variables.

Also add `.PY` to `PATHEXT`.

Open a new command prompt (an existing one won't have the new entries in the environment variables) and verify that you can run Python:
{{{
python --version
}}}

You should see version 2.6.1, but if you don't, type `set` and ensure that the changes to `PATH` and `PATHEXT` are showing up.

== Install Twisted ==

The latest versions of Twisted are on the [http://twistedmatrix.com/trac/ Twisted Matrix Labs trac page]. Choose a version of Twisted that matches the version of Python installed in the previous step, which in this case is Twisted 8.2.0 for Python 2.6.

Open a new command prompt and verify that you can run Twisted:
{{{
trial --version
}}}

You should see version 8.2.0.

== Install Python Extensions for Windows ==

The latest versions of !PyWin32 are on the [http://sourceforge.net/project/platformdownload.php?group_id=78018&sel_platform=3212 pywin32 Sourceforge.net page]. Choose a version that matches the version of Python installed in the first step, which in this case is !PyWin32 build 212 for Python 2.6.

== Install !BuildBot ==

ASCEND has a [http://ascendwiki.cheme.cmu.edu/images/0/0f/Buildbot-0.7.6.win32.exe Windows installer] that installs !BuildBot. It's only version 0.7.6 but it seems to work ok.

Once !BuildBot is installed, the `buildbot.bat` file in the Python scripts directory will need to be edited to point to installed version of Python. Assuming that Python 2.6 is being used, then the file will be found here:
{{{
c:\Python26\scripts\buildbot.bat
}}}
and will contain this:
{{{
@python C:\Python23\Scripts\buildbot %*
}}}
which should be changed to:
{{{
@python C:\Python26\Scripts\buildbot %*
}}}

== Steps to be added ==

_Unfortunately an error in my wiki syntax on the previous line caused a whole load of steps to be lost. I'll have to add them back later._

== Install SVN ==

The latest versions of SVN for Windows are available from the [http://subversion.tigris.org/servlets/ProjectDocumentList?folderID=91 Tigris.org Windows download page]. Use the latest MSI that contains the basic Win32 binaries (currently 1.5.3).

== Install Apache Ant ==

The latest version of Apache Ant is available from the [http://ant.apache.org/bindownload.cgi Apache Ant binary distribution page]. Download the ZIP file for the latest version, currently 1.7.1, and extract to the root directory. Then rename the directory to `c:\ant`.

Add `c:\ant\bin` as `ANT_HOME` to the environment variables, and then add `%ANT_HOME%` to `PATH`.

Open a new command prompt (an existing one won't have the new entries in the environment variables) and verify that you can run Ant:
{{{
ant -version
}}}
You should see version 1.7.1.

== Launch the slave ==

To launch the slave, type:
{{{
buildbot start full
}}}
in the !BuildBot directory, or change into the `full` directory and type:
{{{
buildbot start .
}}}
After a short wait the list of slaves should include the freshly added slave:
{{{
http://ec2-174-129-107-106.compute-1.amazonaws.com:8080/buildslaves
}}}
If the slave has been added correctly then it should show up in the list with the comment _Slave is currently connected_.

Each slave has its own page on the !BuildBot master, so to check the admin and host information that was added, use the slave's name, as follows:
{{{
http://ec2-174-129-107-106.compute-1.amazonaws.com:8080/builders/full-ie7-test
}}}