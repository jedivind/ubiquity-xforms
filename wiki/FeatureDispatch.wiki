#summary The XForms Dispatch Element
#labels Feature

= Introduction =

Implementation details for the XForms [http://www.w3.org/TR/xforms11/#action-dispatch Dispatch] Element.

== Implementation ==

This element dispatches an XML Event to a specific target element, basically by this code:
FormsProcessor.dispatchEvent(oTarget, oEvt);

@target, @name, @delay are all supported.
@target is the IDREF where the event is dispatched to.
@name is the name of the event being dispatched.
@delay is the time to wait before the event can be dispatched.

If target or name are not defined (by attribute or element), nothing is dispatched.

For now, the @delay support is coded like this:

                                if (UX.isIE) {
					var date = new Date();
					var curDate = null;

					do { curDate = new Date(); }
					while(curDate-date < delay_time);
					
					FormsProcessor.dispatchEvent(oTarget, oEvt);
				}

				else {
					setTimeout(function(a,b) { FormsProcessor.dispatchEvent(a,b); }, delay_time, oTarget, oEvt);
				}

This isn't that good for IE, but it is the only way I can find.  Also, setTimeout doesn't work with extra parameters on IE.

== Stories ==